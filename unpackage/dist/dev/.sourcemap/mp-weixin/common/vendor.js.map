{"version":3,"sources":["webpack:///./node_modules/@dcloudio/uni-mp-weixin/dist/index.js","webpack:///./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js","webpack:///D:/微品匠心/qiketang/wxcomponents/mlvb-live-room/mlvbliveroomcore.js","webpack:///D:/微品匠心/qiketang/wxcomponents/mlvb-live-room/webim_wx.js","webpack:///D:/微品匠心/qiketang/wxcomponents/mlvb-live-room/webim_handler.js","webpack:///D:/微品匠心/qiketang/main/main.js","webpack:///D:/微品匠心/qiketang/main/mainFun.js","webpack:///./node_modules/@dcloudio/vue-cli-plugin-uni/packages/mp-vue/dist/mp.runtime.esm.js","webpack:///(webpack)/buildin/global.js","webpack:///D:/微品匠心/qiketang/common/utils.js"],"names":["_toString","Object","prototype","toString","hasOwnProperty","isFn","fn","isStr","str","isPlainObject","obj","call","hasOwn","key","noop","cached","cache","create","cachedFn","hit","camelizeRE","camelize","replace","_","c","toUpperCase","HOOKS","globalInterceptors","scopedInterceptors","mergeHook","parentVal","childVal","res","concat","Array","isArray","dedupeHooks","hooks","i","length","indexOf","push","removeHook","hook","index","splice","mergeInterceptorHook","interceptor","option","keys","forEach","removeInterceptorHook","addInterceptor","method","removeInterceptor","wrapperHook","data","isPromise","then","queue","promise","Promise","resolve","callback","wrapperOptions","options","name","oldCallback","callbackInterceptor","wrapperReturnValue","returnValue","returnValueHooks","getApiInterceptorHooks","slice","scopedInterceptor","invokeApi","api","params","invoke","promiseInterceptor","catch","SYNC_API_RE","CONTEXT_API_RE","CONTEXT_API_RE_EXC","ASYNC_API","CALLBACK_API_RE","isContextApi","test","isSyncApi","isCallbackApi","handlePromise","err","shouldPromise","finally","constructor","value","reason","promisify","promiseApi","success","fail","complete","reject","assign","EPS","BASE_DEVICE_WIDTH","isIOS","deviceWidth","deviceDPR","checkDeviceWidth","wx","getSystemInfoSync","platform","pixelRatio","windowWidth","upx2px","number","newDeviceWidth","Number","result","Math","floor","interceptors","baseApi","freeze","__proto__","previewImage","args","fromArgs","currentIndex","parseInt","current","isNaN","urls","len","filter","item","indicator","loop","addSafeAreaInsets","safeArea","safeAreaInsets","top","left","right","bottom","windowHeight","protocols","getSystemInfo","todos","canIUses","CALLBACKS","processCallback","methodName","processReturnValue","processArgs","argsOption","keepFromArgs","toArgs","keyOption","console","warn","keepReturnValue","wrapper","protocol","error","arg1","arg2","apply","todoApis","TODOS","createTodoApi","todoApi","errMsg","providers","oauth","share","payment","getProvider","service","provider","extraApi","getEmitter","getUniEmitter","Emitter","Vue","ctx","$on","arguments","$off","$once","$emit","eventApi","MPPage","Page","MPComponent","Component","customizeRE","customize","initTriggerEvent","mpInstance","canIUse","oldTriggerEvent","triggerEvent","event","initHook","oldHook","PAGE_EVENT_HOOKS","initMocks","vm","mocks","$mp","mpType","mock","hasHook","vueOptions","default","extendOptions","super","mixins","find","mixin","initHooks","mpOptions","$vm","__call_hook","initVueComponent","VueComponent","extend","initSlots","vueSlots","$slots","slotName","$scopedSlots","initVueIds","vueIds","split","_$vueId","_$vuePid","initData","context","methods","e","process","VUE_APP_DEBUG","JSON","parse","stringify","__lifecycle_hooks__","PROP_TYPES","String","Boolean","createObserver","observer","newVal","oldVal","initBehaviors","initBehavior","vueBehaviors","behaviors","vueExtends","extends","vueMixins","vueProps","props","behavior","type","Date","properties","initProperties","vueMixin","parsePropType","defaultValue","file","isBehavior","vueId","setData","opts","wrapper$1","mp","stopPropagation","preventDefault","target","detail","markerId","getExtraValue","dataPathsArray","dataPathArray","dataPath","propPath","valuePath","vFor","__get_value","isInteger","vForItem","vForKey","processEventExtra","extra","extraObj","getObjByArray","arr","element","processEventArgs","isCustom","isCustomMPEvent","currentTarget","dataset","comType","__args__","ret","arg","ONCE","CUSTOM","isMatchEventType","eventType","optType","handleEvent","eventOpts","eventOpt","eventsArray","charAt","isOnce","eventArray","handlerCtx","$options","generic","$parent","handler","Error","once","parseBaseApp","initRefs","store","$store","mpHost","beforeCreate","$scope","appOptions","onLaunch","app","globalData","_isMounted","findVmByVueId","vuePid","$children","childVm","parentVm","Behavior","isPage","route","initRelation","defineProperty","get","$refs","components","selectAllComponents","component","ref","forComponents","handleLink","parent","parseApp","createApp","App","parseBaseComponent","vueComponentOptions","multipleSlots","addGlobalClass","componentOptions","__file","lifetimes","attached","propsData","$mount","ready","detached","$destroy","pageLifetimes","show","hide","resize","size","__l","__e","wxsCallMethods","callMethod","parseComponent","hooks$1","parseBasePage","vuePageOptions","pageOptions","onLoad","query","parsePage","createPage","createComponent","canIUseApi","apiName","uni","Proxy","set","uni$1","webim","require","webimhandler","getApp","RoomServiceUrl","heart","requestSeq","requestTask","accountInfo","userID","userName","userAvatar","userSig","sdkAppID","accountType","accountMode","token","roomInfo","roomID","mixedPlayURL","isCreator","pushers","isLoginIM","isJoinGroup","isDestory","hasJoinAnchor","roomStatusCode","onAnchorEnter","onAnchorExit","onRoomDestroy","onRecvRoomTextMsg","onRequestJoinAnchor","onKickoutJoinAnchor","onRecvRoomCustomMsg","onSketchpadData","requestNum","requestJoinCallback","bigAnchorStreamID","bigAnchorWidth","bigAnchorHeight","gTimeoutID","mTimeDiff","request","url","formatParams","header","encodeURIComponent","join","login","log","errCode","random","code","message","round","now","timestamp","loginIM","logout","init","avChatRoomId","selType","SESSION_TYPE","GROUP","selToID","selSess","loginInfo","onGroupSystemNotifys","notify","onRevokeGroupNotify","onConnNotify","resp","ErrorCode","CONNECTION_STATUS","ON","OFF","Log","listeners","msg","onBigGroupMsgNotify","msgs","receiveMsg","datas","newMsgList","onMsgNotify","recvC2CMsg","onGroupInfoChangeNotify","others","sdkLogin","afterLoginIM","afterJoinBigGroup","content","time","h","getHours","m","getMinutes","s","getSeconds","fromAccountNick","contentObj","newContent","cmd","nickName","headPic","mergeAnchors","notifyPusherChange","customMsg","strCustomMsg","sendCustomMsg","text","getAnchors","innerMergerAnchors","enterPushers","leavePushers","ishave","val1","val2","mergeStream","object","sendRoomTextMsg","pusherHeartBeat","setTimeout","proto_pusherHeartBeat","stopPusherHeartBeat","getRoomList","cnt","rooms","getPushURL","pushURL","setListener","createRoom","proto_createRoom","createRoomInfo","roomCreator","destoryRoom","createIMGroupInfo","roomName","createBigGroup","joinAnchor","proto_joinAnchor","enterRoom","proto_enterRoom","userInfo","addAudience","applyJoinBigGroup","clearRequest","abort","exitRoom","leaveRoom","quitBigGroup","delAudience","destroyGroup","quitJoinAnchor","requestJoinAnchor","body","clearTimeout","isTimeout","timeout","sendC2CCustomMsg","acceptJoinAnchor","rejectJoinAnchor","kickoutJoinAnchor","getAccountInfo","retryCount","mergeStreams","val","streamID","getStreamIDByStreamUrl","accelerateURL","width","height","sendStreamMergeRequest","streamUrl","subStr","substring","lastIndexOf","mergeInfo","createMergeInfo","doMergeRequest","mergeParams","merge_code","smallAnchorWidth","smallAnchorHeight","offsetHeight","streamInfoArray","bigAnchorInfo","input_stream_id","layout_params","image_layer","subLocationX","subLocationY","layerIndex","smallAchorInfo","image_width","image_height","location_x","location_y","para","app_id","interface","mix_stream_session_id","output_stream_id","input_stream_list","interfaceObj","interfaceName","reqParam","eventId","setVideoRatio","ratio","toUserID","module","exports","reqSeq","reqNum","msgCache","syncMsgs","cbOk","cbErr","getC2CHistoryMsgs","syncGroupMsgs","sendMsg","setAutoRead","isOn","isResetAll","getProfilePortrait","setProfilePortrait","applyAddFriend","getPendency","deletePendency","responseFriend","getAllFriend","deleteFriend","addBlackList","getBlackList","deleteBlackList","uploadPic","createGroup","applyJoinGroup","handleApplyJoinGroup","deleteApplyJoinGroupPendency","quitGroup","getGroupPublicInfo","getGroupInfo","modifyGroupBaseInfo","getJoinedGroupListHigh","getGroupMemberInfo","addGroupMember","modifyGroupMember","forbidSendMsg","deleteGroupMember","sendCustomGroupNotify","Msg","sess","isSend","seq","fromAccount","subType","MsgStore","sessMap","sessCount","sessByTypeId","id","delSessByTypeId","resetCookieAndSyncFlag","downloadMap","SDK","isAccessFormaEnvironment","SRV_HOST","BROWSER_INFO","lowerBR","SRV_NAME","SRV_NAME_VER","CMD_EVENT_ID_MAP","RECENT_CONTACT_TYPE","MSG_MAX_LENGTH","ACTION_STATUS","ERROR_CODE_CUSTOM","MSG_ELEMENT_TYPE","IMAGE_TYPE","UPLOAD_RES_PKG_FLAG","DOWNLOAD_FILE","DOWNLOAD_FILE_TYPE","UPLOAD_RES_TYPE","VERSION_INFO","LONG_POLLINNG_EVENT_TYPE","C2C_MSG_SUB_TYPE","C2C_EVENT_SUB_TYPE","GROUP_MSG_SUB_TYPE","GROUP_MSG_PRIORITY_TYPE","GROUP_TIP_TYPE","GROUP_TIP_MODIFY_GROUP_INFO_TYPE","GROUP_SYSTEM_TYPE","FRIEND_NOTICE_TYPE","PROFILE_NOTICE_TYPE","TLS_ERROR_CODE","UPLOAD_PIC_BUSSINESS_TYPE","FRIEND_WRITE_MSG_ACTION","ajaxDefaultTimeOut","OK_DELAY_TIME","ERROR_DELAY_TIME","GROUP_TIP_MAX_USER_COUNT","curLongPollingStatus","INIT","longPollingOffCallbackFlag","curLongPollingRetErrorCount","longPollingDefaultTimeOut","longPollingIntervalTime","longPollingTimeOutErrorCode","longPollingKickedErrorCode","LongPollingId","curBigGroupLongPollingRetErrorCount","LONG_POLLING_MAX_RET_ERROR_COUNT","Upload_Retry_Times","Upload_Retry_Max_Times","jsonpRequestId","jsonpLastRspData","jsonpCallback","uploadResultIframeId","ipList","authkey","expireTime","ERROR","appIDAt3rd","identifier","tinyid","identifierNick","a2","contentType","apn","opt","xmlHttpObjSeq","xmlHttpObjMap","curSeq","tempC2CMsgList","tempC2CHistoryMsgList","maxApiReportItemCount","apiReportItems","Resources","emotionDataIndexs","emotions","tool","formatTimeStamp","format","formatTime","date","o","getMonth","getDate","RegExp","$1","getFullYear","substr","k","groupTypeEn2Ch","type_en","type_ch","groupTypeCh2En","groupRoleEn2Ch","role_en","role_ch","groupRoleCh2En","groupMsgFlagEn2Ch","msg_flag_en","msg_flag_ch","groupMsgFlagCh2En","formatText2Html","html","xssFilter","formatHtml2Text","getStrBytes","undefined","total","charCode","charCodeAt","trimStr","validNumber","match","getReturnError","errorInfo","errorCode","FAIL","setCookie","expires","path","domain","exp","setTime","getTime","document","cookie","escape","toGMTString","getCookie","unescape","delCookie","getQueryString","reg","r","location","search","on","setOn","onFlag","getOn","logStr","info","debug","unixtime","d","fromunixtime","t","nextSeq","createRandom","ajaxRequest","meth","req","isLongPolling","dataType","errInfo","ajaxRequestJson","json","isLogin","checkLogin","isNeedCallBack","isAccessFormalEnv","getApiUrl","srvName","srvHost","FORMAL","COMMON","TEST","PIC","APPID","VERSION","getSoundDownUrl","uuid","senderId","soundUrl","BUSSINESS_ID","SOUND","getFileDownUrl","fileName","fileUrl","FILE","getFileDownUrlV2","downFlag","receiverId","busiId","SERVER_VERSION","proto_applyDownload","error_code","response_info","onAppliedDownloadUrl","maps","clearXmlHttpObjMap","xmlHttpObj","clearSdk","MsgManager","clear","_login","isLogOn","proto_login","headurl","mmInitResp","initBrowserInfo","reportApiQuality","reportTime","uniqKey","msgCmdErrorCode","rptEvtItem","loginApiReportItems","loginReportOpt","proto_reportApiQuality","reportOpt","ConnManager","apiCall","OPEN_IM","loginResp","TinyId","A2Key","tag_list","proto_getProfilePortrait","nick","gender","allowType","image","UserProfileItem","j","ProfileItem","Tag","Value","proto_logout","OK","proto_sendMsg","msgInfo","C2C","getSubType","MsgPriority","REDPACKET","LOVEMSG","TIP","elems","elem","msgContent","msgType","TEXT","FACE","IMAGE","ImageInfoArray","UUID","LOCATION","desc","ext","PushInfoBoolean","OfflinePushInfo","PushInfo","MsgBody","proto_longPolling","stopPolling","proto_bigGroupLongPolling","BIG_GROUP_LONG_POLLING","proto_getMsgs","syncFlag","MsgList","SyncFlag","Cookie","proto_c2CMsgReaded","c2CMsgReadedItem","tmpC2CMsgReadedItem","toAccount","lastedMsgTime","C2CMsgReaded","proto_deleteC2CMsg","proto_getC2CHistoryMsgs","reqMsgCount","MaxCnt","Complete","rspMsgCount","msgKey","MsgKey","lastMsgTime","LastMsgTime","netxOptions","Peer_Account","proto_createGroup","Type","Name","member_list","MemberList","GroupId","Owner_Account","Introduction","Notification","MaxMemberCount","ApplyJoinOption","AppDefinedData","FaceUrl","LongPollingKey","resetBigGroupLongPollingInfo","setBigGroupLongPollingOn","setBigGroupLongPollingKey","setBigGroupLongPollingMsgMap","bigGroupLongPolling","proto_createGroupHigh","proto_modifyGroupBaseInfo","proto_applyJoinGroup","ApplyMsg","UserDefinedField","proto_applyJoinBigGroup","BIG_GROUP","JoinedStatus","proto_handleApplyJoinGroupPendency","Applicant_Account","HandleMsg","Authentication","ApprovalMsg","proto_quitGroup","proto_quitBigGroup","proto_searchGroupByName","proto_getGroupPublicInfo","GroupIdList","GroupBasePublicInfoFilter","ErrorInfo","GroupInfo","ActionStatus","proto_getGroupInfo","GroupBaseInfoFilter","MemberInfoFilter","AppDefinedDataFilter_Group","ResponseFilter","AppDefinedDataFilter_GroupMember","proto_getGroupMemberInfo","Offset","Limit","MemberRoleFilter","proto_addGroupMember","Silence","proto_modifyGroupMember","Member_Account","Role","MsgFlag","ShutUpTime","NameCard","AppMemberDefinedData","proto_deleteGroupMember","MemberToDel_Account","Reason","proto_destroyGroup","proto_changeGroupOwner","proto_getJoinedGroupListHigh","GroupType","SelfInfoFilter","proto_getRoleInGroup","User_Account","proto_forbidSendMsg","Members_Account","proto_sendCustomGroupNotify","proto_getGroupMsgs","ReqMsgSeq","ReqMsgNumber","proto_groupMsgReaded","MsgReadedSeq","convertErrorEn2ZhFriend","errorAccount","Fail_Account","Invalid_Account","failCount","ResultItem","To_Account","resultCode","ResultCode","ResultInfo","proto_applyAddFriend","FRIEND","AddFriendItem","newResp","proto_deleteFriend","DeleteType","proto_getPendency","PendencyType","StartTime","MaxLimited","LastSequence","proto_deletePendency","proto_responseFriend","ResponseFriendItem","proto_getAllFriend","TimeStamp","StartIndex","GetCount","LastStandardSequence","TagList","PROFILE","proto_setProfilePortrait","profile","proto_addBlackList","proto_deleteBlackList","proto_getBlackList","proto_getRecentContactList","RECENT_CONTACT","Count","proto_uploadPic","cmdName","APP_VERSION","Seq","Timestamp","Random","File_Str_Md5","File_Size","File_Type","Busi_Id","PkgFlag","Slice_Offset","Slice_Size","Slice_Data","proto_getIpAndAuthkey","IM_OPEN_STAT","proto_getLongPollingId","onConnCallback","callBack","tempErrorInfo","SrcErrorInfo","reqId","cbkey","cbval","script","createElement","loaded","window","src","async","onreadystatechange","htmlFor","onload","readyState","onclick","removeChild","appendChild","Session","icon","_impl","skey","unread","isAutoRead","curMaxMsgSeq","isFinished","msgCount","_impl_addMsg","C2CMsgReadedItem","getSession","getType","getFromAccount","getFromAccountNick","getIsSend","getSeq","getRandom","getElems","addText","addElem","Elem","addFace","face","addImage","addLocation","addFile","addCustom","custom","toHtml","getContent","Text","getText","Face","getIndex","getData","faceUrl","emotion","Location","longitude","latitude","getLatitude","getLongitude","getDesc","Images","imageId","smallImage","getImage","SMALL","bigImage","LARGE","oriImage","ORIGIN","getUrl","getImageId","Image","getSize","getWidth","getHeight","Sound","second","chatType","downUrl","getUUID","getSecond","getSenderId","getDownUrl","ver","File","getName","getDownFlag","fileSize","unitStr","GroupTip","opType","opUserId","groupId","groupName","userIdList","groupInfoList","memberInfoList","groupMemberNum","addGroupInfo","groupInfo","addMemberInfo","memberInfo","getOpType","getOpUserId","getGroupId","getGroupName","getUserIdList","getGroupInfoList","getMemberInfoList","getGroupMemberNum","setGroupMemberNum","maxIndex","JOIN","QUIT","KICK","SET_ADMIN","CANCEL_ADMIN","MODIFY_GROUP_INFO","getValue","FACE_URL","NAME","OWNER","NOTIFICATION","INTRODUCTION","MODIFY_MEMBER_INFO","userId","getUserId","shutupTime","getShutupTime","READED","MemberInfo","Custom","getExt","sessTimeline","visitSess","visitor","checkDupMsg","dup","first_key","second_key","tempMsg","tmpOpt","c2CMsgReaded","LastedMsgTime","addSession","delSession","addMsg","updateTimeline","sort","a","b","onMsgCallback","onGroupInfoChangeCallback","onGroupSystemNotifyCallbacks","onFriendSystemNotifyCallbacks","onProfileSystemNotifyCallbacks","onKickedEventCall","onMsgReadCallback","longPollingOn","isLongPollingRequesting","notifySeq","noticeSeq","onBigGroupMsgCallback","bigGroupLongPollingOn","bigGroupLongPollingStartSeq","bigGroupLongPollingHoldTime","bigGroupLongPollingKey","bigGroupLongPollingMsgMap","getLostGroupMsgCount","myGroupMaxSeqs","groupSystemMsgsCache","setLongPollingOn","getLongPollingOn","resetLongPollingInfo","count","bigGroupLongPollingMsgCount","initIpAndAuthkey","IpList","AuthKey","ExpireTime","initMyGroupMaxSeqs","group_id","curMaxSeq","NextMsgSeq","getLostGroupMsgs","reqMsgSeq","reqMsgNumber","tempOpts","updateMyGroupCurMaxSeq","msgSeq","curMsgSeq","addGroupMsgList","new_group_msgs","p","newGroupMsg","From_Account","handlerGroupMsg","ToGroupId","MsgSeq","handlerOrdinaryAndTipC2cMsgs","groupMsgArray","groupMsgMap","minGroupMsgSeq","maxGroupMsgSeq","groupMsgs","NoticeSeq","Event","min","max","tempCount","handlerOrdinaryAndTipGroupMsgs","handlerGroupTips","groupTips","groupTip","GROUP_TIP","handlerGroupSystemMsgs","groupSystemMsgs","isNeedValidRepeatMsg","groupReportTypeMsg","reportType","ReportType","Operator_Account","isExist","GroupName","MsgTimeStamp","JOIN_GROUP_REQUEST","RemarkInfo","ClientSeq","MsgRandom","JOIN_GROUP_ACCEPT","JOIN_GROUP_REFUSE","DESTORY","CREATE","INVITED_JOIN_GROUP_REQUEST","REVOKE","GroupReadInfoArray","l","handlerFriendSystemNotices","friendSystemNotices","friendNotice","PushType","FRIEND_ADD","FriendAdd_Account","FRIEND_DELETE","FriendDel_Account","PENDENCY_ADD","PendencyAdd","PENDENCY_DELETE","FrienPencydDel_Account","BLACK_LIST_ADD","BlackListAdd_Account","BLACK_LIST_DELETE","BlackListDel_Account","handlerProfileSystemNotices","profileSystemNotices","profileNotice","PROFILE_MODIFY","Profile_Account","ProfileList","handlerGroupSystemMsg","handlerC2cNotifyMsgArray","handlerC2cEventMsg","SubMsgType","ReadC2cMsgNotify","UinPairReadArray","onC2cEventCallbacks","longPolling","doPolling","Timeout","EventArray","NotifySeq","GROUP_COMMON","GroupMsgArray","GroupTips","GROUP_SYSTEM","FRIEND_NOTICE","FriendListMod","PROFILE_NOTICE","ProfileDataMod","C2C_COMMON","C2cMsgArray","C2C_EVENT","C2cNotifyMsgArray","successInfo","updatecLongPollingStatus","msgObjList","NextSeq","HoldTime","Key","RspMsgList","IsPlaceMsg","GROUP_TIP2","errObj","isNeedCallback","RECONNECT","startNextLongPolling","notifyInfo","msgInfos","isSendMsg","headUrl","msgBody","mi","MsgType","MsgContent","Index","Data","tempImg","Size","Width","Height","URL","Second","Download_Flag","Longitude","Latitude","Desc","FileName","FileSize","userAction","ING","Ext","handlerApplyJoinGroupSystemMsgs","IsFinished","isSyncGroupMsgs","isAddMsgFlag","group_name","From_AccountNick","OpType","List_Account","MemberNum","tempIsCallbackFlag","tempNewGroupInfo","msgGroupNewInfo","MsgGroupNewInfo","GroupFaceUrl","tmpNGIFaceUrl","tmpNGIName","tmpNGIOwner","OwnerAccount","GroupNotification","tmpNGINotification","GroupIntroduction","tmpNGIIntroduction","memberInfos","MsgMemberInfo","n","ShutupTime","onC2cEventNotifys","onFriendSystemNotifys","onProfileSystemNotifys","initIpAndAuthkeyResp","FileUploader","fileMd5","getFileMD5","fileReader","FileReader","blobSlice","mozSlice","webkitSlice","chunkSize","chunks","ceil","currentChunk","spark","SparkMD5","binaryStr","bytes","Uint8Array","byteLength","fromCharCode","appendBinary","loadNext","end","start","readAsArrayBuffer","submitUploadFileForm","formId","fileId","iframeNum","iframeName","businessType","form","getElementById","fileObj","iframe","style","display","uploadApiUrl","action","createFormInput","tempInput","RAW_DATA","fileType","checkFrameName","contentWindow","parentNode","submit","uploadFile","file_upload","me","onProgressCallBack","abortButton","abortHandler","step","sliceSize","sliceOffset","reader","onloadstart","onLoadStart","onprogress","onProgress","onabort","onAbort","onerror","onloadend","onLoadEnd","upload","readBlob","onError","DONE","slice_data_base64","pos","BASE64_DATA","succCallback","IsFinish","Next_Offset","tempResp","File_UUID","URL_INFO","errorCallback","blob","readAsDataURL","Emotions","EmotionPicData","EmotionDataIndexs","EmotionPicDataIndex","Tool","offline","logoutAll","groupMsgReaded","createGroupHigh","handleApplyJoinGroupPendency","searchGroupByName","changeGroupOwner","getRoleInGroup","getRecentContactList","uploadFileByBase64","uploadPicByBase64","totalSize","base64Str","setJsonpLastRspData","rspData","getLongPollingId","applyDownload","onDownFile","open","selSessHeadUrl","msgList","textMessageCallback","sketchpadDataCallback","handleGroupMessage","showMsg","newMsg","handlderMsg","sessType","contentHtml","convertMsgtoHtml","resMsg","callbackOptions","err_msg","isSelfSend","ul","li","paneDiv","textDiv","nickNameSpan","contentSpan","showLoveMsgAnimation","convertTextMsgToHtml","convertFaceMsgToHtml","convertImageMsgToHtml","convertSoundMsgToHtml","convertFileMsgToHtml","convertCustomMsgToHtml","convertGroupTipMsgToHtml","convertLocationMsgToHtml","WEB_IM_GROUP_TIP_MAX_USER_COUNT","memberCount","tlsLogin","tlsGetUserSig","UserSig","href","SIGNATURE_EXPIRATION","imageClick","imgObj","imgUrls","imgUrlArr","smallImgUrl","bigImgUrl","oriImgUrl","onChangePlayAudio","curPlayAudio","currentTime","pause","smsPicClick","hideDiscussTool","showDiscussForm","onSendMsg","msgtosend","msgLen","maxLen","msgTime","expr","text_obj","face_obj","tmsg","emotionIndex","restMsgIndex","alert","session","custom_obj","sendGroupLoveMsg","hideDiscussForm","showDiscussTool","hideDiscussEmotion","showDiscussEmotion","initEmotionUL","$","attr","click","selectEmotionImg","append","appendTo","showEmotionDialog","openEmotionFlag","selImg","onApplyJoinGroupRequestNotify","MsgTime","reportTypeCh","showGroupSystemMsg","onApplyJoinGroupAcceptNotify","onApplyJoinGroupRefuseNotify","onKickedGroupNotify","onDestoryGroupNotify","onCreateGroupNotify","onInvitedJoinGroupNotify","onQuitGroupNotify","onSetedGroupAdminNotify","onCanceledGroupAdminNotify","onCustomGroupNotify","newFaceUrl","newName","newOwner","newNotification","newIntroduction","typeCh","msg_content","msg_time","sysMsgStr","main","ImgUrl","openID","SdkAppid","tid","t_order","t_course","t_personal","pageJump","tab","switchTab","navigateTo","redirectTo","navigateBack","num","delta","showToast","title","duration","mask","isPhoneNumber","toLoing","showModal","cancelText","confirmText","confirmColor","confirm","cancel","Get","showLoading","hideLoading","Post","page","ChooseImage","chooseImage","sizeType","sourceType","tempFilePaths","uploadImg","list","filePath","iphonex"],"mappings":"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A;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,iBAAiB;AAClC;AACA;AACA;AACA,sBAAsB,+BAA+B;AACrD,sBAAsB,iBAAiB;AACvC;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,kDAAkD,iCAAiC,EAAE;AACrF,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB,gBAAgB;AACjC;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,cAAc;;AAE3C;;AAEA;AACA;AACA;AACA,6BAA6B,UAAU;;AAEvC;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,gBAAgB;AACjC,kCAAkC;AAClC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,aAAoB;;AAErC;AACA;AACA;AACA,YAAY,aAAoB;;AAEhC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,qBAAqB;AACxC,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,GAAG;AACR;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA,oCAAoC;AACpC;;AAEA,IAAI,IAAqC;AACzC;AACA;AACA,iCAAiC;AACjC,uCAAuC,wBAAwB,EAAE;AACjE,0BAA0B;;AAE1B;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAwB,YAAY;AACpC,kBAAkB,YAAY;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA,wCAAwC,EAAE;AAC1C;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM,KAAqC;AAC3C;AACA;AACA;AACA,+BAA+B,oBAAoB,EAAE;AACrD;AACA,kCAAkC,OAAO;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,0BAA0B,SAAS,qBAAqB;;AAExD;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,2BAA2B;AAC9C;AACA;AACA;AACA,GAAG;AACH,CAAC;;AAED;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,iBAAiB;AAClC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mCAAmC,OAAO;AAC1C;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,OAAO;AACzC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAqC;AAC/C;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,KAAqC;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,KAAqC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM,KAAqC;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,KAAqC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iDAAiD,OAAO;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI,IAAqC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc;AACd;;AAEA;AACA;AACA;;AAEA,iBAAiB,iBAAiB;AAClC;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,KAAqC;AAC3C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,KAAqC;AACzC;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,uBAAuB;AACzD,iCAAiC,sBAAsB;AACvD;AACA,kBAAkB;AAClB,MAAM,IAAqC;AAC3C;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,aAAoB;AACtC;AACA;AACA,mBAAmB;AACnB;AACA;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,OAAO,UAAU,IAAqC;AACtD;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,GAAG,UAAU,IAAqC;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,mBAAmB,mBAAmB;AACtC,+BAA+B;AAC/B;AACA,GAAG;AACH;AACA;AACA;AACA,kBAAkB,YAAY;AAC9B,WAAW;AACX;AACA,GAAG,UAAU,IAAqC;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,IAAqC;AAC3C;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,OAAO;AACrD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA,oCAAoC;AACpC;AACA,qCAAqC;AACrC;AACA;AACA,MAAM,KAAqC;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,IAEQ;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,KAAqC;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,2BAA2B;AAC9C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,6CAA6C,SAAS;AACtD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,6CAA6C,qCAAqC,EAAE;AACpF;;AAEA;AACA;AACA;;AAEA,oCAAoC,yCAAyC,EAAE;AAC/E;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,kBAAkB;AAC3C;AACA;AACA,4BAA4B;AAC5B,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,sDAAsD,EAAE;AACtF;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAM,IAAqC;AAC3C;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,mBAAmB;AACpC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,kBAAkB;AAClC;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;;AAEA;;AAEA;;AAEA,IAAI,IAAqC;AACzC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,iCAAiC;AACnE,cAAc,6BAA6B;AAC3C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,kCAAkC,iCAAiC;AACnE,cAAc,6BAA6B;AAC3C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,yBAAyB;AAC1C,GAAG;AACH;AACA;AACA,iBAAiB,+BAA+B;AAChD;AACA;;AAEA;AACA;;AAEA,IAAI,IAAqC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,uBAAuB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB,mBAAmB;AACxC;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,KAAqC;AAC3C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,IAAqC;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,qBAAqB;AACtC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,qBAAqB;AAClC;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,IAAqC;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO,MAAM,EAEN;AACP,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mBAAmB,iBAAiB;AACpC;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,UAAU,IAAqC;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,OAAO;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kEAAkE;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA,sBAAsB,mBAAmB;AACzC;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,OAAO;AACtC,uCAAuC;AACvC;AACA,GAAG;AACH;AACA,eAAe,SAAS;AACxB,sCAAsC;AACtC;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;AACA;AACA,KAAK;AACL;AACA;AACA,kCAAkC,OAAO;AACzC;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,UAAU,KAAqC;AAC/C;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA,4CAA4C,eAAe;AAC3D,GAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,KAAqC;AAC3C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,kDAAkD;AAClD,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;;AAEA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,MAAM,KAAqC;AAC3C;AACA;AACA;AACA,KAAK;AACL,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB,iBAAiB,gBAAgB;AACjC;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,iBAAiB,mBAAmB;AACpC;AACA;AACA;AACA,KAAK,UAAU,KAAqC;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,qCAAqC,gEAAgE;AACrG;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,4BAA4B,+BAA+B;AAC3D,4BAA4B,+BAA+B;AAC3D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA,mBAAmB,mBAAmB;AACtC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,IAAqC;AAC3C,kDAAkD;AAClD;AACA;AACA,mCAAmC;AACnC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ,IAAqC;AAC7C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,sEAAsE;;AAEtE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK,uFAAuF;AAC5F;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0CAA0C;AAC1C,iBAAiB,yBAAyB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG,+BAA+B;AAClC,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,KAAqC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,KAAqC;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAqC;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,oBAAoB,oBAAoB;AACxC,sBAAsB,4BAA4B;AAClD;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,OAAO;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,mBAAmB;AACnB,yBAAyB;AACzB;AACA,qDAAqD;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,6CAA6C;AAC9E;AACA;AACA,6CAA6C,4CAA4C;;AAEzF;AACA;AACA;;AAEA;AACA,MAAM,IAAqC;AAC3C;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL,GAAG,MAAM,EAGN;AACH;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,UAAU,KAAqC;AAC/C;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAqC;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,KAAK,2CAA2C,8BAA8B,EAAE;;AAEhF;AACA,wCAAwC,OAAO;AAC/C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;;AAEL;AACA,MAAM,KAAqC;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB,KAAqC;AACrD;AACA,oBAAoB,SAAI;AACxB;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,mBAAmB,qBAAqB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,uCAAuC,OAAO;AAC9C;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,SAAS;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAQ,IAAqC;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,OAAO;AAC5C;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,IAAqC;AAC3C;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0BAA0B;;AAE1B,kBAAkB;AAClB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB,qBAAqB;AACxC;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,MAAM,IAAqC;AAC3C;AACA;AACA;;AAEA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,mBAAmB,yBAAyB;AAC5C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,yBAAyB;AAC5C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,OAAO;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,IAAqC;AAC3C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,0BAA0B;AACpD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,oBAAoB,EAAE;;AAEpD;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,KAAqC;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,UAAU,KAAqC;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,oBAAoB;AACpB;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,oBAAoB,KAAqC;AACzD;AACA,MAAM,SAAE;AACR;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,MAAM,KAAqC;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB,2BAA2B;AAC9C,qBAAqB,+BAA+B;AACpD;AACA;AACA,GAAG;AACH,yBAAyB;AACzB;AACA,sBAAsB,iCAAiC;AACvD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,IAAqC;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK,MAAM,EAEN;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,KAAqC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,IAAqC;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,KAAqC;AAC3C;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA,8BAA8B;;AAE9B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ,KAAqC;AAC7C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK,UAAU,IAAqC;AACpD;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,KAAqC;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ,IAAqC;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qBAAqB,oBAAoB;AACzC;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,8BAA8B;AAC9B,MAAM,IAAqC;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAQ,KAAqC;AAC7C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,QAAQ,IAAqC;AAC7C;AACA,KAAK,MAAM,EAEN;AACL;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA,sCAAsC;AACtC,8C;;AAEA;AACA,QAAQ,KAAqC;AAC7C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,eAAe;AACrC;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAM,KAAqC;AAC3C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE;AACtE;AACA;AACA;;AAEA;AACA,QAAQ,KAAqC;AAC7C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iCAAiC;;AAEjC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,YAAY,KAAqC;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA,0CAA0C,2BAA2B,EAAE;AACvE,KAAK;AACL;AACA,0CAA0C,4BAA4B,EAAE;AACxE,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,+BAA+B,eAAe;AAC9C,MAAM,IAAqC;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,qBAAqB;AACrB;AACA;AACA,yBAAyB;AACzB;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,iBAAiB;AACjB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,SAAS;AACT;AACA;AACA,aAAa;AACb;AACA;AACA,iBAAiB;AACjB;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,YAAY,gFAAW;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,mBAAmB;AAC1C;AACA;AACA;AACA;;AAEA;AACA,0CAA0C,gCAAgC,EAAE;AAC5E;;AAEA;AACA;AACA;AACA;AACA,WAAW,gFAAW;AACtB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,WAAW,gFAAW;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B,0CAA0C;;AAE1C;AACA;AACA;AACA,GAAG;AACH;AACA,sCAAsC;AACtC;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA,KAAK;AACL;AACA;AACA,UAAU,gFAAW;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,IAAqC;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mCAAmC,OAAO;AAC1C;AACA,gBAAgB,YAAY;AAC5B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB,YAAY;AAC5B;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,OAAO;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,qDAAqD,EAAE,SAAS;AACtH;;AAEA;AACA;AACA;AACA;AACA;AACA,iCAAiC,OAAO;AACxC;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,kCAAkC,OAAO;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEe,kEAAG,EAAC;;;;;;;;;;;;;AC14LnB;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;;;;;;;;;;;;;;;;;uFCnBA,IAAIghD,OAAO,GAAG,CAAd;AACA,IAAIpgD,MAAM,GAAG,CAAb,C;;AAEc;AACbogD,SAAO,EAAPA,OADa;AAEbpgD,QAAM,EAANA,MAFa,E","file":"common/vendor.js","sourcesContent":["import Vue from 'vue';\r\n\r\nconst _toString = Object.prototype.toString;\r\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\r\n\r\nfunction isFn (fn) {\r\n  return typeof fn === 'function'\r\n}\r\n\r\nfunction isStr (str) {\r\n  return typeof str === 'string'\r\n}\r\n\r\nfunction isPlainObject (obj) {\r\n  return _toString.call(obj) === '[object Object]'\r\n}\r\n\r\nfunction hasOwn (obj, key) {\r\n  return hasOwnProperty.call(obj, key)\r\n}\r\n\r\nfunction noop () {}\r\n\r\n/**\r\n * Create a cached version of a pure function.\r\n */\r\nfunction cached (fn) {\r\n  const cache = Object.create(null);\r\n  return function cachedFn (str) {\r\n    const hit = cache[str];\r\n    return hit || (cache[str] = fn(str))\r\n  }\r\n}\r\n\r\n/**\r\n * Camelize a hyphen-delimited string.\r\n */\r\nconst camelizeRE = /-(\\w)/g;\r\nconst camelize = cached((str) => {\r\n  return str.replace(camelizeRE, (_, c) => c ? c.toUpperCase() : '')\r\n});\r\n\r\nconst HOOKS = [\r\n  'invoke',\r\n  'success',\r\n  'fail',\r\n  'complete',\r\n  'returnValue'\r\n];\r\n\r\nconst globalInterceptors = {};\r\nconst scopedInterceptors = {};\r\n\r\nfunction mergeHook (parentVal, childVal) {\r\n  const res = childVal\r\n    ? parentVal\r\n      ? parentVal.concat(childVal)\r\n      : Array.isArray(childVal)\r\n        ? childVal : [childVal]\r\n    : parentVal;\r\n  return res\r\n    ? dedupeHooks(res)\r\n    : res\r\n}\r\n\r\nfunction dedupeHooks (hooks) {\r\n  const res = [];\r\n  for (let i = 0; i < hooks.length; i++) {\r\n    if (res.indexOf(hooks[i]) === -1) {\r\n      res.push(hooks[i]);\r\n    }\r\n  }\r\n  return res\r\n}\r\n\r\nfunction removeHook (hooks, hook) {\r\n  const index = hooks.indexOf(hook);\r\n  if (index !== -1) {\r\n    hooks.splice(index, 1);\r\n  }\r\n}\r\n\r\nfunction mergeInterceptorHook (interceptor, option) {\r\n  Object.keys(option).forEach(hook => {\r\n    if (HOOKS.indexOf(hook) !== -1 && isFn(option[hook])) {\r\n      interceptor[hook] = mergeHook(interceptor[hook], option[hook]);\r\n    }\r\n  });\r\n}\r\n\r\nfunction removeInterceptorHook (interceptor, option) {\r\n  if (!interceptor || !option) {\r\n    return\r\n  }\r\n  Object.keys(option).forEach(hook => {\r\n    if (HOOKS.indexOf(hook) !== -1 && isFn(option[hook])) {\r\n      removeHook(interceptor[hook], option[hook]);\r\n    }\r\n  });\r\n}\r\n\r\nfunction addInterceptor (method, option) {\r\n  if (typeof method === 'string' && isPlainObject(option)) {\r\n    mergeInterceptorHook(scopedInterceptors[method] || (scopedInterceptors[method] = {}), option);\r\n  } else if (isPlainObject(method)) {\r\n    mergeInterceptorHook(globalInterceptors, method);\r\n  }\r\n}\r\n\r\nfunction removeInterceptor (method, option) {\r\n  if (typeof method === 'string') {\r\n    if (isPlainObject(option)) {\r\n      removeInterceptorHook(scopedInterceptors[method], option);\r\n    } else {\r\n      delete scopedInterceptors[method];\r\n    }\r\n  } else if (isPlainObject(method)) {\r\n    removeInterceptorHook(globalInterceptors, method);\r\n  }\r\n}\r\n\r\nfunction wrapperHook (hook) {\r\n  return function (data) {\r\n    return hook(data) || data\r\n  }\r\n}\r\n\r\nfunction isPromise (obj) {\r\n  return !!obj && (typeof obj === 'object' || typeof obj === 'function') && typeof obj.then === 'function'\r\n}\r\n\r\nfunction queue (hooks, data) {\r\n  let promise = false;\r\n  for (let i = 0; i < hooks.length; i++) {\r\n    const hook = hooks[i];\r\n    if (promise) {\r\n      promise = Promise.then(wrapperHook(hook));\r\n    } else {\r\n      const res = hook(data);\r\n      if (isPromise(res)) {\r\n        promise = Promise.resolve(res);\r\n      }\r\n      if (res === false) {\r\n        return {\r\n          then () {}\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return promise || {\r\n    then (callback) {\r\n      return callback(data)\r\n    }\r\n  }\r\n}\r\n\r\nfunction wrapperOptions (interceptor, options = {}) {\r\n  ['success', 'fail', 'complete'].forEach(name => {\r\n    if (Array.isArray(interceptor[name])) {\r\n      const oldCallback = options[name];\r\n      options[name] = function callbackInterceptor (res) {\r\n        queue(interceptor[name], res).then((res) => {\r\n          /* eslint-disable no-mixed-operators */\r\n          return isFn(oldCallback) && oldCallback(res) || res\r\n        });\r\n      };\r\n    }\r\n  });\r\n  return options\r\n}\r\n\r\nfunction wrapperReturnValue (method, returnValue) {\r\n  const returnValueHooks = [];\r\n  if (Array.isArray(globalInterceptors.returnValue)) {\r\n    returnValueHooks.push(...globalInterceptors.returnValue);\r\n  }\r\n  const interceptor = scopedInterceptors[method];\r\n  if (interceptor && Array.isArray(interceptor.returnValue)) {\r\n    returnValueHooks.push(...interceptor.returnValue);\r\n  }\r\n  returnValueHooks.forEach(hook => {\r\n    returnValue = hook(returnValue) || returnValue;\r\n  });\r\n  return returnValue\r\n}\r\n\r\nfunction getApiInterceptorHooks (method) {\r\n  const interceptor = Object.create(null);\r\n  Object.keys(globalInterceptors).forEach(hook => {\r\n    if (hook !== 'returnValue') {\r\n      interceptor[hook] = globalInterceptors[hook].slice();\r\n    }\r\n  });\r\n  const scopedInterceptor = scopedInterceptors[method];\r\n  if (scopedInterceptor) {\r\n    Object.keys(scopedInterceptor).forEach(hook => {\r\n      if (hook !== 'returnValue') {\r\n        interceptor[hook] = (interceptor[hook] || []).concat(scopedInterceptor[hook]);\r\n      }\r\n    });\r\n  }\r\n  return interceptor\r\n}\r\n\r\nfunction invokeApi (method, api, options, ...params) {\r\n  const interceptor = getApiInterceptorHooks(method);\r\n  if (interceptor && Object.keys(interceptor).length) {\r\n    if (Array.isArray(interceptor.invoke)) {\r\n      const res = queue(interceptor.invoke, options);\r\n      return res.then((options) => {\r\n        return api(wrapperOptions(interceptor, options), ...params)\r\n      })\r\n    } else {\r\n      return api(wrapperOptions(interceptor, options), ...params)\r\n    }\r\n  }\r\n  return api(options, ...params)\r\n}\r\n\r\nconst promiseInterceptor = {\r\n  returnValue (res) {\r\n    if (!isPromise(res)) {\r\n      return res\r\n    }\r\n    return res.then(res => {\r\n      return res[1]\r\n    }).catch(res => {\r\n      return res[0]\r\n    })\r\n  }\r\n};\r\n\r\nconst SYNC_API_RE =\r\n  /^\\$|sendNativeEvent|restoreGlobal|getCurrentSubNVue|getMenuButtonBoundingClientRect|^report|interceptors|Interceptor$|getSubNVueById|requireNativePlugin|upx2px|hideKeyboard|canIUse|^create|Sync$|Manager$|base64ToArrayBuffer|arrayBufferToBase64/;\r\n\r\nconst CONTEXT_API_RE = /^create|Manager$/;\r\n\r\n// Context例外情况\r\nconst CONTEXT_API_RE_EXC = ['createBLEConnection'];\r\n\r\n// 同步例外情况\r\nconst ASYNC_API = ['createBLEConnection'];\r\n\r\nconst CALLBACK_API_RE = /^on|^off/;\r\n\r\nfunction isContextApi (name) {\r\n  return CONTEXT_API_RE.test(name) && CONTEXT_API_RE_EXC.indexOf(name) === -1\r\n}\r\nfunction isSyncApi (name) {\r\n  return SYNC_API_RE.test(name) && ASYNC_API.indexOf(name) === -1\r\n}\r\n\r\nfunction isCallbackApi (name) {\r\n  return CALLBACK_API_RE.test(name) && name !== 'onPush'\r\n}\r\n\r\nfunction handlePromise (promise) {\r\n  return promise.then(data => {\r\n    return [null, data]\r\n  })\r\n    .catch(err => [err])\r\n}\r\n\r\nfunction shouldPromise (name) {\r\n  if (\r\n    isContextApi(name) ||\r\n    isSyncApi(name) ||\r\n    isCallbackApi(name)\r\n  ) {\r\n    return false\r\n  }\r\n  return true\r\n}\r\n\r\n/* eslint-disable no-extend-native */\r\nif (!Promise.prototype.finally) {\r\n  Promise.prototype.finally = function (callback) {\r\n    const promise = this.constructor;\r\n    return this.then(\r\n      value => promise.resolve(callback()).then(() => value),\r\n      reason => promise.resolve(callback()).then(() => {\r\n        throw reason\r\n      })\r\n    )\r\n  };\r\n}\r\n\r\nfunction promisify (name, api) {\r\n  if (!shouldPromise(name)) {\r\n    return api\r\n  }\r\n  return function promiseApi (options = {}, ...params) {\r\n    if (isFn(options.success) || isFn(options.fail) || isFn(options.complete)) {\r\n      return wrapperReturnValue(name, invokeApi(name, api, options, ...params))\r\n    }\r\n    return wrapperReturnValue(name, handlePromise(new Promise((resolve, reject) => {\r\n      invokeApi(name, api, Object.assign({}, options, {\r\n        success: resolve,\r\n        fail: reject\r\n      }), ...params);\r\n    })))\r\n  }\r\n}\r\n\r\nconst EPS = 1e-4;\r\nconst BASE_DEVICE_WIDTH = 750;\r\nlet isIOS = false;\r\nlet deviceWidth = 0;\r\nlet deviceDPR = 0;\r\n\r\nfunction checkDeviceWidth () {\r\n  const {\r\n    platform,\r\n    pixelRatio,\r\n    windowWidth\r\n  } = wx.getSystemInfoSync(); // uni=>wx runtime 编译目标是 uni 对象，内部不允许直接使用 uni\r\n\r\n  deviceWidth = windowWidth;\r\n  deviceDPR = pixelRatio;\r\n  isIOS = platform === 'ios';\r\n}\r\n\r\nfunction upx2px (number, newDeviceWidth) {\r\n  if (deviceWidth === 0) {\r\n    checkDeviceWidth();\r\n  }\r\n\r\n  number = Number(number);\r\n  if (number === 0) {\r\n    return 0\r\n  }\r\n  let result = (number / BASE_DEVICE_WIDTH) * (newDeviceWidth || deviceWidth);\r\n  if (result < 0) {\r\n    result = -result;\r\n  }\r\n  result = Math.floor(result + EPS);\r\n  if (result === 0) {\r\n    if (deviceDPR === 1 || !isIOS) {\r\n      return 1\r\n    } else {\r\n      return 0.5\r\n    }\r\n  }\r\n  return number < 0 ? -result : result\r\n}\r\n\r\nconst interceptors = {\r\n  promiseInterceptor\r\n};\r\n\r\nvar baseApi = /*#__PURE__*/Object.freeze({\r\n  __proto__: null,\r\n  upx2px: upx2px,\r\n  addInterceptor: addInterceptor,\r\n  removeInterceptor: removeInterceptor,\r\n  interceptors: interceptors\r\n});\r\n\r\nvar previewImage = {\r\n  args (fromArgs) {\r\n    let currentIndex = parseInt(fromArgs.current);\r\n    if (isNaN(currentIndex)) {\r\n      return\r\n    }\r\n    const urls = fromArgs.urls;\r\n    if (!Array.isArray(urls)) {\r\n      return\r\n    }\r\n    const len = urls.length;\r\n    if (!len) {\r\n      return\r\n    }\r\n    if (currentIndex < 0) {\r\n      currentIndex = 0;\r\n    } else if (currentIndex >= len) {\r\n      currentIndex = len - 1;\r\n    }\r\n    if (currentIndex > 0) {\r\n      fromArgs.current = urls[currentIndex];\r\n      fromArgs.urls = urls.filter(\r\n        (item, index) => index < currentIndex ? item !== urls[currentIndex] : true\r\n      );\r\n    } else {\r\n      fromArgs.current = urls[0];\r\n    }\r\n    return {\r\n      indicator: false,\r\n      loop: false\r\n    }\r\n  }\r\n};\r\n\r\nfunction addSafeAreaInsets (result) {\r\n  if (result.safeArea) {\r\n    const safeArea = result.safeArea;\r\n    result.safeAreaInsets = {\r\n      top: safeArea.top,\r\n      left: safeArea.left,\r\n      right: result.windowWidth - safeArea.right,\r\n      bottom: result.windowHeight - safeArea.bottom\r\n    };\r\n  }\r\n}\r\nconst protocols = {\r\n  previewImage,\r\n  getSystemInfo: {\r\n    returnValue: addSafeAreaInsets\r\n  },\r\n  getSystemInfoSync: {\r\n    returnValue: addSafeAreaInsets\r\n  }\r\n};\r\nconst todos = [\r\n  'vibrate'\r\n];\r\nconst canIUses = [];\r\n\r\nconst CALLBACKS = ['success', 'fail', 'cancel', 'complete'];\r\n\r\nfunction processCallback (methodName, method, returnValue) {\r\n  return function (res) {\r\n    return method(processReturnValue(methodName, res, returnValue))\r\n  }\r\n}\r\n\r\nfunction processArgs (methodName, fromArgs, argsOption = {}, returnValue = {}, keepFromArgs = false) {\r\n  if (isPlainObject(fromArgs)) { // 一般 api 的参数解析\r\n    const toArgs = keepFromArgs === true ? fromArgs : {}; // returnValue 为 false 时，说明是格式化返回值，直接在返回值对象上修改赋值\r\n    if (isFn(argsOption)) {\r\n      argsOption = argsOption(fromArgs, toArgs) || {};\r\n    }\r\n    for (const key in fromArgs) {\r\n      if (hasOwn(argsOption, key)) {\r\n        let keyOption = argsOption[key];\r\n        if (isFn(keyOption)) {\r\n          keyOption = keyOption(fromArgs[key], fromArgs, toArgs);\r\n        }\r\n        if (!keyOption) { // 不支持的参数\r\n          console.warn(`微信小程序 ${methodName}暂不支持${key}`);\r\n        } else if (isStr(keyOption)) { // 重写参数 key\r\n          toArgs[keyOption] = fromArgs[key];\r\n        } else if (isPlainObject(keyOption)) { // {name:newName,value:value}可重新指定参数 key:value\r\n          toArgs[keyOption.name ? keyOption.name : key] = keyOption.value;\r\n        }\r\n      } else if (CALLBACKS.indexOf(key) !== -1) {\r\n        toArgs[key] = processCallback(methodName, fromArgs[key], returnValue);\r\n      } else {\r\n        if (!keepFromArgs) {\r\n          toArgs[key] = fromArgs[key];\r\n        }\r\n      }\r\n    }\r\n    return toArgs\r\n  } else if (isFn(fromArgs)) {\r\n    fromArgs = processCallback(methodName, fromArgs, returnValue);\r\n  }\r\n  return fromArgs\r\n}\r\n\r\nfunction processReturnValue (methodName, res, returnValue, keepReturnValue = false) {\r\n  if (isFn(protocols.returnValue)) { // 处理通用 returnValue\r\n    res = protocols.returnValue(methodName, res);\r\n  }\r\n  return processArgs(methodName, res, returnValue, {}, keepReturnValue)\r\n}\r\n\r\nfunction wrapper (methodName, method) {\r\n  if (hasOwn(protocols, methodName)) {\r\n    const protocol = protocols[methodName];\r\n    if (!protocol) { // 暂不支持的 api\r\n      return function () {\r\n        console.error(`微信小程序 暂不支持${methodName}`);\r\n      }\r\n    }\r\n    return function (arg1, arg2) { // 目前 api 最多两个参数\r\n      let options = protocol;\r\n      if (isFn(protocol)) {\r\n        options = protocol(arg1);\r\n      }\r\n\r\n      arg1 = processArgs(methodName, arg1, options.args, options.returnValue);\r\n\r\n      const args = [arg1];\r\n      if (typeof arg2 !== 'undefined') {\r\n        args.push(arg2);\r\n      }\r\n      const returnValue = wx[options.name || methodName].apply(wx, args);\r\n      if (isSyncApi(methodName)) { // 同步 api\r\n        return processReturnValue(methodName, returnValue, options.returnValue, isContextApi(methodName))\r\n      }\r\n      return returnValue\r\n    }\r\n  }\r\n  return method\r\n}\r\n\r\nconst todoApis = Object.create(null);\r\n\r\nconst TODOS = [\r\n  'onTabBarMidButtonTap',\r\n  'subscribePush',\r\n  'unsubscribePush',\r\n  'onPush',\r\n  'offPush',\r\n  'share'\r\n];\r\n\r\nfunction createTodoApi (name) {\r\n  return function todoApi ({\r\n    fail,\r\n    complete\r\n  }) {\r\n    const res = {\r\n      errMsg: `${name}:fail:暂不支持 ${name} 方法`\r\n    };\r\n    isFn(fail) && fail(res);\r\n    isFn(complete) && complete(res);\r\n  }\r\n}\r\n\r\nTODOS.forEach(function (name) {\r\n  todoApis[name] = createTodoApi(name);\r\n});\r\n\r\nvar providers = {\r\n  oauth: ['weixin'],\r\n  share: ['weixin'],\r\n  payment: ['wxpay'],\r\n  push: ['weixin']\r\n};\r\n\r\nfunction getProvider ({\r\n  service,\r\n  success,\r\n  fail,\r\n  complete\r\n}) {\r\n  let res = false;\r\n  if (providers[service]) {\r\n    res = {\r\n      errMsg: 'getProvider:ok',\r\n      service,\r\n      provider: providers[service]\r\n    };\r\n    isFn(success) && success(res);\r\n  } else {\r\n    res = {\r\n      errMsg: 'getProvider:fail:服务[' + service + ']不存在'\r\n    };\r\n    isFn(fail) && fail(res);\r\n  }\r\n  isFn(complete) && complete(res);\r\n}\r\n\r\nvar extraApi = /*#__PURE__*/Object.freeze({\r\n  __proto__: null,\r\n  getProvider: getProvider\r\n});\r\n\r\nconst getEmitter = (function () {\r\n  if (typeof getUniEmitter === 'function') {\r\n    /* eslint-disable no-undef */\r\n    return getUniEmitter\r\n  }\r\n  let Emitter;\r\n  return function getUniEmitter () {\r\n    if (!Emitter) {\r\n      Emitter = new Vue();\r\n    }\r\n    return Emitter\r\n  }\r\n})();\r\n\r\nfunction apply (ctx, method, args) {\r\n  return ctx[method].apply(ctx, args)\r\n}\r\n\r\nfunction $on () {\r\n  return apply(getEmitter(), '$on', [...arguments])\r\n}\r\nfunction $off () {\r\n  return apply(getEmitter(), '$off', [...arguments])\r\n}\r\nfunction $once () {\r\n  return apply(getEmitter(), '$once', [...arguments])\r\n}\r\nfunction $emit () {\r\n  return apply(getEmitter(), '$emit', [...arguments])\r\n}\r\n\r\nvar eventApi = /*#__PURE__*/Object.freeze({\r\n  __proto__: null,\r\n  $on: $on,\r\n  $off: $off,\r\n  $once: $once,\r\n  $emit: $emit\r\n});\r\n\r\nvar api = /*#__PURE__*/Object.freeze({\r\n  __proto__: null\r\n});\r\n\r\nconst MPPage = Page;\r\nconst MPComponent = Component;\r\n\r\nconst customizeRE = /:/g;\r\n\r\nconst customize = cached((str) => {\r\n  return camelize(str.replace(customizeRE, '-'))\r\n});\r\n\r\nfunction initTriggerEvent (mpInstance) {\r\n  {\r\n    if (!wx.canIUse('nextTick')) {\r\n      return\r\n    }\r\n  }\r\n  const oldTriggerEvent = mpInstance.triggerEvent;\r\n  mpInstance.triggerEvent = function (event, ...args) {\r\n    return oldTriggerEvent.apply(mpInstance, [customize(event), ...args])\r\n  };\r\n}\r\n\r\nfunction initHook (name, options) {\r\n  const oldHook = options[name];\r\n  if (!oldHook) {\r\n    options[name] = function () {\r\n      initTriggerEvent(this);\r\n    };\r\n  } else {\r\n    options[name] = function (...args) {\r\n      initTriggerEvent(this);\r\n      return oldHook.apply(this, args)\r\n    };\r\n  }\r\n}\r\n\r\nPage = function (options = {}) {\r\n  initHook('onLoad', options);\r\n  return MPPage(options)\r\n};\r\n\r\nComponent = function (options = {}) {\r\n  initHook('created', options);\r\n  return MPComponent(options)\r\n};\r\n\r\nconst PAGE_EVENT_HOOKS = [\r\n  'onPullDownRefresh',\r\n  'onReachBottom',\r\n  'onShareAppMessage',\r\n  'onPageScroll',\r\n  'onResize',\r\n  'onTabItemTap'\r\n];\r\n\r\nfunction initMocks (vm, mocks) {\r\n  const mpInstance = vm.$mp[vm.mpType];\r\n  mocks.forEach(mock => {\r\n    if (hasOwn(mpInstance, mock)) {\r\n      vm[mock] = mpInstance[mock];\r\n    }\r\n  });\r\n}\r\n\r\nfunction hasHook (hook, vueOptions) {\r\n  if (!vueOptions) {\r\n    return true\r\n  }\r\n\r\n  if (Vue.options && Array.isArray(Vue.options[hook])) {\r\n    return true\r\n  }\r\n\r\n  vueOptions = vueOptions.default || vueOptions;\r\n\r\n  if (isFn(vueOptions)) {\r\n    if (isFn(vueOptions.extendOptions[hook])) {\r\n      return true\r\n    }\r\n    if (vueOptions.super &&\r\n      vueOptions.super.options &&\r\n      Array.isArray(vueOptions.super.options[hook])) {\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  if (isFn(vueOptions[hook])) {\r\n    return true\r\n  }\r\n  const mixins = vueOptions.mixins;\r\n  if (Array.isArray(mixins)) {\r\n    return !!mixins.find(mixin => hasHook(hook, mixin))\r\n  }\r\n}\r\n\r\nfunction initHooks (mpOptions, hooks, vueOptions) {\r\n  hooks.forEach(hook => {\r\n    if (hasHook(hook, vueOptions)) {\r\n      mpOptions[hook] = function (args) {\r\n        return this.$vm && this.$vm.__call_hook(hook, args)\r\n      };\r\n    }\r\n  });\r\n}\r\n\r\nfunction initVueComponent (Vue, vueOptions) {\r\n  vueOptions = vueOptions.default || vueOptions;\r\n  let VueComponent;\r\n  if (isFn(vueOptions)) {\r\n    VueComponent = vueOptions;\r\n    vueOptions = VueComponent.extendOptions;\r\n  } else {\r\n    VueComponent = Vue.extend(vueOptions);\r\n  }\r\n  return [VueComponent, vueOptions]\r\n}\r\n\r\nfunction initSlots (vm, vueSlots) {\r\n  if (Array.isArray(vueSlots) && vueSlots.length) {\r\n    const $slots = Object.create(null);\r\n    vueSlots.forEach(slotName => {\r\n      $slots[slotName] = true;\r\n    });\r\n    vm.$scopedSlots = vm.$slots = $slots;\r\n  }\r\n}\r\n\r\nfunction initVueIds (vueIds, mpInstance) {\r\n  vueIds = (vueIds || '').split(',');\r\n  const len = vueIds.length;\r\n\r\n  if (len === 1) {\r\n    mpInstance._$vueId = vueIds[0];\r\n  } else if (len === 2) {\r\n    mpInstance._$vueId = vueIds[0];\r\n    mpInstance._$vuePid = vueIds[1];\r\n  }\r\n}\r\n\r\nfunction initData (vueOptions, context) {\r\n  let data = vueOptions.data || {};\r\n  const methods = vueOptions.methods || {};\r\n\r\n  if (typeof data === 'function') {\r\n    try {\r\n      data = data.call(context); // 支持 Vue.prototype 上挂的数据\r\n    } catch (e) {\r\n      if (process.env.VUE_APP_DEBUG) {\r\n        console.warn('根据 Vue 的 data 函数初始化小程序 data 失败，请尽量确保 data 函数中不访问 vm 对象，否则可能影响首次数据渲染速度。', data);\r\n      }\r\n    }\r\n  } else {\r\n    try {\r\n      // 对 data 格式化\r\n      data = JSON.parse(JSON.stringify(data));\r\n    } catch (e) {}\r\n  }\r\n\r\n  if (!isPlainObject(data)) {\r\n    data = {};\r\n  }\r\n\r\n  Object.keys(methods).forEach(methodName => {\r\n    if (context.__lifecycle_hooks__.indexOf(methodName) === -1 && !hasOwn(data, methodName)) {\r\n      data[methodName] = methods[methodName];\r\n    }\r\n  });\r\n\r\n  return data\r\n}\r\n\r\nconst PROP_TYPES = [String, Number, Boolean, Object, Array, null];\r\n\r\nfunction createObserver (name) {\r\n  return function observer (newVal, oldVal) {\r\n    if (this.$vm) {\r\n      this.$vm[name] = newVal; // 为了触发其他非 render watcher\r\n    }\r\n  }\r\n}\r\n\r\nfunction initBehaviors (vueOptions, initBehavior) {\r\n  const vueBehaviors = vueOptions.behaviors;\r\n  const vueExtends = vueOptions.extends;\r\n  const vueMixins = vueOptions.mixins;\r\n\r\n  let vueProps = vueOptions.props;\r\n\r\n  if (!vueProps) {\r\n    vueOptions.props = vueProps = [];\r\n  }\r\n\r\n  const behaviors = [];\r\n  if (Array.isArray(vueBehaviors)) {\r\n    vueBehaviors.forEach(behavior => {\r\n      behaviors.push(behavior.replace('uni://', `${\"wx\"}://`));\r\n      if (behavior === 'uni://form-field') {\r\n        if (Array.isArray(vueProps)) {\r\n          vueProps.push('name');\r\n          vueProps.push('value');\r\n        } else {\r\n          vueProps.name = {\r\n            type: String,\r\n            default: ''\r\n          };\r\n          vueProps.value = {\r\n            type: [String, Number, Boolean, Array, Object, Date],\r\n            default: ''\r\n          };\r\n        }\r\n      }\r\n    });\r\n  }\r\n  if (isPlainObject(vueExtends) && vueExtends.props) {\r\n    behaviors.push(\r\n      initBehavior({\r\n        properties: initProperties(vueExtends.props, true)\r\n      })\r\n    );\r\n  }\r\n  if (Array.isArray(vueMixins)) {\r\n    vueMixins.forEach(vueMixin => {\r\n      if (isPlainObject(vueMixin) && vueMixin.props) {\r\n        behaviors.push(\r\n          initBehavior({\r\n            properties: initProperties(vueMixin.props, true)\r\n          })\r\n        );\r\n      }\r\n    });\r\n  }\r\n  return behaviors\r\n}\r\n\r\nfunction parsePropType (key, type, defaultValue, file) {\r\n  // [String]=>String\r\n  if (Array.isArray(type) && type.length === 1) {\r\n    return type[0]\r\n  }\r\n  return type\r\n}\r\n\r\nfunction initProperties (props, isBehavior = false, file = '') {\r\n  const properties = {};\r\n  if (!isBehavior) {\r\n    properties.vueId = {\r\n      type: String,\r\n      value: ''\r\n    };\r\n    properties.vueSlots = { // 小程序不能直接定义 $slots 的 props，所以通过 vueSlots 转换到 $slots\r\n      type: null,\r\n      value: [],\r\n      observer: function (newVal, oldVal) {\r\n        const $slots = Object.create(null);\r\n        newVal.forEach(slotName => {\r\n          $slots[slotName] = true;\r\n        });\r\n        this.setData({\r\n          $slots\r\n        });\r\n      }\r\n    };\r\n  }\r\n  if (Array.isArray(props)) { // ['title']\r\n    props.forEach(key => {\r\n      properties[key] = {\r\n        type: null,\r\n        observer: createObserver(key)\r\n      };\r\n    });\r\n  } else if (isPlainObject(props)) { // {title:{type:String,default:''},content:String}\r\n    Object.keys(props).forEach(key => {\r\n      const opts = props[key];\r\n      if (isPlainObject(opts)) { // title:{type:String,default:''}\r\n        let value = opts.default;\r\n        if (isFn(value)) {\r\n          value = value();\r\n        }\r\n\r\n        opts.type = parsePropType(key, opts.type);\r\n\r\n        properties[key] = {\r\n          type: PROP_TYPES.indexOf(opts.type) !== -1 ? opts.type : null,\r\n          value,\r\n          observer: createObserver(key)\r\n        };\r\n      } else { // content:String\r\n        const type = parsePropType(key, opts);\r\n        properties[key] = {\r\n          type: PROP_TYPES.indexOf(type) !== -1 ? type : null,\r\n          observer: createObserver(key)\r\n        };\r\n      }\r\n    });\r\n  }\r\n  return properties\r\n}\r\n\r\nfunction wrapper$1 (event) {\r\n  // TODO 又得兼容 mpvue 的 mp 对象\r\n  try {\r\n    event.mp = JSON.parse(JSON.stringify(event));\r\n  } catch (e) {}\r\n\r\n  event.stopPropagation = noop;\r\n  event.preventDefault = noop;\r\n\r\n  event.target = event.target || {};\r\n\r\n  if (!hasOwn(event, 'detail')) {\r\n    event.detail = {};\r\n  }\r\n\r\n  if (hasOwn(event, 'markerId')) {\r\n    event.detail = typeof event.detail === 'object' ? event.detail : {};\r\n    event.detail.markerId = event.markerId;\r\n  }\r\n\r\n  if (isPlainObject(event.detail)) {\r\n    event.target = Object.assign({}, event.target, event.detail);\r\n  }\r\n\r\n  return event\r\n}\r\n\r\nfunction getExtraValue (vm, dataPathsArray) {\r\n  let context = vm;\r\n  dataPathsArray.forEach(dataPathArray => {\r\n    const dataPath = dataPathArray[0];\r\n    const value = dataPathArray[2];\r\n    if (dataPath || typeof value !== 'undefined') { // ['','',index,'disable']\r\n      const propPath = dataPathArray[1];\r\n      const valuePath = dataPathArray[3];\r\n\r\n      const vFor = dataPath ? vm.__get_value(dataPath, context) : context;\r\n\r\n      if (Number.isInteger(vFor)) {\r\n        context = value;\r\n      } else if (!propPath) {\r\n        context = vFor[value];\r\n      } else {\r\n        if (Array.isArray(vFor)) {\r\n          context = vFor.find(vForItem => {\r\n            return vm.__get_value(propPath, vForItem) === value\r\n          });\r\n        } else if (isPlainObject(vFor)) {\r\n          context = Object.keys(vFor).find(vForKey => {\r\n            return vm.__get_value(propPath, vFor[vForKey]) === value\r\n          });\r\n        } else {\r\n          console.error('v-for 暂不支持循环数据：', vFor);\r\n        }\r\n      }\r\n\r\n      if (valuePath) {\r\n        context = vm.__get_value(valuePath, context);\r\n      }\r\n    }\r\n  });\r\n  return context\r\n}\r\n\r\nfunction processEventExtra (vm, extra, event) {\r\n  const extraObj = {};\r\n\r\n  if (Array.isArray(extra) && extra.length) {\r\n    /**\r\n     *[\r\n     *    ['data.items', 'data.id', item.data.id],\r\n     *    ['metas', 'id', meta.id]\r\n     *],\r\n     *[\r\n     *    ['data.items', 'data.id', item.data.id],\r\n     *    ['metas', 'id', meta.id]\r\n     *],\r\n     *'test'\r\n     */\r\n    extra.forEach((dataPath, index) => {\r\n      if (typeof dataPath === 'string') {\r\n        if (!dataPath) { // model,prop.sync\r\n          extraObj['$' + index] = vm;\r\n        } else {\r\n          if (dataPath === '$event') { // $event\r\n            extraObj['$' + index] = event;\r\n          } else if (dataPath.indexOf('$event.') === 0) { // $event.target.value\r\n            extraObj['$' + index] = vm.__get_value(dataPath.replace('$event.', ''), event);\r\n          } else {\r\n            extraObj['$' + index] = vm.__get_value(dataPath);\r\n          }\r\n        }\r\n      } else {\r\n        extraObj['$' + index] = getExtraValue(vm, dataPath);\r\n      }\r\n    });\r\n  }\r\n\r\n  return extraObj\r\n}\r\n\r\nfunction getObjByArray (arr) {\r\n  const obj = {};\r\n  for (let i = 1; i < arr.length; i++) {\r\n    const element = arr[i];\r\n    obj[element[0]] = element[1];\r\n  }\r\n  return obj\r\n}\r\n\r\nfunction processEventArgs (vm, event, args = [], extra = [], isCustom, methodName) {\r\n  let isCustomMPEvent = false; // wxcomponent 组件，传递原始 event 对象\r\n  if (isCustom) { // 自定义事件\r\n    isCustomMPEvent = event.currentTarget &&\r\n      event.currentTarget.dataset &&\r\n      event.currentTarget.dataset.comType === 'wx';\r\n    if (!args.length) { // 无参数，直接传入 event 或 detail 数组\r\n      if (isCustomMPEvent) {\r\n        return [event]\r\n      }\r\n      return event.detail.__args__ || event.detail\r\n    }\r\n  }\r\n\r\n  const extraObj = processEventExtra(vm, extra, event);\r\n\r\n  const ret = [];\r\n  args.forEach(arg => {\r\n    if (arg === '$event') {\r\n      if (methodName === '__set_model' && !isCustom) { // input v-model value\r\n        ret.push(event.target.value);\r\n      } else {\r\n        if (isCustom && !isCustomMPEvent) {\r\n          ret.push(event.detail.__args__[0]);\r\n        } else { // wxcomponent 组件或内置组件\r\n          ret.push(event);\r\n        }\r\n      }\r\n    } else {\r\n      if (Array.isArray(arg) && arg[0] === 'o') {\r\n        ret.push(getObjByArray(arg));\r\n      } else if (typeof arg === 'string' && hasOwn(extraObj, arg)) {\r\n        ret.push(extraObj[arg]);\r\n      } else {\r\n        ret.push(arg);\r\n      }\r\n    }\r\n  });\r\n\r\n  return ret\r\n}\r\n\r\nconst ONCE = '~';\r\nconst CUSTOM = '^';\r\n\r\nfunction isMatchEventType (eventType, optType) {\r\n  return (eventType === optType) ||\r\n    (\r\n      optType === 'regionchange' &&\r\n      (\r\n        eventType === 'begin' ||\r\n        eventType === 'end'\r\n      )\r\n    )\r\n}\r\n\r\nfunction handleEvent (event) {\r\n  event = wrapper$1(event);\r\n\r\n  // [['tap',[['handle',[1,2,a]],['handle1',[1,2,a]]]]]\r\n  const dataset = (event.currentTarget || event.target).dataset;\r\n  if (!dataset) {\r\n    return console.warn('事件信息不存在')\r\n  }\r\n  const eventOpts = dataset.eventOpts || dataset['event-opts']; // 支付宝 web-view 组件 dataset 非驼峰\r\n  if (!eventOpts) {\r\n    return console.warn('事件信息不存在')\r\n  }\r\n\r\n  // [['handle',[1,2,a]],['handle1',[1,2,a]]]\r\n  const eventType = event.type;\r\n\r\n  const ret = [];\r\n\r\n  eventOpts.forEach(eventOpt => {\r\n    let type = eventOpt[0];\r\n    const eventsArray = eventOpt[1];\r\n\r\n    const isCustom = type.charAt(0) === CUSTOM;\r\n    type = isCustom ? type.slice(1) : type;\r\n    const isOnce = type.charAt(0) === ONCE;\r\n    type = isOnce ? type.slice(1) : type;\r\n\r\n    if (eventsArray && isMatchEventType(eventType, type)) {\r\n      eventsArray.forEach(eventArray => {\r\n        const methodName = eventArray[0];\r\n        if (methodName) {\r\n          let handlerCtx = this.$vm;\r\n          if (\r\n            handlerCtx.$options.generic &&\r\n            handlerCtx.$parent &&\r\n            handlerCtx.$parent.$parent\r\n          ) { // mp-weixin,mp-toutiao 抽象节点模拟 scoped slots\r\n            handlerCtx = handlerCtx.$parent.$parent;\r\n          }\r\n          if (methodName === '$emit') {\r\n            handlerCtx.$emit.apply(handlerCtx,\r\n              processEventArgs(\r\n                this.$vm,\r\n                event,\r\n                eventArray[1],\r\n                eventArray[2],\r\n                isCustom,\r\n                methodName\r\n              ));\r\n            return\r\n          }\r\n          const handler = handlerCtx[methodName];\r\n          if (!isFn(handler)) {\r\n            throw new Error(` _vm.${methodName} is not a function`)\r\n          }\r\n          if (isOnce) {\r\n            if (handler.once) {\r\n              return\r\n            }\r\n            handler.once = true;\r\n          }\r\n          ret.push(handler.apply(handlerCtx, processEventArgs(\r\n            this.$vm,\r\n            event,\r\n            eventArray[1],\r\n            eventArray[2],\r\n            isCustom,\r\n            methodName\r\n          )));\r\n        }\r\n      });\r\n    }\r\n  });\r\n\r\n  if (\r\n    eventType === 'input' &&\r\n    ret.length === 1 &&\r\n    typeof ret[0] !== 'undefined'\r\n  ) {\r\n    return ret[0]\r\n  }\r\n}\r\n\r\nconst hooks = [\r\n  'onShow',\r\n  'onHide',\r\n  'onError',\r\n  'onPageNotFound'\r\n];\r\n\r\nfunction parseBaseApp (vm, {\r\n  mocks,\r\n  initRefs\r\n}) {\r\n  if (vm.$options.store) {\r\n    Vue.prototype.$store = vm.$options.store;\r\n  }\r\n\r\n  Vue.prototype.mpHost = \"mp-weixin\";\r\n\r\n  Vue.mixin({\r\n    beforeCreate () {\r\n      if (!this.$options.mpType) {\r\n        return\r\n      }\r\n\r\n      this.mpType = this.$options.mpType;\r\n\r\n      this.$mp = {\r\n        data: {},\r\n        [this.mpType]: this.$options.mpInstance\r\n      };\r\n\r\n      this.$scope = this.$options.mpInstance;\r\n\r\n      delete this.$options.mpType;\r\n      delete this.$options.mpInstance;\r\n\r\n      if (this.mpType !== 'app') {\r\n        initRefs(this);\r\n        initMocks(this, mocks);\r\n      }\r\n    }\r\n  });\r\n\r\n  const appOptions = {\r\n    onLaunch (args) {\r\n      if (this.$vm) { // 已经初始化过了，主要是为了百度，百度 onShow 在 onLaunch 之前\r\n        return\r\n      }\r\n      {\r\n        if (!wx.canIUse('nextTick')) { // 事实 上2.2.3 即可，简单使用 2.3.0 的 nextTick 判断\r\n          console.error('当前微信基础库版本过低，请将 微信开发者工具-详情-项目设置-调试基础库版本 更换为`2.3.0`以上');\r\n        }\r\n      }\r\n\r\n      this.$vm = vm;\r\n\r\n      this.$vm.$mp = {\r\n        app: this\r\n      };\r\n\r\n      this.$vm.$scope = this;\r\n      // vm 上也挂载 globalData\r\n      this.$vm.globalData = this.globalData;\r\n\r\n      this.$vm._isMounted = true;\r\n      this.$vm.__call_hook('mounted', args);\r\n\r\n      this.$vm.__call_hook('onLaunch', args);\r\n    }\r\n  };\r\n\r\n  // 兼容旧版本 globalData\r\n  appOptions.globalData = vm.$options.globalData || {};\r\n  // 将 methods 中的方法挂在 getApp() 中\r\n  const methods = vm.$options.methods;\r\n  if (methods) {\r\n    Object.keys(methods).forEach(name => {\r\n      appOptions[name] = methods[name];\r\n    });\r\n  }\r\n\r\n  initHooks(appOptions, hooks);\r\n\r\n  return appOptions\r\n}\r\n\r\nconst mocks = ['__route__', '__wxExparserNodeId__', '__wxWebviewId__'];\r\n\r\nfunction findVmByVueId (vm, vuePid) {\r\n  const $children = vm.$children;\r\n  // 优先查找直属(反向查找:https://github.com/dcloudio/uni-app/issues/1200)\r\n  for (let i = $children.length - 1; i >= 0; i--) {\r\n    const childVm = $children[i];\r\n    if (childVm.$scope._$vueId === vuePid) {\r\n      return childVm\r\n    }\r\n  }\r\n  // 反向递归查找\r\n  let parentVm;\r\n  for (let i = $children.length - 1; i >= 0; i--) {\r\n    parentVm = findVmByVueId($children[i], vuePid);\r\n    if (parentVm) {\r\n      return parentVm\r\n    }\r\n  }\r\n}\r\n\r\nfunction initBehavior (options) {\r\n  return Behavior(options)\r\n}\r\n\r\nfunction isPage () {\r\n  return !!this.route\r\n}\r\n\r\nfunction initRelation (detail) {\r\n  this.triggerEvent('__l', detail);\r\n}\r\n\r\nfunction initRefs (vm) {\r\n  const mpInstance = vm.$scope;\r\n  Object.defineProperty(vm, '$refs', {\r\n    get () {\r\n      const $refs = {};\r\n      const components = mpInstance.selectAllComponents('.vue-ref');\r\n      components.forEach(component => {\r\n        const ref = component.dataset.ref;\r\n        $refs[ref] = component.$vm || component;\r\n      });\r\n      const forComponents = mpInstance.selectAllComponents('.vue-ref-in-for');\r\n      forComponents.forEach(component => {\r\n        const ref = component.dataset.ref;\r\n        if (!$refs[ref]) {\r\n          $refs[ref] = [];\r\n        }\r\n        $refs[ref].push(component.$vm || component);\r\n      });\r\n      return $refs\r\n    }\r\n  });\r\n}\r\n\r\nfunction handleLink (event) {\r\n  const {\r\n    vuePid,\r\n    vueOptions\r\n  } = event.detail || event.value; // detail 是微信,value 是百度(dipatch)\r\n\r\n  let parentVm;\r\n\r\n  if (vuePid) {\r\n    parentVm = findVmByVueId(this.$vm, vuePid);\r\n  }\r\n\r\n  if (!parentVm) {\r\n    parentVm = this.$vm;\r\n  }\r\n\r\n  vueOptions.parent = parentVm;\r\n}\r\n\r\nfunction parseApp (vm) {\r\n  return parseBaseApp(vm, {\r\n    mocks,\r\n    initRefs\r\n  })\r\n}\r\n\r\nfunction createApp (vm) {\r\n  App(parseApp(vm));\r\n  return vm\r\n}\r\n\r\nfunction parseBaseComponent (vueComponentOptions, {\r\n  isPage,\r\n  initRelation\r\n} = {}) {\r\n  const [VueComponent, vueOptions] = initVueComponent(Vue, vueComponentOptions);\r\n\r\n  const options = {\r\n    multipleSlots: true,\r\n    addGlobalClass: true,\r\n    ...(vueOptions.options || {})\r\n  };\r\n\r\n  {\r\n    // 微信 multipleSlots 部分情况有 bug，导致内容顺序错乱 如 u-list，提供覆盖选项\r\n    if (vueOptions['mp-weixin'] && vueOptions['mp-weixin'].options) {\r\n      Object.assign(options, vueOptions['mp-weixin'].options);\r\n    }\r\n  }\r\n\r\n  const componentOptions = {\r\n    options,\r\n    data: initData(vueOptions, Vue.prototype),\r\n    behaviors: initBehaviors(vueOptions, initBehavior),\r\n    properties: initProperties(vueOptions.props, false, vueOptions.__file),\r\n    lifetimes: {\r\n      attached () {\r\n        const properties = this.properties;\r\n\r\n        const options = {\r\n          mpType: isPage.call(this) ? 'page' : 'component',\r\n          mpInstance: this,\r\n          propsData: properties\r\n        };\r\n\r\n        initVueIds(properties.vueId, this);\r\n\r\n        // 处理父子关系\r\n        initRelation.call(this, {\r\n          vuePid: this._$vuePid,\r\n          vueOptions: options\r\n        });\r\n\r\n        // 初始化 vue 实例\r\n        this.$vm = new VueComponent(options);\r\n\r\n        // 处理$slots,$scopedSlots（暂不支持动态变化$slots）\r\n        initSlots(this.$vm, properties.vueSlots);\r\n\r\n        // 触发首次 setData\r\n        this.$vm.$mount();\r\n      },\r\n      ready () {\r\n        // 当组件 props 默认值为 true，初始化时传入 false 会导致 created,ready 触发, 但 attached 不触发\r\n        // https://developers.weixin.qq.com/community/develop/doc/00066ae2844cc0f8eb883e2a557800\r\n        if (this.$vm) {\r\n          this.$vm._isMounted = true;\r\n          this.$vm.__call_hook('mounted');\r\n          this.$vm.__call_hook('onReady');\r\n        }\r\n      },\r\n      detached () {\r\n        this.$vm && this.$vm.$destroy();\r\n      }\r\n    },\r\n    pageLifetimes: {\r\n      show (args) {\r\n        this.$vm && this.$vm.__call_hook('onPageShow', args);\r\n      },\r\n      hide () {\r\n        this.$vm && this.$vm.__call_hook('onPageHide');\r\n      },\r\n      resize (size) {\r\n        this.$vm && this.$vm.__call_hook('onPageResize', size);\r\n      }\r\n    },\r\n    methods: {\r\n      __l: handleLink,\r\n      __e: handleEvent\r\n    }\r\n  };\r\n\r\n  if (Array.isArray(vueOptions.wxsCallMethods)) {\r\n    vueOptions.wxsCallMethods.forEach(callMethod => {\r\n      componentOptions.methods[callMethod] = function (args) {\r\n        return this.$vm[callMethod](args)\r\n      };\r\n    });\r\n  }\r\n\r\n  if (isPage) {\r\n    return componentOptions\r\n  }\r\n  return [componentOptions, VueComponent]\r\n}\r\n\r\nfunction parseComponent (vueComponentOptions) {\r\n  return parseBaseComponent(vueComponentOptions, {\r\n    isPage,\r\n    initRelation\r\n  })\r\n}\r\n\r\nconst hooks$1 = [\r\n  'onShow',\r\n  'onHide',\r\n  'onUnload'\r\n];\r\n\r\nhooks$1.push(...PAGE_EVENT_HOOKS);\r\n\r\nfunction parseBasePage (vuePageOptions, {\r\n  isPage,\r\n  initRelation\r\n}) {\r\n  const pageOptions = parseComponent(vuePageOptions);\r\n\r\n  initHooks(pageOptions.methods, hooks$1, vuePageOptions);\r\n\r\n  pageOptions.methods.onLoad = function (args) {\r\n    this.$vm.$mp.query = args; // 兼容 mpvue\r\n    this.$vm.__call_hook('onLoad', args);\r\n  };\r\n\r\n  return pageOptions\r\n}\r\n\r\nfunction parsePage (vuePageOptions) {\r\n  return parseBasePage(vuePageOptions, {\r\n    isPage,\r\n    initRelation\r\n  })\r\n}\r\n\r\nfunction createPage (vuePageOptions) {\r\n  {\r\n    return Component(parsePage(vuePageOptions))\r\n  }\r\n}\r\n\r\nfunction createComponent (vueOptions) {\r\n  {\r\n    return Component(parseComponent(vueOptions))\r\n  }\r\n}\r\n\r\ntodos.forEach(todoApi => {\r\n  protocols[todoApi] = false;\r\n});\r\n\r\ncanIUses.forEach(canIUseApi => {\r\n  const apiName = protocols[canIUseApi] && protocols[canIUseApi].name ? protocols[canIUseApi].name\r\n    : canIUseApi;\r\n  if (!wx.canIUse(apiName)) {\r\n    protocols[canIUseApi] = false;\r\n  }\r\n});\r\n\r\nlet uni = {};\r\n\r\nif (typeof Proxy !== 'undefined' && \"mp-weixin\" !== 'app-plus') {\r\n  uni = new Proxy({}, {\r\n    get (target, name) {\r\n      if (target[name]) {\r\n        return target[name]\r\n      }\r\n      if (baseApi[name]) {\r\n        return baseApi[name]\r\n      }\r\n      if (api[name]) {\r\n        return promisify(name, api[name])\r\n      }\r\n      {\r\n        if (extraApi[name]) {\r\n          return promisify(name, extraApi[name])\r\n        }\r\n        if (todoApis[name]) {\r\n          return promisify(name, todoApis[name])\r\n        }\r\n      }\r\n      if (eventApi[name]) {\r\n        return eventApi[name]\r\n      }\r\n      if (!hasOwn(wx, name) && !hasOwn(protocols, name)) {\r\n        return\r\n      }\r\n      return promisify(name, wrapper(name, wx[name]))\r\n    },\r\n    set (target, name, value) {\r\n      target[name] = value;\r\n      return true\r\n    }\r\n  });\r\n} else {\r\n  Object.keys(baseApi).forEach(name => {\r\n    uni[name] = baseApi[name];\r\n  });\r\n\r\n  {\r\n    Object.keys(todoApis).forEach(name => {\r\n      uni[name] = promisify(name, todoApis[name]);\r\n    });\r\n    Object.keys(extraApi).forEach(name => {\r\n      uni[name] = promisify(name, todoApis[name]);\r\n    });\r\n  }\r\n\r\n  Object.keys(eventApi).forEach(name => {\r\n    uni[name] = eventApi[name];\r\n  });\r\n\r\n  Object.keys(api).forEach(name => {\r\n    uni[name] = promisify(name, api[name]);\r\n  });\r\n\r\n  Object.keys(wx).forEach(name => {\r\n    if (hasOwn(wx, name) || hasOwn(protocols, name)) {\r\n      uni[name] = promisify(name, wrapper(name, wx[name]));\r\n    }\r\n  });\r\n}\r\n\r\nwx.createApp = createApp;\r\nwx.createPage = createPage;\r\nwx.createComponent = createComponent;\r\n\r\nvar uni$1 = uni;\r\n\r\nexport default uni$1;\r\nexport { createApp, createComponent, createPage };\r\n","/* globals __VUE_SSR_CONTEXT__ */\n\n// IMPORTANT: Do NOT use ES2015 features in this file (except for modules).\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nexport default function normalizeComponent (\n  scriptExports,\n  render,\n  staticRenderFns,\n  functionalTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier, /* server only */\n  shadowMode, /* vue-cli only */\n  components, // fixed by xxxxxx auto components\n  renderjs // fixed by xxxxxx renderjs\n) {\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // fixed by xxxxxx auto components\n  if (components) {\n    if (!options.components) {\n      options.components = {}\n    }\n    var hasOwn = Object.prototype.hasOwnProperty\n    for (var name in components) {\n      if (hasOwn.call(components, name) && !hasOwn.call(options.components, name)) {\n        options.components[name] = components[name]\n      }\n    }\n  }\n  // fixed by xxxxxx renderjs\n  if (renderjs) {\n    (renderjs.beforeCreate || (renderjs.beforeCreate = [])).unshift(function() {\n      this[renderjs.__module] = this\n    });\n    (options.mixins || (options.mixins = [])).push(renderjs)\n  }\n\n  // render functions\n  if (render) {\n    options.render = render\n    options.staticRenderFns = staticRenderFns\n    options._compiled = true\n  }\n\n  // functional template\n  if (functionalTemplate) {\n    options.functional = true\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = 'data-v-' + scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) { // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = shadowMode\n      ? function () { injectStyles.call(this, this.$root.$options.shadowRoot) }\n      : injectStyles\n  }\n\n  if (hook) {\n    if (options.functional) {\n      // for template-only hot-reload because in that case the render fn doesn't\n      // go through the normalizer\n      options._injectStyles = hook\n      // register for functioal component in vue file\n      var originalRender = options.render\n      options.render = function renderWithStyleInjection (h, context) {\n        hook.call(context)\n        return originalRender(h, context)\n      }\n    } else {\n      // inject component registration as beforeCreate hook\n      var existing = options.beforeCreate\n      options.beforeCreate = existing\n        ? [].concat(existing, hook)\n        : [hook]\n    }\n  }\n\n  return {\n    exports: scriptExports,\n    options: options\n  }\n}\n","/**\r\n * @file liveroom.js 直播模式房间管理sdk\r\n * @author binniexu\r\n */\r\nvar webim = require('./webim_wx.js');\r\nvar webimhandler = require('./webim_handler.js');\r\n\r\nvar app = getApp();  \r\n\r\n//移动直播（<mlvb-live-room>）使用此地址实现房间服务和连麦功能\r\nvar RoomServiceUrl = \"https://liveroom.qcloud.com/weapp/live_room/\",\r\n\r\n\theart = '',\t\t\t\t// 判断心跳变量\r\n\trequestSeq = 0,\t\t\t// 请求id\r\n\trequestTask = [],\t\t// 请求task\r\n\t// 用户信息\r\n\taccountInfo = {\r\n\t\tuserID: '',\t\t\t// 用户ID\r\n\t\tuserName: '',\t\t// 用户昵称\r\n\t\tuserAvatar: '',\t\t// 用户头像URL\r\n\t\tuserSig: '',\t\t// IM登录凭证\r\n\t\tsdkAppID: '',\t\t// IM应用ID\r\n\t\taccountType: '',\t// 账号集成类型\r\n\t\taccountMode: 0,\t\t//帐号模式，0-表示独立模式，1-表示托管模式\r\n\t\ttoken: ''\t\t\t//登录RoomService后使用的票据\r\n\t},\r\n\t// 房间信息\r\n\troomInfo = {\r\n\t\troomID: '',\t\t\t// 视频位房间ID\r\n\t\troomInfo: '',\t\t// 房间名称\r\n\t\tmixedPlayURL: '', \t// 混流地址\r\n\t\tisCreator: false,\t// 是否为创建者\r\n\t\tpushers: [],\t\t// 当前用户信息\r\n\t\tisLoginIM: false,\t// 是否登录IM\r\n\t\tisJoinGroup: false,\t// 是否加入群\r\n\t\tisDestory: false,\t// 是否已解散\r\n\t\thasJoinAnchor: false,\r\n\t\troomStatusCode: 0\r\n\t},\r\n\t// 事件\r\n\tevent = {\r\n    \t\tonAnchorEnter: function () {},\t\t\t// 进房通知\r\n    \t\tonAnchorExit: function () {},\t\t\t// 退房通知\r\n    \t\tonRoomDestroy: function() {},\t\t\t// 群解散通知\r\n        onRecvRoomTextMsg: function() {},\t\t// 消息通知\r\n    \t\tonRequestJoinAnchor: function() {}, //大主播收到小主播连麦请求通知\r\n    \t\tonKickoutJoinAnchor: function() {}, //小主播被踢通知\r\n        onRecvRoomCustomMsg: function() {}, //自定义消息通知\r\n\t\t\t\tonSketchpadData: function(){}\r\n\t};\r\n// 随机昵称\r\nvar userName = ['林静晓', '陆杨', '江辰', '付小司', '陈小希', '吴柏松', '肖奈', '芦苇微微', '一笑奈何', '立夏'];\r\n// 请求数\r\nvar requestNum = 0;\r\nvar requestJoinCallback = null;\r\nvar bigAnchorStreamID = '';\r\nvar bigAnchorWidth = 360;\r\nvar bigAnchorHeight = 640;\r\nvar gTimeoutID = null;\r\nvar mTimeDiff = 0;\r\n\r\n/**\r\n * [request 封装request请求]\r\n * @param {options}\r\n *   url: 请求接口url\r\n *   data: 请求参数\r\n *   success: 成功回调\r\n *   fail: 失败回调\r\n *   complete: 完成回调\r\n */\r\nfunction request(options) {\r\n\trequestNum++;\r\n\t\r\n\taccountInfo = app.globalData.accountInfo\r\n\t\r\n\trequestTask[requestSeq++] = wx.request({\r\n    url: RoomServiceUrl + options.url + (options.params?('?' + formatParams(options.params) + '&'):'?') + 'userID=' + accountInfo.userID + (accountInfo.token?'&token=' + accountInfo.token:\"\"),\r\n\t\tdata: options.data || {},\r\n\t\tmethod: 'POST',\r\n\t\theader: {\r\n\t\t\t'content-type': 'application/json' // 默认值\r\n\t\t},\r\n\t\t// dataType: 'json',\r\n\t\tsuccess: options.success || function() {},\r\n\t\tfail: options.fail || function() {},\r\n\t\tcomplete: options.complete || function() {\r\n\t\t\trequestNum--;\r\n\t\t\t// console.log('complete requestNum: ',requestNum);\r\n\t\t}\r\n\t});\r\n}\r\n\r\n//url encode编码\r\nfunction formatParams(data) {\r\n\tvar arr = [];\r\n\tfor (var name in data) {\r\n\t\tarr.push(encodeURIComponent(name) + \"=\" + encodeURIComponent(data[name]));\r\n\t}\r\n\treturn arr.join(\"&\");\r\n}\r\n\r\n/**\r\n * [login 初始化登录信息]\r\n * @param {options}\r\n *   data: {\r\n *    userID: 用户ID\r\n *    userSig: 用户sig\r\n *    sdkAppID: IM应用ID\r\n *    userName: 用户昵称\r\n *    userAvatar: 用户头像地址\r\n *   }\r\n *   success: 成功回调\r\n *   fail: 失败回调\r\n *\r\n * @return success\r\n *   userName: 用户昵称\r\n */\r\nfunction login(options) {\r\n  if (!options || !options.data.sdkAppID || !options.data.userID || !options.data.userSig) {\r\n\t\tconsole.log('init参数错误',options);\r\n\t\toptions.fail && options.fail({\r\n\t\t\terrCode: -9,\r\n\t\t\terrMsg: 'init参数错误'\r\n\t\t});\r\n\t\treturn;\r\n\t}\r\n\taccountInfo.userID = options.data.userID;\r\n\taccountInfo.userSig = options.data.userSig;\r\n\taccountInfo.sdkAppID = options.data.sdkAppID;\r\n\taccountInfo.userName = options.data.userName || userName[Math.floor(Math.random()*10)] || accountInfo.userID;\r\n\taccountInfo.userAvatar = options.data.userAvatar || '123';\r\n\r\n\tapp.globalData.accountInfo = accountInfo\r\n\r\n\trequest({\r\n\t\turl: 'login',\r\n\t\tparams: {\r\n\t\t\taccountType: '0',\r\n\t\t\tsdkAppID: accountInfo.sdkAppID,\r\n\t\t\tuserSig: accountInfo.userSig,\r\n\t\t\tplatform: \"WeChat\"\r\n\t\t},\r\n\t\tdata: {},\r\n\t\tsuccess: function(ret) {\r\n\t\t\tif (ret.data.code) {\r\n\t\t\t\tconsole.error(\"登录到RoomService后台失败:\", JSON.stringify(ret));\r\n\t\t\t\toptions.fail && options.fail({\r\n\t\t\t\t\terrCode: ret.data.code,\r\n\t\t\t\t\terrMsg: ret.data.message\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\taccountInfo.token = ret.data.token;\r\n\t\t\taccountInfo.userID = ret.data.userID;\r\n\t\t\t\r\n\t\t\tapp.globalData.accountInfo = accountInfo\r\n\t\t\t\r\n\t\t\t\r\n      mTimeDiff = Math.round(Date.now()) - ret.data.timestamp;\r\n\t\t\t// 登录IM\r\n\t        loginIM({\r\n\t        \tsuccess: function(ret) {\r\n\t\t\t\t\toptions.success && options.success({\r\n\t\t\t\t\t\tuserID: accountInfo.userID,\r\n\t\t\t\t\t\tuserName: accountInfo.userName\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t        \tfail: function(ret) {\r\n\t\t\t\t\tconsole.error(\"IM登录失败:\", JSON.stringify(ret));\r\n\t\t\t\t\toptions.fail && options.fail({\r\n\t\t\t\t\t\terrCode: -999,\r\n\t\t\t\t\t\terrMsg: \"IM登录失败\"\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t        });\r\n\t\t},\r\n\t\tfail: function(ret) {\r\n\t\t\tconsole.error(\"登录到RoomService后台失败:\", JSON.stringify(ret));\r\n\t\t\toptions.fail && options.fail(ret);\r\n\t\t}\r\n\t});\r\n}\r\n\r\n/**\r\n * [logout 结束初始化信息]\r\n */\r\nfunction logout() {\r\n\trequest({\r\n\t\turl: \"logout\",\r\n\t\tsuccess: function(ret){},\r\n\t\tfail: function(ret){}\r\n\t});\r\n\taccountInfo.userID = '';\r\n\taccountInfo.userSig = '';\r\n\taccountInfo.sdkAppID = '';\r\n\taccountInfo.userName = '';\r\n\taccountInfo.userAvatar = '';\r\n\taccountInfo.token = '';\r\n\t// 退出IM登录\r\n\twebimhandler.logout();\r\n}\r\n\r\n/**\r\n * [loginIM 登录IM]\r\n * @param {options}\r\n *   data: {\r\n *   \troomID: 房间ID\r\n *   }\r\n *   success: 成功回调\r\n *   fail: 失败回调\r\n */\r\nfunction loginIM(options) {\r\n\t// 初始化设置参数\r\n\twebimhandler.init({\r\n\t\taccountMode: accountInfo.accountMode,\r\n\t\taccountType: '0',\r\n\t\tsdkAppID: accountInfo.sdkAppID,\r\n\t\tavChatRoomId: options.roomID || 0,\r\n\t\tselType: webim.SESSION_TYPE.GROUP,\r\n\t\tselToID: options.roomID || 0,\r\n\t\tselSess: null //当前聊天会话\r\n\t});\r\n\t//当前用户身份\r\n\tvar loginInfo = {\r\n\t\t'sdkAppID': accountInfo.sdkAppID, //用户所属应用id,必填\r\n\t\t'appIDAt3rd': accountInfo.sdkAppID, //用户所属应用id，必填\r\n\t\t'accountType': \"0\", //用户所属应用帐号类型，填0\r\n\t\t'identifier': accountInfo.userID, //当前用户ID,必须是否字符串类型，选填\r\n\t\t'identifierNick': accountInfo.userID, //当前用户昵称，选填\r\n\t\t'userSig': accountInfo.userSig, //当前用户身份凭证，必须是字符串类型，选填\r\n\t};\r\n\t//监听（多终端同步）群系统消息方法，方法都定义在demo_group_notice.js文件中\r\n\tvar onGroupSystemNotifys = {\r\n\t\t// 群被解散(全员接收)\r\n\t\t\"5\": function (notify) {\r\n\t\t\troomInfo.isDestory = true;\r\n\t\t\t\r\n\t\t\tapp.globalData.roomInfo.isDestory = roomInfo.isDestory\r\n\t\t\t\r\n\t\t\tevent.onRoomDestroy = app.globalData.event.onRoomDestroy\r\n\t\t\tevent.onRoomDestroy();\r\n\t\t},\r\n\t\t\"11\": webimhandler.onRevokeGroupNotify, //群已被回收(全员接收)\r\n\t\t// 用户自定义通知(默认全员接收)\r\n\t\t\"255\": function (notify) {\r\n\t\t\t// console.error('收到系统通知：', notify.UserDefinedField);\r\n\t\t\t// var content = JSON.parse(notify.UserDefinedField);\r\n\t\t\t// if (content && content.cmd == 'notifyPusherChange') {\r\n\t\t\t// \tmergeAnchors();\r\n\t\t\t// }\r\n\t\t}\r\n\t};\r\n\r\n\t//监听连接状态回调变化事件\r\n\tvar onConnNotify = function (resp) {\r\n\t\tswitch (resp.ErrorCode) {\r\n\t\t\tcase webim.CONNECTION_STATUS.ON:\r\n\t\t\t\t//webim.Log.warn('连接状态正常...');\r\n\t\t\t\tbreak;\r\n\t\t\tcase webim.CONNECTION_STATUS.OFF:\r\n\t\t\t\twebim.Log.warn('连接已断开，无法收到新消息，请检查下你的网络是否正常');\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\twebim.Log.error('未知连接状态,status=' + resp.ErrorCode);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\t//监听事件\r\n\tvar listeners = {\r\n\t\t\"onConnNotify\": webimhandler.onConnNotify, //选填\r\n\t\t\"onBigGroupMsgNotify\": function (msg) {\r\n            webimhandler.onBigGroupMsgNotify(msg, function (msgs) {\r\n                receiveMsg(msgs);\r\n            }, function (datas) {\r\n                //收到白板数据\r\n                console.log(\"LiveRoom callback --> 收到白板数据\")\r\n\t\t\t\t\r\n                onSketchpadData(datas);\r\n            })\r\n\t\t\t// webimhandler.onBigGroupMsgNotify(msg, function (msgs) {\r\n\t\t\t// \treceiveMsg(msgs);\r\n\t\t\t// })\r\n\t\t}, //监听新消息(大群)事件，必填\r\n\t\t\"onMsgNotify\": function (newMsgList) { //监听新消息(私聊(包括普通消息和全员推送消息)，普通群(非直播聊天室)消息)事件，必填\r\n\t\t\twebimhandler.onMsgNotify(newMsgList, function(msg) {\r\n\t\t\t\trecvC2CMsg(msg);\r\n\t\t\t});\r\n\t\t},\r\n\t\t\"onGroupSystemNotifys\": onGroupSystemNotifys, //监听（多终端同步）群系统消息事件，必填\r\n\t\t\"onGroupInfoChangeNotify\": webimhandler.onGroupInfoChangeNotify,\r\n\t\t// 'onKickedEventCall': self.onKickedEventCall // 踢人操作\r\n\t};\r\n\r\n\t//其他对象，选填\r\n\tvar others = {\r\n\t\t'isAccessFormalEnv': true, //是否访问正式环境，默认访问正式，选填\r\n\t\t'isLogOn': false //是否开启控制台打印日志,默认开启，选填\r\n\t};\r\n\r\n\tif (accountInfo.accountMode == 1) { //托管模式\r\n\t\twebimhandler.sdkLogin(loginInfo, listeners, others, 0, afterLoginIM, options);\r\n\t} else { //独立模式\r\n\t\t//sdk登录\r\n\t\twebimhandler.sdkLogin(loginInfo, listeners, others, 0, afterLoginIM, options);\r\n\t}\r\n}\r\nfunction afterLoginIM(options) {\r\n\tif (options.errCode) {\r\n\t\t// webim登录失败\r\n\t\tconsole.log('webim登录失败:', options);\r\n\t\toptions.callback.fail && options.callback.fail({\r\n\t\t\terrCode: -2,\r\n\t\t\terrMsg: 'IM登录失败，如果你是在配置线上环境，请将IM域名[https://webim.tim.qq.com]配置到小程序request合法域名'\r\n\t\t});\r\n\t\treturn;\r\n\t}\r\n\t// webim登录成功\r\n\tconsole.log('webim登录成功');\r\n\troomInfo.isLoginIM = true;\r\n\t\r\n\tapp.globalData.roomInfo.isLoginIM = roomInfo.isLoginIM\r\n\t\r\n\toptions.callback.success && options.callback.success({\r\n\t\tuserName: accountInfo.userName\r\n\t});\r\n}\r\nfunction afterJoinBigGroup(options) {\r\n\tif (options.errCode && options.errCode != 10025) {\r\n\t\tconsole.log('webim进群失败: ', options);\r\n\t\toptions.callback.fail && options.callback.fail({\r\n\t\t\terrCode: -2,\r\n\t\t\terrMsg: 'IM进群失败'\r\n\t\t});\r\n\t\treturn;\r\n\t}\r\n\troomInfo.isJoinGroup = true;\r\n\t\r\n\tapp.globalData.roomInfo.isJoinGroup = roomInfo.isJoinGroup\r\n\t\r\n\tconsole.log('进入IM房间成功: ', roomInfo.roomID);\r\n  options.callback.success && options.callback.success({});\r\n}\r\n\r\nfunction onSketchpadData(data){\r\n\t\r\n\tevent.onSketchpadData = app.globalData.event.onSketchpadData \r\n    event.onSketchpadData(data);\r\n}\r\n\r\n/**\r\n * [receiveMsg 接收消息处理]\r\n * @param {options}\r\n *\r\n * @return event.onRecvRoomTextMsg\r\n *   roomID: 房间ID\r\n *   userID: 用户ID\r\n *   nickName: 用户昵称\r\n *   headPic: 用户头像\r\n *   textMsg: 文本消息\r\n *   time: 消息时间\r\n */\r\nfunction receiveMsg(msg) {\r\n\tif (!msg.content) {  return; }\r\n\tconsole.log('IM消息: ',JSON.stringify(msg));\r\n\tvar time = new Date();\r\n\tvar h = time.getHours()+'', m = time.getMinutes()+'', s = time.getSeconds()+'';\r\n\th.length == 1 ? (h='0'+h) : '';\r\n\tm.length == 1 ? (m='0'+m) : '';\r\n\ts.length == 1 ? (s='0'+s) : '';\r\n\ttime = h + ':' + m + ':' + s;\r\n\tmsg.time = time;\r\n\r\n\tif(msg.fromAccountNick == '@TIM#SYSTEM') {\r\n\t\tmsg.fromAccountNick = '';\r\n\t\tmsg.content = msg.content.split(';');\r\n\t\tmsg.content = msg.content[0];\r\n\t\t\r\n\t\t\r\n\t\troomInfo.roomID = app.globalData.roomInfo.roomID \r\n\t\t\r\n\t\t\r\n\t\tevent.onRecvRoomTextMsg = app.globalData.event.onRecvRoomTextMsg \r\n\t\t\r\n\t\tevent.onRecvRoomTextMsg && event.onRecvRoomTextMsg({\r\n\t\t\troomID: roomInfo.roomID,\r\n\t\t\tuserID: msg.fromAccountNick,\r\n\t\t\tuserName: msg.userName,\r\n\t\t\tuserAvatar: msg.userAvatar,\r\n\t\t\tmessage: msg.content,\r\n\t\t\ttime: msg.time\r\n\t\t});\r\n\t} else {\r\n\t\tvar contentObj,newContent;\r\n\t\ttry {\r\n      newContent = msg.content.split('}}');\r\n      contentObj = JSON.parse(newContent[0] + '}}');\r\n\t\t} catch (e) {\r\n\t\t\tconsole.warn(\"IM消息解析异常，重新按json格式解析\");\r\n      newContent = new Array(1);\r\n      newContent[0] = msg.content;\r\n      contentObj = JSON.parse(msg.content);\r\n\t\t}\r\n\t\tif(contentObj.cmd == 'CustomTextMsg') {\r\n\t\t\tmsg.userName = contentObj.data.nickName;\r\n\t\t\tmsg.userAvatar = contentObj.data.headPic;\r\n\t\t\tvar content = '';\r\n\t\t\tfor(var i = 1; i < newContent.length; i++) {\r\n\t\t\t\tif(i == newContent.length - 1)\r\n\t\t\t\t\tcontent += newContent[i];\r\n\t\t\t\telse content += newContent[i] + '}}';\r\n\t\t\t}\r\n\t\t\tmsg.content = content;\r\n\t\t\t\r\n\t\t\t\r\n\t\t\troomInfo.roomID = app.globalData.roomInfo.roomID \r\n\t\t\t\r\n\t\t\tevent.onRecvRoomTextMsg = app.globalData.event.onRecvRoomTextMsg \r\n\t\t\tevent.onRecvRoomTextMsg && event.onRecvRoomTextMsg({\r\n\t\t\t\troomID: roomInfo.roomID,\r\n\t\t\t\tuserID: msg.fromAccountNick,\r\n\t\t\t\tuserName: msg.userName,\r\n\t\t\t\tuserAvatar: msg.userAvatar,\r\n\t\t\t\tmessage: msg.content,\r\n\t\t\t\ttime: msg.time\r\n\t\t\t});\r\n\t\t} else if (contentObj.cmd == 'CustomCmdMsg') {\r\n\t\t\tmsg.userName = contentObj.data.nickName;\r\n\t\t\tmsg.userAvatar = contentObj.data.headPic;\r\n\t\t\tmsg.cmd = contentObj.data.cmd;\r\n\t\t\tvar content = '';\r\n\t\t\tfor(var i = 1; i < newContent.length; i++) {\r\n\t\t\t\tif(i == newContent.length - 1)\r\n\t\t\t\t\tcontent += newContent[i];\r\n\t\t\t\telse content += newContent[i] + '}}';\r\n\t\t\t}\r\n\t\t\tmsg.content = content;\r\n\t\t\t\r\n\t\t\t\r\n\t\t\troomInfo.roomID = app.globalData.roomInfo.roomID \r\n\t\t\t\r\n\t\t\tevent.onRecvRoomCustomMsg = app.globalData.event.onRecvRoomCustomMsg \r\n\t\t\tevent.onRecvRoomCustomMsg && event.onRecvRoomCustomMsg({\r\n\t\t\t\troomID: roomInfo.roomID,\r\n\t\t\t\tuserID: msg.fromAccountNick,\r\n\t\t\t\tuserName: msg.userName,\r\n\t\t\t\tuserAvatar: msg.userAvatar,\r\n\t\t\t\tcmd: msg.cmd,\r\n\t\t\t\tmessage: msg.content,\r\n\t\t\t\ttime: msg.time\r\n\t\t\t});\r\n\t\t} else if (contentObj.cmd == 'notifyPusherChange') {\r\n      mergeAnchors();\r\n\t\t}\r\n\t}\r\n\r\n};\r\n\r\nfunction recvC2CMsg(msg) {\r\n\tconsole.log(\"收到C2C消息:\", JSON.stringify(msg));\r\n\tvar contentObj = JSON.parse(msg.content);\r\n\tif (contentObj) {\r\n\t\t\r\n\t\trequestJoinCallback = app.globalData.requestJoinCallback\r\n\t\t\r\n\t\t\r\n\t\tif (contentObj.cmd == 'linkmic') {\r\n\t\t\tif (contentObj.data.type && contentObj.data.type == 'request') {\r\n\t\t\t\t\r\n\t\t\t\tevent.onRequestJoinAnchor = app.globalData.event.onRequestJoinAnchor \r\n\t\t\t\t\r\n\t\t\t\tevent.onRequestJoinAnchor({\r\n\t\t\t\t\tuserID: msg.fromAccountNick,\r\n\t\t\t\t\tuserName: contentObj.data.userName,\r\n\t\t\t\t\tuserAvatar: contentObj.data.userAvatar\r\n\t\t\t\t})\r\n\t\t\t} else if (contentObj.data.type && contentObj.data.type == 'response') {\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tif (contentObj.data.result == 'accept') {\r\n\t\t\t\t\trequestJoinCallback && requestJoinCallback({\r\n\t\t\t\t\t\terrCode: 0,\r\n\t\t\t\t\t\terrMsg: ''\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (contentObj.data.result == 'reject') {\r\n\t\t\t\t\trequestJoinCallback && requestJoinCallback({\r\n\t\t\t\t\t\terrCode: -999,\r\n\t\t\t\t\t\terrMsg: '主播拒绝了你的请求'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else if (contentObj.data.type && contentObj.data.type == 'kickout') {\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tevent.onKickoutJoinAnchor = app.globalData.event.onKickoutJoinAnchor \r\n\t\t\t\t\r\n\t\t\t\tevent.onKickoutJoinAnchor && event.onKickoutJoinAnchor({\r\n\t\t\t\t\troomID: contentObj.data.roomID\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction notifyPusherChange() {\r\n\tvar customMsg = {\r\n\t\tcmd: \"notifyPusherChange\",\r\n\t\tdata: {}\r\n\t}\r\n\tvar strCustomMsg = JSON.stringify(customMsg);\r\n\twebimhandler.sendCustomMsg({data:strCustomMsg, text:\"notify\"}, null)\r\n}\r\n\r\nfunction mergeAnchors() {\r\n\t\r\n\troomInfo.hasJoinAnchor = app.globalData.roomInfo.hasJoinAnchor \r\n\t\r\n\tif (!roomInfo.hasJoinAnchor) {\r\n\t\treturn;\r\n\t}\r\n\t\r\n\troomInfo.roomID = app.globalData.roomInfo.roomID \r\n\t\r\n  getAnchors({\r\n        data: {\r\n            roomID: roomInfo.roomID\r\n        },\r\n\t\tsuccess: function(ret) {\r\n\t\t\tret = ret.data;\r\n\r\n\t\t\tinnerMergerAnchors(ret)\r\n\t\t},\r\n\t\tfail: function(ret) {\r\n\t\t\t// event.onRoomDestroy && event.onRoomDestroy({\r\n\t\t\t// \terrCode: ret.errCode,\r\n\t\t\t// \terrMsg: ret.errMsg\r\n\t\t\t// });\r\n\t\t}\r\n\t});\r\n};\r\n\r\nfunction innerMergerAnchors(data) {\r\n  /**\r\n   * enterPushers：新进推流人员信息\r\n   * leavePushers：退出推流人员信息\r\n   * ishave：用于判断去重操作\r\n   */\r\n  var enterPushers = [],leavePushers = [],ishave = 0;\r\n  console.log('去重操作');\r\n  \r\n  \r\n  roomInfo.pushers = app.globalData.roomInfo.pushers \r\n  \r\n  console.log('旧', JSON.stringify(roomInfo.pushers));\r\n  console.log('新',JSON.stringify(data.pushers));\r\n  console.log('用户信息:', JSON.stringify(accountInfo));\r\n  data.pushers && data.pushers.forEach(function(val1){\r\n    ishave = 0;\r\n    roomInfo.pushers && roomInfo.pushers.forEach(function(val2) {\r\n      if(val1.userID == val2.userID) {\r\n        ishave = 1;\r\n      }\r\n    });\r\n    if(!ishave && val1.userID != accountInfo.userID)\r\n      enterPushers.push(val1);\r\n    ishave = 0;\r\n  });\r\n  roomInfo.pushers && roomInfo.pushers.forEach(function(val1) {\r\n    ishave = 0;\r\n    data.pushers && data.pushers.forEach(function(val2) {\r\n      if(val1.userID == val2.userID) {\r\n        ishave = 1;\r\n      }\r\n    });\r\n    if(!ishave)\r\n      leavePushers.push(val1);\r\n    ishave = 0;\r\n  });\r\n  if (data.roomStatusCode) {\r\n    roomInfo.roomStatusCode = data.roomStatusCode\r\n\t\r\n\tapp.globalData.roomInfo.roomStatusCode = roomInfo.roomStatusCode\r\n\t\r\n\t\r\n\t}\r\n  // 重置roomInfo.pushers\r\n  roomInfo.pushers = data.pushers;\r\n  \r\n  app.globalData.roomInfo.pushers = roomInfo.pushers\r\n  \r\n  // 通知有人进入房间\r\n  if(enterPushers.length) {\r\n    console.log('进房:', JSON.stringify(enterPushers));\r\n\t\r\n\tevent.onAnchorEnter = app.globalData.event.onAnchorEnter\r\n\t\r\n    event.onAnchorEnter && event.onAnchorEnter({\r\n      pushers: enterPushers\r\n    });\r\n    //混流\r\n    mergeStream(1);\r\n  }\r\n  // 通知有人退出房间\r\n  if(leavePushers.length) {\r\n    console.log('退房:', JSON.stringify(leavePushers));\r\n\t\r\n\t\r\n\tevent.onAnchorExit = app.globalData.event.onAnchorExit\r\n\t\r\n    event.onAnchorExit && event.onAnchorExit({\r\n      pushers: leavePushers\r\n    });\r\n    //混流\r\n    mergeStream(1);\r\n  }\r\n}\r\n\r\n\r\nfunction getAnchors(object) {\r\n\tvar data = {};\r\n\t\r\n\t\r\n\troomInfo.roomID = app.globalData.roomInfo.roomID\r\n\t\r\n\tif (object.data && object.data.roomID) {\r\n\t\tdata.roomID = object.data.roomID;\r\n\t} else if (roomInfo.roomID) {\r\n\t\tdata.roomID = roomInfo.roomID;\r\n\t} else {\r\n\t\tobject.fail && object.fail({\r\n\t\t\terrCode: -999,\r\n\t\t\terrMsg: '无roomID'\r\n\t\t})\r\n\t\treturn;\r\n\t}\r\n    //获取房间信息\r\n    request({\r\n        url: 'get_anchors',\r\n        data: data,\r\n        success: function (ret) {\r\n            if (ret.data.code) {\r\n                console.log('请求CGI:get_anchors失败', ret);\r\n                object.fail && object.fail({errCode: ret.data.code, errMsg: '请求CGI:get_anchors失败:' + ret.data.message +  + '[' + ret.data.code + ']'});\r\n                return;\r\n            }\r\n            console.log(\"房间信息：\", JSON.stringify(ret));\r\n            object.success && object.success(ret);\r\n        },\r\n        fail: object.fail\r\n    });\r\n}\r\n\r\n/**\r\n * [sendRoomTextMsg 发送文本消息]\r\n * @param {options}\r\n *   data: {\r\n *   \tmsg: 文本消息\r\n *   }\r\n */\r\nfunction sendRoomTextMsg(options) {\r\n\tif (!options || !options.data.msg || !options.data.msg.replace(/^\\s*|\\s*$/g, '')) {\r\n\t\tconsole.log('sendRoomTextMsg参数错误',options);\r\n\t\toptions.fail && options.fail({\r\n\t\t\terrCode: -9,\r\n\t\t\terrMsg: 'sendRoomTextMsg参数错误'\r\n\t\t});\r\n\t\treturn;\r\n\t}\r\n\taccountInfo.userName = app.globalData.accountInfo.userName\r\n\taccountInfo.userAvatar = app.globalData.accountInfo.userAvatar\r\n\t\r\n\twebimhandler.sendCustomMsg({\r\n\t\tdata: '{\"cmd\":\"CustomTextMsg\",\"data\":{\"nickName\":\"'+accountInfo.userName+'\",\"headPic\":\"'+accountInfo.userAvatar+'\"}}',\r\n\t\ttext: options.data.msg\r\n\t},function() {\r\n\t\toptions.success && options.success();\r\n\t});\r\n}\r\n\r\n/**\r\n * [pusherHeartBeat 推流者心跳]\r\n * @param {options}\r\n */\r\nfunction pusherHeartBeat(options) {\r\n\tif (options) {\r\n\t\tsetTimeout(function () {\r\n\t\t\tproto_pusherHeartBeat();\r\n\t\t}, 3000);\r\n\t}\r\n\tif (heart) {\r\n\t\tsetTimeout(function () {\r\n\t\t\tproto_pusherHeartBeat();\r\n\t\t\tpusherHeartBeat();\r\n\t\t}, 7000);\r\n\t}\r\n}\r\nfunction proto_pusherHeartBeat() {\r\n\tconsole.log('心跳请求');\r\n\t\r\n\t\r\n\troomInfo.roomID = app.globalData.roomInfo.roomID\r\n\troomInfo.roomStatusCode = app.globalData.roomInfo.roomStatusCode\r\n\t\r\n\trequest({\r\n\t\turl: 'anchor_heartbeat',\r\n\t\tdata: {\r\n\t\t\troomID: roomInfo.roomID,\r\n\t\t\tuserID: accountInfo.userID,\r\n\t\t\troomStatusCode: roomInfo.roomStatusCode\r\n\t\t},\r\n\t\tsuccess: function (ret) {\r\n\t\t\tif (ret.data.code) {\r\n\t\t\t\tconsole.log('心跳失败：', ret);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (ret.data.pushers) {\r\n        innerMergerAnchors(ret.data);\r\n\t\t\t}\r\n\t\t\tconsole.log('心跳成功', ret);\r\n\t\t},\r\n\t\tfail: function (ret) {\r\n\t\t\tconsole.log('心跳失败：', ret);\r\n\t\t}\r\n\t});\r\n}\r\n\r\n/**\r\n * [stopPusherHeartBeat 停止推流者心跳]\r\n * @param {options}\r\n */\r\nfunction stopPusherHeartBeat() {\r\n\theart = false;\r\n}\r\n\r\n/**\r\n * [getRoomList 获取房间列表]\r\n * @param {options}\r\n *   data: {\r\n *   \tindex: 获取的房间开始索引，从0开始计算\r\n *   \tcnt: 获取的房间个数\r\n *   }\r\n *   success: 成功回调\r\n *   fail: 失败回调\r\n *\r\n * @return success\r\n *   rooms: 房间列表信息\r\n */\r\nfunction getRoomList(options) {\r\n\tif (!options) {\r\n\t\tconsole.log('getRoomList参数错误',options);\r\n\t\toptions.fail && options.fail({\r\n\t\t\terrCode: -9,\r\n\t\t\terrMsg: 'getRoomList参数错误'\r\n\t\t});\r\n\t\treturn;\r\n\t}\r\n\trequest({\r\n\t\turl: 'get_room_list',\r\n\t\tdata: {\r\n\t\t\tindex: options.data.index || 0,\r\n\t\t\tcnt: options.data.cnt || 20\r\n\t\t},\r\n\t\tsuccess: function (ret) {\r\n\t\t\tif (ret.data.code) {\r\n\t\t\t\tconsole.error('获取房间列表失败: ', ret);\r\n\t\t\t\toptions.fail && options.fail({\r\n\t\t\t\t\terrCode: ret.data.code,\r\n\t\t\t\t\terrMsg: ret.data.message + '[' + ret.data.code + ']'\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconsole.log(\"房间列表信息:\", ret);\r\n\t\t\toptions.success && options.success({\r\n\t\t\t\trooms: ret.data.rooms\r\n\t\t\t});\r\n\t\t},\r\n\t\tfail: function (ret) {\r\n\t\t\tconsole.log('获取房间列表失败: ', ret);\r\n\t\t\tif(ret.errMsg == 'request:fail timeout') {\r\n\t\t\t\tvar errCode = -1;\r\n\t\t\t\tvar errMsg = '网络请求超时，请检查网络状态';\r\n\t\t\t}\r\n\t\t\toptions.fail && options.fail({\r\n\t\t\t\terrCode: errCode || -1,\r\n\t\t\t\terrMsg: errMsg || '获取房间列表失败'\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n}\r\n\r\n\r\n/**\r\n * [getPushURL 获取推流地址]\r\n * @param {options}\r\n *   success: 成功回调\r\n *   fail: 失败回调\r\n *\r\n * @return success\r\n *   pushURL: 推流地址\r\n */\r\nfunction getPushURL(options) {\r\n\tif (!options) {\r\n\t\tconsole.log('getPushURL参数错误',options);\r\n\t\toptions.fail && options.fail({\r\n\t\t\terrCode: -9,\r\n\t\t\terrMsg: 'getPushURL参数错误'\r\n\t\t});\r\n\t\treturn;\r\n\t}\r\n\trequest({\r\n\t\turl: 'get_anchor_url',\r\n\t\tdata: {\r\n\t\t\tuserID: accountInfo.userID\r\n\t\t},\r\n\t\tsuccess: function (ret) {\r\n\t\t\tif (ret.data.code) {\r\n\t\t\t\tconsole.log('获取推流地址失败: ', ret);\r\n\t\t\t\toptions.fail && options.fail({\r\n\t\t\t\t\terrCode: ret.data.code,\r\n\t\t\t\t\terrMsg: ret.data.message + '[' + ret.data.code + ']'\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconsole.log('获取推流地址成功：', ret.data.pushURL);\r\n\t\t\toptions.success && options.success({\r\n\t\t\t\tpushURL: ret.data.pushURL\r\n\t\t\t});\r\n\t\t},\r\n\t\tfail: function (ret) {\r\n\t\t\tif(ret.errMsg == 'request:fail timeout') {\r\n\t\t\t\tvar errCode = -1;\r\n\t\t\t\tvar errMsg = '网络请求超时，请检查网络状态';\r\n\t\t\t}\r\n\t\t\toptions.fail && options.fail({\r\n\t\t\t\terrCode: errCode || -1,\r\n\t\t\t\terrMsg: errMsg || '获取推流地址失败'\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n};\r\n\r\n\r\n/**\r\n * [setListener 设置监听事件]\r\n * @param {options}\r\n *   onRoomDestroy: 群解散通知\r\n *   onRecvRoomTextMsg: 消息通知\r\n */\r\nfunction setListener(options) {\t\r\n\tif (!options) { console.log('setListener参数错误',options); return; }\r\n\t\r\n\t\t// app.globalData.event = options\r\n\t\r\n        event.onAnchorEnter = options.onAnchorEnter || function () {};\r\n        event.onAnchorExit = options.onAnchorExit || function () {};\r\n        event.onRoomDestroy = options.onRoomDestroy || function () {};\r\n        event.onRecvRoomTextMsg = options.onRecvRoomTextMsg || function () {};\r\n        event.onRequestJoinAnchor = options.onRequestJoinAnchor || function () {};\r\n        event.onKickoutJoinAnchor = options.onKickoutJoinAnchor || function () {};\r\n        event.onRecvRoomCustomMsg = options.onRecvRoomCustomMsg || function () {};\r\n\t\tevent.onSketchpadData = options.onSketchpadData || function(){};\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\tapp.globalData.event.onAnchorEnter = options.onAnchorEnter || function () {};\r\n\t\tapp.globalData.event.onAnchorExit = options.onAnchorExit || function () {};\r\n\t\tapp.globalData.event.onRoomDestroy = options.onRoomDestroy || function () {};\r\n\t\tapp.globalData.event.onRecvRoomTextMsg = options.onRecvRoomTextMsg || function () {};\r\n\t\tapp.globalData.event.onRequestJoinAnchor = options.onRequestJoinAnchor || function () {};\r\n\t\tapp.globalData.event.onKickoutJoinAnchor = options.onKickoutJoinAnchor || function () {};\r\n\t\tapp.globalData.event.onRecvRoomCustomMsg = options.onRecvRoomCustomMsg || function () {};\r\n\t\tapp.globalData.event.onSketchpadData = options.onSketchpadData || function(){};\r\n\t\t\r\n\t\t\r\n\t\t\r\n}\r\n\r\n/**\r\n * [createRoom 创建房间]\r\n * @param {options}\r\n *   data: {\r\n *   \troomInfo: 房间名称\r\n *    \tpushURL: 推流地址\r\n *   }\r\n *   success: 成功回调\r\n *   fail: 失败回调\r\n */\r\nfunction createRoom(options) {\r\n\troomInfo.isCreator = true;\r\n\troomInfo.isDestory = false;\r\n\troomInfo.isJoinGroup = false;\r\n\t\r\n\t\r\n\t\r\n\tapp.globalData.roomInfo.isCreator = roomInfo.isCreator \r\n\tapp.globalData.roomInfo.isDestory = roomInfo.isDestory \r\n\tapp.globalData.roomInfo.isJoinGroup = roomInfo.isJoinGroup \r\n\t\r\n\tif (!options || !options.data.roomInfo || !options.data.pushURL) {\r\n\t\tconsole.log('createRoom参数错误',options);\r\n\t\toptions.fail && options.fail({\r\n\t\t\terrCode: -9,\r\n\t\t\terrMsg: 'createRoom参数错误'\r\n\t\t});\r\n\t\treturn;\r\n\t}\r\n\troomInfo.roomInfo = options.data.roomInfo;\r\n\t\r\n\tapp.globalData.roomInfo.roomInfo = options.data.roomInfo;\r\n\t\r\n\t\r\n\tproto_createRoom(options);\r\n}\r\nfunction proto_createRoom(options) {\r\n\t\r\n\troomInfo.roomInfo = app.globalData.roomInfo.roomInfo\r\n\t\r\n  var createRoomInfo = {\r\n    userID: accountInfo.userID,\r\n    roomInfo: roomInfo.roomInfo\r\n  };\r\n  if (options.data.roomID && options.data.roomID.length > 0) {\r\n    createRoomInfo.roomID = options.data.roomID;\r\n  }\r\n\trequest({\r\n\t\turl: 'create_room',\r\n    data: createRoomInfo,\r\n\t\tsuccess: function (ret) {\r\n\t\t\tif (ret.data.code) {\r\n\t\t\t\tconsole.log('创建房间失败:', ret);\r\n\t\t\t\toptions.fail && options.fail({\r\n\t\t\t\t\terrCode: ret.data.code,\r\n\t\t\t\t\terrMsg: ret.data.message + '[' + ret.data.code + ']'\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconsole.log('--->创建房间成功:', ret);\r\n\t\t\troomInfo.roomID = ret.data.roomID;\r\n\t\t\troomInfo.roomCreator = accountInfo.userID;\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tapp.globalData.roomInfo.roomID = ret.data.roomID;\r\n\t\t\tapp.globalData.roomInfo.roomCreator = accountInfo.userID;\r\n\t\t\t\r\n\t\t\troomInfo.isDestory = app.globalData.roomInfo.isDestory\r\n\t\t\t\r\n\t\t\tif (roomInfo.isDestory) {\r\n\t\t\t\troomInfo.isDestory = false;\r\n\t\t\t\t\r\n\t\t\t\tapp.globalData.roomInfo.isDestory = roomInfo.isDestory\r\n\t\t\t\t\r\n\t\t\t\tdestoryRoom({});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\toptions.data.roomID = ret.data.roomID;\r\n\t\t\t// 创建IM群\r\n\t\t\tvar createIMGroupInfo = {\r\n\t\t\t\troomID: options.data.roomID,\r\n\t\t\t\tuserID: accountInfo.userID,\r\n        roomName: options.data.roomID\r\n\t\t\t}\r\n\t\t\r\n      webimhandler.createBigGroup(createIMGroupInfo, afterJoinBigGroup, {\r\n        success: function() {\r\n          joinAnchor(options);\r\n        },\r\n        fail: options.fail\r\n      });\r\n\t\t},\r\n\t\tfail: function (ret) {\r\n\t\t\tconsole.log('创建后台房间失败:', ret);\r\n\t\t\tif(ret.errMsg == 'request:fail timeout') {\r\n\t\t\t\tvar errCode = -1;\r\n\t\t\t\tvar errMsg = '网络请求超时，请检查网络状态';\r\n\t\t\t}\r\n\t\t\toptions.fail && options.fail({\r\n\t\t\t\terrCode: errCode || -3,\r\n\t\t\t\terrMsg: errMsg || '创建房间失败'\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n}\r\n/**\r\n * [joinAnchor 加入推流]\r\n * @param {options}\r\n *   data: {\r\n *   \troomID: 房间ID\r\n *   \tpushURL: 推流地址\r\n *   }\r\n *   success: 成功回调\r\n *   fail: 失败回调\r\n */\r\nfunction joinAnchor(options) {\r\n\tif(!options || !options.data.roomID || !options.data.pushURL) {\r\n\t\tconsole.log('joinAnchor参数错误',options);\r\n\t\toptions.fail && options.fail({\r\n\t\t\terrCode: -9,\r\n\t\t\terrMsg: 'joinAnchor参数错误'\r\n\t\t});\r\n\t\treturn;\r\n\t}\r\n\troomInfo.roomID = options.data.roomID;\r\n  \troomInfo.isDestory = false;\r\n\t\r\n\t\r\n\tapp.globalData.roomInfo.roomID = options.data.roomID;\r\n\tapp.globalData.roomInfo.isDestory = false\r\n\t\r\n\tproto_joinAnchor(options);\r\n}\r\nfunction proto_joinAnchor(options) {\r\n\t\r\n\t\r\n\troomInfo.roomID = app.globalData.roomInfo.roomID\r\n\t\r\n\trequest({\r\n\t\turl: 'add_anchor',\r\n\t\tdata: {\r\n\t\t\troomID: roomInfo.roomID,\r\n\t\t\tuserID: accountInfo.userID,\r\n\t\t\tuserName: accountInfo.userName,\r\n\t\t\tuserAvatar: accountInfo.userAvatar,\r\n\t\t\tpushURL: options.data.pushURL\r\n\t\t},\r\n\t\tsuccess: function(ret) {\r\n\t\t\tif(ret.data.code) {\r\n\t\t\t\tconsole.log('进入房间失败:',ret);\r\n\t\t\t\toptions.fail && options.fail({\r\n\t\t\t\t\terrCode: ret.data.code,\r\n\t\t\t\t\terrMsg: ret.data.message + '[' + ret.data.code + ']'\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\troomInfo.hasJoinAnchor = true;\r\n\t\t\tapp.globalData.roomInfo.hasJoinAnchor = roomInfo.hasJoinAnchor\r\n      mergeAnchors();\r\n\t\t\tconsole.log('加入推流成功');\r\n\t\t\t// 开始心跳\r\n\t\t\theart = true;\r\n\t\t\tpusherHeartBeat(1);\r\n      //通知房间内其他主播\r\n      notifyPusherChange();\r\n\t  \r\n\t\troomInfo.roomID = app.globalData.roomInfo.roomID\r\n\t  \r\n  \t\toptions.success && options.success({roomID: roomInfo.roomID});\r\n\t\t},\r\n\t\tfail: function(ret) {\r\n\t\t\tconsole.log('进入房间失败:',ret);\r\n\t\t\tif(ret.errMsg == 'request:fail timeout') {\r\n\t\t\t\tvar errCode = -1;\r\n\t\t\t\tvar errMsg = '网络请求超时，请检查网络状态';\r\n\t\t\t}\r\n\t\t\toptions.fail && options.fail({\r\n\t\t\t\terrCode: errCode || -4,\r\n\t\t\t\terrMsg: errMsg || '进入房间失败'\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n}\r\n\r\n/**\r\n * [enterRoom 进入房间]\r\n * @param {options}\r\n *   data: {\r\n *   \troomID: 房间ID\r\n *   }\r\n *   success: 成功回调\r\n *   fail: 失败回调\r\n */\r\nfunction enterRoom(options) {\r\n\troomInfo.isCreator = false;\r\n\troomInfo.isJoinGroup = false;\r\n\t\r\n\t\r\n\t app.globalData.roomInfo.isCreator = roomInfo.isCreator\r\n\t app.globalData.roomInfo.isJoinGroup = roomInfo.isJoinGroup\r\n\t\r\n\tif (!options || !options.data.roomID) {\r\n\t\tconsole.log('enterRoom参数错误',options);\r\n\t\toptions.fail && options.fail({\r\n\t\t\terrCode: -9,\r\n\t\t\terrMsg: 'enterRoom参数错误'\r\n\t\t});\r\n\t\treturn;\r\n\t}\r\n\troomInfo.roomID = options.data.roomID;\r\n\tapp.globalData.roomInfo.roomID = options.data.roomID;\r\n\t \r\n\tproto_enterRoom({\r\n\t\tsuccess: function(ret) {\r\n\t\t\toptions.success && options.success(ret);\r\n\t\t\tvar userInfo = {\r\n\t\t\t\tuserName: accountInfo.userName,\r\n\t\t\t\tuserAvatar: accountInfo.userAvatar\r\n\t\t\t}\r\n\t\t\taddAudience({\r\n\t\t\t\tdata: {\r\n\t\t\t\t\troomID: options.data.roomID,\r\n\t\t\t\t\tuserID: accountInfo.userID,\r\n\t\t\t\t\tuserInfo: JSON.stringify(userInfo)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tfail: options.fail\r\n\t});\r\n}\r\nfunction proto_enterRoom(options) {\r\n\t\r\n\t\r\n\troomInfo.roomID = app.globalData.roomInfo.roomID\r\n\t\r\n\tconsole.log('开始IM: ', roomInfo.roomID);\r\n\twebimhandler.applyJoinBigGroup(roomInfo.roomID, afterJoinBigGroup, {\r\n\t\tsuccess: function(ret) {\r\n      getAnchors({\r\n\t\t\t\tdata: {\r\n\t\t\t\t\troomID: roomInfo.roomID\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function(ret) {\r\n\t\t\t\t\troomInfo.roomID = ret.data.roomID;\r\n                \troomInfo.roomInfo = ret.data.roomInfo;\r\n                \troomInfo.roomCreator = ret.data.roomCreator;\r\n\t\t\t\t\troomInfo.mixedPlayURL = ret.data.mixedPlayURL;\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tapp.globalData.roomInfo.roomID = ret.data.roomID;\r\n\t\t\t\t\tapp.globalData.roomInfo.roomInfo = ret.data.roomInfo;\r\n\t\t\t\t\tapp.globalData.roomInfo.roomCreator = ret.data.roomCreator;\r\n\t\t\t\t\tapp.globalData.roomInfo.mixedPlayURL = ret.data.mixedPlayURL;\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\toptions.success && options.success({\r\n\t\t\t\t\t\troomID: roomInfo.roomID,\r\n\t\t\t\t\t\troomCreator: roomInfo.roomCreator,\r\n\t\t\t\t\t\tmixedPlayURL: roomInfo.mixedPlayURL,\r\n            \t\t\tpushers: ret.data.pushers\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tfail: function(ret) {\r\n\t\t\t\t\toptions.fail && options.fail({\r\n\t\t\t\t\t\terrCode: ret.errCode,\r\n\t\t\t\t\t\terrMsg: ret.errMsg || '拉取主播信息失败'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tfail: options.fail\r\n\t});\r\n}\r\n\r\n/**\r\n * [clearRequest 中断请求]\r\n * @param {options}\r\n */\r\nfunction clearRequest() {\r\n\tfor(var i = 0; i < requestSeq; i++) {\r\n\t\trequestTask[i].abort();\r\n\t}\r\n\trequestTask = [];\r\n\trequestSeq = 0;\r\n}\r\n\r\n/**\r\n * [exitRoom 退出房间]\r\n * @param {options}\r\n */\r\nfunction exitRoom(options) {\r\n\t\r\n\troomInfo.isCreator = app.globalData.roomInfo.isCreator\r\n\t\r\n\tif (roomInfo.isCreator) {\r\n\t\tdestoryRoom(options);\r\n\t} else {\r\n\t\tleaveRoom(options);\r\n\t}\r\n\troomInfo.isDestory = true;\r\n\troomInfo.roomID = '';\r\n\troomInfo.pushers = [];\r\n\troomInfo.mixedPlayURL = \"\";\r\n\troomInfo.roomInfo = \"\";\r\n\t\r\n\t\r\n\tapp.globalData.roomInfo.isDestory = true;\r\n\tapp.globalData.roomInfo.roomID = '';\r\n\tapp.globalData.roomInfo.pushers = [];\r\n\tapp.globalData.roomInfo.mixedPlayURL = \"\";\r\n\tapp.globalData.roomInfo.roomInfo = \"\";\r\n\t\r\n\t\r\n\taccountInfo.pushURL = \"\";\r\n\taccountInfo.isCreator = false;\r\n}\r\n\r\n/**\r\n * [leaveRoom 退出房间]\r\n */\r\nfunction leaveRoom(options) {\r\n\t// 停止心跳\r\n\tstopPusherHeartBeat();\r\n  //通知房间内其他主播\r\n  notifyPusherChange();\r\n\t// clearRequest();\r\n\t\r\n\troomInfo.isJoinGroup = app.globalData.roomInfo.isJoinGroup\r\n\troomInfo.roomID = app.globalData.roomInfo.roomID\r\n\t\r\n\t\r\n\troomInfo.isJoinGroup && webimhandler.quitBigGroup();\r\n\trequest({\r\n\t\turl: 'delete_anchor',\r\n\t\tdata: {\r\n\t\t\troomID: roomInfo.roomID,\r\n\t\t\tuserID: accountInfo.userID\r\n\t\t},\r\n\t\tsuccess: function(ret) {\r\n\t\t\tif(ret.data.code) {\r\n\t\t\t\tconsole.log('退出推流失败:',ret);\r\n\t\t\t\tconsole.error('退房信息: roomID:' + roomInfo.roomID + \", userID:\" + accountInfo.userID);\r\n\t\t\t\toptions.fail && options.fail({\r\n\t\t\t\t\terrCode: ret.data.code,\r\n\t\t\t\t\terrMsg: ret.data.message + '[' + ret.data.code + ']'\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconsole.log('退出推流成功');\r\n\t\t\toptions.success && options.success({});\r\n\t\t},\r\n\t\tfail: function(ret) {\r\n\t\t\tconsole.log('退出推流失败:',ret);\r\n\t\t\tvar errCode = ret.errCode || -1;\r\n\t\t\tvar errMsg = ret.errMsg || '退出房间失败'\r\n\t\t\tif(ret.errMsg == 'request:fail timeout') {\r\n\t\t\t\terrCode = -1;\r\n\t\t\t\terrMsg = '网络请求超时，请检查网络状态';\r\n\t\t\t}\r\n\t\t\toptions.fail && options.fail({\r\n\t\t\t\terrCode: errCode,\r\n\t\t\t\terrMsg: errMsg\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n\tdelAudience({\r\n\t\tdata: {\r\n\t\t\tuserID: accountInfo.userID,\r\n\t\t\troomID: roomInfo.roomID\r\n\t\t}\r\n\t})\r\n}\r\n\r\n/**\r\n * [destoryRoom 销毁房间]\r\n */\r\nfunction destoryRoom(options) {\r\n\t// 停止心跳\r\n\tstopPusherHeartBeat();\r\n\t// clearRequest();\r\n\t\r\n\troomInfo.isJoinGroup = app.globalData.roomInfo.isJoinGroup\r\n\troomInfo.roomID = app.globalData.roomInfo.roomID\r\n\t\r\n\troomInfo.isJoinGroup && webimhandler.destroyGroup();\r\n\tif(roomInfo.isDestory) return;\r\n\trequest({\r\n\t\turl: 'destroy_room',\r\n\t\tdata: {\r\n\t\t\troomID: roomInfo.roomID,\r\n\t\t\tuserID: accountInfo.userID\r\n\t\t},\r\n\t\tsuccess: function(ret) {\r\n\t\t\tif(ret.data.code) {\r\n\t\t\t\tconsole.log('关闭房间失败:',ret);\r\n\t\t\t\tconsole.error('关闭房间失败: roomID:' + roomInfo.roomID + \", userID:\" + accountInfo.userID);\r\n\t\t\t\toptions.fail && options.fail({\r\n\t\t\t\t\terrCode: ret.data.code,\r\n\t\t\t\t\terrMsg: ret.data.message + '[' + ret.data.code + ']'\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconsole.log('关闭房间成功');\r\n\t\t\toptions.success && options.success({});\r\n\t\t},\r\n\t\tfail: function(ret) {\r\n\t\t\tconsole.log('关闭房间失败:',ret);\r\n\t\t\tvar errCode = ret.errCode || -1;\r\n\t\t\tvar errMsg = ret.errMsg || '关闭房间失败'\r\n\t\t\tif(ret.errMsg == 'request:fail timeout') {\r\n\t\t\t\terrCode = -1;\r\n\t\t\t\terrMsg = '网络请求超时，请检查网络状态';\r\n\t\t\t}\r\n\t\t\toptions.fail && options.fail({\r\n\t\t\t\terrCode: errCode,\r\n\t\t\t\terrMsg: errMsg\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction quitJoinAnchor(options) {\r\n\t\r\n\troomInfo.roomID = app.globalData.roomInfo.roomID\r\n\t\r\n\t\r\n\t\r\n\tstopPusherHeartBeat();\r\n\trequest({\r\n\t\turl: 'delete_anchor',\r\n\t\tdata: {\r\n\t\t\troomID: roomInfo.roomID,\r\n\t\t\tuserID: accountInfo.userID\r\n\t\t},\r\n\t\tsuccess: function(ret) {\r\n\t\t\tif(ret.data.code) {\r\n\t\t\t\tconsole.log('退出推流失败:',ret);\r\n\t\t\t\toptions.fail && options.fail({\r\n\t\t\t\t\terrCode: ret.data.code,\r\n\t\t\t\t\terrMsg: ret.data.message + '[' + ret.data.code + ']'\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconsole.log('退出推流成功');\r\n\t\t\troomInfo.pushers = [];\r\n\t\t\tapp.globalData.roomInfo.pushers = roomInfo.pushers\r\n\t\t\t\r\n      //通知房间内其他主播\r\n      notifyPusherChange();\r\n\t\t\toptions.success && options.success({});\r\n\t\t},\r\n\t\tfail: function(ret) {\r\n\t\t\tconsole.log('退出推流失败:',ret);\r\n\t\t\tif(ret.errMsg == 'request:fail timeout') {\r\n\t\t\t\tvar errCode = -1;\r\n\t\t\t\tvar errMsg = '网络请求超时，请检查网络状态';\r\n\t\t\t}\r\n\t\t\toptions.fail && options.fail({\r\n\t\t\t\terrCode: errCode || -1,\r\n\t\t\t\terrMsg: errMsg || '退出房间失败'\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\troomInfo.hasJoinAnchor = false;\r\n\t\r\n\tapp.globalData.roomInfo.hasJoinAnchor = roomInfo.hasJoinAnchor\r\n\t\r\n}\r\n\r\nfunction requestJoinAnchor (object) {\r\n\t\r\n\troomInfo.roomID = app.globalData.roomInfo.roomID \r\n\taccountInfo.userID = app.globalData.accountInfo.userID\r\n\taccountInfo.userName = app.globalData.accountInfo.userName\r\n\taccountInfo.userAvatar = app.globalData.accountInfo.userAvatar\r\n\taccountInfo.userID = app.globalData.accountInfo.userID\r\n\t\r\n\tvar body = {\r\n\t\tcmd: 'linkmic',\r\n\t\tdata: {\r\n\t\t\ttype: 'request',\r\n\t\t\troomID: roomInfo.roomID,\r\n\t\t\tuserID: accountInfo.userID,\r\n\t\t\tuserName: accountInfo.userName,\r\n\t\t\tuserAvatar: accountInfo.userAvatar,\r\n\t\t\ttimestamp: Math.round(Date.now()) - mTimeDiff\r\n\t\t}\r\n\t}\r\n\r\n\t\r\n\trequestJoinCallback = function(ret) {\r\n\t\t\t\r\n\t\tif (gTimeoutID) {\r\n\t\t\tclearTimeout(gTimeoutID);\r\n\t\t\tgTimeoutID = null;\r\n\t\t}\r\n\t\tif (ret.errCode) {\r\n\t\t\tobject.fail && object.fail(ret);\r\n\t\t} else {\r\n\t\t\tobject.success && object.success(ret);\r\n\t\t}\r\n\t}\r\n\t\r\n\tapp.globalData.requestJoinCallback = requestJoinCallback \r\n\r\n\tvar isTimeout = false;\r\n\tgTimeoutID = setTimeout(function () {\r\n\t\tgTimeoutID = null;\r\n\t\tconsole.error('申请连麦超时:', JSON.stringify(object.data));\r\n\t\tisTimeout = true;\r\n\t\trequestJoinCallback && requestJoinCallback({\r\n\t\t\terrCode: -999,\r\n\t\t\terrMsg: '申请加入连麦超时'\r\n\t\t});\r\n\t}, (object.data && object.data.timeout)? object.data.timeout : 30000);\r\n\r\n\tvar msg = {\r\n\t\tdata: JSON.stringify(body)\r\n\t}\r\n\t\r\n\troomInfo.roomCreator = app.globalData.roomInfo.roomCreator\r\n\t\r\n\t\r\n\twebimhandler.sendC2CCustomMsg(roomInfo.roomCreator, msg, function (ret) {\r\n\t\tif (isTimeout) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (ret && ret.errCode) {\r\n\t\t\tconsole.log('请求连麦失败:', JSON.stringify(ret));\r\n\t\t\trequestJoinCallback && requestJoinCallback(ret);\r\n\t\t\treturn;\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction acceptJoinAnchor (object) {\r\n\t\r\n\troomInfo.roomID = app.globalData.roomInfo.roomID\r\n\t\r\n\t\r\n\tvar body = {\r\n\t\tcmd: 'linkmic',\r\n\t\tdata: {\r\n\t\t\ttype: 'response',\r\n\t\t\tresult: 'accept',\r\n\t\t\treason: '',\r\n      roomID: roomInfo.roomID,\r\n      timestamp: Math.round(Date.now()) - mTimeDiff\r\n\t\t}\r\n\t}\r\n\r\n\tvar msg = {\r\n\t\tdata: JSON.stringify(body)\r\n\t}\r\n\twebimhandler.sendC2CCustomMsg(object.data.userID, msg, function (ret) {});\r\n}\r\n\r\nfunction rejectJoinAnchor (object) {\r\n\t\r\n\troomInfo.roomID = app.globalData.roomInfo.roomID\r\n\t\r\n\tvar body = {\r\n\t\tcmd: 'linkmic',\r\n\t\tdata: {\r\n\t\t\ttype: 'response',\r\n\t\t\tresult: 'reject',\r\n      reason: object.data.reason || '主播拒绝了您的连麦请求',\r\n      roomID: roomInfo.roomID,\r\n      timestamp: Math.round(Date.now()) - mTimeDiff\r\n\t\t}\r\n\t}\r\n\r\n\tvar msg = {\r\n\t\tdata: JSON.stringify(body)\r\n\t}\r\n\twebimhandler.sendC2CCustomMsg(object.data.userID, msg, function (ret) {});\r\n}\r\n\r\nfunction kickoutJoinAnchor (object) {\r\n\t\r\n\t\r\n\troomInfo.roomID = app.globalData.roomInfo.roomID\r\n\t\r\n\tvar body = {\r\n\t\tcmd: 'linkmic',\r\n\t\tdata: {\r\n\t\t\ttype: 'kickout',\r\n      roomID: roomInfo.roomID,\r\n      timestamp: Math.round(Date.now()) - mTimeDiff\r\n\t\t}\r\n\t}\r\n\r\n\tvar msg = {\r\n\t\tdata: JSON.stringify(body)\r\n\t}\r\n\twebimhandler.sendC2CCustomMsg(object.data.userID, msg, function (ret) {\r\n\t\tif (ret && ret.errCode==0) {\r\n\t\t\tobject.success && object.success(ret);\r\n\t\t} else {\r\n\t\t\tobject.fail && object.fail(ret);\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction getAccountInfo() {\r\n\t\r\n\taccountInfo = app.globalData.accountInfo\r\n\t\r\n\treturn accountInfo;\r\n}\r\n\r\n/**\r\n * \r\n * @param {Int} retryCount\r\n */\r\nfunction mergeStream(retryCount) {\r\n\t\r\n\t\r\n\troomInfo.roomCreator = app.globalData.roomInfo.roomCreator\r\n\t\r\n    if (accountInfo.userID != roomInfo.roomCreator) {\r\n        //大主播才能混流\r\n        return;\r\n    }\r\n    var mergeStreams = [];\r\n\t\r\n\t\r\n\troomInfo.pushers = app.globalData.roomInfo.pushers\r\n\troomInfo.roomCreator = app.globalData.roomInfo.roomCreator\r\n\t\r\n\t\r\n\tif (roomInfo.pushers && roomInfo.pushers.length > 0) {\r\n\t\troomInfo.pushers.forEach(function (val) {\r\n\t\t\tif (val.userID != roomInfo.roomCreator) {\r\n\t\t\t\t//获取流id\r\n                var streamID = getStreamIDByStreamUrl(val.accelerateURL);\r\n                if (streamID) {\r\n                    mergeStreams.push({\r\n                        userID: val.userID,\r\n                        streamID: streamID,\r\n                        width: val.width,\r\n                        height: val.height\r\n                    });\r\n                }\r\n\t\t\t} else {\r\n\t\t\t\tbigAnchorStreamID = getStreamIDByStreamUrl(val.accelerateURL);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tconsole.log(\"混流信息:\", JSON.stringify(mergeStreams));\r\n\r\n    sendStreamMergeRequest(retryCount, mergeStreams);\r\n}\r\n\r\nfunction getStreamIDByStreamUrl(streamUrl) {\r\n    if (!streamUrl) {\r\n        return null;\r\n    }\r\n    //推流地址格式: rtmp://8888.livepush.myqcloud.com/path/8888_test_12345?txSecret=aaa&txTime=bbb\r\n    //拉流地址格式: rtmp://8888.livepush.myqcloud.com/path/8888_test_12345\r\n    //             http://8888.livepush.myqcloud.com/path/8888_test_12345.flv\r\n    //             http://8888.livepush.myqcloud.com/path/8888_test_12345.m3u8\r\n\r\n    var subStr = streamUrl;\r\n    var index = subStr.indexOf('?');\r\n    if (index >= 0) {\r\n        subStr = subStr.substring(0, index);\r\n    }\r\n    if (!subStr) {\r\n        return null;\r\n    }\r\n    index = subStr.lastIndexOf('/');\r\n    if (index >= 0) {\r\n        subStr = subStr.substring(index + 1);\r\n    }\r\n    if (!subStr) {\r\n        return null;\r\n    }\r\n    index = subStr.indexOf('.');\r\n    if (index >= 0) {\r\n        subStr = subStr.substring(0, index);\r\n    }\r\n    if (!subStr) {\r\n        return null;\r\n    }\r\n    return subStr;\r\n}\r\n\r\nfunction sendStreamMergeRequest(retryCount, mergeStreams) {\r\n    if (retryCount < 0) {\r\n        return;\r\n    }\r\n\r\n    var mergeInfo = createMergeInfo(mergeStreams);\r\n    console.log('混流信息:', JSON.stringify(mergeInfo));\r\n\r\n    doMergeRequest(mergeInfo, function (ret) {\r\n        if (ret) {\r\n            console.log('混流成功');\r\n        } else {\r\n            console.log('混流失败');\r\n            setTimeout(() => {\r\n                retryCount--;\r\n                sendStreamMergeRequest(retryCount, mergeStreams);\r\n            }, 2000);\r\n        }\r\n    });\r\n}\r\n\r\nfunction doMergeRequest(mergeInfo, callback) {\r\n\t\r\n\troomInfo.roomID = app.globalData.roomInfo.roomID\r\n\t\r\n    request({\r\n        url: 'merge_stream',\r\n        data: {\r\n            userID: accountInfo.userID,\r\n            roomID: roomInfo.roomID,\r\n            mergeParams: JSON.stringify(mergeInfo)\r\n        },\r\n        success: function (ret) {\r\n            if (ret.data.code || ret.data.merge_code) {\r\n                console.error('混流失败:', JSON.stringify(ret));\r\n                callback(false);\r\n                return;\r\n            }\r\n            callback(true);\r\n        },\r\n        fail: function (ret) {\r\n            callback(false);\r\n        }\r\n    })\r\n}\r\n\r\nfunction createMergeInfo(mergeStreams) {\r\n    console.log(\"混流原始信息:\", JSON.stringify(mergeStreams));\r\n\r\n    var smallAnchorWidth = 160;\r\n\tvar smallAnchorHeight = 240;\r\n\tvar offsetHeight = 90;\r\n\tif (bigAnchorWidth < 540 || bigAnchorHeight < 960) {\r\n\t\tsmallAnchorWidth = 120;\r\n\t\tsmallAnchorHeight = 180;\r\n\t\toffsetHeight = 60;\r\n\t}\r\n\r\n    //组装混流JSON结构体\r\n    var streamInfoArray = [];\r\n    if (mergeStreams && mergeStreams.length > 0) {\r\n        \r\n        //大主播\r\n        var bigAnchorInfo = {\r\n            input_stream_id: bigAnchorStreamID || '',\r\n            layout_params: {\r\n                image_layer: 1\r\n            }\r\n        }\r\n        streamInfoArray.push(bigAnchorInfo);\r\n\r\n        //小主播\r\n        var subLocationX = bigAnchorWidth - smallAnchorWidth;\r\n        var subLocationY = bigAnchorHeight - smallAnchorHeight - offsetHeight;\r\n        if (mergeStreams && mergeStreams.length > 0) {\r\n            var layerIndex = 0\r\n            mergeStreams.forEach(function (val) {\r\n\t\t\t\t//组装JSON\r\n\t\t\t\tvar smallAchorInfo = {\r\n\t\t\t\t\tinput_stream_id: val.streamID,\r\n\t\t\t\t\tlayout_params: {\r\n\t\t\t\t\t\timage_layer: layerIndex + 2,\r\n\t\t\t\t\t\timage_width: smallAnchorWidth,\r\n\t\t\t\t\t\timage_height: smallAnchorHeight,\r\n\t\t\t\t\t\tlocation_x: subLocationX,\r\n\t\t\t\t\t\tlocation_y: subLocationY - layerIndex * smallAnchorHeight\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tstreamInfoArray.push(smallAchorInfo);\r\n\t\t\t\tlayerIndex++;\r\n            });\r\n        }\r\n    } else {\r\n        var bigAnchorInfo = {\r\n            input_stream_id: bigAnchorStreamID || '',\r\n            layout_params: {\r\n                image_layer: 1\r\n            }\r\n        }\r\n        streamInfoArray.push(bigAnchorInfo);\r\n    }\r\n\r\n    var para = {\r\n        app_id: accountInfo.sdkAppID.toString(),\r\n        interface: 'mix_streamv2.start_mix_stream_advanced',\r\n        mix_stream_session_id: bigAnchorStreamID,\r\n        output_stream_id: bigAnchorStreamID,\r\n        input_stream_list: streamInfoArray\r\n    }\r\n\r\n    var interfaceObj = {\r\n        interfaceName: 'Mix_StreamV2',\r\n        para: para\r\n    }\r\n\r\n    var reqParam = {\r\n        timestamp: Math.round((Date.now() / 1000)),\r\n        eventId: Math.round((Date.now() / 1000)),\r\n        interface: interfaceObj\r\n    }\r\n\r\n    return reqParam;\r\n}\r\n\r\nfunction setVideoRatio(ratio) {\r\n\tif (ratio == 1) {\r\n\t\t//9:16\r\n\t\tbigAnchorWidth = 360;\r\n\t\tbigAnchorHeight = 640;\r\n\t} else {\r\n\t\t//3:4\r\n\t\tbigAnchorWidth = 480;\r\n\t\tbigAnchorHeight = 640;\r\n\t}\r\n}\r\n\r\nfunction sendC2CCustomMsg(object) {\r\n\taccountInfo.userID = app.globalData.accountInfo.userID\r\n\taccountInfo.userName = app.globalData.accountInfo.userName\r\n\taccountInfo.userAvatar = app.globalData.accountInfo.userAvatar\r\n\tvar body = {\r\n\t\tcmd: object.cmd,\r\n\t\tdata: {\r\n\t\t\tuserID: accountInfo.userID,\r\n\t\t\tuserName: accountInfo.userName,\r\n\t\t\tuserAvatar: accountInfo.userAvatar,\r\n\t\t\tmsg: object.msg || ''\r\n\t\t}\r\n\t}\r\n\tvar msg = {\r\n\t\tdata: JSON.stringify(body)\r\n\t}\r\n\t\r\n\troomInfo.roomCreator = app.globalData.roomInfo.roomCreator\r\n\t\r\n\twebimhandler.sendC2CCustomMsg(object.toUserID?object.toUserID:roomInfo.roomCreator, msg, function (ret) {\r\n\t\tif (ret && ret.errCode) {\r\n\t\t\tconsole.log('请求连麦失败:', JSON.stringify(ret));\r\n\t\t\tobject.fail && object.fail(ret);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tobject.success && object.success({});\r\n\t});\r\n}\r\n\r\n//观众进房时，向后台发送进房通知\r\nfunction addAudience(object) {\r\n\trequest({\r\n\t\turl: 'add_audience',\r\n\t\tdata: {\r\n\t\t\tuserID: accountInfo.userID,\r\n\t\t\troomID: object.data.roomID,\r\n\t\t\tuserInfo: object.data.userInfo\r\n\t\t},\r\n\t\tsuccess: function (ret) {\r\n\t\t\tif (ret.data.code) {\r\n\t\t\t\tconsole.log('增加观众请求失败', ret);\r\n\t\t\t\tobject.fail && object.fail({errCode: ret.data.code, errMsg: '增加观众请求失败:' + ret.data.message +  + '[' + ret.data.code + ']'});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tobject.success && object.success(ret);\r\n\t\t},\r\n\t\tfail: object.fail\r\n\t});\r\n }\r\n\r\n //观众退房时，向后台发送退房通知\r\n function delAudience(object) {\r\n\trequest({\r\n\t\turl: 'delete_audience',\r\n\t\tdata: {\r\n\t\t\tuserID: object.data.userID,\r\n\t\t\troomID: object.data.roomID\r\n\t\t},\r\n\t\tsuccess: function (ret) {\r\n\t\t\tif (ret.data.code) {\r\n\t\t\t\tconsole.log('减少观众请求失败', ret);\r\n\t\t\t\tobject.fail && object.fail({errCode: ret.data.code, errMsg: '减少观众请求失败:' + ret.data.message +  + '[' + ret.data.code + ']'});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tobject.success && object.success(ret);\r\n\t\t},\r\n\t\tfail: object.fail\r\n\t});\r\n }\r\n\r\n/**\r\n * 对外暴露函数\r\n * @type {Object}\r\n */\r\nmodule.exports = {\r\n\tlogin: login,\t\t\t\t\t\t\t// 初始化\r\n\tlogout: logout,\t\t\t\t\t\t// 结束初始化\r\n\tgetRoomList: getRoomList,\t\t\t// 拉取房间列表\r\n\tgetPushURL: getPushURL,\t\t\t\t// 拉取推流地址\r\n\tcreateRoom: createRoom,\t\t\t\t// 创建房间\r\n\tenterRoom: enterRoom,\t\t\t\t// 加入房间\r\n\texitRoom: exitRoom,\t\t\t\t\t// 退出房间\r\n\tsendRoomTextMsg: sendRoomTextMsg,\t// 发送文本消息\r\n\tsetListener: setListener,\t\t\t// 设置监听事件\r\n\tjoinAnchor: joinAnchor,\t\t\t//加入连麦\r\n  quitJoinAnchor: quitJoinAnchor, //退出连麦\r\n\trequestJoinAnchor: requestJoinAnchor,\r\n\tacceptJoinAnchor: acceptJoinAnchor,\r\n\trejectJoinAnchor: rejectJoinAnchor,\r\n  kickoutJoinAnchor: kickoutJoinAnchor,\r\n\tgetAccountInfo: getAccountInfo,\r\n\tsetVideoRatio: setVideoRatio,\r\n\tsendC2CCustomMsg: sendC2CCustomMsg,\r\n\tgetAnchors: getAnchors\r\n\t// addRemoteView: addRemoteView,\r\n\t// deleteRemoteView: deleteRemoteView\r\n}\r\n","var reqSeq = 0,reqNum = 0;\r\n\r\nmodule.exports = function() {\r\n/* webim javascript SDK\r\n * VER 1.7.0\r\n */\r\n\r\n/* webim API definitions\r\n */\r\nvar msgCache = {};\r\nvar webim = { // namespace object webim\r\n\r\n    /* function init\r\n     *   sdk登录\r\n     * params:\r\n     *   loginInfo      - Object, 登录身份相关参数集合，详见下面\r\n     *   {\r\n     *     sdkAppID     - String, 用户标识接入SDK的应用ID，必填\r\n     *     accountType  - int, 账号类型，必填\r\n     *     identifier   - String, 用户帐号,必须是字符串类型，必填\r\n     *     identifierNick   - String, 用户昵称，选填\r\n     *     userSig      - String, 鉴权Token，必须是字符串类型，必填\r\n     *   }\r\n     *   listeners      - Object, 事件回调函数集合, 详见下面\r\n     *   {\r\n     *     onConnNotify - function(connInfo), 用于收到连接状态相关通知的回调函数,目前未使用\r\n     *     jsonpCallback -function(rspData),//IE9(含)以下浏览器用到的jsonp回调函数\r\n     *     onMsgNotify  - function(newMsgList), 用于收到消息通知的回调函数,\r\n     *      newMsgList为新消息数组，格式为[Msg对象]\r\n     *      使用方有两种处理回调: 1)处理newMsgList中的增量消息,2)直接访问webim.MsgStore获取最新的消息\r\n     *     onGroupInfoChangeNotify  - function(groupInfo), 用于监听群组资料变更的回调函数,\r\n     *          groupInfo为新的群组资料信息\r\n     *     onGroupSystemNotifys - Object, 用于监听（多终端同步）群系统消息的回调函数对象\r\n     *\r\n     *   }\r\n     *   options        - Object, 其它选项, 目前未使用\r\n     * return:\r\n     *   (无)\r\n     */\r\n    login: function (loginInfo, listeners, options) {\r\n    },\r\n\r\n    /* function syncMsgs\r\n     *   拉取最新C2C消息\r\n     *   一般不需要使用方直接调用, SDK底层会自动同步最新消息并通知使用方, 一种有用的调用场景是用户手动触发刷新消息\r\n     * params:\r\n     *   cbOk   - function(msgList)类型, 当同步消息成功时的回调函数, msgList为新消息数组，格式为[Msg对象],\r\n     *            如果此参数为null或undefined则同步消息成功后会像自动同步那样回调cbNotify\r\n     *   cbErr  - function(err)类型, 当同步消息失败时的回调函数, err为错误对象\r\n     * return:\r\n     *   (无)\r\n     */\r\n    syncMsgs: function (cbOk, cbErr) {\r\n    },\r\n\r\n\r\n    /* function getC2CHistoryMsgs\r\n     * 拉取C2C漫游消息\r\n     * params:\r\n     *   options    - 请求参数\r\n     *   cbOk   - function(msgList)类型, 成功时的回调函数, msgList为消息数组，格式为[Msg对象],\r\n     *   cbErr  - function(err)类型, 失败时回调函数, err为错误对象\r\n     * return:\r\n     *   (无)\r\n     */\r\n    getC2CHistoryMsgs: function (options, cbOk, cbErr) {\r\n    },\r\n\r\n    /* function syncGroupMsgs\r\n     * 拉取群漫游消息\r\n     * params:\r\n     *   options    - 请求参数\r\n     *   cbOk   - function(msgList)类型, 成功时的回调函数, msgList为消息数组，格式为[Msg对象],\r\n     *   cbErr  - function(err)类型, 失败时回调函数, err为错误对象\r\n     * return:\r\n     *   (无)\r\n     */\r\n    syncGroupMsgs: function (options, cbOk, cbErr) {\r\n    },\r\n\r\n    /* function sendMsg\r\n     *   发送一条消息\r\n     * params:\r\n     *   msg    - webim.Msg类型, 要发送的消息对象\r\n     *   cbOk   - function()类型, 当发送消息成功时的回调函数\r\n     *   cbErr  - function(err)类型, 当发送消息失败时的回调函数, err为错误对象\r\n     * return:\r\n     *   (无)\r\n     */\r\n    sendMsg: function (msg, cbOk, cbErr) {\r\n    },\r\n\r\n    /* function logout\r\n     *   sdk登出\r\n     * params:\r\n     *   cbOk   - function()类型, 成功时回调函数\r\n     *   cbErr  - function(err)类型, 失败时回调函数, err为错误对象\r\n     * return:\r\n     *   (无)\r\n     */\r\n    logout: function (cbOk, cbErr) {\r\n    },\r\n\r\n    /* function setAutoRead\r\n     * 设置会话自动已读上报标志\r\n     * params:\r\n     *   selSess    - webim.Session类型, 当前会话\r\n     *   isOn   - boolean, 将selSess的自动已读消息标志改为isOn，同时是否上报当前会话已读消息\r\n     *   isResetAll - boolean，是否重置所有会话的自动已读标志\r\n     * return:\r\n     *   (无)\r\n     */\r\n    setAutoRead: function (selSess, isOn, isResetAll) {\r\n    },\r\n\r\n    /* function getProfilePortrait\r\n     *   拉取资料（搜索用户）\r\n     * params:\r\n     *   cbOk   - function()类型, 成功时回调函数\r\n     *   cbErr  - function(err)类型, 失败时回调函数, err为错误对象\r\n     * return:\r\n     *   (无)\r\n     */\r\n    getProfilePortrait: function (options, cbOk, cbErr) {\r\n    },\r\n\r\n    /* function setProfilePortrait\r\n     *   设置个人资料\r\n     * params:\r\n     *   cbOk   - function()类型, 成功时回调函数\r\n     *   cbErr  - function(err)类型, 失败时回调函数, err为错误对象\r\n     * return:\r\n     *   (无)\r\n     */\r\n    setProfilePortrait: function (options, cbOk, cbErr) {\r\n    },\r\n\r\n    /* function applyAddFriend\r\n     *   申请添加好友\r\n     * params:\r\n     *   cbOk   - function()类型, 成功时回调函数\r\n     *   cbErr  - function(err)类型, 失败时回调函数, err为错误对象\r\n     * return:\r\n     *   (无)\r\n     */\r\n    applyAddFriend: function (options, cbOk, cbErr) {\r\n    },\r\n\r\n    /* function getPendency\r\n     *   拉取好友申请\r\n     * params:\r\n     *   cbOk   - function()类型, 成功时回调函数\r\n     *   cbErr  - function(err)类型, 失败时回调函数, err为错误对象\r\n     * return:\r\n     *   (无)\r\n     */\r\n    getPendency: function (options, cbOk, cbErr) {\r\n    },\r\n\r\n    /* function deletePendency\r\n     *   删除好友申请\r\n     * params:\r\n     *   cbOk   - function()类型, 成功时回调函数\r\n     *   cbErr  - function(err)类型, 失败时回调函数, err为错误对象\r\n     * return:\r\n     *   (无)\r\n     */\r\n    deletePendency: function (options, cbOk, cbErr) {\r\n    },\r\n\r\n    /* function responseFriend\r\n     *   响应好友申请\r\n     * params:\r\n     *   cbOk   - function()类型, 成功时回调函数\r\n     *   cbErr  - function(err)类型, 失败时回调函数, err为错误对象\r\n     * return:\r\n     *   (无)\r\n     */\r\n    responseFriend: function (options, cbOk, cbErr) {\r\n    },\r\n\r\n    /* function getAllFriend\r\n     *   拉取我的好友\r\n     * params:\r\n     *   cbOk   - function()类型, 成功时回调函数\r\n     *   cbErr  - function(err)类型, 失败时回调函数, err为错误对象\r\n     * return:\r\n     *   (无)\r\n     */\r\n    getAllFriend: function (options, cbOk, cbErr) {\r\n    },\r\n\r\n    /* function deleteFriend\r\n     *   删除好友\r\n     * params:\r\n     *   cbOk   - function()类型, 成功时回调函数\r\n     *   cbErr  - function(err)类型, 失败时回调函数, err为错误对象\r\n     * return:\r\n     *   (无)\r\n     */\r\n    deleteFriend: function (options, cbOk, cbErr) {\r\n    },\r\n\r\n    /* function addBlackList\r\n     *   增加黑名单\r\n     * params:\r\n     *   cbOk   - function()类型, 成功时回调函数\r\n     *   cbErr  - function(err)类型, 失败时回调函数, err为错误对象\r\n     * return:\r\n     *   (无)\r\n     */\r\n    addBlackList: function (options, cbOk, cbErr) {\r\n    },\r\n\r\n    /* function getBlackList\r\n     *   删除黑名单\r\n     * params:\r\n     *   cbOk   - function()类型, 成功时回调函数\r\n     *   cbErr  - function(err)类型, 失败时回调函数, err为错误对象\r\n     * return:\r\n     *   (无)\r\n     */\r\n    getBlackList: function (options, cbOk, cbErr) {\r\n    },\r\n\r\n    /* function deleteBlackList\r\n     *   我的黑名单\r\n     * params:\r\n     *   cbOk   - function()类型, 成功时回调函数\r\n     *   cbErr  - function(err)类型, 失败时回调函数, err为错误对象\r\n     * return:\r\n     *   (无)\r\n     */\r\n    deleteBlackList: function (options, cbOk, cbErr) {\r\n    },\r\n\r\n    /* function uploadPic\r\n     *   上传图片\r\n     * params:\r\n     *   options    - 请求参数，详见api文档\r\n     *   cbOk   - function()类型, 成功时回调函数\r\n     *   cbErr  - function(err)类型, 失败时回调函数, err为错误对象\r\n     * return:\r\n     *   (无)\r\n     */\r\n    uploadPic: function (options, cbOk, cbErr) {\r\n    },\r\n\r\n    /* function createGroup\r\n     *   创建群\r\n     * params:\r\n     *   options    - 请求参数，详见api文档\r\n     *   cbOk   - function()类型, 成功时回调函数\r\n     *   cbErr  - function(err)类型, 失败时回调函数, err为错误对象\r\n     * return:\r\n     *   (无)\r\n     */\r\n    createGroup: function (options, cbOk, cbErr) {\r\n    },\r\n\r\n    /* function applyJoinGroup\r\n     *   申请加群\r\n     * params:\r\n     *   options    - 请求参数，详见api文档\r\n     *   cbOk   - function()类型, 成功时回调函数\r\n     *   cbErr  - function(err)类型, 失败时回调函数, err为错误对象\r\n     * return:\r\n     *   (无)\r\n     */\r\n    applyJoinGroup: function (options, cbOk, cbErr) {\r\n    },\r\n\r\n    /* function handleApplyJoinGroup\r\n     *   处理申请加群(同意或拒绝)\r\n     * params:\r\n     *   options    - 请求参数，详见api文档\r\n     *   cbOk   - function()类型, 成功时回调函数\r\n     *   cbErr  - function(err)类型, 失败时回调函数, err为错误对象\r\n     * return:\r\n     *   (无)\r\n     */\r\n    handleApplyJoinGroup: function (options, cbOk, cbErr) {\r\n    },\r\n\r\n    /* function deleteApplyJoinGroupPendency\r\n     *   删除加群申请\r\n     * params:\r\n     *   options    - 请求参数，详见api文档\r\n     *   cbOk   - function()类型, 成功时回调函数\r\n     *   cbErr  - function(err)类型, 失败时回调函数, err为错误对象\r\n     * return:\r\n     *   (无)\r\n     */\r\n    deleteApplyJoinGroupPendency: function (options, cbOk, cbErr) {\r\n    },\r\n\r\n\r\n    /* function quitGroup\r\n     *  主动退群\r\n     * params:\r\n     *   options    - 请求参数，详见api文档\r\n     *   cbOk   - function()类型, 成功时回调函数\r\n     *   cbErr  - function(err)类型, 失败时回调函数, err为错误对象\r\n     * return:\r\n     *   (无)\r\n     */\r\n    quitGroup: function (options, cbOk, cbErr) {\r\n    },\r\n\r\n    /* function getGroupPublicInfo\r\n     *   读取群公开资料-高级接口\r\n     * params:\r\n     *   options    - 请求参数，详见api文档\r\n     *   cbOk   - function()类型, 成功时回调函数\r\n     *   cbErr  - function(err)类型, 失败时回调函数, err为错误对象\r\n     * return:\r\n     *   (无)\r\n     */\r\n    getGroupPublicInfo: function (options, cbOk, cbErr) {\r\n    },\r\n\r\n    /* function getGroupInfo\r\n     *   读取群详细资料-高级接口\r\n     * params:\r\n     *   options    - 请求参数，详见api文档\r\n     *   cbOk   - function()类型, 成功时回调函数\r\n     *   cbErr  - function(err)类型, 失败时回调函数, err为错误对象\r\n     * return:\r\n     *   (无)\r\n     */\r\n    getGroupInfo: function (options, cbOk, cbErr) {\r\n    },\r\n\r\n    /* function modifyGroupBaseInfo\r\n     *   修改群基本资料\r\n     * params:\r\n     *   options    - 请求参数，详见api文档\r\n     *   cbOk   - function()类型, 成功时回调函数\r\n     *   cbErr  - function(err)类型, 失败时回调函数, err为错误对象\r\n     * return:\r\n     *   (无)\r\n     */\r\n    modifyGroupBaseInfo: function (options, cbOk, cbErr) {\r\n    },\r\n\r\n    /* function destroyGroup\r\n     *  解散群\r\n     * params:\r\n     *   options    - 请求参数，详见api文档\r\n     *   cbOk   - function()类型, 成功时回调函数\r\n     *   cbErr  - function(err)类型, 失败时回调函数, err为错误对象\r\n     * return:\r\n     *   (无)\r\n     */\r\n    destroyGroup: function (options, cbOk, cbErr) {\r\n    },\r\n\r\n    /* function getJoinedGroupListHigh\r\n     *   获取我的群组-高级接口\r\n     * params:\r\n     *   options    - 请求参数，详见api文档\r\n     *   cbOk   - function()类型, 成功时回调函数\r\n     *   cbErr  - function(err)类型, 失败时回调函数, err为错误对象\r\n     * return:\r\n     *   (无)\r\n     */\r\n    getJoinedGroupListHigh: function (options, cbOk, cbErr) {\r\n    },\r\n\r\n    /* function getGroupMemberInfo\r\n     *   获取群组成员列表\r\n     * params:\r\n     *   options    - 请求参数，详见api文档\r\n     *   cbOk   - function()类型, 成功时回调函数\r\n     *   cbErr  - function(err)类型, 失败时回调函数, err为错误对象\r\n     * return:\r\n     *   (无)\r\n     */\r\n    getGroupMemberInfo: function (options, cbOk, cbErr) {\r\n    },\r\n\r\n    /* function addGroupMember\r\n     *   邀请好友加群\r\n     * params:\r\n     *   options    - 请求参数，详见api文档\r\n     *   cbOk   - function()类型, 成功时回调函数\r\n     *   cbErr  - function(err)类型, 失败时回调函数, err为错误对象\r\n     * return:\r\n     *   (无)\r\n     */\r\n    addGroupMember: function (options, cbOk, cbErr) {\r\n    },\r\n\r\n    /* function modifyGroupMember\r\n     *   修改群成员资料（角色或者群消息提类型示）\r\n     * params:\r\n     *   options    - 请求参数，详见api文档\r\n     *   cbOk   - function()类型, 成功时回调函数\r\n     *   cbErr  - function(err)类型, 失败时回调函数, err为错误对象\r\n     * return:\r\n     *   (无)\r\n     */\r\n    modifyGroupMember: function (options, cbOk, cbErr) {\r\n    },\r\n\r\n    /* function forbidSendMsg\r\n     *   设置群成员禁言时间\r\n     * params:\r\n     *   options    - 请求参数，详见api文档\r\n     *   cbOk   - function()类型, 成功时回调函数\r\n     *   cbErr  - function(err)类型, 失败时回调函数, err为错误对象\r\n     * return:\r\n     *   (无)\r\n     */\r\n    forbidSendMsg: function (options, cbOk, cbErr) {\r\n    },\r\n\r\n    /* function deleteGroupMember\r\n     *   删除群成员\r\n     * params:\r\n     *   options    - 请求参数，详见api文档\r\n     *   cbOk   - function()类型, 成功时回调函数\r\n     *   cbErr  - function(err)类型, 失败时回调函数, err为错误对象\r\n     * return:\r\n     *   (无)\r\n     */\r\n    deleteGroupMember: function (options, cbOk, cbErr) {\r\n    },\r\n\r\n    /* function sendCustomGroupNotify\r\n     *   发送自定义群通知\r\n     * params:\r\n     *   options    - 请求参数，详见api文档\r\n     *   cbOk   - function()类型, 成功时回调函数\r\n     *   cbErr  - function(err)类型, 失败时回调函数, err为错误对象\r\n     * return:\r\n     *   (无)\r\n     */\r\n    sendCustomGroupNotify: function (options, cbOk, cbErr) {\r\n    },\r\n\r\n    /* class webim.Msg\r\n     *   一条消息的描述类, 消息发送、接收的API中都会涉及此类型的对象\r\n     * properties:\r\n     *   sess   - Session object-ref, 消息所属的会话(e.g:我与好友A的C2C会话，我与群组G的GROUP会话)\r\n     *   isSend - Boolean, true表示是我发出消息, false表示是发给我的消息)\r\n     *   seq    - Integer, 消息序列号, 用于判断消息是否同一条\r\n     *   random - Integer, 消息随机数,用于判断消息是否同一条\r\n     *   time   - Integer, 消息时间戳, 为unix timestamp\r\n     *   fromAccount -String,  消息发送者帐号\r\n     *   subType -Integer,  消息子类型，c2c消息时，0-表示普通消息；群消息时，0-普通消息，1-点赞消息，2-提示消息\r\n     *   fromAccountNick -String,  消息发送者昵称\r\n     *   elems  - Array of webim.Msg.Elem, 描述消息内容的元素列表\r\n     * constructor:\r\n     *   Msg(sess, isSend, seq,random time,fromAccount) - 构造函数, 参数定义同上面properties中定义\r\n     * methods:\r\n     *   addText(text)  - 向elems中添加一个TEXT元素\r\n     *   addFace(face)  - 向elems中添加一个FACE元素\r\n     *   toHtml()       - 转成可展示的html String\r\n     *addFace\r\n     * sub-class webim.Msg.Elem\r\n     *   消息中一个组成元素的描述类, 一条消息的内容被抽象描述为N个元素的有序列表\r\n     * properties:\r\n     *   type   - 元素类型, 目前有TEXT(文本)、FACE(表情)、IMAGE(图片)等\r\n     *   content- 元素内容体, 当TEXT时为String, 当PIC时为UrlString\r\n     * constructor:\r\n     *   Elem(type, content) - 构造函数, 参数定义同上面properties中定义\r\n     *\r\n     * sub-class webim.Msg.Elem.TextElem\r\n     *   文本\r\n     * properties:\r\n     *   text  - String 内容\r\n     * constructor:\r\n     *   TextElem(text) - 构造函数, 参数定义同上面properties中定义\r\n     *\r\n     * sub-class webim.Msg.Elem.FaceElem\r\n     *   表情\r\n     * properties:\r\n     *   index  - Integer 表情索引, 用户自定义\r\n     *   data   - String 额外数据，用户自定义\r\n     * constructor:\r\n     *   FaceElem(index,data) - 构造函数, 参数定义同上面properties中定义\r\n     *\r\n     *\r\n     */\r\n    Msg: function (sess, isSend, seq, random, time, fromAccount, subType, fromAccountNick) {/*Class constructor*/\r\n    },\r\n\r\n    /* singleton object MsgStore\r\n     * webim.MsgStore是消息数据的Model对象(参考MVC概念), 它提供接口访问当前存储的会话和消息数据\r\n     * 下面说明下会话数据类型: Session\r\n     *\r\n     * class Session\r\n     *   一个Session对象描述一个会话，会话可简单理解为最近会话列表的一个条目，它由两个字段唯一标识:\r\n     *     type - String, 会话类型(如\"C2C\", \"GROUP\", ...)\r\n     *     id   - String, 会话ID(如C2C类型中为对方帐号,\"C2C\"时为好友ID,\"GROUP\"时为群ID)\r\n     * properties:\r\n     *   (Session对象未对外暴露任何属性字段, 所有访问通过下面的getter方法进行)\r\n     * methods:\r\n     *   type()     - String, 返回会话类型,\"C2C\"表示与好友私聊，\"GROUP\"表示群聊\r\n     *   id()       - String, 返回会话ID\r\n     *   name()     - String, 返回会话标题(如C2C类型中为对方的昵称,暂不支持)\r\n     *   icon()     - String, 返回会话图标(对C2C类型中为对方的头像URL，暂不支持)\r\n     *   unread()           - Integer, 返回会话未读条数\r\n     *   time()     - Integer, 返回会话最后活跃时间, 为unix timestamp\r\n     *   curMaxMsgSeq() - Integer, 返回会话最大消息序列号\r\n     *   msgCount() - Integer, 返回会话中所有消息条数\r\n     *   msg(index) - webim.Msg, 返回会话中第index条消息\r\n     */\r\n    MsgStore: {\r\n        /* function sessMap\r\n         *   获取所有会话\r\n         * return:\r\n         *   所有会话对象\r\n         */\r\n        sessMap: function () {\r\n            return {/*Object*/};\r\n        },\r\n        /* function sessCount\r\n         *   获取当前会话的个数\r\n         * return:\r\n         *   Integer, 会话个数\r\n         */\r\n        sessCount: function () {\r\n            return 0;\r\n        },\r\n\r\n        /* function sessByTypeId\r\n         *   根据会话类型和会话ID取得相应会话\r\n         * params:\r\n         *   type   - String, 会话类型(如\"C2C\", \"GROUP\", ...)\r\n         *   id     - String, 会话ID(如对方ID)\r\n         * return:\r\n         *   Session, 会话对象(说明见上面)\r\n         */\r\n        sessByTypeId: function (type, id) {\r\n            return {/*Session Object*/};\r\n        },\r\n        /* function delSessByTypeId\r\n         *   根据会话类型和会话ID删除相应会话\r\n         * params:\r\n         *   type   - String, 会话类型(如\"C2C\", \"GROUP\", ...)\r\n         *   id     - String, 会话ID(如对方ID)\r\n         * return:\r\n         *   Boolean, 布尔类型\r\n         */\r\n        delSessByTypeId: function (type, id) {\r\n            return true;\r\n        },\r\n\r\n        /* function resetCookieAndSyncFlag\r\n         *   重置上一次读取新c2c消息Cookie和是否继续拉取标记\r\n         * return:\r\n         *\r\n         */\r\n        resetCookieAndSyncFlag: function () {\r\n        },\r\n\r\n        downloadMap: {}\r\n    }\r\n\r\n};\r\n\r\n/* webim API implementation\r\n */\r\n(function (webim) {\r\n    //sdk版本\r\n    var SDK = {\r\n        'VERSION': '1.7.0',//sdk版本号\r\n        'APPID': '537048168'//web im sdk 版本 APPID\r\n    };\r\n\r\n    //是否启用正式环境，默认启用\r\n    var isAccessFormaEnvironment = true;\r\n    // var isAccessFormaEnvironment = false;\r\n\r\n    //后台接口主机\r\n    var SRV_HOST = {\r\n        'FORMAL': {\r\n            'COMMON': 'https://webim.tim.qq.com',\r\n            'PIC': 'https://pic.tim.qq.com'\r\n        },\r\n        'TEST': {\r\n            'COMMON': 'https://test.tim.qq.com',\r\n            'PIC': 'https://pic.tim.qq.com'\r\n        }\r\n    };\r\n\r\n    //浏览器版本信息\r\n    var BROWSER_INFO = {};\r\n    //是否为ie9（含）以下\r\n    var lowerBR = false;\r\n\r\n    //服务名称\r\n    var SRV_NAME = {\r\n        'OPEN_IM': 'openim',//私聊（拉取未读c2c消息，长轮询，c2c消息已读上报等）服务名\r\n        'GROUP': 'group_open_http_svc',//群组管理（拉取群消息，创建群，群成员管理，群消息已读上报等）服务名\r\n        'FRIEND': 'sns',//关系链管理（好友管理，黑名单管理等）服务名\r\n        'PROFILE': 'profile',//资料管理（查询，设置个人资料等）服务名\r\n        'RECENT_CONTACT': 'recentcontact',//最近联系人服务名\r\n        'PIC': 'openpic',//图片（或文件）服务名\r\n        'BIG_GROUP': 'group_open_http_noauth_svc',//直播大群 群组管理（申请加大群）服务名\r\n        'BIG_GROUP_LONG_POLLING': 'group_open_long_polling_http_noauth_svc',//直播大群 长轮询（拉取消息等）服务名\r\n        'IM_OPEN_STAT': 'imopenstat'//质量上报，统计接口错误率\r\n    };\r\n\r\n    //不同服务对应的版本号\r\n    var SRV_NAME_VER = {\r\n        'openim': 'v4',\r\n        'group_open_http_svc': 'v4',\r\n        'sns': 'v4',\r\n        'profile': 'v4',\r\n        'recentcontact': 'v4',\r\n        'openpic': 'v4',\r\n        'group_open_http_noauth_svc': 'v1',\r\n        'group_open_long_polling_http_noauth_svc': 'v1',\r\n        'imopenstat': 'v4'\r\n    };\r\n\r\n    //不同的命令名对应的上报类型ID，用于接口质量上报\r\n    var CMD_EVENT_ID_MAP = {\r\n        'login': 1,//登录\r\n        'pic_up': 3,//上传图片\r\n        'apply_join_group': 9,//申请加入群组\r\n        'create_group': 10,//创建群组\r\n        'longpolling': 18,//普通长轮询\r\n        'send_group_msg': 19,//群聊\r\n        'sendmsg': 20//私聊\r\n    };\r\n\r\n    //聊天类型\r\n    var SESSION_TYPE = {\r\n        'C2C': 'C2C',//私聊\r\n        'GROUP': 'GROUP'//群聊\r\n    };\r\n\r\n    //最近联系人类型\r\n    var RECENT_CONTACT_TYPE = {\r\n        'C2C': 1,//好友\r\n        'GROUP': 2//群\r\n    };\r\n\r\n    //消息最大长度（字节）\r\n    var MSG_MAX_LENGTH = {\r\n        'C2C': 12000,//私聊消息\r\n        'GROUP': 8898//群聊\r\n    };\r\n\r\n    //后台接口返回类型\r\n    var ACTION_STATUS = {\r\n        'OK': 'OK',//成功\r\n        'FAIL': 'FAIL'//失败\r\n    };\r\n\r\n    var ERROR_CODE_CUSTOM = 99999;//自定义后台接口返回错误码\r\n\r\n    //消息元素类型\r\n    var MSG_ELEMENT_TYPE = {\r\n        'TEXT': 'TIMTextElem',//文本\r\n        'FACE': 'TIMFaceElem',//表情\r\n        'IMAGE': 'TIMImageElem',//图片\r\n        'CUSTOM': 'TIMCustomElem',//自定义\r\n        'SOUND': 'TIMSoundElem',//语音,只支持显示\r\n        'FILE': 'TIMFileElem',//文件,只支持显示\r\n        'LOCATION': 'TIMLocationElem',//地理位置\r\n        'GROUP_TIP': 'TIMGroupTipElem'//群提示消息,只支持显示\r\n    };\r\n\r\n    //图片类型\r\n    var IMAGE_TYPE = {\r\n        'ORIGIN': 1,//原图\r\n        'LARGE': 2,//缩略大图\r\n        'SMALL': 3//缩略小图\r\n    };\r\n\r\n    //上传资源包类型\r\n    var UPLOAD_RES_PKG_FLAG = {\r\n        'RAW_DATA': 0,//原始数据\r\n        'BASE64_DATA': 1//base64编码数据\r\n    };\r\n\r\n    //下载文件配置\r\n    var DOWNLOAD_FILE = {\r\n        'BUSSINESS_ID': '10001',//下载文件业务ID\r\n        'AUTH_KEY': '617574686b6579',//下载文件authkey\r\n        'SERVER_IP': '182.140.186.147'//下载文件服务器IP\r\n    };\r\n\r\n    //下载文件类型\r\n    var DOWNLOAD_FILE_TYPE = {\r\n        \"SOUND\": 2106,//语音\r\n        \"FILE\": 2107//普通文件\r\n    };\r\n\r\n    //上传资源类型\r\n    var UPLOAD_RES_TYPE = {\r\n        \"IMAGE\": 1,//图片\r\n        \"FILE\": 2,//文件\r\n        \"SHORT_VIDEO\": 3,//短视频\r\n        \"SOUND\": 4//语音，PTT\r\n    };\r\n\r\n    //版本号，用于上传图片或文件接口\r\n    var VERSION_INFO = {\r\n        'APP_VERSION': '2.1',//应用版本号\r\n        'SERVER_VERSION': 1//服务端版本号\r\n    };\r\n\r\n    //长轮询消息类型\r\n    var LONG_POLLINNG_EVENT_TYPE = {\r\n        \"C2C\": 1//新的c2c消息通知\r\n        ,\"GROUP_COMMON\": 3//新的群普通消息\r\n        ,\"GROUP_TIP\": 4//新的群提示消息\r\n        ,\"GROUP_SYSTEM\": 5//新的群系统消息\r\n        ,\"GROUP_TIP2\": 6//新的群提示消息2\r\n        ,\"FRIEND_NOTICE\": 7//好友系统通知\r\n        ,\"PROFILE_NOTICE\": 8//资料系统通知\r\n        ,\"C2C_COMMON\": 9//新的C2C消息\r\n        ,\"C2C_EVENT\": 10\r\n    };\r\n\r\n    //c2c消息子类型\r\n    var C2C_MSG_SUB_TYPE = {\r\n        \"COMMON\": 0//普通消息\r\n    };\r\n    //c2c消息子类型\r\n    var C2C_EVENT_SUB_TYPE = {\r\n        \"READED\": 92//已读消息同步\r\n    };\r\n\r\n    //群消息子类型\r\n    var GROUP_MSG_SUB_TYPE = {\r\n        \"COMMON\": 0,//普通消息\r\n        \"LOVEMSG\": 1,//点赞消息\r\n        \"TIP\": 2,//提示消息\r\n        \"REDPACKET\": 3//红包消息\r\n    };\r\n\r\n    //群消息优先级类型\r\n    var GROUP_MSG_PRIORITY_TYPE = {\r\n        \"REDPACKET\": 1,//红包消息\r\n        \"COMMON\": 2,//普通消息\r\n        \"LOVEMSG\": 3//点赞消息\r\n    };\r\n\r\n    //群提示消息类型\r\n    var GROUP_TIP_TYPE = {\r\n        \"JOIN\": 1,//加入群组\r\n        \"QUIT\": 2,//退出群组\r\n        \"KICK\": 3,//被踢出群组\r\n        \"SET_ADMIN\": 4,//被设置为管理员\r\n        \"CANCEL_ADMIN\": 5,//被取消管理员\r\n        \"MODIFY_GROUP_INFO\": 6,//修改群资料\r\n        \"MODIFY_MEMBER_INFO\": 7//修改群成员信息\r\n    };\r\n\r\n    //群提示消息-群资料变更类型\r\n    var GROUP_TIP_MODIFY_GROUP_INFO_TYPE = {\r\n        \"FACE_URL\": 1,//修改群头像URL\r\n        \"NAME\": 2,//修改群名称\r\n        \"OWNER\": 3,//修改群主\r\n        \"NOTIFICATION\": 4,//修改群公告\r\n        \"INTRODUCTION\": 5//修改群简介\r\n    };\r\n\r\n    //群系统消息类型\r\n    var GROUP_SYSTEM_TYPE = {\r\n        \"JOIN_GROUP_REQUEST\": 1,//申请加群请求（只有管理员会收到）\r\n        \"JOIN_GROUP_ACCEPT\": 2,//申请加群被同意（只有申请人能够收到）\r\n        \"JOIN_GROUP_REFUSE\": 3,//申请加群被拒绝（只有申请人能够收到）\r\n        \"KICK\": 4,//被管理员踢出群(只有被踢者接收到)\r\n        \"DESTORY\": 5,//群被解散(全员接收)\r\n        \"CREATE\": 6,//创建群(创建者接收, 不展示)\r\n        \"INVITED_JOIN_GROUP_REQUEST\": 7,//邀请加群(被邀请者接收)\r\n        \"QUIT\": 8,//主动退群(主动退出者接收, 不展示)\r\n        \"SET_ADMIN\": 9,//设置管理员(被设置者接收)\r\n        \"CANCEL_ADMIN\": 10,//取消管理员(被取消者接收)\r\n        \"REVOKE\": 11,//群已被回收(全员接收, 不展示)\r\n        \"READED\": 15,//群消息已读同步\r\n        \"CUSTOM\": 255//用户自定义通知(默认全员接收)\r\n    };\r\n\r\n    //好友系统通知子类型\r\n    var FRIEND_NOTICE_TYPE = {\r\n        \"FRIEND_ADD\": 1,//好友表增加\r\n        \"FRIEND_DELETE\": 2,//好友表删除\r\n        \"PENDENCY_ADD\": 3,//未决增加\r\n        \"PENDENCY_DELETE\": 4,//未决删除\r\n        \"BLACK_LIST_ADD\": 5,//黑名单增加\r\n        \"BLACK_LIST_DELETE\": 6,//黑名单删除\r\n        \"PENDENCY_REPORT\": 7,//未决已读上报\r\n        \"FRIEND_UPDATE\": 8//好友数据更新\r\n    };\r\n\r\n    //资料系统通知子类型\r\n    var PROFILE_NOTICE_TYPE = {\r\n        \"PROFILE_MODIFY\": 1//资料修改\r\n    };\r\n\r\n    //腾讯登录服务错误码（用于托管模式）\r\n    var TLS_ERROR_CODE = {\r\n        'OK': 0,//成功\r\n        'SIGNATURE_EXPIRATION': 11//用户身份凭证过期\r\n    };\r\n\r\n    //长轮询连接状态\r\n    var CONNECTION_STATUS = {\r\n        'INIT': -1,//初始化\r\n        'ON': 0,//连接正常\r\n        'RECONNECT': 1,//连接恢复正常\r\n        'OFF': 9999//连接已断开,可能是用户网络问题，或者长轮询接口报错引起的\r\n    };\r\n\r\n    var UPLOAD_PIC_BUSSINESS_TYPE = {//图片业务类型\r\n        'GROUP_MSG': 1,//私聊图片\r\n        'C2C_MSG': 2,//群聊图片\r\n        'USER_HEAD': 3,//用户头像\r\n        'GROUP_HEAD': 4//群头像\r\n    };\r\n\r\n    var FRIEND_WRITE_MSG_ACTION = {//好友输入消息状态\r\n        'ING': 14,//正在输入\r\n        'STOP': 15//停止输入\r\n    };\r\n\r\n    //ajax默认超时时间，单位：毫秒\r\n    var ajaxDefaultTimeOut = 15000;\r\n\r\n    //大群长轮询接口返回正常时，延时一定时间再发起下一次请求\r\n    var OK_DELAY_TIME = 1000;\r\n\r\n    //大群长轮询接口发生错误时，延时一定时间再发起下一次请求\r\n    var ERROR_DELAY_TIME = 5000;\r\n\r\n    //群提示消息最多显示人数\r\n    var GROUP_TIP_MAX_USER_COUNT = 10;\r\n\r\n    //长轮询连接状态\r\n    var curLongPollingStatus = CONNECTION_STATUS.INIT;\r\n\r\n    //当长轮询连接断开后，是否已经回调过\r\n    var longPollingOffCallbackFlag = false;\r\n\r\n    //当前长轮询返回错误次数\r\n    var curLongPollingRetErrorCount = 0;\r\n\r\n    //长轮询默认超时时间，单位：毫秒\r\n    var longPollingDefaultTimeOut = 60000;\r\n\r\n    //长轮询返回错误次数达到一定值后，发起新的长轮询请求间隔时间，单位：毫秒\r\n    var longPollingIntervalTime = 5000;\r\n\r\n    //没有新消息时，长轮询返回60008错误码是正常的\r\n    var longPollingTimeOutErrorCode = 60008;\r\n\r\n    //多实例登录被kick的错误码\r\n    var longPollingKickedErrorCode = 91101;\r\n\r\n    var LongPollingId = null;\r\n\r\n    //当前大群长轮询返回错误次数\r\n    var curBigGroupLongPollingRetErrorCount = 0;\r\n\r\n    //最大允许长轮询返回错误次数\r\n    var LONG_POLLING_MAX_RET_ERROR_COUNT = 10;\r\n\r\n    //上传重试累计\r\n    var Upload_Retry_Times = 0;\r\n    //最大上传重试\r\n    var Upload_Retry_Max_Times = 20;\r\n\r\n    //ie7/8/9采用jsonp方法解决ajax跨域限制\r\n    var jsonpRequestId = 0;//jsonp请求id\r\n    //最新jsonp请求返回的json数据\r\n    var jsonpLastRspData = null;\r\n    //兼容ie7/8/9,jsonp回调函数\r\n    var jsonpCallback = null;\r\n\r\n    var uploadResultIframeId = 0;//用于上传图片的iframe id\r\n\r\n    var ipList = [];//文件下载地址\r\n    var authkey = null;//文件下载票据\r\n    var expireTime = null;//文件下载票据超时时间\r\n\r\n    //错误码\r\n    var ERROR = {};\r\n\t\r\n\t\r\n\tvar app = getApp();  \r\n\t\r\n\t\r\n    //当前登录用户 \r\n\t  // var ctx = {\r\n   //      sdkAppID:  app.globalData.ctx.sdkAppID ||  null,\r\n   //      appIDAt3rd: app.globalData.ctx.appIDAt3rd ||  null,\r\n   //      accountType: app.globalData.ctx.accountType ||  null,\r\n   //      identifier: app.globalData.ctx.identifier ||  null,\r\n   //      tinyid: app.globalData.ctx.tinyid ||  null,\r\n   //      identifierNick: app.globalData.ctx.identifierNick ||  null,\r\n   //      userSig: app.globalData.ctx.userSig ||  null,\r\n   //      a2: app.globalData.ctx.a2 ||  null,\r\n   //      contentType: app.globalData.ctx.contentType || 'json',\r\n   //      apn: app.globalData.ctx.apn || 1\r\n   //  };\r\n    var ctx = {\r\n        sdkAppID: null,\r\n        appIDAt3rd: null,\r\n        accountType: null,\r\n        identifier: null,\r\n        tinyid: null,\r\n        identifierNick: null,\r\n        userSig: null,\r\n        a2: null,\r\n        contentType: 'json',\r\n        apn: 1\r\n    };\r\n    var opt = {};\r\n    var xmlHttpObjSeq = 0;//ajax请求id\r\n    var xmlHttpObjMap = {};//发起的ajax请求\r\n    var curSeq = 0;//消息seq\r\n    var tempC2CMsgList = [];//新c2c消息临时缓存\r\n    var tempC2CHistoryMsgList = [];//漫游c2c消息临时缓存\r\n\r\n    var maxApiReportItemCount = 20;//一次最多上报条数\r\n    var apiReportItems = [];//暂存api接口质量上报数据\r\n\r\n    var Resources = {\r\n        downloadMap : {}\r\n    };\r\n\r\n    //表情标识字符和索引映射关系对象，用户可以自定义\r\n    var emotionDataIndexs = {\r\n        \"[惊讶]\": 0,\r\n        \"[撇嘴]\": 1,\r\n        \"[色]\": 2,\r\n        \"[发呆]\": 3,\r\n        \"[得意]\": 4,\r\n        \"[流泪]\": 5,\r\n        \"[害羞]\": 6,\r\n        \"[闭嘴]\": 7,\r\n        \"[睡]\": 8,\r\n        \"[大哭]\": 9,\r\n        \"[尴尬]\": 10,\r\n        \"[发怒]\": 11,\r\n        \"[调皮]\": 12,\r\n        \"[龇牙]\": 13,\r\n        \"[微笑]\": 14,\r\n        \"[难过]\": 15,\r\n        \"[酷]\": 16,\r\n        \"[冷汗]\": 17,\r\n        \"[抓狂]\": 18,\r\n        \"[吐]\": 19,\r\n        \"[偷笑]\": 20,\r\n        \"[可爱]\": 21,\r\n        \"[白眼]\": 22,\r\n        \"[傲慢]\": 23,\r\n        \"[饿]\": 24,\r\n        \"[困]\": 25,\r\n        \"[惊恐]\": 26,\r\n        \"[流汗]\": 27,\r\n        \"[憨笑]\": 28,\r\n        \"[大兵]\": 29,\r\n        \"[奋斗]\": 30,\r\n        \"[咒骂]\": 31,\r\n        \"[疑问]\": 32,\r\n        \"[嘘]\": 33,\r\n        \"[晕]\": 34\r\n    };\r\n\r\n    //表情对象，用户可以自定义\r\n    var emotions = { };\r\n    //工具类\r\n    var tool = new function () {\r\n\r\n        //格式化时间戳\r\n        //format格式如下：\r\n        //yyyy-MM-dd hh:mm:ss 年月日时分秒(默认格式)\r\n        //yyyy-MM-dd 年月日\r\n        //hh:mm:ss 时分秒\r\n        this.formatTimeStamp = function (timestamp, format) {\r\n            if (!timestamp) {\r\n                return 0;\r\n            }\r\n            var formatTime;\r\n            format = format || 'yyyy-MM-dd hh:mm:ss';\r\n            var date = new Date(timestamp * 1000);\r\n            var o = {\r\n                \"M+\": date.getMonth() + 1, //月份\r\n                \"d+\": date.getDate(), //日\r\n                \"h+\": date.getHours(), //小时\r\n                \"m+\": date.getMinutes(), //分\r\n                \"s+\": date.getSeconds() //秒\r\n            };\r\n            if (/(y+)/.test(format)) {\r\n                formatTime = format.replace(RegExp.$1, (date.getFullYear() + \"\").substr(4 - RegExp.$1.length));\r\n            } else {\r\n                formatTime = format;\r\n            }\r\n            for (var k in o) {\r\n                if (new RegExp(\"(\" + k + \")\").test(formatTime))\r\n                    formatTime = formatTime.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : ((\"00\" + o[k]).substr((\"\" + o[k]).length)));\r\n            }\r\n            return formatTime;\r\n        };\r\n\r\n        //根据群类型英文名转换成中文名\r\n        this.groupTypeEn2Ch = function (type_en) {\r\n            var type_ch = null;\r\n            switch (type_en) {\r\n                case 'Public':\r\n                    type_ch = '公开群';\r\n                    break;\r\n                case 'ChatRoom':\r\n                    type_ch = '聊天室';\r\n                    break;\r\n                case 'Private':\r\n                    type_ch = '讨论组';\r\n                    break;\r\n                case 'AVChatRoom':\r\n                    type_ch = '直播聊天室';\r\n                    break;\r\n                default:\r\n                    type_ch = type_en;\r\n                    break;\r\n            }\r\n            return type_ch;\r\n        };\r\n        //根据群类型中文名转换成英文名\r\n        this.groupTypeCh2En = function (type_ch) {\r\n            var type_en = null;\r\n            switch (type_ch) {\r\n                case '公开群':\r\n                    type_en = 'Public';\r\n                    break;\r\n                case '聊天室':\r\n                    type_en = 'ChatRoom';\r\n                    break;\r\n                case '讨论组':\r\n                    type_en = 'Private';\r\n                    break;\r\n                case '直播聊天室':\r\n                    type_en = 'AVChatRoom';\r\n                    break;\r\n                default:\r\n                    type_en = type_ch;\r\n                    break;\r\n            }\r\n            return type_en;\r\n        };\r\n        //根据群身份英文名转换成群身份中文名\r\n        this.groupRoleEn2Ch = function (role_en) {\r\n            var role_ch = null;\r\n            switch (role_en) {\r\n                case 'Member':\r\n                    role_ch = '成员';\r\n                    break;\r\n                case 'Admin':\r\n                    role_ch = '管理员';\r\n                    break;\r\n                case 'Owner':\r\n                    role_ch = '群主';\r\n                    break;\r\n                default:\r\n                    role_ch = role_en;\r\n                    break;\r\n            }\r\n            return role_ch;\r\n        };\r\n        //根据群身份中文名转换成群身份英文名\r\n        this.groupRoleCh2En = function (role_ch) {\r\n            var role_en = null;\r\n            switch (role_ch) {\r\n                case '成员':\r\n                    role_en = 'Member';\r\n                    break;\r\n                case '管理员':\r\n                    role_en = 'Admin';\r\n                    break;\r\n                case '群主':\r\n                    role_en = 'Owner';\r\n                    break;\r\n                default:\r\n                    role_en = role_ch;\r\n                    break;\r\n            }\r\n            return role_en;\r\n        };\r\n        //根据群消息提示类型英文转换中文\r\n        this.groupMsgFlagEn2Ch = function (msg_flag_en) {\r\n            var msg_flag_ch = null;\r\n            switch (msg_flag_en) {\r\n                case 'AcceptAndNotify':\r\n                    msg_flag_ch = '接收并提示';\r\n                    break;\r\n                case 'AcceptNotNotify':\r\n                    msg_flag_ch = '接收不提示';\r\n                    break;\r\n                case 'Discard':\r\n                    msg_flag_ch = '屏蔽';\r\n                    break;\r\n                default:\r\n                    msg_flag_ch = msg_flag_en;\r\n                    break;\r\n            }\r\n            return msg_flag_ch;\r\n        };\r\n        //根据群消息提示类型中文名转换英文名\r\n        this.groupMsgFlagCh2En = function (msg_flag_ch) {\r\n            var msg_flag_en = null;\r\n            switch (msg_flag_ch) {\r\n                case '接收并提示':\r\n                    msg_flag_en = 'AcceptAndNotify';\r\n                    break;\r\n                case '接收不提示':\r\n                    msg_flag_en = 'AcceptNotNotify';\r\n                    break;\r\n                case '屏蔽':\r\n                    msg_flag_en = 'Discard';\r\n                    break;\r\n                default:\r\n                    msg_flag_en = msg_flag_ch;\r\n                    break;\r\n            }\r\n            return msg_flag_en;\r\n        };\r\n        //将空格和换行符转换成HTML标签\r\n        this.formatText2Html = function (text) {\r\n            var html = text;\r\n            if (html) {\r\n                html = this.xssFilter(html);//用户昵称或群名称等字段会出现脚本字符串\r\n                html = html.replace(/ /g, \"&nbsp;\");\r\n                html = html.replace(/\\n/g, \"<br/>\");\r\n            }\r\n            return html;\r\n        };\r\n        //将HTML标签转换成空格和换行符\r\n        this.formatHtml2Text = function (html) {\r\n            var text = html;\r\n            if (text) {\r\n                text = text.replace(/&nbsp;/g, \" \");\r\n                text = text.replace(/<br\\/>/g, \"\\n\");\r\n            }\r\n            return text;\r\n        };\r\n        //获取字符串(UTF-8编码)所占字节数\r\n        //参考：http://zh.wikipedia.org/zh-cn/UTF-8\r\n        this.getStrBytes = function (str) {\r\n            if (str == null || str === undefined) return 0;\r\n            if (typeof str != \"string\") {\r\n                return 0;\r\n            }\r\n            var total = 0, charCode, i, len;\r\n            for (i = 0, len = str.length; i < len; i++) {\r\n                charCode = str.charCodeAt(i);\r\n                if (charCode <= 0x007f) {\r\n                    total += 1;//字符代码在000000 – 00007F之间的，用一个字节编码\r\n                } else if (charCode <= 0x07ff) {\r\n                    total += 2;//000080 – 0007FF之间的字符用两个字节\r\n                } else if (charCode <= 0xffff) {\r\n                    total += 3;//000800 – 00D7FF 和 00E000 – 00FFFF之间的用三个字节，注: Unicode在范围 D800-DFFF 中不存在任何字符\r\n                } else {\r\n                    total += 4;//010000 – 10FFFF之间的用4个字节\r\n                }\r\n            }\r\n            return total;\r\n        };\r\n\r\n\r\n        //防止XSS攻击\r\n        this.xssFilter = function (val) {\r\n            val = val.toString();\r\n            val = val.replace(/[<]/g, \"&lt;\");\r\n            val = val.replace(/[>]/g, \"&gt;\");\r\n            val = val.replace(/\"/g, \"&quot;\");\r\n            //val = val.replace(/'/g, \"&#039;\");\r\n            return val;\r\n        };\r\n\r\n        //去掉头尾空白符\r\n        this.trimStr = function (str) {\r\n            if (!str) return '';\r\n            str = str.toString();\r\n            return str.replace(/(^\\s*)|(\\s*$)/g, \"\");\r\n        };\r\n        //判断是否为8位整数\r\n        this.validNumber = function (str) {\r\n            str = str.toString();\r\n            return str.match(/(^\\d{1,8}$)/g);\r\n        };\r\n        this.getReturnError = function (errorInfo, errorCode) {\r\n            if (!errorCode) {\r\n                errorCode = -100;\r\n            }\r\n            var error = {\r\n                'ActionStatus': ACTION_STATUS.FAIL,\r\n                'ErrorCode': errorCode,\r\n                'ErrorInfo': errorInfo + \"[\" + errorCode + \"]\"\r\n            };\r\n            return error;\r\n        };\r\n        //设置cookie\r\n        //name 名字\r\n        //value 值\r\n        //expires 有效期(单位：秒)\r\n        //path\r\n        //domain 作用域\r\n        this.setCookie = function (name, value, expires, path, domain) {\r\n            var exp = new Date();\r\n            exp.setTime(exp.getTime() + expires * 1000);\r\n            document.cookie = name + \"=\" + escape(value) + \";expires=\" + exp.toGMTString();\r\n        };\r\n        //获取cookie\r\n        this.getCookie = function (name) {\r\n            var result = document.cookie.match(new RegExp(\"(^| )\" + name + \"=([^;]*)(;|$)\"));\r\n            if (result != null) {\r\n                return unescape(result[2]);\r\n            }\r\n            return null;\r\n        };\r\n        //删除cookie\r\n        this.delCookie = function (name) {\r\n            var exp = new Date();\r\n            exp.setTime(exp.getTime() - 1);\r\n            var value = this.getCookie(name);\r\n            if (value != null)\r\n                document.cookie = name + \"=\" + escape(value) + \";expires=\" + exp.toGMTString();\r\n        };\r\n        //根据名字获取url参数值\r\n        this.getQueryString = function (name) {\r\n            var reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\", \"i\");\r\n            var r = location.search.substr(1).match(reg);\r\n            if (r != null) return unescape(r[2]);\r\n            return null;\r\n        };\r\n\r\n    };\r\n\r\n    //日志对象\r\n    var log = new function () {\r\n\r\n        var on = true;\r\n\r\n        this.setOn = function (onFlag) {\r\n            on = onFlag;\r\n        };\r\n\r\n        this.getOn = function () {\r\n            return on;\r\n        };\r\n\r\n        this.error = function (logStr) {\r\n            try {\r\n                on && console.error(logStr);\r\n            } catch (e) {\r\n            }\r\n        };\r\n        this.warn = function (logStr) {\r\n            try {\r\n                on && console.warn(logStr);\r\n            } catch (e) {\r\n            }\r\n        };\r\n        this.info = function (logStr) {\r\n            try {\r\n                on && console.info(logStr);\r\n            } catch (e) {\r\n            }\r\n        };\r\n        this.debug = function (logStr) {\r\n            try {\r\n                on && console.debug(logStr);\r\n            } catch (e) {\r\n            }\r\n        };\r\n    };\r\n    //获取unix时间戳\r\n    var unixtime = function (d) {\r\n        if (!d) d = new Date();\r\n        return Math.round(d.getTime() / 1000);\r\n    };\r\n    //时间戳转日期\r\n    var fromunixtime = function (t) {\r\n        return new Date(t * 1000);\r\n    };\r\n    //获取下一个消息序号\r\n    var nextSeq = function () {\r\n        if (curSeq) {\r\n            curSeq = curSeq + 1;\r\n        } else {\r\n            curSeq = Math.round(Math.random() * 10000000);\r\n        }\r\n        return curSeq;\r\n    };\r\n    //产生随机数\r\n    var createRandom = function () {\r\n        return Math.round(Math.random() * 4294967296);\r\n    };\r\n\r\n    //发起ajax请求\r\n    var ajaxRequest = function (meth, url, req, timeout, isLongPolling, cbOk, cbErr) {\r\n        reqSeq++;\r\n        reqNum++;\r\n        // console.log('IM reqNum: ',reqNum);\r\n        xmlHttpObjMap[xmlHttpObjSeq++] = wx.request({\r\n            url : url + \"&reqSeq=\"+reqSeq,\r\n            data : req,\r\n            dataType : 'json',\r\n            method : meth,\r\n            header: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            success : function(res){\r\n                reqNum--;\r\n                // console.log('IM complete reqNum: ',reqNum);\r\n                curLongPollingRetErrorCount = curBigGroupLongPollingRetErrorCount = 0;\r\n                if (cbOk) cbOk(res.data);\r\n                \r\n            },\r\n            fail : function(res){\r\n                reqNum--;\r\n                // console.log('IM complete reqNum: ',reqNum);\r\n                setTimeout(function(){\r\n                    // console.log('IM请求服务器失败:'+reqSeq,url,req,res);\r\n                    var errInfo = \"请求服务器失败,请检查你的网络是否正常\";\r\n                    var error = tool.getReturnError(errInfo, -2);\r\n                    //if (!isLongPolling && cbErr) cbErr(error);\r\n                    if (cbErr) cbErr(error);\r\n                },16);\r\n            }\r\n        });\r\n    }\r\n    //发起ajax请求（json格式数据）\r\n    var ajaxRequestJson = function (meth, url, req, timeout, isLongPolling, cbOk, cbErr) {\r\n        ajaxRequest(meth, url, JSON.stringify(req), timeout, isLongPolling, function (resp) {\r\n            var json = null;\r\n            //if (resp) eval('json=('+resp+');');//将返回的json字符串转换成json对象\r\n            //if (resp) json=eval('('+resp+')');//将返回的json字符串转换成json对象\r\n            if (resp) json = resp; //将返回的json字符串转换成json对象\r\n            if (cbOk) cbOk(json);\r\n        }, cbErr);\r\n    }\r\n    //判断用户是否已登录\r\n    var isLogin = function () {\r\n\t\tctx.sdkAppID = app.globalData.accountInfo.sdkAppID\r\n\t\tctx.identifier = app.globalData.accountInfo.userID\r\n\t\t// console.log('ctx.sdkAppID',ctx.sdkAppID,ctx.identifier)\r\n\t\t// console.log(app.globalData.accountInfo)\r\n\t\t// console.log('qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq');\r\n\t\t\r\n        return ctx.sdkAppID && ctx.identifier;\r\n    };\r\n    //检查是否登录\r\n    var checkLogin = function (cbErr, isNeedCallBack) {\r\n        if (!isLogin()) {\r\n            if (isNeedCallBack) {\r\n                var errInfo = \"请登录\";\r\n                var error = tool.getReturnError(errInfo, -4);\r\n\r\n                if (cbErr) cbErr(error);\r\n            }\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n\r\n    //检查是否访问正式环境\r\n    var isAccessFormalEnv = function () {\r\n        return isAccessFormaEnvironment;\r\n    };\r\n\r\n    //根据不同的服务名和命令，获取对应的接口地址\r\n    var getApiUrl = function (srvName, cmd, cbOk, cbErr) {\r\n        var srvHost = SRV_HOST;\r\n        if (isAccessFormalEnv()) {\r\n            srvHost = SRV_HOST.FORMAL.COMMON;\r\n        } else {\r\n            srvHost = SRV_HOST.TEST.COMMON;\r\n        }\r\n\r\n        //if (srvName == SRV_NAME.RECENT_CONTACT) {\r\n        //    srvHost = SRV_HOST.TEST.COMMON;\r\n        //}\r\n\r\n        if (srvName == SRV_NAME.PIC) {\r\n            if (isAccessFormalEnv()) {\r\n                srvHost = SRV_HOST.FORMAL.PIC;\r\n            } else {\r\n                srvHost = SRV_HOST.TEST.PIC;\r\n            }\r\n        }\r\n\r\n        var url = srvHost + '/' + SRV_NAME_VER[srvName] + '/' + srvName + '/' + cmd + '?websdkappid=' + SDK.APPID + \"&v=\" + SDK.VERSION;\r\n\r\n        if (isLogin()) {\r\n\t\t\t\r\n\t\t\tctx.identifier = app.globalData.ctx.identifier;\r\n\t\t\tctx.userSig = app.globalData.ctx.userSig;\r\n\t\t\t\r\n            if (cmd == 'login') {\r\n                url += '&identifier=' + encodeURIComponent(ctx.identifier) + '&usersig=' + ctx.userSig;\r\n            } else {\r\n\t\t\t\t\r\n\t\t\t\tctx.tinyid = app.globalData.ctx.tinyid\r\n\t\t\t\tctx.a2 = app.globalData.ctx.a2\r\n\t\t\t\t\r\n                if (ctx.tinyid && ctx.a2) {\r\n                    url += '&tinyid=' + ctx.tinyid + '&a2=' + ctx.a2;\r\n                } else {\r\n                    if (cbErr) {\r\n                        log.error(\"tinyid或a2为空[\" + srvName + \"][\" + cmd + \"]\");\r\n                        cbErr(tool.getReturnError(\"tinyid或a2为空[\" + srvName + \"][\" + cmd + \"]\", -5));\r\n                        return false;\r\n                    }\r\n                }\r\n            }\r\n\t\t\t\r\n\t\t\tctx.contentType = app.globalData.ctx.contentType\r\n\t\t\t\r\n            url += '&contenttype=' + ctx.contentType;\r\n        }\r\n\t\t\r\n\t\tctx.sdkAppID = app.globalData.ctx.sdkAppID\r\n\t\tctx.accountType = app.globalData.ctx.accountType\r\n\t\tctx.apn = app.globalData.ctx.apn\t\r\n\t\t\r\n        url += '&sdkappid=' + ctx.sdkAppID + '&accounttype=' + ctx.accountType + '&apn=' + ctx.apn + '&reqtime=' + unixtime();\r\n        return url;\r\n    };\r\n\r\n    //获取语音下载url\r\n    var getSoundDownUrl = function (uuid, senderId) {\r\n        var soundUrl = null;\r\n        if (authkey && ipList[0]) {\r\n            soundUrl = \"http://\" + ipList[0] + \"/asn.com/stddownload_common_file?authkey=\" + authkey + \"&bid=\" + DOWNLOAD_FILE.BUSSINESS_ID + \"&subbid=\" + ctx.sdkAppID + \"&fileid=\" + uuid + \"&filetype=\" + DOWNLOAD_FILE_TYPE.SOUND + \"&openid=\" + senderId + \"&ver=0\";\r\n        } else {\r\n            log.error(\"拼接语音下载url不报错：ip或者authkey为空\");\r\n        }\r\n        return soundUrl;\r\n    };\r\n\r\n    //获取文件下载地址\r\n    var getFileDownUrl = function (uuid, senderId, fileName) {\r\n        var fileUrl = null;\r\n        if (authkey && ipList[0]) {\r\n            fileUrl = \"http://\" + ipList[0] + \"/asn.com/stddownload_common_file?authkey=\" + authkey + \"&bid=\" + DOWNLOAD_FILE.BUSSINESS_ID + \"&subbid=\" + ctx.sdkAppID + \"&fileid=\" + uuid + \"&filetype=\" + DOWNLOAD_FILE_TYPE.FILE + \"&openid=\" + senderId + \"&ver=0&filename=\" + encodeURIComponent(fileName);\r\n        } else {\r\n            log.error(\"拼接文件下载url不报错：ip或者authkey为空\");\r\n        }\r\n        Resources.downloadMap[\"uuid_\"+uuid] = fileUrl;\r\n        return fileUrl;\r\n    };\r\n\r\n    //获取文件下载地址\r\n    var getFileDownUrlV2 = function (uuid, senderId, fileName, downFlag, receiverId, busiId, type) {\r\n            var options = {\r\n                \"From_Account\": senderId,//\"identifer_0\",       // 类型: String, 发送者tinyid\r\n                \"To_Account\": receiverId,//\"identifer_1\",         // 类型: String, 接收者tinyid\r\n                \"os_platform\": 10,                      // 类型: Number, 终端的类型 1(android) 2(ios) 3(windows) 10(others...)\r\n                \"Timestamp\": unixtime().toString(),     // 类型: Number, 时间戳\r\n                \"Random\": createRandom().toString(),    // 类型: Number, 随机值\r\n                \"request_info\": [                       // 类型: Array\r\n                    {\r\n                        \"busi_id\": busiId,                   // 类型: Number, 群(1) C2C(2) 其他请联系sdk开发者分配\r\n                        \"download_flag\": downFlag,      // 类型: Number, 申请下载地址标识  0(申请架平下载地址)  1(申请COS平台下载地址)  2(不需要申请, 直接拿url下载(这里应该不会为2))\r\n                        \"type\": type,                      // 类型: Number, 0(短视频缩略图), 1(文件), 2(短视频), 3(ptt), 其他待分配\r\n                        \"uuid\": uuid,                   // 类型: Number, 唯一标识一个文件的uuid\r\n                        \"version\": VERSION_INFO.SERVER_VERSION, // 类型: Number, 架平server版本\r\n                        \"auth_key\": authkey,            // 类型: String, 认证签名\r\n                        \"ip\": ipList[0]                 // 类型: Number, 架平IP\r\n                    }\r\n                ]\r\n            };\r\n            //获取下载地址\r\n            proto_applyDownload(options,function(resp){\r\n                if(resp.error_code == 0 && resp.response_info){\r\n                    Resources.downloadMap[\"uuid_\"+options.uuid] = resp.response_info.url;\r\n                }\r\n                if(onAppliedDownloadUrl){\r\n                    onAppliedDownloadUrl({\r\n                        uuid : options.uuid,\r\n                        url : resp.response_info.url,\r\n                        maps : Resources.downloadMap\r\n                    });\r\n                }\r\n            }, function(resp){\r\n                log.error(\"获取下载地址失败\",options.uuid)\r\n            });\r\n    };\r\n\r\n\r\n    //重置ajax请求\r\n    var clearXmlHttpObjMap = function () {\r\n        //遍历xmlHttpObjMap{}\r\n        for (var seq in xmlHttpObjMap) {\r\n            var xmlHttpObj = xmlHttpObjMap[seq];\r\n            if (xmlHttpObj) {\r\n                xmlHttpObj.abort();//中断ajax请求(长轮询)\r\n                xmlHttpObjMap[xmlHttpObjSeq] = null;//清空\r\n            }\r\n        }\r\n        xmlHttpObjSeq = 0;\r\n        xmlHttpObjMap = {};\r\n    };\r\n\r\n    //重置sdk全局变量\r\n    var clearSdk = function () {\r\n\r\n        clearXmlHttpObjMap();\r\n\r\n        //当前登录用户\r\n        ctx = {\r\n            sdkAppID: null,\r\n            appIDAt3rd: null,\r\n            accountType: null,\r\n            identifier: null,\r\n            identifierNick: null,\r\n            userSig: null,\r\n            contentType: 'json',\r\n            apn: 1\r\n        };\r\n        opt = {};\r\n\r\n        curSeq = 0;\r\n\r\n        //ie8,9采用jsonp方法解决ajax跨域限制\r\n        jsonpRequestId = 0;//jsonp请求id\r\n        //最新jsonp请求返回的json数据\r\n        jsonpLastRspData = null;\r\n\r\n        apiReportItems = [];\r\n\r\n        MsgManager.clear();\r\n\r\n        //重置longpollingId \r\n        LongPollingId = null;\r\n    };\r\n\r\n    //登录\r\n    var _login = function (loginInfo, listeners, options, cbOk, cbErr) {\r\n\r\n        clearSdk();\r\n\r\n        if (options) opt = options;\r\n        if (opt.isAccessFormalEnv == false) {\r\n            log.error(\"请切换为正式环境\");\r\n            isAccessFormaEnvironment = opt.isAccessFormalEnv;\r\n        }\r\n        if (opt.isLogOn == false) {\r\n            log.setOn(opt.isLogOn);\r\n        }\r\n        /*\r\n         if(opt.emotions){\r\n         emotions=opt.emotions;\r\n         webim.Emotions= emotions;\r\n         }\r\n         if(opt.emotionDataIndexs){\r\n         emotionDataIndexs=opt.emotionDataIndexs;\r\n         webim.EmotionDataIndexs= emotionDataIndexs;\r\n         }*/\r\n\t\t\r\n        if (!loginInfo) {\r\n            if (cbErr) {\r\n                cbErr(tool.getReturnError(\"loginInfo is empty\", -6));\r\n                return;\r\n            }\r\n        }\r\n        if (!loginInfo.sdkAppID) {\r\n            if (cbErr) {\r\n                cbErr(tool.getReturnError(\"loginInfo.sdkAppID is empty\", -7));\r\n                return;\r\n            }\r\n        }\r\n        if (!loginInfo.accountType) {\r\n            if (cbErr) {\r\n                cbErr(tool.getReturnError(\"loginInfo.accountType is empty\", -8));\r\n                return;\r\n            }\r\n        }\r\n\r\n        if (loginInfo.identifier) {\r\n            ctx.identifier = loginInfo.identifier.toString();\r\n\t\t\t\r\n\t\t\tapp.globalData.ctx.identifier = loginInfo.identifier.toString();\r\n\t\t\t\r\n        }\r\n        if (loginInfo.identifier && !loginInfo.userSig) {\r\n            if (cbErr) {\r\n                cbErr(tool.getReturnError(\"loginInfo.userSig is empty\", -9));\r\n                return;\r\n            }\r\n        }\r\n        if (loginInfo.userSig) {\r\n            ctx.userSig = loginInfo.userSig.toString();\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tapp.globalData.ctx.userSig = loginInfo.userSig.toString();\r\n\t\t\t\r\n        }\r\n        ctx.sdkAppID = loginInfo.sdkAppID;\r\n        ctx.accountType = loginInfo.accountType;\r\n\t\t\r\n\t\t\r\n\t\tapp.globalData.ctx.sdkAppID = loginInfo.sdkAppID;\r\n\t\tapp.globalData.ctx.accountType = loginInfo.accountType;\r\n\t\t\r\n\t\tapp.globalData.listeners = listeners;\r\n\r\n\r\n        if (ctx.identifier && ctx.userSig) {//带登录态\r\n            //登录\r\n            proto_login(\r\n                function(identifierNick, headurl) {\r\n                    MsgManager.init(\r\n                        listeners,\r\n                        function (mmInitResp) {\r\n                            if (cbOk) {\r\n                                mmInitResp.identifierNick = identifierNick;\r\n                                mmInitResp.headurl = headurl;\r\n                                cbOk(mmInitResp);\r\n                            }\r\n                        }, cbErr\r\n                    );\r\n                },\r\n                cbErr\r\n            );\r\n        } else {//不带登录态，进入直播场景sdk\r\n            MsgManager.init(\r\n                listeners,\r\n                cbOk,\r\n                cbErr\r\n            );\r\n        }\r\n    };\r\n\r\n    //初始化浏览器信息\r\n    var initBrowserInfo = function () {\r\n        //初始化浏览器类型\r\n        BROWSER_INFO = \"wechat\"\r\n    };\r\n\r\n    //接口质量上报\r\n    var reportApiQuality = function (cmd, errorCode, errorInfo) {\r\n        if (cmd == 'longpolling' && (errorCode == longPollingTimeOutErrorCode || errorCode == longPollingKickedErrorCode)) {//longpolling 返回60008错误可以视为正常,可以不上报\r\n            return;\r\n        }\r\n        var eventId = CMD_EVENT_ID_MAP[cmd];\r\n        if (eventId) {\r\n            var reportTime = unixtime();\r\n            var uniqKey = null;\r\n            var msgCmdErrorCode = {\r\n                'Code': errorCode,\r\n                'ErrMsg': errorInfo\r\n            };\r\n            if (ctx.a2) {\r\n                uniqKey = ctx.a2.substring(0, 10) + \"_\" + reportTime + \"_\" + createRandom();\r\n            } else if (ctx.userSig) {\r\n                uniqKey = ctx.userSig.substring(0, 10) + \"_\" + reportTime + \"_\" + createRandom();\r\n            }\r\n\r\n            if (uniqKey) {\r\n\r\n                var rptEvtItem = {\r\n                    \"UniqKey\": uniqKey,\r\n                    \"EventId\": eventId,\r\n                    \"ReportTime\": reportTime,\r\n                    \"MsgCmdErrorCode\": msgCmdErrorCode\r\n                };\r\n\r\n                if (cmd == 'login') {\r\n                    var loginApiReportItems = [];\r\n                    loginApiReportItems.push(rptEvtItem);\r\n                    var loginReportOpt = {\r\n                        \"EvtItems\": loginApiReportItems,\r\n                        \"MainVersion\": SDK.VERSION,\r\n                        \"Version\": \"0\"\r\n                    };\r\n                    proto_reportApiQuality(loginReportOpt,\r\n                        function (resp) {\r\n                            loginApiReportItems = null;//\r\n                        },\r\n                        function (err) {\r\n                            loginApiReportItems = null;//\r\n                        }\r\n                    );\r\n                } else {\r\n                    apiReportItems.push(rptEvtItem);\r\n                    if (apiReportItems.length >= maxApiReportItemCount) {//累计一定条数再上报\r\n                        var reportOpt = {\r\n                            \"EvtItems\": apiReportItems,\r\n                            \"MainVersion\": SDK.VERSION,\r\n                            \"Version\": \"0\"\r\n                        };\r\n                        proto_reportApiQuality(reportOpt,\r\n                            function (resp) {\r\n                                apiReportItems = [];//清空\r\n                            },\r\n                            function (err) {\r\n                                apiReportItems = [];//清空\r\n                            }\r\n                        );\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n    };\r\n\r\n    // REST API calls\r\n    //上线\r\n    var proto_login = function (cbOk, cbErr) {\r\n        ConnManager.apiCall(SRV_NAME.OPEN_IM, \"login\", {\"State\": \"Online\"},\r\n            function (loginResp) {\r\n                if (loginResp.TinyId) {\r\n                    ctx.tinyid = loginResp.TinyId;\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tapp.globalData.ctx.tinyid = loginResp.TinyId;\r\n\t\t\t\t\t\r\n                } else {\r\n                    if (cbErr) {\r\n                        cbErr(tool.getReturnError(\"TinyId is empty\", -10));\r\n                        return;\r\n                    }\r\n                }\r\n                if (loginResp.A2Key) {\r\n                    ctx.a2 = loginResp.A2Key;\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tapp.globalData.ctx.a2 = loginResp.A2Key;\r\n\t\t\t\t\t\r\n                } else {\r\n                    if (cbErr) {\r\n                        cbErr(tool.getReturnError(\"A2Key is empty\", -11));\r\n                        return;\r\n                    }\r\n                }\r\n                var tag_list = [\r\n                    \"Tag_Profile_IM_Nick\",\r\n                    \"Tag_Profile_IM_Image\"\r\n                ];\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tctx.identifier = app.globalData.ctx.identifier\r\n\t\t\t\t\r\n                var options = {\r\n                    'From_Account': ctx.identifier,\r\n                    'To_Account': [ctx.identifier],\r\n                    'LastStandardSequence': 0,\r\n                    'TagList': tag_list\r\n                };\r\n                proto_getProfilePortrait(\r\n                    options,\r\n                    function (resp) {\r\n                        var nick, gender, allowType, image;\r\n                        if (resp.UserProfileItem && resp.UserProfileItem.length > 0) {\r\n                            for (var i in resp.UserProfileItem) {\r\n                                for (var j in resp.UserProfileItem[i].ProfileItem) {\r\n                                    switch (resp.UserProfileItem[i].ProfileItem[j].Tag) {\r\n                                        case 'Tag_Profile_IM_Nick':\r\n                                            nick = resp.UserProfileItem[i].ProfileItem[j].Value;\r\n                                            if (nick) \r\n\t\t\t\t\t\t\t\t\t\t\t\tctx.identifierNick = nick;\r\n\t\t\t\t\t\t\t\t\t\t\t\tapp.globalData.ctx.identifierNick = nick;\r\n                                            break;\r\n                                        case 'Tag_Profile_IM_Image':\r\n                                            image = resp.UserProfileItem[i].ProfileItem[j].Value;\r\n                                            if (image) ctx.headurl = image;\r\n\t\t\t\t\t\t\t\t\t\t\t\tapp.globalData.ctx.headurl = image;\r\n                                            break;\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                        if (cbOk) cbOk(ctx.identifierNick, ctx.headurl); //回传当前用户昵称\r\n                    }, cbErr);\r\n            }\r\n            , cbErr);\r\n    };\r\n    //下线\r\n    var proto_logout = function (type , cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, false)) {//不带登录态\r\n            clearSdk();\r\n            if (cbOk) cbOk({\r\n                'ActionStatus': ACTION_STATUS.OK,\r\n                'ErrorCode': 0,\r\n                'ErrorInfo': 'logout success'\r\n            });\r\n            return;\r\n        }\r\n        if(type == \"all\"){\r\n            ConnManager.apiCall(SRV_NAME.OPEN_IM, \"logout\", {},\r\n                function (resp) {\r\n                    clearSdk();\r\n                    if (cbOk) cbOk(resp);\r\n                },\r\n                cbErr);\r\n        }else{\r\n            ConnManager.apiCall(SRV_NAME.OPEN_IM, \"longpollinglogout\", { LongPollingId  : LongPollingId },\r\n                function (resp) {\r\n                    clearSdk();\r\n                    if (cbOk) cbOk(resp);\r\n                },\r\n                cbErr);\r\n        }\r\n    };\r\n    //发送消息，包括私聊和群聊\r\n    var proto_sendMsg = function (msg, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n\t\tvar msgInfo = {\r\n             'MsgBody': []\r\n\t\t};\r\n\t\tctx.identifier = app.globalData.ctx.identifier\r\n        switch (msg.sess.type()) {\r\n            case SESSION_TYPE.C2C:\r\n                msgInfo = {\r\n                    'From_Account': ctx.identifier,\r\n                    'To_Account': msg.sess.id().toString(),\r\n                    'MsgTimeStamp': msg.time,\r\n                    'MsgSeq': msg.seq,\r\n                    'MsgRandom': msg.random,\r\n                    'MsgBody': []\r\n                };\r\n                break;\r\n            case SESSION_TYPE.GROUP:\r\n                var subType = msg.getSubType();\r\n                msgInfo = {\r\n                    'GroupId': msg.sess.id().toString(),\r\n                    'From_Account': ctx.identifier,\r\n                    'Random': msg.random,\r\n                    'MsgBody': []\r\n                };\r\n                switch (subType) {\r\n                    case GROUP_MSG_SUB_TYPE.COMMON:\r\n                        msgInfo.MsgPriority = \"COMMON\";\r\n                        break;\r\n                    case GROUP_MSG_SUB_TYPE.REDPACKET:\r\n                        msgInfo.MsgPriority = \"REDPACKET\";\r\n                        break;\r\n                    case GROUP_MSG_SUB_TYPE.LOVEMSG:\r\n                        msgInfo.MsgPriority = \"LOVEMSG\";\r\n                        break;\r\n                    case GROUP_MSG_SUB_TYPE.TIP:\r\n                        log.error(\"不能主动发送群提示消息,subType=\" + subType);\r\n                        break;\r\n                    default:\r\n                        log.error(\"发送群消息时，出现未知子消息类型：subType=\" + subType);\r\n                        return;\r\n                        break;\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        for (var i in msg.elems) {\r\n            var elem = msg.elems[i];\r\n            var msgContent = null;\r\n            var msgType = elem.type;\r\n            switch (msgType) {\r\n                case MSG_ELEMENT_TYPE.TEXT://文本\r\n                    msgContent = {'Text': elem.content.text};\r\n                    break;\r\n                case MSG_ELEMENT_TYPE.FACE://表情\r\n                    msgContent = {'Index': elem.content.index, 'Data': elem.content.data};\r\n                    break;\r\n                case MSG_ELEMENT_TYPE.IMAGE://图片\r\n                    var ImageInfoArray = [];\r\n                    for (var j in elem.content.ImageInfoArray) {\r\n                        ImageInfoArray.push(\r\n                            {\r\n                                'Type': elem.content.ImageInfoArray[j].type,\r\n                                'Size': elem.content.ImageInfoArray[j].size,\r\n                                'Width': elem.content.ImageInfoArray[j].width,\r\n                                'Height': elem.content.ImageInfoArray[j].height,\r\n                                'URL': elem.content.ImageInfoArray[j].url\r\n                            }\r\n                        );\r\n                    }\r\n                    msgContent = {'UUID': elem.content.UUID, 'ImageInfoArray': ImageInfoArray};\r\n                    break;\r\n                case MSG_ELEMENT_TYPE.SOUND://\r\n                    log.warn('web端暂不支持发送语音消息');\r\n                    continue;\r\n                    break;\r\n                case MSG_ELEMENT_TYPE.LOCATION://\r\n                    log.warn('web端暂不支持发送地理位置消息');\r\n                    continue;\r\n                    break;\r\n                case MSG_ELEMENT_TYPE.FILE://\r\n                    msgContent = {\r\n                        'UUID': elem.content.uuid,\r\n                        'FileName': elem.content.name,\r\n                        'FileSize': elem.content.size,\r\n                        'DownloadFlag' : elem.content.downFlag\r\n                    };\r\n                    break;\r\n                case MSG_ELEMENT_TYPE.CUSTOM://\r\n                    msgContent = {'Data': elem.content.data, 'Desc': elem.content.desc, 'Ext': elem.content.ext};\r\n                    msgType = MSG_ELEMENT_TYPE.CUSTOM;\r\n                    break;\r\n                default :\r\n                    log.warn('web端暂不支持发送' + elem.type + '消息');\r\n                    continue;\r\n                    break;\r\n            }\r\n\r\n            if (msg.PushInfoBoolean) {\r\n                msgInfo.OfflinePushInfo = msg.PushInfo; //当android终端进程被杀掉时才走push，IOS退到后台即可\r\n            }\r\n\t\t\t\r\n            msgInfo.MsgBody.push({\r\n                'MsgType': msgType,\r\n                'MsgContent': msgContent\r\n            });\r\n        }\r\n\t\t\r\n        if (msg.sess.type() == SESSION_TYPE.C2C) {//私聊\r\n            ConnManager.apiCall(SRV_NAME.OPEN_IM, \"sendmsg\", msgInfo, cbOk, cbErr);\r\n        } else if (msg.sess.type() == SESSION_TYPE.GROUP) {//群聊\r\n            ConnManager.apiCall(SRV_NAME.GROUP, \"send_group_msg\", msgInfo, cbOk, cbErr);\r\n        }\r\n    };\r\n    //长轮询接口\r\n    var proto_longPolling = function (options, cbOk, cbErr) {\r\n        if(!isAccessFormaEnvironment && typeof stopPolling !=\"undefined\" && stopPolling == true){\r\n            return;\r\n        }\r\n        if (!checkLogin(cbErr, true)) return;\r\n        ConnManager.apiCall(SRV_NAME.OPEN_IM, \"longpolling\", options, cbOk, cbErr, longPollingDefaultTimeOut, true);\r\n    };\r\n\r\n    //长轮询接口(拉取直播聊天室新消息)\r\n    var proto_bigGroupLongPolling = function (options, cbOk, cbErr, timeout) {\r\n        ConnManager.apiCall(SRV_NAME.BIG_GROUP_LONG_POLLING, \"get_msg\", options, cbOk, cbErr, timeout);\r\n    };\r\n\r\n    //拉取未读c2c消息接口\r\n    var proto_getMsgs = function (cookie, syncFlag, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n        ConnManager.apiCall(SRV_NAME.OPEN_IM, \"getmsg\", {'Cookie': cookie, 'SyncFlag': syncFlag},\r\n            function (resp) {\r\n\r\n                if (resp.MsgList && resp.MsgList.length) {\r\n                    for (var i in resp.MsgList) {\r\n                        tempC2CMsgList.push(resp.MsgList[i]);\r\n                    }\r\n                }\r\n                if (resp.SyncFlag == 1) {\r\n                    proto_getMsgs(resp.Cookie, resp.SyncFlag, cbOk, cbErr);\r\n                } else {\r\n                    resp.MsgList = tempC2CMsgList;\r\n                    tempC2CMsgList = [];\r\n                    if (cbOk) cbOk(resp);\r\n                }\r\n            },\r\n            cbErr);\r\n    };\r\n    //C2C消息已读上报接口\r\n    var proto_c2CMsgReaded = function (cookie, c2CMsgReadedItem, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n        var tmpC2CMsgReadedItem = [];\r\n        for (var i in c2CMsgReadedItem) {\r\n            var item = {\r\n                'To_Account': c2CMsgReadedItem[i].toAccount,\r\n                'LastedMsgTime': c2CMsgReadedItem[i].lastedMsgTime\r\n            };\r\n            tmpC2CMsgReadedItem.push(item);\r\n        }\r\n        ConnManager.apiCall(SRV_NAME.OPEN_IM, \"msgreaded\", {\r\n            C2CMsgReaded: {\r\n                'Cookie': cookie,\r\n                'C2CMsgReadedItem': tmpC2CMsgReadedItem\r\n            }\r\n        }, cbOk, cbErr);\r\n    };\r\n\r\n    //删除c2c消息\r\n    var proto_deleteC2CMsg = function (options, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n\r\n        ConnManager.apiCall(SRV_NAME.OPEN_IM, \"deletemsg\", options,\r\n            cbOk, cbErr);\r\n    };\r\n\r\n    //拉取c2c历史消息接口\r\n    var proto_getC2CHistoryMsgs = function (options, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n        ConnManager.apiCall(SRV_NAME.OPEN_IM, \"getroammsg\", options,\r\n            function (resp) {\r\n                var reqMsgCount = options.MaxCnt;\r\n                var complete = resp.Complete;\r\n                var rspMsgCount = resp.MaxCnt;\r\n                var msgKey = resp.MsgKey;\r\n                var lastMsgTime = resp.LastMsgTime;\r\n\r\n                if (resp.MsgList && resp.MsgList.length) {\r\n                    for (var i in resp.MsgList) {\r\n                        tempC2CHistoryMsgList.push(resp.MsgList[i]);\r\n                    }\r\n                }\r\n                var netxOptions = null;\r\n                if (complete == 0) {//还有历史消息可拉取\r\n                    if (rspMsgCount < reqMsgCount) {\r\n                        netxOptions = {\r\n                            'Peer_Account': options.Peer_Account,\r\n                            'MaxCnt': reqMsgCount - rspMsgCount,\r\n                            'LastMsgTime': lastMsgTime,\r\n                            'MsgKey': msgKey\r\n                        };\r\n                    }\r\n                }\r\n\r\n                if (netxOptions) {//继续拉取\r\n                    proto_getC2CHistoryMsgs(netxOptions, cbOk, cbErr);\r\n                } else {\r\n                    resp.MsgList = tempC2CHistoryMsgList;\r\n                    tempC2CHistoryMsgList = [];\r\n                    if (cbOk) cbOk(resp);\r\n                }\r\n            },\r\n            cbErr);\r\n    };\r\n\r\n    //群组接口\r\n    //创建群组\r\n    //协议参考：https://www.qcloud.com/doc/product/269/1615\r\n    var proto_createGroup = function (options, cbOk, cbErr) {\r\n\t\t\r\n\t\r\n        if (!checkLogin(cbErr, true)) return;\r\n        var opt = {\r\n            //必填    群组形态，包括Public（公开群），Private（私密群），ChatRoom（聊天室），AVChatRoom（互动直播聊天室）。\r\n            'Type': options.Type,\r\n            //必填    群名称，最长30字节。\r\n            'Name': options.Name\r\n        };\r\n        var member_list = [];\r\n\r\n        //Array 选填  初始群成员列表，最多500个。成员信息字段详情参见：群成员资料。\r\n        for (var i = 0; i < options.MemberList.length; i++) {\r\n            member_list.push({'Member_Account': options.MemberList[i]})\r\n        }\r\n        opt.MemberList = member_list;\r\n        //选填    为了使得群组ID更加简单，便于记忆传播，腾讯云支持APP在通过REST API创建群组时自定义群组ID。详情参见：自定义群组ID。\r\n        if (options.GroupId) {\r\n            opt.GroupId = options.GroupId;\r\n        }\r\n        //选填    群主id，自动添加到群成员中。如果不填，群没有群主。\r\n        if (options.Owner_Account) {\r\n            opt.Owner_Account = options.Owner_Account;\r\n        }\r\n        //选填    群简介，最长240字节。\r\n        if (options.Introduction) {\r\n            opt.Introduction = options.Introduction;\r\n        }\r\n        //选填    群公告，最长300字节。\r\n        if (options.Notification) {\r\n            opt.Notification = options.Notification;\r\n        }\r\n        //选填    最大群成员数量，最大为10000，不填默认为2000个。\r\n        if (options.MaxMemberCount) {\r\n            opt.MaxMemberCount = options.MaxMemberCount;\r\n        }\r\n        //选填    申请加群处理方式。包含FreeAccess（自由加入），NeedPermission（需要验证），DisableApply（禁止加群），不填默认为NeedPermission（需要验证）。\r\n        if (options.ApplyJoinOption) {//\r\n            opt.ApplyJoinOption = options.ApplyJoinOption;\r\n        }\r\n        //Array 选填  群组维度的自定义字段，默认情况是没有的，需要开通，详情参见：自定义字段。\r\n        if (options.AppDefinedData) {\r\n            opt.AppDefinedData = options.AppDefinedData;\r\n        }\r\n        //选填    群头像URL，最长100字节。\r\n        if (options.FaceUrl) {\r\n            opt.FaceUrl = options.FaceUrl;\r\n        }\r\n        ConnManager.apiCall(SRV_NAME.GROUP, \"create_group\", opt,\r\n          function (resp) {\r\n            if (resp && resp.ErrorCode == 0 && options.Type == \"AVChatRoom\") {\r\n              if (resp.LongPollingKey) {\r\n                MsgManager.resetBigGroupLongPollingInfo();\r\n                MsgManager.setBigGroupLongPollingOn(true);//开启长轮询\r\n                MsgManager.setBigGroupLongPollingKey(resp.LongPollingKey);//更新大群长轮询key\r\n                MsgManager.setBigGroupLongPollingMsgMap(options.GroupId, 0);//收到的群消息置0\r\n                MsgManager.bigGroupLongPolling();//开启长轮询\r\n              }\r\n            }\r\n            if (cbOk) cbOk(resp);\r\n          },\r\n          function (err) {\r\n            if (err && err.ErrorCode == 10025 && options.Type == \"AVChatRoom\") {\r\n                //群组 ID 已被使用，并且操作者为群主，可以直接使用\r\n              if (err.LongPollingKey) {\r\n                MsgManager.resetBigGroupLongPollingInfo();\r\n                MsgManager.setBigGroupLongPollingOn(true);//开启长轮询\r\n                MsgManager.setBigGroupLongPollingKey(err.LongPollingKey);//更新大群长轮询key\r\n                MsgManager.setBigGroupLongPollingMsgMap(options.GroupId, 0);//收到的群消息置0\r\n                MsgManager.bigGroupLongPolling();//开启长轮询\r\n              }\r\n            }\r\n            if (cbErr) cbErr(err);\r\n          });\r\n    };\r\n\r\n    //创建群组-高级接口\r\n    //协议参考：https://www.qcloud.com/doc/product/269/1615\r\n    var proto_createGroupHigh = function (options, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n        ConnManager.apiCall(SRV_NAME.GROUP, \"create_group\", options,\r\n            cbOk, cbErr);\r\n    };\r\n\r\n    //修改群组基本资料\r\n    //协议参考：https://www.qcloud.com/doc/product/269/1620\r\n    var proto_modifyGroupBaseInfo = function (options, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n\r\n        ConnManager.apiCall(SRV_NAME.GROUP, \"modify_group_base_info\", options,\r\n            cbOk, cbErr);\r\n    };\r\n\r\n    //申请加群\r\n    var proto_applyJoinGroup = function (options, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n\r\n        ConnManager.apiCall(SRV_NAME.GROUP, \"apply_join_group\", {\r\n                'GroupId': options.GroupId,\r\n                'ApplyMsg': options.ApplyMsg,\r\n                'UserDefinedField': options.UserDefinedField\r\n            },\r\n            cbOk, cbErr);\r\n    };\r\n\r\n    //申请加入大群\r\n    var proto_applyJoinBigGroup = function (options, cbOk, cbErr) {\r\n        var srvName;\r\n        if (!checkLogin(cbErr, false)) {//未登录\r\n            srvName = SRV_NAME.BIG_GROUP;\r\n        } else {//已登录\r\n            srvName = SRV_NAME.GROUP;\r\n        }\r\n        ConnManager.apiCall(srvName, \"apply_join_group\", {\r\n                'GroupId': options.GroupId,\r\n                'ApplyMsg': options.ApplyMsg,\r\n                'UserDefinedField': options.UserDefinedField\r\n            },\r\n            function (resp) {\r\n                if (resp.JoinedStatus && resp.JoinedStatus == 'JoinedSuccess') {\r\n                    if (resp.LongPollingKey) {\r\n                        MsgManager.resetBigGroupLongPollingInfo();\r\n                        MsgManager.setBigGroupLongPollingOn(true);//开启长轮询\r\n                        MsgManager.setBigGroupLongPollingKey(resp.LongPollingKey);//更新大群长轮询key\r\n                        MsgManager.setBigGroupLongPollingMsgMap(options.GroupId, 0);//收到的群消息置0\r\n                        MsgManager.bigGroupLongPolling();//开启长轮询\r\n                    } else {//没有返回LongPollingKey，说明申请加的群不是直播聊天室(AVChatRoom)\r\n                        cbErr && cbErr(tool.getReturnError(\"The type of group is not AVChatRoom: groupid=\" + options.GroupId, -12));\r\n                        return;\r\n                    }\r\n                }\r\n                if (cbOk) cbOk(resp);\r\n            }\r\n            , function (err) {\r\n\r\n                if (cbErr) cbErr(err);\r\n            });\r\n    };\r\n\r\n    //处理加群申请(同意或拒绝)\r\n    var proto_handleApplyJoinGroupPendency = function (options, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n\r\n        ConnManager.apiCall(SRV_NAME.GROUP, \"handle_apply_join_group\", {\r\n                'GroupId': options.GroupId,\r\n                'Applicant_Account': options.Applicant_Account,\r\n                'HandleMsg': options.HandleMsg,\r\n                'Authentication': options.Authentication,\r\n                'MsgKey': options.MsgKey,\r\n                'ApprovalMsg': options.ApprovalMsg,\r\n                'UserDefinedField': options.UserDefinedField\r\n            },\r\n            cbOk,\r\n            function (err) {\r\n                if (err.ErrorCode == 10024) {//apply has be handled\r\n                    if (cbOk) {\r\n                        var resp = {\r\n                            'ActionStatus': ACTION_STATUS.OK,\r\n                            'ErrorCode': 0,\r\n                            'ErrorInfo': '该申请已经被处理过'\r\n                        };\r\n                        cbOk(resp);\r\n                    }\r\n                } else {\r\n                    if (cbErr) cbErr(err);\r\n                }\r\n            }\r\n        );\r\n    };\r\n\r\n    //主动退群\r\n    var proto_quitGroup = function (options, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n\r\n        ConnManager.apiCall(SRV_NAME.GROUP, \"quit_group\", {\r\n                'GroupId': options.GroupId\r\n            },\r\n            cbOk, cbErr);\r\n    };\r\n\r\n    //退出大群\r\n    var proto_quitBigGroup = function (options, cbOk, cbErr) {\r\n        var srvName;\r\n        if (!checkLogin(cbErr, false)) {//未登录\r\n            srvName = SRV_NAME.BIG_GROUP;\r\n        } else {//已登录\r\n            srvName = SRV_NAME.GROUP;\r\n        }\r\n        MsgManager.resetBigGroupLongPollingInfo();\r\n        ConnManager.apiCall(srvName, \"quit_group\",\r\n            {'GroupId': options.GroupId},\r\n            function (resp) {\r\n                //重置当前再请求中的ajax\r\n                //clearXmlHttpObjMap();\r\n                //退出大群成功之后需要重置长轮询信息\r\n                MsgManager.resetBigGroupLongPollingInfo();\r\n                if (cbOk) cbOk(resp);\r\n            },\r\n            cbErr);\r\n    };\r\n    //查找群(按名称)\r\n    var proto_searchGroupByName = function (options, cbOk, cbErr) {\r\n        ConnManager.apiCall(SRV_NAME.GROUP, \"search_group\", options, cbOk, cbErr);\r\n    };\r\n\r\n    //获取群组公开资料\r\n    var proto_getGroupPublicInfo = function (options, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n\r\n        ConnManager.apiCall(SRV_NAME.GROUP, \"get_group_public_info\", {\r\n                'GroupIdList': options.GroupIdList,\r\n                'ResponseFilter': {\r\n                    'GroupBasePublicInfoFilter': options.GroupBasePublicInfoFilter\r\n                }\r\n            },\r\n            function (resp) {\r\n                resp.ErrorInfo = '';\r\n                if (resp.GroupInfo) {\r\n                    for (var i in resp.GroupInfo) {\r\n                        var errorCode = resp.GroupInfo[i].ErrorCode;\r\n                        if (errorCode > 0) {\r\n                            resp.ActionStatus = ACTION_STATUS.FAIL;\r\n                            resp.GroupInfo[i].ErrorInfo = \"[\" + errorCode + \"]\" + resp.GroupInfo[i].ErrorInfo;\r\n                            resp.ErrorInfo += resp.GroupInfo[i].ErrorInfo + '\\n';\r\n                        }\r\n                    }\r\n                }\r\n                if (resp.ActionStatus == ACTION_STATUS.FAIL) {\r\n                    if (cbErr) {\r\n                        cbErr(resp);\r\n                    }\r\n                } else if (cbOk) {\r\n                    cbOk(resp);\r\n                }\r\n\r\n            },\r\n            cbErr);\r\n    };\r\n\r\n    //获取群组详细资料--高级\r\n    //请求协议参考：https://www.qcloud.com/doc/product/269/1616\r\n    var proto_getGroupInfo = function (options, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n\r\n        var opt = {\r\n            'GroupIdList': options.GroupIdList,\r\n            'ResponseFilter': {\r\n                'GroupBaseInfoFilter': options.GroupBaseInfoFilter,\r\n                'MemberInfoFilter': options.MemberInfoFilter\r\n            }\r\n        };\r\n        if (options.AppDefinedDataFilter_Group) {\r\n            opt.ResponseFilter.AppDefinedDataFilter_Group = options.AppDefinedDataFilter_Group;\r\n        }\r\n        if (options.AppDefinedDataFilter_GroupMember) {\r\n            opt.ResponseFilter.AppDefinedDataFilter_GroupMember = options.AppDefinedDataFilter_GroupMember;\r\n        }\r\n        ConnManager.apiCall(SRV_NAME.GROUP, \"get_group_info\", opt,\r\n            cbOk, cbErr);\r\n    };\r\n\r\n    //获取群组成员-高级接口\r\n    //协议参考：https://www.qcloud.com/doc/product/269/1617\r\n    var proto_getGroupMemberInfo = function (options, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n\r\n        ConnManager.apiCall(SRV_NAME.GROUP, \"get_group_member_info\", {\r\n                'GroupId': options.GroupId,\r\n                'Offset': options.Offset,\r\n                'Limit': options.Limit,\r\n                'MemberInfoFilter': options.MemberInfoFilter,\r\n                'MemberRoleFilter': options.MemberRoleFilter,\r\n                'AppDefinedDataFilter_GroupMember': options.AppDefinedDataFilter_GroupMember\r\n            },\r\n            cbOk, cbErr);\r\n    };\r\n\r\n\r\n    //增加群组成员\r\n    //协议参考：https://www.qcloud.com/doc/product/269/1621\r\n    var proto_addGroupMember = function (options, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n\r\n        ConnManager.apiCall(SRV_NAME.GROUP, \"add_group_member\", {\r\n                'GroupId': options.GroupId,\r\n                'Silence': options.Silence,\r\n                'MemberList': options.MemberList\r\n            },\r\n            cbOk, cbErr);\r\n    };\r\n    //修改群组成员资料\r\n    //协议参考：https://www.qcloud.com/doc/product/269/1623\r\n    var proto_modifyGroupMember = function (options, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n        var opt = {};\r\n        if (options.GroupId) {\r\n            opt.GroupId = options.GroupId;\r\n        }\r\n        if (options.Member_Account) {\r\n            opt.Member_Account = options.Member_Account;\r\n        }\r\n        //Admin或者Member\r\n        if (options.Role) {\r\n            opt.Role = options.Role;\r\n        }\r\n        // AcceptAndNotify代表解收并提示消息，Discard代表不接收也不提示消息，AcceptNotNotify代表接收消息但不提示\r\n        if (options.MsgFlag) {\r\n            opt.MsgFlag = options.MsgFlag;\r\n        }\r\n        if (options.ShutUpTime) {//禁言时间\r\n            opt.ShutUpTime = options.ShutUpTime;\r\n        }\r\n        if (options.NameCard) {//群名片,最大不超过50个字节\r\n            opt.NameCard = options.NameCard;\r\n        }\r\n        if (options.AppMemberDefinedData) {//群成员维度的自定义字段，默认情况是没有的，需要开通\r\n            opt.AppMemberDefinedData = options.AppMemberDefinedData;\r\n        }\r\n        ConnManager.apiCall(SRV_NAME.GROUP, \"modify_group_member_info\", opt,\r\n            cbOk, cbErr);\r\n    };\r\n    //删除群组成员\r\n    //协议参考：https://www.qcloud.com/doc/product/269/1622\r\n    var proto_deleteGroupMember = function (options, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n\r\n        ConnManager.apiCall(SRV_NAME.GROUP, \"delete_group_member\", {\r\n                'GroupId': options.GroupId,\r\n                'Silence': options.Silence,\r\n                'MemberToDel_Account': options.MemberToDel_Account,\r\n                'Reason': options.Reason\r\n            },\r\n            cbOk, cbErr);\r\n    };\r\n    //解散群组\r\n    //协议参考：https://www.qcloud.com/doc/product/269/1624\r\n    var proto_destroyGroup = function (options, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n\r\n        ConnManager.apiCall(SRV_NAME.GROUP, \"destroy_group\", {\r\n                'GroupId': options.GroupId\r\n            },\r\n            function (resp) {\r\n                if (options.Type == \"AVChatRoom\") {\r\n                  //退出大群成功之后需要重置长轮询信息\r\n                  MsgManager.resetBigGroupLongPollingInfo();\r\n                }\r\n                if (cbOk) cbOk(resp);\r\n            }, cbErr);\r\n    };\r\n    //转让群组\r\n    //协议参考：https://www.qcloud.com/doc/product/269/1633\r\n    var proto_changeGroupOwner = function (options, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n        ConnManager.apiCall(SRV_NAME.GROUP, \"change_group_owner\", options, cbOk, cbErr);\r\n    };\r\n    //获取用户所加入的群组-高级接口\r\n    //协议参考：https://www.qcloud.com/doc/product/269/1625\r\n    var proto_getJoinedGroupListHigh = function (options, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n\r\n        ConnManager.apiCall(SRV_NAME.GROUP, \"get_joined_group_list\", {\r\n                'Member_Account': options.Member_Account,\r\n                'Limit': options.Limit,\r\n                'Offset': options.Offset,\r\n                'GroupType': options.GroupType,\r\n                'ResponseFilter': {\r\n                    'GroupBaseInfoFilter': options.GroupBaseInfoFilter,\r\n                    'SelfInfoFilter': options.SelfInfoFilter\r\n                }\r\n            },\r\n            cbOk, cbErr);\r\n    };\r\n    //查询一组UserId在群中的身份\r\n    //协议参考：https://www.qcloud.com/doc/product/269/1626\r\n    var proto_getRoleInGroup = function (options, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n\r\n        ConnManager.apiCall(SRV_NAME.GROUP, \"get_role_in_group\", {\r\n                'GroupId': options.GroupId,\r\n                'User_Account': options.User_Account\r\n            },\r\n            cbOk, cbErr);\r\n    };\r\n    //设置取消成员禁言时间\r\n    //协议参考：https://www.qcloud.com/doc/product/269/1627\r\n    var proto_forbidSendMsg = function (options, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n\r\n        ConnManager.apiCall(SRV_NAME.GROUP, \"forbid_send_msg\", {\r\n                'GroupId': options.GroupId,\r\n                'Members_Account': options.Members_Account,\r\n                'ShutUpTime': options.ShutUpTime//单位为秒，为0时表示取消禁言\r\n            },\r\n            cbOk, cbErr);\r\n    };\r\n\r\n    //发送自定义群系统通知\r\n    var proto_sendCustomGroupNotify = function (options, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n        ConnManager.apiCall(SRV_NAME.GROUP, \"send_group_system_notification\", options,\r\n            cbOk, cbErr);\r\n    };\r\n\r\n    //拉取群消息接口\r\n    var proto_getGroupMsgs = function (options, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n        ConnManager.apiCall(SRV_NAME.GROUP, \"group_msg_get\", {\r\n                \"GroupId\": options.GroupId,\r\n                \"ReqMsgSeq\": options.ReqMsgSeq,\r\n                \"ReqMsgNumber\": options.ReqMsgNumber\r\n            },\r\n            cbOk, cbErr);\r\n    };\r\n    //群消息已读上报接口\r\n    var proto_groupMsgReaded = function (options, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n        ConnManager.apiCall(SRV_NAME.GROUP, \"msg_read_report\", {\r\n                'GroupId': options.GroupId,\r\n                'MsgReadedSeq': options.MsgReadedSeq\r\n            },\r\n            cbOk, cbErr);\r\n    };\r\n    //end\r\n\r\n    //好友接口\r\n    //处理好友接口返回的错误码\r\n    var convertErrorEn2ZhFriend = function (resp) {\r\n        var errorAccount = [];\r\n        if (resp.Fail_Account && resp.Fail_Account.length) {\r\n            errorAccount = resp.Fail_Account;\r\n        }\r\n        if (resp.Invalid_Account && resp.Invalid_Account.length) {\r\n            for (var k in resp.Invalid_Account) {\r\n                errorAccount.push(resp.Invalid_Account[k]);\r\n            }\r\n        }\r\n        if (errorAccount.length) {\r\n            resp.ActionStatus = ACTION_STATUS.FAIL;\r\n            resp.ErrorCode = ERROR_CODE_CUSTOM;\r\n            resp.ErrorInfo = '';\r\n            for (var i in errorAccount) {\r\n                var failCount = errorAccount[i];\r\n                for (var j in resp.ResultItem) {\r\n                    if (resp.ResultItem[j].To_Account == failCount) {\r\n\r\n                        var resultCode = resp.ResultItem[j].ResultCode;\r\n                        resp.ResultItem[j].ResultInfo = \"[\" + resultCode + \"]\" + resp.ResultItem[j].ResultInfo;\r\n                        resp.ErrorInfo += resp.ResultItem[j].ResultInfo + \"\\n\";\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return resp;\r\n    };\r\n    //添加好友\r\n    var proto_applyAddFriend = function (options, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n\t\t\r\n\t\t\r\n\t\tctx.identifier = app.globalData.ctx.identifier\r\n\t\t\r\n        ConnManager.apiCall(SRV_NAME.FRIEND, \"friend_add\", {\r\n                'From_Account': ctx.identifier,\r\n                'AddFriendItem': options.AddFriendItem\r\n            },\r\n            function (resp) {\r\n                var newResp = convertErrorEn2ZhFriend(resp);\r\n                if (newResp.ActionStatus == ACTION_STATUS.FAIL) {\r\n                    if (cbErr) cbErr(newResp);\r\n                } else if (cbOk) {\r\n                    cbOk(newResp);\r\n                }\r\n            }, cbErr);\r\n    };\r\n    //删除好友\r\n    var proto_deleteFriend = function (options, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n\t\t\r\n\t\t\r\n\t\tctx.identifier = app.globalData.ctx.identifier\r\n\t\t\r\n        ConnManager.apiCall(SRV_NAME.FRIEND, \"friend_delete\", {\r\n                'From_Account': ctx.identifier,\r\n                'To_Account': options.To_Account,\r\n                'DeleteType': options.DeleteType\r\n            },\r\n            function (resp) {\r\n                var newResp = convertErrorEn2ZhFriend(resp);\r\n                if (newResp.ActionStatus == ACTION_STATUS.FAIL) {\r\n                    if (cbErr) cbErr(newResp);\r\n                } else if (cbOk) {\r\n                    cbOk(newResp);\r\n                }\r\n            }, cbErr);\r\n    };\r\n    //获取好友申请\r\n    var proto_getPendency = function (options, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n\t\t\r\n\t\t\r\n\t\tctx.identifier = app.globalData.ctx.identifier\r\n\t\t\r\n        ConnManager.apiCall(SRV_NAME.FRIEND, \"pendency_get\", {\r\n                \"From_Account\": ctx.identifier,\r\n                \"PendencyType\": options.PendencyType,\r\n                \"StartTime\": options.StartTime,\r\n                \"MaxLimited\": options.MaxLimited,\r\n                \"LastSequence\": options.LastSequence\r\n            },\r\n            cbOk, cbErr);\r\n    };\r\n    //删除好友申请\r\n    var proto_deletePendency = function (options, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n        ConnManager.apiCall(SRV_NAME.FRIEND, \"pendency_delete\", {\r\n                \"From_Account\": ctx.identifier,\r\n                \"PendencyType\": options.PendencyType,\r\n                \"To_Account\": options.To_Account\r\n\r\n            },\r\n            function (resp) {\r\n                var newResp = convertErrorEn2ZhFriend(resp);\r\n                if (newResp.ActionStatus == ACTION_STATUS.FAIL) {\r\n                    if (cbErr) cbErr(newResp);\r\n                } else if (cbOk) {\r\n                    cbOk(newResp);\r\n                }\r\n            }, cbErr);\r\n    };\r\n    //处理好友申请\r\n    var proto_responseFriend = function (options, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\tctx.identifier = app.globalData.ctx.identifier\r\n\t\t\r\n        ConnManager.apiCall(SRV_NAME.FRIEND, \"friend_response\", {\r\n                'From_Account': ctx.identifier,\r\n                'ResponseFriendItem': options.ResponseFriendItem\r\n            },\r\n            function (resp) {\r\n                var newResp = convertErrorEn2ZhFriend(resp);\r\n                if (newResp.ActionStatus == ACTION_STATUS.FAIL) {\r\n                    if (cbErr) cbErr(newResp);\r\n                } else if (cbOk) {\r\n                    cbOk(newResp);\r\n                }\r\n            }, cbErr);\r\n    };\r\n    //我的好友\r\n    var proto_getAllFriend = function (options, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n\t\t\r\n\t\t\r\n\t\tctx.identifier = app.globalData.ctx.identifier\r\n\t\t\r\n        ConnManager.apiCall(SRV_NAME.FRIEND, \"friend_get_all\", {\r\n                'From_Account': ctx.identifier,\r\n                'TimeStamp': options.TimeStamp,\r\n                'StartIndex': options.StartIndex,\r\n                'GetCount': options.GetCount,\r\n                'LastStandardSequence': options.LastStandardSequence,\r\n                'TagList': options.TagList\r\n            },\r\n            cbOk, cbErr);\r\n    };\r\n\r\n    //资料接口\r\n    //查看个人资料\r\n    var proto_getProfilePortrait = function (options, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n\t\t\r\n\t\t\r\n\t\tctx.identifier = app.globalData.ctx.identifier\r\n\t\t\r\n        ConnManager.apiCall(SRV_NAME.PROFILE, \"portrait_get\", {\r\n                'From_Account': ctx.identifier,\r\n                'To_Account': options.To_Account,\r\n                //'LastStandardSequence':options.LastStandardSequence,\r\n                'TagList': options.TagList\r\n            },\r\n            function (resp) {\r\n                var errorAccount = [];\r\n                if (resp.Fail_Account && resp.Fail_Account.length) {\r\n                    errorAccount = resp.Fail_Account;\r\n                }\r\n                if (resp.Invalid_Account && resp.Invalid_Account.length) {\r\n                    for (var k in resp.Invalid_Account) {\r\n                        errorAccount.push(resp.Invalid_Account[k]);\r\n                    }\r\n                }\r\n                if (errorAccount.length) {\r\n                    resp.ActionStatus = ACTION_STATUS.FAIL;\r\n                    resp.ErrorCode = ERROR_CODE_CUSTOM;\r\n                    resp.ErrorInfo = '';\r\n                    for (var i in errorAccount) {\r\n                        var failCount = errorAccount[i];\r\n                        for (var j in resp.UserProfileItem) {\r\n                            if (resp.UserProfileItem[j].To_Account == failCount) {\r\n                                var resultCode = resp.UserProfileItem[j].ResultCode;\r\n                                resp.UserProfileItem[j].ResultInfo = \"[\" + resultCode + \"]\" + resp.UserProfileItem[j].ResultInfo;\r\n                                resp.ErrorInfo += \"账号:\" + failCount + \",\" + resp.UserProfileItem[j].ResultInfo + \"\\n\";\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                if (resp.ActionStatus == ACTION_STATUS.FAIL) {\r\n                    if (cbErr) cbErr(resp);\r\n                } else if (cbOk) {\r\n                    cbOk(resp);\r\n                }\r\n            },\r\n            cbErr);\r\n    };\r\n\r\n    //设置个人资料\r\n    var proto_setProfilePortrait = function (options, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n        ConnManager.apiCall(SRV_NAME.PROFILE, \"portrait_set\",\r\n            {\r\n                'From_Account': ctx.identifier,\r\n                'ProfileItem': options.ProfileItem\r\n            },\r\n            function (resp) {\r\n                for (var i in options.ProfileItem) {\r\n                    var profile = options.ProfileItem[i];\r\n                    if (profile.Tag == 'Tag_Profile_IM_Nick') {\r\n                        ctx.identifierNick = profile.Value;//更新昵称\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tapp.globalData.ctx.identifierNick = profile.Value;\r\n                        \r\n\t\t\t\t\t\tbreak;\r\n                    }\r\n                }\r\n                if (cbOk) cbOk(resp);\r\n            }\r\n            , cbErr);\r\n    };\r\n\r\n    //增加黑名单\r\n    var proto_addBlackList = function (options, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n        ConnManager.apiCall(SRV_NAME.FRIEND, \"black_list_add\", {\r\n                'From_Account': ctx.identifier,\r\n                'To_Account': options.To_Account\r\n            },\r\n            function (resp) {\r\n                var newResp = convertErrorEn2ZhFriend(resp);\r\n                if (newResp.ActionStatus == ACTION_STATUS.FAIL) {\r\n                    if (cbErr) cbErr(newResp);\r\n                } else if (cbOk) {\r\n                    cbOk(newResp);\r\n                }\r\n            }, cbErr);\r\n    };\r\n\r\n    //删除黑名单\r\n    var proto_deleteBlackList = function (options, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n        ConnManager.apiCall(SRV_NAME.FRIEND, \"black_list_delete\", {\r\n                'From_Account': ctx.identifier,\r\n                'To_Account': options.To_Account\r\n            },\r\n            function (resp) {\r\n                var newResp = convertErrorEn2ZhFriend(resp);\r\n                if (newResp.ActionStatus == ACTION_STATUS.FAIL) {\r\n                    if (cbErr) cbErr(newResp);\r\n                } else if (cbOk) {\r\n                    cbOk(newResp);\r\n                }\r\n            }, cbErr);\r\n    };\r\n\r\n    //我的黑名单\r\n    var proto_getBlackList = function (options, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n        ConnManager.apiCall(SRV_NAME.FRIEND, \"black_list_get\", {\r\n                'From_Account': ctx.identifier,\r\n                'StartIndex': options.StartIndex,\r\n                'MaxLimited': options.MaxLimited,\r\n                'LastSequence': options.LastSequence\r\n            },\r\n            cbOk, cbErr);\r\n    };\r\n\r\n    //获取最近联系人\r\n    var proto_getRecentContactList = function (options, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n        ConnManager.apiCall(SRV_NAME.RECENT_CONTACT, \"get\", {\r\n                'From_Account': ctx.identifier,\r\n                'Count': options.Count\r\n            },\r\n            cbOk, cbErr);\r\n    };\r\n\r\n    //上传图片或文件\r\n    var proto_uploadPic = function (options, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n        var cmdName;\r\n        if (isAccessFormalEnv()) {\r\n            cmdName = 'pic_up';\r\n        } else {\r\n            cmdName = 'pic_up_test';\r\n        }\r\n        ConnManager.apiCall(SRV_NAME.PIC, cmdName, {\r\n                'App_Version': VERSION_INFO.APP_VERSION,\r\n                'From_Account': ctx.identifier,\r\n                'To_Account': options.To_Account,\r\n                'Seq': options.Seq,\r\n                'Timestamp': options.Timestamp,\r\n                'Random': options.Random,\r\n                'File_Str_Md5': options.File_Str_Md5,\r\n                'File_Size': options.File_Size,\r\n                'File_Type': options.File_Type,\r\n                'Server_Ver': VERSION_INFO.SERVER_VERSION,\r\n                'Auth_Key': authkey,\r\n                'Busi_Id': options.Busi_Id,\r\n                'PkgFlag': options.PkgFlag,\r\n                'Slice_Offset': options.Slice_Offset,\r\n                'Slice_Size': options.Slice_Size,\r\n                'Slice_Data': options.Slice_Data\r\n            },\r\n            cbOk, cbErr);\r\n    };\r\n\r\n    //获取语音和文件下载IP和authkey\r\n    var proto_getIpAndAuthkey = function (cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n        ConnManager.apiCall(SRV_NAME.OPEN_IM, \"authkey\", {}, cbOk, cbErr);\r\n    };\r\n\r\n    //接口质量上报\r\n    var proto_reportApiQuality = function (options, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n        ConnManager.apiCall(SRV_NAME.IM_OPEN_STAT, \"web_report\", options, cbOk, cbErr);\r\n    };\r\n\r\n\r\n    var proto_getLongPollingId = function (options, cbOk, cbErr) {\r\n        if (!checkLogin(cbErr, true)) return;\r\n        ConnManager.apiCall( SRV_NAME.OPEN_IM, \"getlongpollingid\",{},\r\n            function (resp) {\r\n                cbOk && cbOk(resp);\r\n            }, cbErr);\r\n    }\r\n\r\n\r\n    var proto_applyDownload = function (options, cbOk, cbErr) {\r\n        //把下载地址push到map中\r\n        ConnManager.apiCall( SRV_NAME.PIC, \"apply_download\", options, cbOk, cbErr);\r\n    }\r\n\r\n    //end\r\n    initBrowserInfo();\r\n    // singleton object ConnManager\r\n    var ConnManager = lowerBR == false\r\n        ? new function () {\r\n        var onConnCallback = null;        //回调函数\r\n        this.init = function (onConnNotify, cbOk, cbErr) {\r\n            if (onConnNotify) onConnCallback = onConnNotify;\r\n        };\r\n        this.callBack = function (info) {\r\n            if (onConnCallback) onConnCallback(info);\r\n        };\r\n        this.clear = function () {\r\n            onConnCallback = null;\r\n        };\r\n        //请求后台服务接口\r\n        this.apiCall = function (type, cmd, data, cbOk, cbErr, timeout, isLongPolling) {\r\n            //封装后台服务接口地址\r\n            var url = getApiUrl(type, cmd, cbOk, cbErr);\r\n            if (url == false) return;\r\n            //发起ajax请求\r\n            ajaxRequestJson(\"POST\", url, data, timeout, isLongPolling, function (resp) {\r\n                var errorCode = null, tempErrorInfo = '';\r\n                if(cmd=='pic_up'){\r\n                    data.Slice_Data='';\r\n                }\r\n                var info = \"\\n request url: \\n\" + url + \"\\n request body: \\n\" + JSON.stringify(data) + \"\\n response: \\n\" + JSON.stringify(resp);\r\n\t\t\t\t\r\n\t\t\t\r\n                //成功\r\n                if (resp.ActionStatus == ACTION_STATUS.OK) {\r\n                    log.info(\"[\" + type + \"][\" + cmd + \"]success: \" + info);\r\n                    if (cbOk) cbOk(resp);//回调\r\n                    errorCode = 0;\r\n                    tempErrorInfo = '';\r\n                } else {\r\n                    errorCode = resp.ErrorCode;\r\n                    tempErrorInfo = resp.ErrorInfo;\r\n                    //报错\r\n                    if (cbErr) {\r\n                        resp.SrcErrorInfo = resp.ErrorInfo;\r\n                        resp.ErrorInfo = \"[\" + type + \"][\" + cmd + \"]failed: \" + info;\r\n                        if (cmd != 'longpolling' || resp.ErrorCode != longPollingTimeOutErrorCode) {\r\n                            log.error(resp.ErrorInfo);\r\n                        }\r\n                        cbErr(resp);\r\n                    }\r\n                }\r\n                reportApiQuality(cmd, errorCode, tempErrorInfo);//接口质量上报\r\n            }, function (err) {\r\n                cbErr && cbErr(err);\r\n                reportApiQuality(cmd, err.ErrorCode, err.ErrorInfo);//接口质量上报\r\n            });\r\n        };\r\n    }\r\n        : new function () {\r\n        var onConnCallback = null;        //回调函数\r\n        this.init = function (onConnNotify, cbOk, cbErr) {\r\n            if (onConnNotify) onConnCallback = onConnNotify;\r\n        };\r\n        this.callBack = function (info) {\r\n            if (onConnCallback) onConnCallback(info);\r\n        };\r\n        this.clear = function () {\r\n            onConnCallback = null;\r\n        };\r\n        //请求后台服务接口\r\n        this.apiCall = function (type, cmd, data, cbOk, cbErr, timeout, isLongPolling) {\r\n            //封装后台服务接口地址\r\n            var url = getApiUrl(type, cmd, cbOk, cbErr);\r\n            if (url == false) return;\r\n            //发起jsonp请求\r\n            var reqId = jsonpRequestId++,\r\n                cbkey = 'jsonpcallback', // the 'callback' key\r\n                cbval = 'jsonpRequest' + reqId, // the 'callback' value\r\n                script = document.createElement('script'),\r\n                loaded = 0;\r\n\r\n            window[cbval] = jsonpCallback;\r\n            script.type = 'text/javascript';\r\n            url = url + \"&\" + cbkey + \"=\" + cbval + \"&jsonpbody=\" + encodeURIComponent(JSON.stringify(data));\r\n            script.src = url;\r\n            script.async = true;\r\n\r\n            if (typeof script.onreadystatechange !== 'undefined') {\r\n                // need this for IE due to out-of-order onreadystatechange(), binding script\r\n                // execution to an event listener gives us control over when the script\r\n                // is executed. See http://jaubourg.net/2010/07/loading-script-as-onclick-handler-of.html\r\n                script.event = 'onclick';\r\n                script.htmlFor = script.id = '_jsonpRequest_' + reqId;\r\n            }\r\n\r\n            script.onload = script.onreadystatechange = function () {\r\n                if ((this.readyState && this.readyState !== 'complete' && this.readyState !== 'loaded') || loaded) {\r\n                    return false;\r\n                }\r\n                script.onload = script.onreadystatechange = null;\r\n                script.onclick && script.onclick();\r\n                // Call the user callback with the last value stored and clean up values and scripts.\r\n                var resp = jsonpLastRspData;\r\n                var info = \"\\n request url: \\n\" + url + \"\\n request body: \\n\" + JSON.stringify(data) + \"\\n response: \\n\" + JSON.stringify(resp);\r\n                if (resp.ActionStatus == ACTION_STATUS.OK) {\r\n                    log.info(\"[\" + type + \"][\" + cmd + \"]success: \" + info);\r\n                    cbOk && cbOk(resp);\r\n                } else {\r\n                    resp.ErrorInfo = \"[\" + type + \"][\" + cmd + \"]failed \" + info;\r\n                    if (cmd != 'longpolling' || resp.ErrorCode != longPollingTimeOutErrorCode) {\r\n                        log.error(resp.ErrorInfo);\r\n                    } else {\r\n                        log.warn(\"[\" + type + \"][\" + cmd + \"]success: \" + info);\r\n                    }\r\n                    cbErr && cbErr(resp);\r\n                }\r\n                jsonpLastRspData = undefined;\r\n                document.body.removeChild(script);\r\n                loaded = 1;\r\n            };\r\n\r\n            // Add the script to the DOM head\r\n            document.body.appendChild(script);\r\n        };\r\n    };\r\n    // class Session\r\n    var Session = function (type, id, name, icon, time, seq) {\r\n        this._impl = {\r\n            skey: Session.skey(type, id),\r\n            type: type,\r\n            id: id,\r\n            name: name,\r\n            icon: icon,\r\n            unread: 0,//未读消息数\r\n            isAutoRead: false,\r\n            time: time >= 0 ? time : 0,\r\n            curMaxMsgSeq: seq >= 0 ? seq : 0,\r\n            msgs: [],\r\n            isFinished : 1\r\n        };\r\n    };\r\n    Session.skey = function (type, id) {\r\n        return type + id;\r\n    };\r\n    Session.prototype.type = function () {\r\n        return this._impl.type;\r\n    };\r\n    Session.prototype.id = function () {\r\n        return this._impl.id;\r\n    };\r\n    Session.prototype.name = function () {\r\n        return this._impl.name;\r\n    };\r\n    Session.prototype.icon = function () {\r\n        return this._impl.icon;\r\n    };\r\n    Session.prototype.unread = function (val) {\r\n        if(typeof val !== 'undefined'){\r\n            this._impl.unread = val;\r\n        }else{\r\n            return this._impl.unread;\r\n        }\r\n    };\r\n    Session.prototype.isFinished = function (val) {\r\n        if(typeof val !== 'undefined'){\r\n            this._impl.isFinished = val;\r\n        }else{\r\n            return this._impl.isFinished;\r\n        }\r\n    };\r\n    Session.prototype.time = function () {\r\n        return this._impl.time;\r\n    };\r\n    Session.prototype.curMaxMsgSeq = function (seq) {\r\n        if(typeof seq !== 'undefined'){\r\n            this._impl.curMaxMsgSeq = seq;\r\n        }else{\r\n            return this._impl.curMaxMsgSeq;\r\n        }\r\n    };\r\n    Session.prototype.msgCount = function () {\r\n        return this._impl.msgs.length;\r\n    };\r\n    Session.prototype.msg = function (index) {\r\n        return this._impl.msgs[index];\r\n    };\r\n    Session.prototype.msgs = function () {\r\n        return this._impl.msgs;\r\n    };\r\n    Session.prototype._impl_addMsg = function (msg) {\r\n        this._impl.msgs.push(msg);\r\n        //if (!msg.isSend && msg.time > this._impl.time)\r\n        if (msg.time > this._impl.time)\r\n            this._impl.time = msg.time;\r\n        //if (!msg.isSend && msg.seq > this._impl.curMaxMsgSeq)\r\n        if (msg.seq > this._impl.curMaxMsgSeq)\r\n            this._impl.curMaxMsgSeq = msg.seq;\r\n        //自己发送的消息不计入未读数\r\n        if (!msg.isSend && !this._impl.isAutoRead) {\r\n            this._impl.unread++;\r\n        }\r\n    };\r\n    //class C2CMsgReadedItem\r\n    var C2CMsgReadedItem = function (toAccount, lastedMsgTime) {\r\n        this.toAccount = toAccount;\r\n        this.lastedMsgTime = lastedMsgTime;\r\n    }\r\n    // class Msg\r\n    var Msg = function (sess, isSend, seq, random, time, fromAccount, subType, fromAccountNick) {\r\n        this.sess = sess;\r\n        this.subType = subType >= 0 ? subType : 0;//消息类型,c2c消息时，type取值为0；group消息时，type取值0和1，0-普通群消息，1-群提示消息\r\n        this.fromAccount = fromAccount;\r\n        this.fromAccountNick = fromAccountNick ? fromAccountNick : fromAccount;\r\n        this.isSend = Boolean(isSend);\r\n        this.seq = seq >= 0 ? seq : nextSeq();\r\n        this.random = random >= 0 ? random : createRandom();\r\n        this.time = time >= 0 ? time : unixtime();\r\n        this.elems = [];\r\n    };\r\n    Msg.prototype.getSession = function () {\r\n        return this.sess;\r\n    };\r\n    Msg.prototype.getType = function () {\r\n        return this.subType;\r\n    };\r\n    Msg.prototype.getSubType = function () {\r\n        return this.subType;\r\n    };\r\n    Msg.prototype.getFromAccount = function () {\r\n        return this.fromAccount;\r\n    };\r\n    Msg.prototype.getFromAccountNick = function () {\r\n        return this.fromAccountNick;\r\n    };\r\n    Msg.prototype.getIsSend = function () {\r\n        return this.isSend;\r\n    };\r\n    Msg.prototype.getSeq = function () {\r\n        return this.seq;\r\n    };\r\n    Msg.prototype.getTime = function () {\r\n        return this.time;\r\n    };\r\n    Msg.prototype.getRandom = function () {\r\n        return this.random;\r\n    };\r\n    Msg.prototype.getElems = function () {\r\n        return this.elems;\r\n    };\r\n    //文本\r\n    Msg.prototype.addText = function (text) {\r\n        this.addElem(new webim.Msg.Elem(MSG_ELEMENT_TYPE.TEXT, text));\r\n    };\r\n    //表情\r\n    Msg.prototype.addFace = function (face) {\r\n        this.addElem(new webim.Msg.Elem(MSG_ELEMENT_TYPE.FACE, face));\r\n    };\r\n    //图片\r\n    Msg.prototype.addImage = function (image) {\r\n        this.addElem(new webim.Msg.Elem(MSG_ELEMENT_TYPE.IMAGE, image));\r\n    };\r\n    //地理位置\r\n    Msg.prototype.addLocation = function (location) {\r\n        this.addElem(new webim.Msg.Elem(MSG_ELEMENT_TYPE.LOCATION, location));\r\n    };\r\n    //文件\r\n    Msg.prototype.addFile = function (file) {\r\n        this.addElem(new webim.Msg.Elem(MSG_ELEMENT_TYPE.FILE, file));\r\n    };\r\n    //自定义\r\n    Msg.prototype.addCustom = function (custom) {\r\n        this.addElem(new webim.Msg.Elem(MSG_ELEMENT_TYPE.CUSTOM, custom));\r\n    };\r\n    Msg.prototype.addElem = function (elem) {\r\n        this.elems.push(elem);\r\n    };\r\n    Msg.prototype.toHtml = function () {\r\n        var html = \"\";\r\n        for (var i in this.elems) {\r\n            var elem = this.elems[i];\r\n            html += elem.toHtml();\r\n        }\r\n        return html;\r\n    };\r\n\r\n    // class Msg.Elem\r\n    Msg.Elem = function (type, value) {\r\n        this.type = type;\r\n        this.content = value;\r\n    };\r\n    Msg.Elem.prototype.getType = function () {\r\n        return this.type;\r\n    };\r\n    Msg.Elem.prototype.getContent = function () {\r\n        return this.content;\r\n    };\r\n    Msg.Elem.prototype.toHtml = function () {\r\n        var html;\r\n        html = this.content.toHtml();\r\n        return html;\r\n    };\r\n\r\n    // class Msg.Elem.Text\r\n    Msg.Elem.Text = function (text) {\r\n        this.text = tool.xssFilter(text);\r\n    };\r\n    Msg.Elem.Text.prototype.getText = function () {\r\n        return this.text;\r\n    };\r\n    Msg.Elem.Text.prototype.toHtml = function () {\r\n        return this.text;\r\n    };\r\n\r\n    // class Msg.Elem.Face\r\n    Msg.Elem.Face = function (index, data) {\r\n        this.index = index;\r\n        this.data = data;\r\n    };\r\n    Msg.Elem.Face.prototype.getIndex = function () {\r\n        return this.index;\r\n    };\r\n    Msg.Elem.Face.prototype.getData = function () {\r\n        return this.data;\r\n    };\r\n    Msg.Elem.Face.prototype.toHtml = function () {\r\n        var faceUrl = null;\r\n        var index = emotionDataIndexs[this.data];\r\n        var emotion = emotions[index];\r\n        if (emotion && emotion[1]) {\r\n            faceUrl = emotion[1];\r\n        }\r\n        if (faceUrl) {\r\n            return \"<img src='\" + faceUrl + \"'/>\";\r\n        } else {\r\n            return this.data;\r\n        }\r\n    };\r\n\r\n    // 地理位置消息 class Msg.Elem.Location\r\n    Msg.Elem.Location = function (longitude, latitude, desc) {\r\n        this.latitude = latitude;//纬度\r\n        this.longitude = longitude;//经度\r\n        this.desc = desc;//描述\r\n    };\r\n    Msg.Elem.Location.prototype.getLatitude = function () {\r\n        return this.latitude;\r\n    };\r\n    Msg.Elem.Location.prototype.getLongitude = function () {\r\n        return this.longitude;\r\n    };\r\n    Msg.Elem.Location.prototype.getDesc = function () {\r\n        return this.desc;\r\n    };\r\n    Msg.Elem.Location.prototype.toHtml = function () {\r\n        return '经度=' + this.longitude + ',纬度=' + this.latitude + ',描述=' + this.desc;\r\n    };\r\n\r\n    //图片消息\r\n    // class Msg.Elem.Images\r\n    Msg.Elem.Images = function (imageId) {\r\n        this.UUID = imageId;\r\n        this.ImageInfoArray = [];\r\n    };\r\n    Msg.Elem.Images.prototype.addImage = function (image) {\r\n        this.ImageInfoArray.push(image);\r\n    };\r\n    Msg.Elem.Images.prototype.toHtml = function () {\r\n        var smallImage = this.getImage(IMAGE_TYPE.SMALL);\r\n        var bigImage = this.getImage(IMAGE_TYPE.LARGE);\r\n        var oriImage = this.getImage(IMAGE_TYPE.ORIGIN);\r\n        if (!bigImage) {\r\n            bigImage = smallImage;\r\n        }\r\n        if (!oriImage) {\r\n            oriImage = smallImage;\r\n        }\r\n        return \"<img src='\" + smallImage.getUrl() + \"#\" + bigImage.getUrl() + \"#\" + oriImage.getUrl() + \"' style='CURSOR: hand' id='\" + this.getImageId() + \"' bigImgUrl='\" + bigImage.getUrl() + \"' onclick='imageClick(this)' />\";\r\n\r\n    };\r\n    Msg.Elem.Images.prototype.getImageId = function () {\r\n        return this.UUID;\r\n    };\r\n    Msg.Elem.Images.prototype.getImage = function (type) {\r\n        for (var i in this.ImageInfoArray) {\r\n            if (this.ImageInfoArray[i].getType() == type) {\r\n                return this.ImageInfoArray[i];\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    // class Msg.Elem.Images.Image\r\n    Msg.Elem.Images.Image = function (type, size, width, height, url) {\r\n        this.type = type;\r\n        this.size = size;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.url = url;\r\n    };\r\n    Msg.Elem.Images.Image.prototype.getType = function () {\r\n        return this.type;\r\n    };\r\n    Msg.Elem.Images.Image.prototype.getSize = function () {\r\n        return this.size;\r\n    };\r\n    Msg.Elem.Images.Image.prototype.getWidth = function () {\r\n        return this.width;\r\n    };\r\n    Msg.Elem.Images.Image.prototype.getHeight = function () {\r\n        return this.height;\r\n    };\r\n    Msg.Elem.Images.Image.prototype.getUrl = function () {\r\n        return this.url;\r\n    };\r\n\r\n    // class Msg.Elem.Sound\r\n    Msg.Elem.Sound = function (uuid, second, size, senderId, receiverId, downFlag,  chatType) {\r\n        this.uuid = uuid;//文件id\r\n        this.second = second;//时长，单位：秒\r\n        this.size = size;//大小，单位：字节\r\n        this.senderId = senderId;//发送者\r\n        this.receiverId = receiverId;//接收方id\r\n        this.downFlag = downFlag;//下载标志位\r\n        this.busiId = chatType == SESSION_TYPE.C2C ? 2 : 1;//busi_id ( 1：群    2:C2C)\r\n\r\n        //根据不同情况拉取数据\r\n        //是否需要申请下载地址  0:到架平申请  1:到cos申请  2:不需要申请, 直接拿url下载\r\n        if(downFlag !== undefined && busiId !== undefined){\r\n            getFileDownUrlV2(uuid, senderId, second, downFlag,receiverId,  this.busiId , UPLOAD_RES_TYPE.SOUND);\r\n        }else{\r\n            this.downUrl = getSoundDownUrl(uuid, senderId, second);//下载地址\r\n        }\r\n    };\r\n    Msg.Elem.Sound.prototype.getUUID = function () {\r\n        return this.uuid;\r\n    };\r\n    Msg.Elem.Sound.prototype.getSecond = function () {\r\n        return this.second;\r\n    };\r\n    Msg.Elem.Sound.prototype.getSize = function () {\r\n        return this.size;\r\n    };\r\n    Msg.Elem.Sound.prototype.getSenderId = function () {\r\n        return this.senderId;\r\n    };\r\n    Msg.Elem.Sound.prototype.getDownUrl = function () {\r\n        return this.downUrl;\r\n    };\r\n    Msg.Elem.Sound.prototype.toHtml = function () {\r\n        if (BROWSER_INFO.type == 'ie' && parseInt(BROWSER_INFO.ver) <= 8) {\r\n            return '[这是一条语音消息]demo暂不支持ie8(含)以下浏览器播放语音,语音URL:' + this.downUrl;\r\n        }\r\n        return '<audio id=\"uuid_'+this.uuid+'\" src=\"' + this.downUrl + '\" controls=\"controls\" onplay=\"onChangePlayAudio(this)\" preload=\"none\"></audio>';\r\n    };\r\n\r\n    // class Msg.Elem.File\r\n    Msg.Elem.File = function (uuid, name, size, senderId, receiverId, downFlag, chatType) {\r\n        this.uuid = uuid;//文件id\r\n        this.name = name;//文件名\r\n        this.size = size;//大小，单位：字节\r\n        this.senderId = senderId;//发送者\r\n        this.receiverId = receiverId;//接收方id\r\n        this.downFlag = downFlag;//下载标志位\r\n\r\n        this.busiId = chatType == SESSION_TYPE.C2C ? 2 : 1;//busi_id ( 1：群    2:C2C)\r\n        //根据不同情况拉取数据\r\n        //是否需要申请下载地址  0:到架平申请  1:到cos申请  2:不需要申请, 直接拿url下载\r\n        if(downFlag !== undefined && busiId !== undefined){\r\n            getFileDownUrlV2(uuid, senderId, name, downFlag,receiverId,  this.busiId , UPLOAD_RES_TYPE.FILE);\r\n        }else{\r\n            this.downUrl = getFileDownUrl(uuid, senderId, name);//下载地址\r\n        }\r\n    };\r\n    Msg.Elem.File.prototype.getUUID = function () {\r\n        return this.uuid;\r\n    };\r\n    Msg.Elem.File.prototype.getName = function () {\r\n        return this.name;\r\n    };\r\n    Msg.Elem.File.prototype.getSize = function () {\r\n        return this.size;\r\n    };\r\n    Msg.Elem.File.prototype.getSenderId = function () {\r\n        return this.senderId;\r\n    };\r\n    Msg.Elem.File.prototype.getDownUrl = function () {\r\n        return this.downUrl;\r\n    };\r\n    Msg.Elem.File.prototype.getDownFlag = function () {\r\n        return this.downFlag;\r\n    };\r\n    Msg.Elem.File.prototype.toHtml = function () {\r\n        var fileSize, unitStr;\r\n        fileSize = this.size;\r\n        unitStr = \"Byte\";\r\n        if (this.size >= 1024) {\r\n            fileSize = Math.round(this.size / 1024);\r\n            unitStr = \"KB\";\r\n        }\r\n        return '<a href=\"javascript\" onclick=\"webim.onDownFile(\"'+this.uuid+'\")\" title=\"点击下载文件\" ><i class=\"glyphicon glyphicon-file\">&nbsp;' + this.name + '(' + fileSize + unitStr + ')</i></a>';\r\n    };\r\n\r\n    // class Msg.Elem.GroupTip 群提示消息对象\r\n    Msg.Elem.GroupTip = function (opType, opUserId, groupId, groupName, userIdList) {\r\n        this.opType = opType;//操作类型\r\n        this.opUserId = opUserId;//操作者id\r\n        this.groupId = groupId;//群id\r\n        this.groupName = groupName;//群名称\r\n        this.userIdList = userIdList ? userIdList : [];//被操作的用户id列表\r\n        this.groupInfoList = [];//新的群资料信息，群资料变更时才有值\r\n        this.memberInfoList = [];//新的群成员资料信息，群成员资料变更时才有值\r\n        this.groupMemberNum = null;//群成员数，操作类型为加群或者退群时才有值\r\n    };\r\n    Msg.Elem.GroupTip.prototype.addGroupInfo = function (groupInfo) {\r\n        this.groupInfoList.push(groupInfo);\r\n    };\r\n    Msg.Elem.GroupTip.prototype.addMemberInfo = function (memberInfo) {\r\n        this.memberInfoList.push(memberInfo);\r\n    };\r\n    Msg.Elem.GroupTip.prototype.getOpType = function () {\r\n        return this.opType;\r\n    };\r\n    Msg.Elem.GroupTip.prototype.getOpUserId = function () {\r\n        return this.opUserId;\r\n    };\r\n    Msg.Elem.GroupTip.prototype.getGroupId = function () {\r\n        return this.groupId;\r\n    };\r\n    Msg.Elem.GroupTip.prototype.getGroupName = function () {\r\n        return this.groupName;\r\n    };\r\n    Msg.Elem.GroupTip.prototype.getUserIdList = function () {\r\n        return this.userIdList;\r\n    };\r\n    Msg.Elem.GroupTip.prototype.getGroupInfoList = function () {\r\n        return this.groupInfoList;\r\n    };\r\n    Msg.Elem.GroupTip.prototype.getMemberInfoList = function () {\r\n        return this.memberInfoList;\r\n    };\r\n    Msg.Elem.GroupTip.prototype.getGroupMemberNum = function () {\r\n        return this.groupMemberNum;\r\n    };\r\n    Msg.Elem.GroupTip.prototype.setGroupMemberNum = function (groupMemberNum) {\r\n        return this.groupMemberNum = groupMemberNum;\r\n    };\r\n    Msg.Elem.GroupTip.prototype.toHtml = function () {\r\n        var text = \"[群提示消息]\";\r\n        var maxIndex = GROUP_TIP_MAX_USER_COUNT - 1;\r\n        switch (this.opType) {\r\n            case GROUP_TIP_TYPE.JOIN://加入群\r\n                text += this.opUserId + \"邀请了\";\r\n                for (var m in this.userIdList) {\r\n                    text += this.userIdList[m] + \",\";\r\n                    if (this.userIdList.length > GROUP_TIP_MAX_USER_COUNT && m == maxIndex) {\r\n                        text += \"等\" + this.userIdList.length + \"人\";\r\n                        break;\r\n                    }\r\n                }\r\n                text += \"加入该群\";\r\n                break;\r\n            case GROUP_TIP_TYPE.QUIT://退出群\r\n                text += this.opUserId + \"主动退出该群\";\r\n                break;\r\n            case GROUP_TIP_TYPE.KICK://踢出群\r\n                text += this.opUserId + \"将\";\r\n                for (var m in this.userIdList) {\r\n                    text += this.userIdList[m] + \",\";\r\n                    if (this.userIdList.length > GROUP_TIP_MAX_USER_COUNT && m == maxIndex) {\r\n                        text += \"等\" + this.userIdList.length + \"人\";\r\n                        break;\r\n                    }\r\n                }\r\n                text += \"踢出该群\";\r\n                break;\r\n            case GROUP_TIP_TYPE.SET_ADMIN://设置管理员\r\n                text += this.opUserId + \"将\";\r\n                for (var m in this.userIdList) {\r\n                    text += this.userIdList[m] + \",\";\r\n                    if (this.userIdList.length > GROUP_TIP_MAX_USER_COUNT && m == maxIndex) {\r\n                        text += \"等\" + this.userIdList.length + \"人\";\r\n                        break;\r\n                    }\r\n                }\r\n                text += \"设为管理员\";\r\n                break;\r\n            case GROUP_TIP_TYPE.CANCEL_ADMIN://取消管理员\r\n                text += this.opUserId + \"取消\";\r\n                for (var m in this.userIdList) {\r\n                    text += this.userIdList[m] + \",\";\r\n                    if (this.userIdList.length > GROUP_TIP_MAX_USER_COUNT && m == maxIndex) {\r\n                        text += \"等\" + this.userIdList.length + \"人\";\r\n                        break;\r\n                    }\r\n                }\r\n                text += \"的管理员资格\";\r\n                break;\r\n\r\n\r\n            case GROUP_TIP_TYPE.MODIFY_GROUP_INFO://群资料变更\r\n                text += this.opUserId + \"修改了群资料：\";\r\n                for (var m in this.groupInfoList) {\r\n                    var type = this.groupInfoList[m].getType();\r\n                    var value = this.groupInfoList[m].getValue();\r\n                    switch (type) {\r\n                        case GROUP_TIP_MODIFY_GROUP_INFO_TYPE.FACE_URL:\r\n                            text += \"群头像为\" + value + \"; \";\r\n                            break;\r\n                        case GROUP_TIP_MODIFY_GROUP_INFO_TYPE.NAME:\r\n                            text += \"群名称为\" + value + \"; \";\r\n                            break;\r\n                        case GROUP_TIP_MODIFY_GROUP_INFO_TYPE.OWNER:\r\n                            text += \"群主为\" + value + \"; \";\r\n                            break;\r\n                        case GROUP_TIP_MODIFY_GROUP_INFO_TYPE.NOTIFICATION:\r\n                            text += \"群公告为\" + value + \"; \";\r\n                            break;\r\n                        case GROUP_TIP_MODIFY_GROUP_INFO_TYPE.INTRODUCTION:\r\n                            text += \"群简介为\" + value + \"; \";\r\n                            break;\r\n                        default:\r\n                            text += \"未知信息为:type=\" + type + \",value=\" + value + \"; \";\r\n                            break;\r\n                    }\r\n                }\r\n                break;\r\n\r\n            case GROUP_TIP_TYPE.MODIFY_MEMBER_INFO://群成员资料变更(禁言时间)\r\n                text += this.opUserId + \"修改了群成员资料:\";\r\n                for (var m in this.memberInfoList) {\r\n                    var userId = this.memberInfoList[m].getUserId();\r\n                    var shutupTime = this.memberInfoList[m].getShutupTime();\r\n                    text += userId + \": \";\r\n                    if (shutupTime != null && shutupTime !== undefined) {\r\n                        if (shutupTime == 0) {\r\n                            text += \"取消禁言; \";\r\n                        } else {\r\n                            text += \"禁言\" + shutupTime + \"秒; \";\r\n                        }\r\n                    } else {\r\n                        text += \" shutupTime为空\";\r\n                    }\r\n                    if (this.memberInfoList.length > GROUP_TIP_MAX_USER_COUNT && m == maxIndex) {\r\n                        text += \"等\" + this.memberInfoList.length + \"人\";\r\n                        break;\r\n                    }\r\n                }\r\n                break;\r\n\r\n            case GROUP_TIP_TYPE.READED://消息已读\r\n                /**/\r\n                Log.info(\"消息已读同步\")\r\n                break;\r\n            default:\r\n                text += \"未知群提示消息类型：type=\" + this.opType;\r\n                break;\r\n        }\r\n        return text;\r\n    };\r\n\r\n    // class Msg.Elem.GroupTip.GroupInfo，变更的群资料信息对象\r\n    Msg.Elem.GroupTip.GroupInfo = function (type, value) {\r\n        this.type = type;//群资料信息类型\r\n        this.value = value;//对应的值\r\n    };\r\n    Msg.Elem.GroupTip.GroupInfo.prototype.getType = function () {\r\n        return this.type;\r\n    };\r\n    Msg.Elem.GroupTip.GroupInfo.prototype.getValue = function () {\r\n        return this.value;\r\n    };\r\n\r\n    // class Msg.Elem.GroupTip.MemberInfo，变更的群成员资料信息对象\r\n    Msg.Elem.GroupTip.MemberInfo = function (userId, shutupTime) {\r\n        this.userId = userId;//群成员id\r\n        this.shutupTime = shutupTime;//群成员被禁言时间，0表示取消禁言，大于0表示被禁言时长，单位：秒\r\n    };\r\n    Msg.Elem.GroupTip.MemberInfo.prototype.getUserId = function () {\r\n        return this.userId;\r\n    };\r\n    Msg.Elem.GroupTip.MemberInfo.prototype.getShutupTime = function () {\r\n        return this.shutupTime;\r\n    };\r\n\r\n    // 自定义消息类型 class Msg.Elem.Custom\r\n    Msg.Elem.Custom = function (data, desc, ext) {\r\n        this.data = data;//数据\r\n        this.desc = desc;//描述\r\n        this.ext = ext;//扩展字段\r\n    };\r\n    Msg.Elem.Custom.prototype.getData = function () {\r\n        return this.data;\r\n    };\r\n    Msg.Elem.Custom.prototype.getDesc = function () {\r\n        return this.desc;\r\n    };\r\n    Msg.Elem.Custom.prototype.getExt = function () {\r\n        return this.ext;\r\n    };\r\n    Msg.Elem.Custom.prototype.toHtml = function () {\r\n        return this.data;\r\n    };\r\n\r\n    // singleton object MsgStore\r\n    var MsgStore = new function () {\r\n        var sessMap = {};//跟所有用户或群的聊天记录MAP\r\n        var sessTimeline = [];//按时间降序排列的会话列表\r\n        msgCache = {};//消息缓存，用于判重\r\n        //C2C\r\n        this.cookie = \"\";//上一次拉取新c2c消息的cookie\r\n        this.syncFlag = 0;//上一次拉取新c2c消息的是否继续拉取标记\r\n\r\n        var visitSess = function (visitor) {\r\n            for (var i in sessMap) {\r\n                visitor(sessMap[i]);\r\n            }\r\n        };\r\n        // window.msgCache = msgCache;\r\n        //消息查重\r\n        var checkDupMsg = function (msg) {\r\n            var dup = false;\r\n            var first_key = msg.sess._impl.skey;\r\n            var second_key = msg.isSend + msg.seq + msg.random;\r\n            var tempMsg = msgCache[first_key] && msgCache[first_key][second_key];\r\n            if (tempMsg){\r\n                dup = true;\r\n            }\r\n            if (msgCache[first_key]) {\r\n                msgCache[first_key][second_key] = {time: msg.time};\r\n            } else {\r\n                msgCache[first_key] = {};\r\n                msgCache[first_key][second_key] = {time: msg.time};\r\n            }\r\n            return dup;\r\n        };\r\n\r\n        this.sessMap = function () {\r\n            return sessMap;\r\n        };\r\n        this.sessCount = function () {\r\n            return sessTimeline.length;\r\n        };\r\n        this.sessByTypeId = function (type, id) {\r\n            var skey = Session.skey(type, id);\r\n            if (skey === undefined || skey == null) return null;\r\n            return sessMap[skey];\r\n        };\r\n        this.delSessByTypeId = function (type, id) {\r\n            var skey = Session.skey(type, id);\r\n            if (skey === undefined || skey == null) return false;\r\n            if (sessMap[skey]) {\r\n                delete sessMap[skey];\r\n                delete msgCache[skey];\r\n            }\r\n            return true;\r\n        };\r\n        this.resetCookieAndSyncFlag = function () {\r\n            this.cookie = \"\";\r\n            this.syncFlag = 0;\r\n        };\r\n\r\n        //切换将当前会话的自动读取消息标志为isOn,重置其他会话的自动读取消息标志为false\r\n        this.setAutoRead = function (selSess, isOn, isResetAll) {\r\n            if (isResetAll)\r\n                visitSess(function (s) {\r\n                    s._impl.isAutoRead = false;\r\n                });\r\n            if (selSess) {\r\n                selSess._impl.isAutoRead = isOn;//\r\n                if (isOn) {//是否调用已读上报接口\r\n                    selSess._impl.unread = 0;\r\n\r\n                    if (selSess._impl.type == SESSION_TYPE.C2C) {//私聊消息已读上报\r\n                        var tmpC2CMsgReadedItem = [];\r\n                        tmpC2CMsgReadedItem.push(new C2CMsgReadedItem(selSess._impl.id, selSess._impl.time));\r\n                        //调用C2C消息已读上报接口\r\n                        proto_c2CMsgReaded(MsgStore.cookie,\r\n                            tmpC2CMsgReadedItem,\r\n                            function (resp) {\r\n                                log.info(\"[setAutoRead]: c2CMsgReaded success\");\r\n                            },\r\n                            function (err) {\r\n                                log.error(\"[setAutoRead}: c2CMsgReaded failed:\" + err.ErrorInfo);\r\n                            });\r\n                    } else if (selSess._impl.type == SESSION_TYPE.GROUP) {//群聊消息已读上报\r\n                        var tmpOpt = {\r\n                            'GroupId': selSess._impl.id,\r\n                            'MsgReadedSeq': selSess._impl.curMaxMsgSeq\r\n                        };\r\n                        //调用group消息已读上报接口\r\n                        proto_groupMsgReaded(tmpOpt,\r\n                            function (resp) {\r\n                                log.info(\"groupMsgReaded success\");\r\n\r\n                            },\r\n                            function (err) {\r\n                                log.error(\"groupMsgReaded failed:\" + err.ErrorInfo);\r\n\r\n                            });\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        this.c2CMsgReaded = function (opts, cbOk, cbErr) {\r\n            var tmpC2CMsgReadedItem = [];\r\n            tmpC2CMsgReadedItem.push(new C2CMsgReadedItem(opts.To_Account, opts.LastedMsgTime));\r\n            //调用C2C消息已读上报接口\r\n            proto_c2CMsgReaded(MsgStore.cookie,\r\n                tmpC2CMsgReadedItem,\r\n                function (resp) {\r\n                    if (cbOk) {\r\n                        log.info(\"c2CMsgReaded success\");\r\n                        cbOk(resp);\r\n                    }\r\n                },\r\n                function (err) {\r\n                    if (cbErr) {\r\n                        log.error(\"c2CMsgReaded failed:\" + err.ErrorInfo);\r\n                        cbErr(err);\r\n                    }\r\n                });\r\n        };\r\n\r\n        this.addSession = function (sess) {\r\n            sessMap[sess._impl.skey] = sess;\r\n        };\r\n        this.delSession = function (sess) {\r\n            delete sessMap[sess._impl.skey];\r\n        };\r\n        this.addMsg = function (msg) {\r\n            if (checkDupMsg(msg)) return false;\r\n            var sess = msg.sess;\r\n            if (!sessMap[sess._impl.skey]) this.addSession(sess);\r\n            sess._impl_addMsg(msg);\r\n            return true;\r\n        };\r\n        this.updateTimeline = function () {\r\n            var arr = new Array;\r\n            visitSess(function (sess) {\r\n                arr.push(sess);\r\n            });\r\n            arr.sort(function (a, b) {\r\n                return b.time - a.time;\r\n            });\r\n            sessTimeline = arr;\r\n        };\r\n    };\r\n    // singleton object MsgManager\r\n    var MsgManager = new function () {\r\n\r\n        var onMsgCallback = null;//新消息(c2c和group)回调\r\n\r\n        var onGroupInfoChangeCallback = null;//群资料变化回调\r\n        //收到新群系统消息回调列表\r\n        var onGroupSystemNotifyCallbacks = {\r\n            \"1\": null,\r\n            \"2\": null,\r\n            \"3\": null,\r\n            \"4\": null,\r\n            \"5\": null,\r\n            \"6\": null,\r\n            \"7\": null,\r\n            \"8\": null,\r\n            \"9\": null,\r\n            \"10\": null,\r\n            \"11\": null,\r\n            \"15\": null,\r\n            \"255\": null\r\n        };\r\n        //监听好友系统通知函数\r\n        var onFriendSystemNotifyCallbacks={\r\n            \"1\":null,\r\n            \"2\":null,\r\n            \"3\":null,\r\n            \"4\":null,\r\n            \"5\":null,\r\n            \"6\":null,\r\n            \"7\":null,\r\n            \"8\":null\r\n        };\r\n\r\n        var onProfileSystemNotifyCallbacks= {\r\n            \"1\" :null\r\n        };\r\n\r\n            var onKickedEventCall = null;\r\n\r\n            var onMsgReadCallback = null;\r\n\r\n        //普通长轮询\r\n        var longPollingOn = false;//是否开启普通长轮询\r\n        var isLongPollingRequesting = false;//是否在长轮询ing\r\n        var notifySeq = 0;//c2c通知seq\r\n        var noticeSeq = 0;//群消息seq\r\n\r\n        //大群长轮询\r\n        var onBigGroupMsgCallback = null;//大群消息回调\r\n        var bigGroupLongPollingOn = false;//是否开启长轮询\r\n        var bigGroupLongPollingStartSeq = 0;//请求拉消息的起始seq(大群长轮询)\r\n        var bigGroupLongPollingHoldTime = 90;//客户端长轮询的超时时间，单位是秒(大群长轮询)\r\n        var bigGroupLongPollingKey = null;//客户端加入群组后收到的的Key(大群长轮询)\r\n        var bigGroupLongPollingMsgMap = {};//记录收到的群消息数\r\n\r\n\r\n        var getLostGroupMsgCount = 0;//补拉丢失的群消息次数\r\n        //我的群当前最大的seq\r\n        var myGroupMaxSeqs = {};//用于补拉丢失的群消息\r\n\r\n        var groupSystemMsgsCache = {};//群组系统消息缓存,用于判重\r\n\r\n        //设置长轮询开关\r\n        //isOn=true 开启\r\n        //isOn=false 停止\r\n        this.setLongPollingOn = function (isOn) {\r\n            longPollingOn = isOn;\r\n        };\r\n        this.getLongPollingOn = function () {\r\n            return longPollingOn;\r\n        };\r\n\r\n        //重置长轮询变量\r\n        this.resetLongPollingInfo = function () {\r\n            longPollingOn = false;\r\n            notifySeq = 0;\r\n            noticeSeq = 0;\r\n        };\r\n\r\n        //设置大群长轮询开关\r\n        //isOn=true 开启\r\n        //isOn=false 停止\r\n        this.setBigGroupLongPollingOn = function (isOn) {\r\n            bigGroupLongPollingOn = isOn;\r\n        };\r\n        //设置大群长轮询key\r\n        this.setBigGroupLongPollingKey = function (key) {\r\n            bigGroupLongPollingKey = key;\r\n        };\r\n        //重置大群长轮询变量\r\n        this.resetBigGroupLongPollingInfo = function () {\r\n            bigGroupLongPollingOn = false;\r\n            bigGroupLongPollingStartSeq = 0;\r\n            bigGroupLongPollingKey = null;\r\n            bigGroupLongPollingMsgMap = {};\r\n        };\r\n\r\n        //设置群消息数据条数\r\n        this.setBigGroupLongPollingMsgMap = function (groupId, count) {\r\n            var bigGroupLongPollingMsgCount = bigGroupLongPollingMsgMap[groupId];\r\n            if (bigGroupLongPollingMsgCount) {\r\n                bigGroupLongPollingMsgCount = parseInt(bigGroupLongPollingMsgCount) + count;\r\n                bigGroupLongPollingMsgMap[groupId] = bigGroupLongPollingMsgCount;\r\n            } else {\r\n                bigGroupLongPollingMsgMap[groupId] = count;\r\n            }\r\n        };\r\n        //重置\r\n        this.clear = function () {\r\n            onGroupInfoChangeCallback = null;\r\n            onGroupSystemNotifyCallbacks = {\r\n                \"1\": null,//申请加群请求（只有管理员会收到）\r\n                \"2\": null,//申请加群被同意（只有申请人能够收到）\r\n                \"3\": null,//申请加群被拒绝（只有申请人能够收到）\r\n                \"4\": null,//被管理员踢出群(只有被踢者接收到)\r\n                \"5\": null,//群被解散(全员接收)\r\n                \"6\": null,//创建群(创建者接收)\r\n                \"7\": null,//邀请加群(被邀请者接收)\r\n                \"8\": null,//主动退群(主动退出者接收)\r\n                \"9\": null,//设置管理员(被设置者接收)\r\n                \"10\": null,//取消管理员(被取消者接收)\r\n                \"11\": null,//群已被回收(全员接收)\r\n                \"15\": null,//群已被回收(全员接收)\r\n                \"255\": null//用户自定义通知(默认全员接收)\r\n            };\r\n            onFriendSystemNotifyCallbacks = {\r\n                \"1\": null,//好友表增加\r\n                \"2\": null,//好友表删除\r\n                \"3\": null,//未决增加\r\n                \"4\": null,//未决删除\r\n                \"5\": null,//黑名单增加\r\n                \"6\": null,//黑名单删除\r\n                \"7\": null,//未决已读上报\r\n                \"8\": null//好友信息(备注，分组)变更\r\n            };\r\n            onProfileSystemNotifyCallbacks = {\r\n                \"1\": null//资料修改\r\n            };\r\n            //重置普通长轮询参数\r\n            onMsgCallback = null;\r\n            longPollingOn = false;\r\n            notifySeq = 0;//c2c新消息通知seq\r\n            noticeSeq = 0;//group新消息seq\r\n\r\n            //重置大群长轮询参数\r\n            onBigGroupMsgCallback = null;\r\n            bigGroupLongPollingOn = false;\r\n            bigGroupLongPollingStartSeq = 0;\r\n            bigGroupLongPollingKey = null;\r\n            bigGroupLongPollingMsgMap = {};\r\n\r\n            groupSystemMsgsCache = {};\r\n\r\n            ipList = [];//文件下载地址\r\n            authkey = null;//文件下载票据\r\n            expireTime = null;//票据超时时间\r\n        };\r\n\r\n        //初始化文件下载ip和票据\r\n        var initIpAndAuthkey = function (cbOk, cbErr) {\r\n            proto_getIpAndAuthkey(function (resp) {\r\n                    ipList = resp.IpList;\r\n                    authkey = resp.AuthKey;\r\n                    expireTime = resp.ExpireTime;\r\n                    if (cbOk) cbOk(resp);\r\n                },\r\n                function (err) {\r\n                    log.error(\"initIpAndAuthkey failed:\" + err.ErrorInfo);\r\n                    if (cbErr) cbErr(err);\r\n                }\r\n            );\r\n        };\r\n\r\n\r\n\t\t\t\tctx.identifier = app.globalData.ctx.identifier\r\n\r\n        //初始化我的群当前最大的seq，用于补拉丢失的群消息\r\n        var initMyGroupMaxSeqs = function (cbOk, cbErr) {\r\n            var opts = {\r\n                'Member_Account': ctx.identifier,\r\n                'Limit': 1000,\r\n                'Offset': 0,\r\n                'GroupBaseInfoFilter': [\r\n                    'NextMsgSeq'\r\n                ]\r\n            };\r\n            proto_getJoinedGroupListHigh(opts, function (resp) {\r\n                    if (!resp.GroupIdList || resp.GroupIdList.length == 0) {\r\n                        log.info(\"initMyGroupMaxSeqs: 目前还没有加入任何群组\");\r\n                        if (cbOk) cbOk(resp);\r\n                        return;\r\n                    }\r\n                    for (var i = 0; i < resp.GroupIdList.length; i++) {\r\n                        var group_id = resp.GroupIdList[i].GroupId;\r\n                        var curMaxSeq = resp.GroupIdList[i].NextMsgSeq - 1;\r\n                        myGroupMaxSeqs[group_id] = curMaxSeq;\r\n                    }\r\n\r\n                    if (cbOk) cbOk(resp);\r\n\r\n                },\r\n                function (err) {\r\n                    log.error(\"initMyGroupMaxSeqs failed:\" + err.ErrorInfo);\r\n                    if (cbErr) cbErr(err);\r\n                }\r\n            );\r\n        };\r\n\r\n        //补拉群消息\r\n        var getLostGroupMsgs = function (groupId, reqMsgSeq, reqMsgNumber) {\r\n            getLostGroupMsgCount++;\r\n            //发起一个拉群群消息请求\r\n            var tempOpts = {\r\n                'GroupId': groupId,\r\n                'ReqMsgSeq': reqMsgSeq,\r\n                'ReqMsgNumber': reqMsgNumber\r\n            };\r\n            //发起一个拉群群消息请求\r\n            log.warn(\"第\" + getLostGroupMsgCount + \"次补齐群消息,参数=\" + JSON.stringify(tempOpts));\r\n            MsgManager.syncGroupMsgs(tempOpts);\r\n        };\r\n\r\n        //更新群当前最大消息seq\r\n        var updateMyGroupCurMaxSeq=function(groupId,msgSeq){\r\n            //更新myGroupMaxSeqs中的群最大seq\r\n            var curMsgSeq=myGroupMaxSeqs[groupId]\r\n            if(curMsgSeq){//如果存在，比较大小\r\n                if(msgSeq>curMsgSeq){\r\n                    myGroupMaxSeqs[groupId]=msgSeq;\r\n                }\r\n            }else{//不存在，新增\r\n                myGroupMaxSeqs[groupId]=msgSeq;\r\n            }\r\n        };\r\n\r\n        //添加群消息列表\r\n        var addGroupMsgList = function (msgs, new_group_msgs) {\r\n            for (var p in msgs) {\r\n                var newGroupMsg = msgs[p];\r\n                //发群消息时，长轮询接口会返回用户自己发的群消息\r\n                //if(newGroupMsg.From_Account && newGroupMsg.From_Account!=ctx.identifier ){\r\n                if (newGroupMsg.From_Account) {\r\n                    //false-不是主动拉取的历史消息\r\n                    //true-需要保存到sdk本地session,并且需要判重\r\n                    var msg = handlerGroupMsg(newGroupMsg, false, true);\r\n                    if (msg) {//不为空，加到新消息里\r\n                        new_group_msgs.push(msg);\r\n                    }\r\n                    //更新myGroupMaxSeqs中的群最大seq\r\n                    updateMyGroupCurMaxSeq(newGroupMsg.ToGroupId,newGroupMsg.MsgSeq);\r\n                }\r\n            }\r\n            return new_group_msgs;\r\n        };\r\n\r\n        //处理收到的群普通和提示消息\r\n        var handlerOrdinaryAndTipC2cMsgs = function (eventType, groupMsgArray) {\r\n            var groupMsgMap = {};//保存收到的C2c消息信息（群号，最小，最大消息seq，消息列表）\r\n            var new_group_msgs = [];\r\n            var minGroupMsgSeq = 99999999;\r\n            var maxGroupMsgSeq = -1;\r\n            for (var j in groupMsgArray) {\r\n\r\n                var groupMsgs = groupMsgMap[groupMsgArray[j].ToGroupId];\r\n                if (!groupMsgs) {\r\n                    groupMsgs = groupMsgMap[groupMsgArray[j].ToGroupId] = {\r\n                        \"min\": minGroupMsgSeq,//收到新消息最小seq\r\n                        \"max\": maxGroupMsgSeq,//收到新消息最大seq\r\n                        \"msgs\": []//收到的新消息\r\n                    };\r\n                }\r\n                //更新长轮询的群NoticeSeq\r\n                if (groupMsgArray[j].NoticeSeq > noticeSeq) {\r\n                    log.warn(\"noticeSeq=\" + noticeSeq + \",msgNoticeSeq=\" + groupMsgArray[j].NoticeSeq);\r\n                    noticeSeq = groupMsgArray[j].NoticeSeq;\r\n                }\r\n                groupMsgArray[j].Event = eventType;\r\n                groupMsgMap[groupMsgArray[j].ToGroupId].msgs.push(groupMsgArray[j]);//新增一条消息\r\n                if (groupMsgArray[j].MsgSeq < groupMsgs.min) {//记录最小的消息seq\r\n                    groupMsgMap[groupMsgArray[j].ToGroupId].min = groupMsgArray[j].MsgSeq;\r\n                }\r\n                if (groupMsgArray[j].MsgSeq > groupMsgs.max) {//记录最大的消息seq\r\n                    groupMsgMap[groupMsgArray[j].ToGroupId].max = groupMsgArray[j].MsgSeq;\r\n                }\r\n            }\r\n\r\n            for (var groupId in groupMsgMap) {\r\n                var tempCount = groupMsgMap[groupId].max - groupMsgMap[groupId].min + 1;//收到的新的群消息数\r\n                var curMaxMsgSeq = myGroupMaxSeqs[groupId];//获取本地保存的群最大消息seq\r\n                if (curMaxMsgSeq) {//存在这个群的最大消息seq\r\n                    //高并发情况下，长轮询可能存在丢消息，这时需要客户端通过拉取群消息接口补齐下\r\n                    //1、如果收到的新消息最小seq比当前最大群消息seq大于1，则表示收到的群消息发生跳跃，需要补齐\r\n                    //2、收到的新群消息seq存在不连续情况，也需要补齐\r\n                    if (groupMsgMap[groupId].min - curMaxMsgSeq > 1 || groupMsgMap[groupId].msgs.length < tempCount) {\r\n                        //发起一个拉群群消息请求\r\n                        log.warn(\"发起一次补齐群消息请求,curMaxMsgSeq=\" + curMaxMsgSeq + \", minMsgSeq=\" + groupMsgMap[groupId].min + \", maxMsgSeq=\" + groupMsgMap[groupId].max + \", msgs.length=\" + groupMsgMap[groupId].msgs.length + \", tempCount=\" + tempCount);\r\n                        getLostGroupMsgs(groupId, groupMsgMap[groupId].max, groupMsgMap[groupId].max - curMaxMsgSeq);\r\n                        //更新myGroupMaxSeqs中的群最大seq\r\n                        updateMyGroupCurMaxSeq(groupId,groupMsgMap[groupId].max);\r\n                    } else {\r\n                        new_group_msgs = addGroupMsgList(groupMsgMap[groupId].msgs, new_group_msgs);\r\n                    }\r\n                } else {//不存在该群的最大消息seq\r\n                    log.warn(\"不存在该群的最大消息seq，群id=\" + groupId);\r\n                    //高并发情况下，长轮询可能存在丢消息，这时需要客户端通过拉取群消息接口补齐下\r\n                    //1、收到的新群消息seq存在不连续情况，也需要补齐\r\n                    if (groupMsgMap[groupId].msgs.length < tempCount) {\r\n                        //发起一个拉群群消息请求\r\n                        log.warn(\"发起一次补齐群消息请求,minMsgSeq=\" + groupMsgMap[groupId].min + \", maxMsgSeq=\" + groupMsgMap[groupId].max + \", msgs.length=\" + groupMsgMap[groupId].msgs.length + \", tempCount=\" + tempCount);\r\n                        getLostGroupMsgs(groupId, groupMsgMap[groupId].max, tempCount);\r\n                        //更新myGroupMaxSeqs中的群最大seq\r\n                        updateMyGroupCurMaxSeq(groupId,groupMsgMap[groupId].max);\r\n                    } else {\r\n                        new_group_msgs = addGroupMsgList(groupMsgMap[groupId].msgs, new_group_msgs);\r\n                    }\r\n                }\r\n            }\r\n            if (new_group_msgs.length) {\r\n                MsgStore.updateTimeline();\r\n            }\r\n\t\t\t\r\n\t\t\tonMsgCallback = app.globalData.listeners.onMsgCallback\r\n\t\t\t\r\n            if (onMsgCallback && new_group_msgs.length) onMsgCallback(new_group_msgs);\r\n\r\n        };\r\n\r\n        //处理收到的群普通和提示消息\r\n        var handlerOrdinaryAndTipGroupMsgs = function (eventType, groupMsgArray) {\r\n            var groupMsgMap = {};//保存收到的群消息信息（群号，最小，最大消息seq，消息列表）\r\n            var new_group_msgs = [];\r\n            var minGroupMsgSeq = 99999999;\r\n            var maxGroupMsgSeq = -1;\r\n            for (var j in groupMsgArray) {\r\n\r\n                var groupMsgs = groupMsgMap[groupMsgArray[j].ToGroupId];\r\n                if (!groupMsgs) {\r\n                    groupMsgs = groupMsgMap[groupMsgArray[j].ToGroupId] = {\r\n                        \"min\": minGroupMsgSeq,//收到新消息最小seq\r\n                        \"max\": maxGroupMsgSeq,//收到新消息最大seq\r\n                        \"msgs\": []//收到的新消息\r\n                    };\r\n                }\r\n                //更新长轮询的群NoticeSeq\r\n                if (groupMsgArray[j].NoticeSeq > noticeSeq) {\r\n                    log.warn(\"noticeSeq=\" + noticeSeq + \",msgNoticeSeq=\" + groupMsgArray[j].NoticeSeq);\r\n                    noticeSeq = groupMsgArray[j].NoticeSeq;\r\n                }\r\n                groupMsgArray[j].Event = eventType;\r\n                groupMsgMap[groupMsgArray[j].ToGroupId].msgs.push(groupMsgArray[j]);//新增一条消息\r\n                if (groupMsgArray[j].MsgSeq < groupMsgs.min) {//记录最小的消息seq\r\n                    groupMsgMap[groupMsgArray[j].ToGroupId].min = groupMsgArray[j].MsgSeq;\r\n                }\r\n                if (groupMsgArray[j].MsgSeq > groupMsgs.max) {//记录最大的消息seq\r\n                    groupMsgMap[groupMsgArray[j].ToGroupId].max = groupMsgArray[j].MsgSeq;\r\n                }\r\n            }\r\n\r\n            for (var groupId in groupMsgMap) {\r\n                var tempCount = groupMsgMap[groupId].max - groupMsgMap[groupId].min + 1;//收到的新的群消息数\r\n                var curMaxMsgSeq = myGroupMaxSeqs[groupId];//获取本地保存的群最大消息seq\r\n                if (curMaxMsgSeq) {//存在这个群的最大消息seq\r\n                    //高并发情况下，长轮询可能存在丢消息，这时需要客户端通过拉取群消息接口补齐下\r\n                    //1、如果收到的新消息最小seq比当前最大群消息seq大于1，则表示收到的群消息发生跳跃，需要补齐\r\n                    //2、收到的新群消息seq存在不连续情况，也需要补齐\r\n                    if (groupMsgMap[groupId].min - curMaxMsgSeq > 1 || groupMsgMap[groupId].msgs.length < tempCount) {\r\n                        //发起一个拉群群消息请求\r\n                        log.warn(\"发起一次补齐群消息请求,curMaxMsgSeq=\" + curMaxMsgSeq + \", minMsgSeq=\" + groupMsgMap[groupId].min + \", maxMsgSeq=\" + groupMsgMap[groupId].max + \", msgs.length=\" + groupMsgMap[groupId].msgs.length + \", tempCount=\" + tempCount);\r\n                        getLostGroupMsgs(groupId, groupMsgMap[groupId].max, groupMsgMap[groupId].max - curMaxMsgSeq);\r\n                        //更新myGroupMaxSeqs中的群最大seq\r\n                        updateMyGroupCurMaxSeq(groupId,groupMsgMap[groupId].max);\r\n                    } else {\r\n                        new_group_msgs = addGroupMsgList(groupMsgMap[groupId].msgs, new_group_msgs);\r\n                    }\r\n                } else {//不存在该群的最大消息seq\r\n                    log.warn(\"不存在该群的最大消息seq，群id=\" + groupId);\r\n                    //高并发情况下，长轮询可能存在丢消息，这时需要客户端通过拉取群消息接口补齐下\r\n                    //1、收到的新群消息seq存在不连续情况，也需要补齐\r\n                    if (groupMsgMap[groupId].msgs.length < tempCount) {\r\n                        //发起一个拉群群消息请求\r\n                        log.warn(\"发起一次补齐群消息请求,minMsgSeq=\" + groupMsgMap[groupId].min + \", maxMsgSeq=\" + groupMsgMap[groupId].max + \", msgs.length=\" + groupMsgMap[groupId].msgs.length + \", tempCount=\" + tempCount);\r\n                        getLostGroupMsgs(groupId, groupMsgMap[groupId].max, tempCount);\r\n                        //更新myGroupMaxSeqs中的群最大seq\r\n                        updateMyGroupCurMaxSeq(groupId,groupMsgMap[groupId].max);\r\n                    } else {\r\n                        new_group_msgs = addGroupMsgList(groupMsgMap[groupId].msgs, new_group_msgs);\r\n                    }\r\n                }\r\n            }\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tonMsgCallback = app.globalData.listeners.onMsgCallback\r\n\t\t\t\r\n            if (new_group_msgs.length) {\r\n                MsgStore.updateTimeline();\r\n            }\r\n            if (onMsgCallback && new_group_msgs.length) onMsgCallback(new_group_msgs);\r\n\r\n        };\r\n\r\n        //处理新的群提示消息\r\n        var handlerGroupTips = function (groupTips) {\r\n            var new_group_msgs = [];\r\n            for (var o in groupTips) {\r\n                var groupTip = groupTips[o];\r\n                //添加event字段\r\n                groupTip.Event = LONG_POLLINNG_EVENT_TYPE.GROUP_TIP;\r\n                //更新群消息通知seq\r\n                if (groupTip.NoticeSeq > noticeSeq) {\r\n                    noticeSeq = groupTip.NoticeSeq;\r\n                }\r\n                var msg = handlerGroupMsg(groupTip, false, true);\r\n                if (msg) {\r\n                    new_group_msgs.push(msg);\r\n                }\r\n            }\r\n            if (new_group_msgs.length) {\r\n                MsgStore.updateTimeline();\r\n            }\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tonMsgCallback = app.globalData.listeners.onMsgCallback\r\n\t\t\t\r\n            if (onMsgCallback && new_group_msgs.length) onMsgCallback(new_group_msgs);\r\n        };\r\n\r\n        //处理新的群系统消息\r\n        //isNeedValidRepeatMsg 是否需要判重\r\n        var handlerGroupSystemMsgs = function (groupSystemMsgs, isNeedValidRepeatMsg) {\r\n            for (var k in groupSystemMsgs) {\r\n                var groupTip = groupSystemMsgs[k];\r\n                var groupReportTypeMsg = groupTip.MsgBody;\r\n                var reportType = groupReportTypeMsg.ReportType;\r\n                //当长轮询返回的群系统消息，才需要更新群消息通知seq\r\n                if (isNeedValidRepeatMsg == false && groupTip.NoticeSeq && groupTip.NoticeSeq > noticeSeq) {\r\n                    noticeSeq = groupTip.NoticeSeq;\r\n                }\r\n                var toAccount = groupTip.GroupInfo.To_Account;\r\n                //过滤本不应该给自己的系统消息\r\n                /*if (!toAccount || toAccount != ctx.identifier) {\r\n                 log.error(\"收到本不应该给自己的系统消息: To_Account=\" + toAccount);\r\n                 continue;\r\n                 }*/\r\n                if (isNeedValidRepeatMsg) {\r\n                    //var key=groupTip.ToGroupId+\"_\"+reportType+\"_\"+groupTip.MsgTimeStamp+\"_\"+groupReportTypeMsg.Operator_Account;\r\n                    var key = groupTip.ToGroupId + \"_\" + reportType + \"_\" + groupReportTypeMsg.Operator_Account;\r\n                    var isExist = groupSystemMsgsCache[key];\r\n                    if (isExist) {\r\n                        log.warn(\"收到重复的群系统消息：key=\" + key);\r\n                        continue;\r\n                    }\r\n                    groupSystemMsgsCache[key] = true;\r\n                }\r\n\r\n                var notify = {\r\n                    \"SrcFlag\": 0,\r\n                    \"ReportType\": reportType,\r\n                    \"GroupId\": groupTip.ToGroupId,\r\n                    \"GroupName\": groupTip.GroupInfo.GroupName,\r\n                    \"Operator_Account\": groupReportTypeMsg.Operator_Account,\r\n                    \"MsgTime\": groupTip.MsgTimeStamp,\r\n                    \"groupReportTypeMsg\" : groupReportTypeMsg\r\n                };\r\n                switch (reportType) {\r\n                    case GROUP_SYSTEM_TYPE.JOIN_GROUP_REQUEST://申请加群(只有管理员会接收到)\r\n                        notify[\"RemarkInfo\"] = groupReportTypeMsg.RemarkInfo;\r\n                        notify[\"MsgKey\"] = groupReportTypeMsg.MsgKey;\r\n                        notify[\"Authentication\"] = groupReportTypeMsg.Authentication;\r\n                        notify[\"UserDefinedField\"] = groupTip.UserDefinedField;\r\n                        notify[\"From_Account\"] = groupTip.From_Account;\r\n                        notify[\"MsgSeq\"] = groupTip.ClientSeq;\r\n                        notify[\"MsgRandom\"] = groupTip.MsgRandom;\r\n                        break;\r\n                    case GROUP_SYSTEM_TYPE.JOIN_GROUP_ACCEPT://申请加群被同意(只有申请人自己接收到)\r\n                    case GROUP_SYSTEM_TYPE.JOIN_GROUP_REFUSE://申请加群被拒绝(只有申请人自己接收到)\r\n                        notify[\"RemarkInfo\"] = groupReportTypeMsg.RemarkInfo;\r\n                        break;\r\n                    case GROUP_SYSTEM_TYPE.KICK://被管理员踢出群(只有被踢者接收到)\r\n                    case GROUP_SYSTEM_TYPE.DESTORY://群被解散(全员接收)\r\n                    case GROUP_SYSTEM_TYPE.CREATE://创建群(创建者接收, 不展示)\r\n                    case GROUP_SYSTEM_TYPE.INVITED_JOIN_GROUP_REQUEST://邀请加群(被邀请者接收)\r\n                    case GROUP_SYSTEM_TYPE.QUIT://主动退群(主动退出者接收, 不展示)\r\n                    case GROUP_SYSTEM_TYPE.SET_ADMIN://群设置管理员(被设置者接收)\r\n                    case GROUP_SYSTEM_TYPE.CANCEL_ADMIN://取消管理员(被取消者接收)\r\n                    case GROUP_SYSTEM_TYPE.REVOKE://群已被回收(全员接收, 不展示)\r\n                        break;\r\n                    case GROUP_SYSTEM_TYPE.READED://群消息已读同步\r\n                        break;\r\n                    case GROUP_SYSTEM_TYPE.CUSTOM://用户自定义通知(默认全员接收)\r\n                        notify[\"MsgSeq\"] = groupTip.MsgSeq;\r\n                        notify[\"UserDefinedField\"] = groupReportTypeMsg.UserDefinedField;\r\n                        break;\r\n                    default:\r\n                        log.error(\"未知群系统消息类型：reportType=\" + reportType);\r\n                        break;\r\n                }\r\n\r\n                if (isNeedValidRepeatMsg) {\r\n                    if (reportType == GROUP_SYSTEM_TYPE.JOIN_GROUP_REQUEST) {\r\n                        //回调\r\n                        if (onGroupSystemNotifyCallbacks[reportType]) onGroupSystemNotifyCallbacks[reportType](notify);\r\n                    }\r\n                } else {\r\n                    //回调\r\n                    if (onGroupSystemNotifyCallbacks[reportType]) {\r\n                        if(reportType == GROUP_SYSTEM_TYPE.READED){\r\n                            var arr = notify.groupReportTypeMsg.GroupReadInfoArray;\r\n                            for(var i = 0 , l = arr.length; i < l ; i++){\r\n                                var item = arr[i];\r\n                                onGroupSystemNotifyCallbacks[reportType](item);\r\n                            }\r\n                        }else{\r\n                            onGroupSystemNotifyCallbacks[reportType](notify);\r\n                        }\r\n                    }\r\n                }\r\n            }//loop\r\n        };\r\n\r\n\r\n        //处理新的好友系统通知\r\n        //isNeedValidRepeatMsg 是否需要判重\r\n        var handlerFriendSystemNotices = function (friendSystemNotices, isNeedValidRepeatMsg) {\r\n            var friendNotice, type, notify;\r\n            for (var k in friendSystemNotices) {\r\n                friendNotice = friendSystemNotices[k];\r\n                type = friendNotice.PushType;\r\n                //当长轮询返回的群系统消息，才需要更新通知seq\r\n                if (isNeedValidRepeatMsg == false && friendNotice.NoticeSeq && friendNotice.NoticeSeq > noticeSeq) {\r\n                    noticeSeq = friendNotice.NoticeSeq;\r\n                }\r\n                notify = {'Type': type};\r\n                switch (type) {\r\n                    case FRIEND_NOTICE_TYPE.FRIEND_ADD://好友表增加\r\n                        notify[\"Accounts\"] = friendNotice.FriendAdd_Account;\r\n                        break;\r\n                    case FRIEND_NOTICE_TYPE.FRIEND_DELETE://好友表删除\r\n                        notify[\"Accounts\"] = friendNotice.FriendDel_Account;\r\n                        break;\r\n                    case FRIEND_NOTICE_TYPE.PENDENCY_ADD://未决增加\r\n                        notify[\"PendencyList\"] = friendNotice.PendencyAdd;\r\n                        break;\r\n                    case FRIEND_NOTICE_TYPE.PENDENCY_DELETE://未决删除\r\n                        notify[\"Accounts\"] = friendNotice.FrienPencydDel_Account;\r\n                        break;\r\n                    case FRIEND_NOTICE_TYPE.BLACK_LIST_ADD://黑名单增加\r\n                        notify[\"Accounts\"] = friendNotice.BlackListAdd_Account;\r\n                        break;\r\n                    case FRIEND_NOTICE_TYPE.BLACK_LIST_DELETE://黑名单删除\r\n                        notify[\"Accounts\"] = friendNotice.BlackListDel_Account;\r\n                        break;\r\n                    /*case FRIEND_NOTICE_TYPE.PENDENCY_REPORT://未决已读上报\r\n\r\n                     break;\r\n                     case FRIEND_NOTICE_TYPE.FRIEND_UPDATE://好友数据更新\r\n\r\n                     break;\r\n                     */\r\n                    default:\r\n                        log.error(\"未知好友系统通知类型：friendNotice=\" + JSON.stringify(friendNotice));\r\n                        break;\r\n                }\r\n\r\n                if (isNeedValidRepeatMsg) {\r\n                    if (type == FRIEND_NOTICE_TYPE.PENDENCY_ADD) {\r\n                        //回调\r\n                        if (onFriendSystemNotifyCallbacks[type]) onFriendSystemNotifyCallbacks[type](notify);\r\n                    }\r\n                } else {\r\n                    //回调\r\n                    if (onFriendSystemNotifyCallbacks[type]) onFriendSystemNotifyCallbacks[type](notify);\r\n                }\r\n            }//loop\r\n        };\r\n\r\n        //处理新的资料系统通知\r\n        //isNeedValidRepeatMsg 是否需要判重\r\n        var handlerProfileSystemNotices = function (profileSystemNotices, isNeedValidRepeatMsg) {\r\n            var profileNotice, type, notify;\r\n            for (var k in profileSystemNotices) {\r\n                profileNotice = profileSystemNotices[k];\r\n                type = profileNotice.PushType;\r\n                //当长轮询返回的群系统消息，才需要更新通知seq\r\n                if (isNeedValidRepeatMsg == false && profileNotice.NoticeSeq && profileNotice.NoticeSeq > noticeSeq) {\r\n                    noticeSeq = profileNotice.NoticeSeq;\r\n                }\r\n                notify = {'Type': type};\r\n                switch (type) {\r\n                    case PROFILE_NOTICE_TYPE.PROFILE_MODIFY://资料修改\r\n                        notify[\"Profile_Account\"] = profileNotice.Profile_Account;\r\n                        notify[\"ProfileList\"] = profileNotice.ProfileList;\r\n                        break;\r\n                    default:\r\n                        log.error(\"未知资料系统通知类型：profileNotice=\" + JSON.stringify(profileNotice));\r\n                        break;\r\n                }\r\n\r\n                if (isNeedValidRepeatMsg) {\r\n                    if (type == PROFILE_NOTICE_TYPE.PROFILE_MODIFY) {\r\n                        //回调\r\n                        if (onProfileSystemNotifyCallbacks[type]) onProfileSystemNotifyCallbacks[type](notify);\r\n                    }\r\n                } else {\r\n                    //回调\r\n                    if (onProfileSystemNotifyCallbacks[type]) onProfileSystemNotifyCallbacks[type](notify);\r\n                }\r\n            }//loop\r\n        };\r\n\r\n        //处理新的群系统消息(用于直播大群长轮询)\r\n        var handlerGroupSystemMsg = function (groupTip) {\r\n            var groupReportTypeMsg = groupTip.MsgBody;\r\n            var reportType = groupReportTypeMsg.ReportType;\r\n            var toAccount = groupTip.GroupInfo.To_Account;\r\n            //过滤本不应该给自己的系统消息\r\n            //if(!toAccount || toAccount!=ctx.identifier){\r\n            //    log.error(\"收到本不应该给自己的系统消息: To_Account=\"+toAccount);\r\n            //    continue;\r\n            //}\r\n            var notify = {\r\n                \"SrcFlag\": 1,\r\n                \"ReportType\": reportType,\r\n                \"GroupId\": groupTip.ToGroupId,\r\n                \"GroupName\": groupTip.GroupInfo.GroupName,\r\n                \"Operator_Account\": groupReportTypeMsg.Operator_Account,\r\n                \"MsgTime\": groupTip.MsgTimeStamp\r\n            };\r\n            switch (reportType) {\r\n                case GROUP_SYSTEM_TYPE.JOIN_GROUP_REQUEST://申请加群(只有管理员会接收到)\r\n                    notify[\"RemarkInfo\"] = groupReportTypeMsg.RemarkInfo;\r\n                    notify[\"MsgKey\"] = groupReportTypeMsg.MsgKey;\r\n                    notify[\"Authentication\"] = groupReportTypeMsg.Authentication;\r\n                    notify[\"UserDefinedField\"] = groupTip.UserDefinedField;\r\n                    notify[\"From_Account\"] = groupTip.From_Account;\r\n                    notify[\"MsgSeq\"] = groupTip.ClientSeq;\r\n                    notify[\"MsgRandom\"] = groupTip.MsgRandom;\r\n                    break;\r\n                case GROUP_SYSTEM_TYPE.JOIN_GROUP_ACCEPT://申请加群被同意(只有申请人自己接收到)\r\n                case GROUP_SYSTEM_TYPE.JOIN_GROUP_REFUSE://申请加群被拒绝(只有申请人自己接收到)\r\n                    notify[\"RemarkInfo\"] = groupReportTypeMsg.RemarkInfo;\r\n                    break;\r\n                case GROUP_SYSTEM_TYPE.KICK://被管理员踢出群(只有被踢者接收到)\r\n                case GROUP_SYSTEM_TYPE.DESTORY://群被解散(全员接收)\r\n                case GROUP_SYSTEM_TYPE.CREATE://创建群(创建者接收, 不展示)\r\n                case GROUP_SYSTEM_TYPE.INVITED_JOIN_GROUP_REQUEST://邀请加群(被邀请者接收)\r\n                case GROUP_SYSTEM_TYPE.QUIT://主动退群(主动退出者接收, 不展示)\r\n                case GROUP_SYSTEM_TYPE.SET_ADMIN://群设置管理员(被设置者接收)\r\n                case GROUP_SYSTEM_TYPE.CANCEL_ADMIN://取消管理员(被取消者接收)\r\n                case GROUP_SYSTEM_TYPE.REVOKE://群已被回收(全员接收, 不展示)\r\n                    break;\r\n                case GROUP_SYSTEM_TYPE.CUSTOM://用户自定义通知(默认全员接收)\r\n                    notify[\"MsgSeq\"] = groupTip.MsgSeq;\r\n                    notify[\"UserDefinedField\"] = groupReportTypeMsg.UserDefinedField;\r\n                    break;\r\n                default:\r\n                    log.error(\"未知群系统消息类型：reportType=\" + reportType);\r\n                    break;\r\n            }\r\n            //回调\r\n            if (onGroupSystemNotifyCallbacks[reportType]) onGroupSystemNotifyCallbacks[reportType](notify);\r\n\r\n        };\r\n\r\n        //处理C2C EVENT 消息通道Array\r\n        var handlerC2cNotifyMsgArray = function(arr){\r\n            for(var i =0,l=arr.length; i<l ;i++){\r\n                handlerC2cEventMsg(arr[i]);\r\n            }\r\n        }\r\n\r\n        //处理C2C EVENT 消息通道Item\r\n        var handlerC2cEventMsg = function (notify) {\r\n            var subType = notify.SubMsgType;\r\n            switch (subType) {\r\n                case C2C_EVENT_SUB_TYPE.READED://已读通知\r\n                    break;\r\n                default:\r\n                    log.error(\"未知C2c系统消息：reportType=\" + reportType);\r\n                    break;\r\n            }\r\n            // stopPolling = true;\r\n            //回调onMsgReadCallback\r\n            if(notify.ReadC2cMsgNotify.UinPairReadArray && onC2cEventCallbacks[subType]){\r\n                for(var i = 0 ,l = notify.ReadC2cMsgNotify.UinPairReadArray.length; i < l ; i++){\r\n                    var item = notify.ReadC2cMsgNotify.UinPairReadArray[i];\r\n                    onC2cEventCallbacks[subType](item);\r\n                }\r\n            }\r\n        };\r\n\r\n        //长轮询\r\n        this.longPolling = function (cbOk, cbErr) {\r\n\r\n\r\n            var opts = {\r\n                'Timeout': longPollingDefaultTimeOut/1000,\r\n                'Cookie': {\r\n                    'NotifySeq': notifySeq,\r\n                    'NoticeSeq': noticeSeq\r\n                }\r\n            };\r\n\t\t\t\r\n\t\t\t\r\n            if(LongPollingId){\r\n                opts.Cookie.LongPollingId = LongPollingId;\r\n                doPolling();\r\n            }else{\r\n                proto_getLongPollingId({},function(resp){\r\n                    LongPollingId = opts.Cookie.LongPollingId = resp.LongPollingId;\r\n                    //根据回包设置超时时间，超时时长不能>60秒，因为webkit手机端的最长超时时间不能大于60s\r\n                    longPollingDefaultTimeOut = resp.Timeout > 60 ? longPollingDefaultTimeOut : resp.Timeout * 1000 ;\r\n                    doPolling();\r\n                });\r\n            }\r\n\r\n            function doPolling(){\r\n                proto_longPolling(opts, function (resp) {\r\n                    for (var i in resp.EventArray) {\r\n                        var e = resp.EventArray[i];\r\n\t\t\t\t\t\r\n                        switch (e.Event) {\r\n                            case LONG_POLLINNG_EVENT_TYPE.C2C://c2c消息通知\r\n                                //更新C2C消息通知seq\r\n                                notifySeq = e.NotifySeq;\r\n                                log.warn(\"longpolling: received new c2c msg\");\r\n                                //获取新消息\r\n                                MsgManager.syncMsgs();\r\n                                break;\r\n                            case LONG_POLLINNG_EVENT_TYPE.GROUP_COMMON://普通群消息通知\r\n                                log.warn(\"longpolling: received new group msgs\");\r\n                                handlerOrdinaryAndTipGroupMsgs(e.Event, e.GroupMsgArray);\r\n                                break;\r\n                            case LONG_POLLINNG_EVENT_TYPE.GROUP_TIP://（全员广播）群提示消息\r\n                                log.warn(\"longpolling: received new group tips\");\r\n                                handlerOrdinaryAndTipGroupMsgs(e.Event, e.GroupTips);\r\n                                break;\r\n                            case LONG_POLLINNG_EVENT_TYPE.GROUP_SYSTEM://（多终端同步）群系统消息\r\n                                log.warn(\"longpolling: received new group system msgs\");\r\n                                //false 表示 通过长轮询收到的群系统消息，可以不判重\r\n                                handlerGroupSystemMsgs(e.GroupTips, false);\r\n                                break;\r\n                            case LONG_POLLINNG_EVENT_TYPE.FRIEND_NOTICE://好友系统通知\r\n                                log.warn(\"longpolling: received new friend system notice\");\r\n                                //false 表示 通过长轮询收到的好友系统通知，可以不判重\r\n                                handlerFriendSystemNotices(e.FriendListMod, false);\r\n                                break;\r\n                            case LONG_POLLINNG_EVENT_TYPE.PROFILE_NOTICE://资料系统通知\r\n                                log.warn(\"longpolling: received new profile system notice\");\r\n                                //false 表示 通过长轮询收到的资料系统通知，可以不判重\r\n                                handlerProfileSystemNotices(e.ProfileDataMod, false);\r\n                                break;\r\n                            case LONG_POLLINNG_EVENT_TYPE.C2C_COMMON://c2c消息通知\r\n                                noticeSeq = e.C2cMsgArray[0].NoticeSeq;\r\n                                //更新C2C消息通知seq\r\n                                console.log(\"longpolling: received new c2c_common msg\",noticeSeq);\r\n                                handlerOrdinaryAndTipC2cMsgs(e.Event, e.C2cMsgArray);\r\n                                break;\r\n                            case LONG_POLLINNG_EVENT_TYPE.C2C_EVENT://c2c已读消息通知\r\n                                noticeSeq = e.C2cNotifyMsgArray[0].NoticeSeq;\r\n                                log.warn(\"longpolling: received new c2c_event msg\");\r\n                                handlerC2cNotifyMsgArray(e.C2cNotifyMsgArray);\r\n                                break;\r\n                            default:\r\n                                log.error(\"longpolling收到未知新消息类型: Event=\" + e.Event);\r\n                                break;\r\n                        }\r\n                    }\r\n                    var successInfo = {\r\n                        'ActionStatus': ACTION_STATUS.OK,\r\n                        'ErrorCode': 0\r\n                    };\r\n                    updatecLongPollingStatus(successInfo);\r\n                }, function (err) {\r\n                    //log.error(err);\r\n                    updatecLongPollingStatus(err);\r\n                    if (cbErr) cbErr(err);\r\n                });\r\n            }\r\n        };\r\n\r\n\r\n        //大群 长轮询\r\n        this.bigGroupLongPolling = function (cbOk, cbErr) {\r\n\r\n            var opts = {\r\n                'StartSeq': bigGroupLongPollingStartSeq,//请求拉消息的起始seq\r\n                'HoldTime': bigGroupLongPollingHoldTime,//客户端长轮询的超时时间，单位是秒\r\n                'Key': bigGroupLongPollingKey//客户端加入群组后收到的的Key\r\n            };\r\n\r\n            proto_bigGroupLongPolling(opts, function (resp) {\r\n\r\n                var msgObjList = [];\r\n                bigGroupLongPollingStartSeq = resp.NextSeq;\r\n                bigGroupLongPollingHoldTime = resp.HoldTime;\r\n                bigGroupLongPollingKey = resp.Key;\r\n\r\n                if (resp.RspMsgList && resp.RspMsgList.length > 0) {\r\n                    var msgCount = 0, msgInfo, event, msg;\r\n                    for (var i = resp.RspMsgList.length - 1; i >= 0; i--) {\r\n                        msgInfo = resp.RspMsgList[i];\r\n                        //如果是已经删除的消息或者发送者帐号为空或者消息内容为空\r\n                        //IsPlaceMsg=1\r\n                        if (msgInfo.IsPlaceMsg || !msgInfo.From_Account || !msgInfo.MsgBody || msgInfo.MsgBody.length == 0) {\r\n                            continue;\r\n                        }\r\n\r\n                        event = msgInfo.Event;//群消息类型\r\n                        switch (event) {\r\n                            case LONG_POLLINNG_EVENT_TYPE.GROUP_COMMON://群普通消息\r\n                                log.info(\"bigGroupLongPolling: return new group msg\");\r\n                                msg = handlerGroupMsg(msgInfo, false, false);\r\n                                msg && msgObjList.push(msg);\r\n                                msgCount = msgCount + 1;\r\n                                break;\r\n                            case LONG_POLLINNG_EVENT_TYPE.GROUP_TIP://群提示消息\r\n                            case LONG_POLLINNG_EVENT_TYPE.GROUP_TIP2://群提示消息\r\n                                log.info(\"bigGroupLongPolling: return new group tip\");\r\n                                msg = handlerGroupMsg(msgInfo, false, false);\r\n                                msg && msgObjList.push(msg);\r\n                                //msgCount=msgCount+1;\r\n                                break;\r\n                            case LONG_POLLINNG_EVENT_TYPE.GROUP_SYSTEM://群系统消息\r\n                                log.info(\"bigGroupLongPolling: new group system msg\");\r\n                                handlerGroupSystemMsg(msgInfo);\r\n                                break;\r\n                            default:\r\n                                log.error(\"bigGroupLongPolling收到未知新消息类型: Event=\" + event);\r\n                                break;\r\n                        }\r\n                    } // for loop\r\n                    if (msgCount > 0) {\r\n                        MsgManager.setBigGroupLongPollingMsgMap(msgInfo.ToGroupId, msgCount);//\r\n                        log.warn(\"current bigGroupLongPollingMsgMap: \" + JSON.stringify(bigGroupLongPollingMsgMap));\r\n                    }\r\n                }\r\n                curBigGroupLongPollingRetErrorCount = 0;\r\n                //返回连接状态\r\n                var successInfo = {\r\n                    'ActionStatus': ACTION_STATUS.OK,\r\n                    'ErrorCode': CONNECTION_STATUS.ON,\r\n                    'ErrorInfo': 'connection is ok...'\r\n                };\r\n                ConnManager.callBack(successInfo);\r\n\t\t\t\t\t\r\n\t\t\t\tonBigGroupMsgCallback = app.globalData.listeners.onBigGroupMsgNotify;\r\n\t\t\t\t\t\r\n                if (cbOk) cbOk(msgObjList);\r\n                else if (onBigGroupMsgCallback) onBigGroupMsgCallback(msgObjList);//返回新消息\r\n\r\n                //重新启动长轮询\r\n                bigGroupLongPollingOn && MsgManager.bigGroupLongPolling();\r\n\r\n            }, function (err) {\r\n                //\r\n                if (err.ErrorCode != longPollingTimeOutErrorCode) {\r\n                    log.error(err.ErrorInfo);\r\n                    //记录长轮询返回错误次数\r\n                    curBigGroupLongPollingRetErrorCount++;\r\n                }\r\n                if (err.ErrorCode != longPollingKickedErrorCode) {\r\n                    //登出\r\n                    log.error(\"多实例登录，被kick\");\r\n\r\n                    if (onKickedEventCall) {onKickedEventCall();}\r\n                    /*    return;\r\n                    proto_logout(function(){\r\n                        if (onKickedEventCall) {onKickedEventCall();}\r\n                    });*/\r\n                }\r\n                //累计超过一定次数，不再发起长轮询请求\r\n                if (curBigGroupLongPollingRetErrorCount < LONG_POLLING_MAX_RET_ERROR_COUNT) {\r\n                    bigGroupLongPollingOn && MsgManager.bigGroupLongPolling();\r\n                } else {\r\n                    var errInfo = {\r\n                        'ActionStatus': ACTION_STATUS.FAIL,\r\n                        'ErrorCode': CONNECTION_STATUS.OFF,\r\n                        'ErrorInfo': 'connection is off'\r\n                    };\r\n                    ConnManager.callBack(errInfo);\r\n                }\r\n                if (cbErr) cbErr(err);\r\n\r\n            }, bigGroupLongPollingHoldTime * 1000);\r\n        };\r\n\r\n        //更新连接状态\r\n        var updatecLongPollingStatus = function (errObj) {\r\n            if (errObj.ErrorCode == 0 || errObj.ErrorCode == longPollingTimeOutErrorCode) {\r\n                curLongPollingRetErrorCount = 0;\r\n                longPollingOffCallbackFlag = false;\r\n                var errorInfo;\r\n                var isNeedCallback = false;\r\n                switch (curLongPollingStatus) {\r\n                    case CONNECTION_STATUS.INIT:\r\n                        isNeedCallback = true;\r\n                        curLongPollingStatus = CONNECTION_STATUS.ON;\r\n                        errorInfo = \"create connection successfully(INIT->ON)\";\r\n                        break;\r\n                    case CONNECTION_STATUS.ON:\r\n                        errorInfo = \"connection is on...(ON->ON)\";\r\n                        break;\r\n                    case CONNECTION_STATUS.RECONNECT:\r\n                        curLongPollingStatus = CONNECTION_STATUS.ON;\r\n                        errorInfo = \"connection is on...(RECONNECT->ON)\";\r\n                        break;\r\n                    case CONNECTION_STATUS.OFF:\r\n                        isNeedCallback = true;\r\n                        curLongPollingStatus = CONNECTION_STATUS.RECONNECT;\r\n                        errorInfo = \"reconnect successfully(OFF->RECONNECT)\";\r\n                        break;\r\n                }\r\n                var successInfo = {\r\n                    'ActionStatus': ACTION_STATUS.OK,\r\n                    'ErrorCode': curLongPollingStatus,\r\n                    'ErrorInfo': errorInfo\r\n                };\r\n                isNeedCallback && ConnManager.callBack(successInfo);\r\n                longPollingOn && MsgManager.longPolling();\r\n            } else if( errObj.ErrorCode == longPollingKickedErrorCode){\r\n                //登出\r\n                log.error(\"多实例登录，被kick\");\r\n                    if (onKickedEventCall) {onKickedEventCall();}\r\n                //     return;\r\n                // proto_logout(function(){\r\n                //     if (onKickedEventCall) {onKickedEventCall();}\r\n                // });\r\n            }else {\r\n                //记录长轮询返回解析json错误次数\r\n                curLongPollingRetErrorCount++;\r\n                log.warn(\"longPolling接口第\" + curLongPollingRetErrorCount + \"次报错: \" + errObj.ErrorInfo);\r\n                //累计超过一定次数\r\n                if (curLongPollingRetErrorCount <= LONG_POLLING_MAX_RET_ERROR_COUNT) {\r\n                    setTimeout(startNextLongPolling, 100);//\r\n                } else {\r\n                    curLongPollingStatus = CONNECTION_STATUS.OFF;\r\n                    var errInfo = {\r\n                        'ActionStatus': ACTION_STATUS.FAIL,\r\n                        'ErrorCode': CONNECTION_STATUS.OFF,\r\n                        'ErrorInfo': 'connection is off'\r\n                    };\r\n                    longPollingOffCallbackFlag == false && ConnManager.callBack(errInfo);\r\n                    longPollingOffCallbackFlag = true;\r\n                    log.warn(longPollingIntervalTime + \"毫秒之后,SDK会发起新的longPolling请求...\");\r\n                    setTimeout(startNextLongPolling, longPollingIntervalTime);//长轮询接口报错次数达到一定值，每间隔5s发起新的长轮询\r\n                }\r\n            }\r\n        };\r\n\r\n         //处理收到的普通C2C消息\r\n        var handlerOrdinaryAndTipC2cMsgs = function (eventType, C2cMsgArray) {\r\n                //处理c2c消息\r\n                var notifyInfo = [];\r\n                var msgInfos = [];\r\n                msgInfos = C2cMsgArray; //返回的消息列表\r\n                // MsgStore.cookie = resp.Cookie;//cookies，记录当前读到的最新消息位置\r\n\r\n\r\n\t\t\t\tctx.identifier = app.globalData.ctx.identifier\r\n\r\n                for (var i in msgInfos) {\r\n                    var msgInfo = msgInfos[i];\r\n                    var isSendMsg, id, headUrl;\r\n                    if (msgInfo.From_Account == ctx.identifier) {//当前用户发送的消息\r\n                        isSendMsg = true;\r\n                        id = msgInfo.To_Account;//读取接收者信息\r\n                        headUrl = '';\r\n                    } else {//当前用户收到的消息\r\n                        isSendMsg = false;\r\n                        id = msgInfo.From_Account;//读取发送者信息\r\n                        headUrl = '';\r\n                    }\r\n                    var sess = MsgStore.sessByTypeId(SESSION_TYPE.C2C, id);\r\n                    if (!sess) {\r\n                        sess = new Session(SESSION_TYPE.C2C, id, id, headUrl, 0, 0);\r\n                    }\r\n                    var msg = new Msg(sess, isSendMsg, msgInfo.MsgSeq, msgInfo.MsgRandom, msgInfo.MsgTimeStamp, msgInfo.From_Account);\r\n                    var msgBody = null;\r\n                    var msgContent = null;\r\n                    var msgType = null;\r\n                    for (var mi in msgInfo.MsgBody) {\r\n                        msgBody = msgInfo.MsgBody[mi];\r\n                        msgType = msgBody.MsgType;\r\n                        switch (msgType) {\r\n                            case MSG_ELEMENT_TYPE.TEXT:\r\n                                msgContent = new Msg.Elem.Text(msgBody.MsgContent.Text);\r\n                                break;\r\n                            case MSG_ELEMENT_TYPE.FACE:\r\n                                msgContent = new Msg.Elem.Face(\r\n                                    msgBody.MsgContent.Index,\r\n                                    msgBody.MsgContent.Data\r\n                                );\r\n                                break;\r\n                            case MSG_ELEMENT_TYPE.IMAGE:\r\n                                msgContent = new Msg.Elem.Images(\r\n                                    msgBody.MsgContent.UUID\r\n                                );\r\n                                for (var j in msgBody.MsgContent.ImageInfoArray) {\r\n                                    var tempImg = msgBody.MsgContent.ImageInfoArray[j];\r\n                                    msgContent.addImage(\r\n                                        new Msg.Elem.Images.Image(\r\n                                            tempImg.Type,\r\n                                            tempImg.Size,\r\n                                            tempImg.Width,\r\n                                            tempImg.Height,\r\n                                            tempImg.URL\r\n                                        )\r\n                                    );\r\n                                }\r\n                                break;\r\n                            case MSG_ELEMENT_TYPE.SOUND:\r\n                                if (msgBody.MsgContent) {\r\n                                    msgContent = new Msg.Elem.Sound(\r\n                                        msgBody.MsgContent.UUID,\r\n                                        msgBody.MsgContent.Second,\r\n                                        msgBody.MsgContent.Size,\r\n                                        msgInfo.From_Account,\r\n                                        msgInfo.To_Account,\r\n                                        msgBody.MsgContent.Download_Flag,\r\n                                        SESSION_TYPE.C2C\r\n                                    );\r\n                                } else {\r\n                                    msgType = MSG_ELEMENT_TYPE.TEXT;\r\n                                    msgContent = new Msg.Elem.Text('[语音消息]下载地址解析出错');\r\n                                }\r\n                                break;\r\n                            case MSG_ELEMENT_TYPE.LOCATION:\r\n                                msgContent = new Msg.Elem.Location(\r\n                                    msgBody.MsgContent.Longitude,\r\n                                    msgBody.MsgContent.Latitude,\r\n                                    msgBody.MsgContent.Desc\r\n                                );\r\n                                break;\r\n                            case MSG_ELEMENT_TYPE.FILE:\r\n                            case MSG_ELEMENT_TYPE.FILE + \" \":\r\n                                msgType = MSG_ELEMENT_TYPE.FILE;\r\n                                if (msgBody.MsgContent) {\r\n                                    msgContent = new Msg.Elem.File(\r\n                                        msgBody.MsgContent.UUID,\r\n                                        msgBody.MsgContent.FileName,\r\n                                        msgBody.MsgContent.FileSize,\r\n                                        msgInfo.From_Account,\r\n                                        msgInfo.To_Account,\r\n                                        msgBody.MsgContent.Download_Flag,\r\n                                        SESSION_TYPE.C2C\r\n                                    );\r\n                                } else {\r\n                                    msgType = MSG_ELEMENT_TYPE.TEXT;\r\n                                    msgContent = new Msg.Elem.Text('[文件消息下载地址解析出错]');\r\n                                }\r\n                                break;\r\n                            case MSG_ELEMENT_TYPE.CUSTOM:\r\n                                try {\r\n                                    var data = JSON.parse(msgBody.MsgContent.Data);\r\n                                    if (data && data.userAction && data.userAction == FRIEND_WRITE_MSG_ACTION.ING) {//过滤安卓或ios的正在输入自定义消息\r\n                                        continue;\r\n                                    }\r\n                                } catch (e) {\r\n                                }\r\n\r\n                                msgType = MSG_ELEMENT_TYPE.CUSTOM;\r\n                                msgContent = new Msg.Elem.Custom(\r\n                                    msgBody.MsgContent.Data,\r\n                                    msgBody.MsgContent.Desc,\r\n                                    msgBody.MsgContent.Ext\r\n                                );\r\n                                break;\r\n                            default :\r\n                                msgType = MSG_ELEMENT_TYPE.TEXT;\r\n                                msgContent = new Msg.Elem.Text('web端暂不支持' + msgBody.MsgType + '消息');\r\n                                break;\r\n                        }\r\n                        msg.elems.push(new Msg.Elem(msgType, msgContent));\r\n                    }\r\n\r\n                    if (msg.elems.length > 0 && MsgStore.addMsg(msg)) {\r\n                        notifyInfo.push(msg);\r\n                    }\r\n                } // for loop\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tonMsgCallback = app.globalData.listeners.onMsgCallback\r\n\t\t\t\t\r\n\t\t\t\t// console.log('notifyInfo',notifyInfo)\r\n\t\t\t\t// console.log('onMsgCallback',onMsgCallback)\r\n\t\t\t\t\r\n                if (notifyInfo.length > 0)\r\n                    MsgStore.updateTimeline();\r\n                if (notifyInfo.length > 0) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n                    if (onMsgCallback) onMsgCallback(notifyInfo);\r\n                }\r\n        };\r\n\r\n        //发起新的长轮询请求\r\n        var startNextLongPolling = function () {\r\n            longPollingOn && MsgManager.longPolling();\r\n        };\r\n\r\n        //处理未决的加群申请消息列表\r\n        var handlerApplyJoinGroupSystemMsgs = function (eventArray) {\r\n            for (var i in eventArray) {\r\n                var e = eventArray[i];\r\n                switch (e.Event) {\r\n                    case LONG_POLLINNG_EVENT_TYPE.GROUP_SYSTEM://（多终端同步）群系统消息\r\n                        log.warn(\"handlerApplyJoinGroupSystemMsgs： handler new group system msg\");\r\n                        //true 表示 解决加群申请通知存在重复的问题（已处理的通知，下次登录还会拉到），需要判重\r\n                        handlerGroupSystemMsgs(e.GroupTips, true);\r\n                        break;\r\n                    default:\r\n                        log.error(\"syncMsgs收到未知的群系统消息类型: Event=\" + e.Event);\r\n                        break;\r\n                }\r\n            }\r\n        };\r\n\r\n        //拉取c2c消息(包含加群未决消息，需要处理)\r\n        this.syncMsgs = function (cbOk, cbErr) {\r\n            var notifyInfo = [];\r\n            var msgInfos = [];\r\n            //读取C2C消息\r\n            proto_getMsgs(MsgStore.cookie, MsgStore.syncFlag, function (resp) {\r\n                //拉取完毕\r\n                if (resp.SyncFlag == 2) {\r\n                    MsgStore.syncFlag = 0;\r\n                }\r\n                //处理c2c消息\r\n                msgInfos = resp.MsgList;//返回的消息列表\r\n                MsgStore.cookie = resp.Cookie;//cookies，记录当前读到的最新消息位置\r\n\r\n\r\n\t\t\t\tctx.identifier = app.globalData.ctx.identifier\r\n\r\n\r\n                for (var i in msgInfos) {\r\n                    var msgInfo = msgInfos[i];\r\n                    var isSendMsg, id, headUrl;\r\n                    if (msgInfo.From_Account == ctx.identifier) {//当前用户发送的消息\r\n                        isSendMsg = true;\r\n                        id = msgInfo.To_Account;//读取接收者信息\r\n                        headUrl = '';\r\n                    } else {//当前用户收到的消息\r\n                        isSendMsg = false;\r\n                        id = msgInfo.From_Account;//读取发送者信息\r\n                        headUrl = '';\r\n                    }\r\n                    var sess = MsgStore.sessByTypeId(SESSION_TYPE.C2C, id);\r\n                    if (!sess) {\r\n                        sess = new Session(SESSION_TYPE.C2C, id, id, headUrl, 0, 0);\r\n                    }\r\n                    var msg = new Msg(sess, isSendMsg, msgInfo.MsgSeq, msgInfo.MsgRandom, msgInfo.MsgTimeStamp, msgInfo.From_Account);\r\n                    var msgBody = null;\r\n                    var msgContent = null;\r\n                    var msgType = null;\r\n                    for (var mi in msgInfo.MsgBody) {\r\n                        msgBody = msgInfo.MsgBody[mi];\r\n                        msgType = msgBody.MsgType;\r\n                        switch (msgType) {\r\n                            case MSG_ELEMENT_TYPE.TEXT:\r\n                                msgContent = new Msg.Elem.Text(msgBody.MsgContent.Text);\r\n                                break;\r\n                            case MSG_ELEMENT_TYPE.FACE:\r\n                                msgContent = new Msg.Elem.Face(\r\n                                    msgBody.MsgContent.Index,\r\n                                    msgBody.MsgContent.Data\r\n                                );\r\n                                break;\r\n                            case MSG_ELEMENT_TYPE.IMAGE:\r\n                                msgContent = new Msg.Elem.Images(\r\n                                    msgBody.MsgContent.UUID\r\n                                );\r\n                                for (var j in msgBody.MsgContent.ImageInfoArray) {\r\n                                    var tempImg = msgBody.MsgContent.ImageInfoArray[j];\r\n                                    msgContent.addImage(\r\n                                        new Msg.Elem.Images.Image(\r\n                                            tempImg.Type,\r\n                                            tempImg.Size,\r\n                                            tempImg.Width,\r\n                                            tempImg.Height,\r\n                                            tempImg.URL\r\n                                        )\r\n                                    );\r\n                                }\r\n                                break;\r\n                            case MSG_ELEMENT_TYPE.SOUND:\r\n                                // var soundUrl = getSoundDownUrl(msgBody.MsgContent.UUID, msgInfo.From_Account);\r\n                                if (msgBody.MsgContent) {\r\n                                    msgContent = new Msg.Elem.Sound(\r\n                                        msgBody.MsgContent.UUID,\r\n                                        msgBody.MsgContent.Second,\r\n                                        msgBody.MsgContent.Size,\r\n                                        msgInfo.From_Account,\r\n                                        msgInfo.To_Account,\r\n                                        msgBody.MsgContent.Download_Flag,\r\n                                        SESSION_TYPE.C2C\r\n                                    );\r\n                                } else {\r\n                                    msgType = MSG_ELEMENT_TYPE.TEXT;\r\n                                    msgContent = new Msg.Elem.Text('[语音消息]下载地址解析出错');\r\n                                }\r\n                                break;\r\n                            case MSG_ELEMENT_TYPE.LOCATION:\r\n                                msgContent = new Msg.Elem.Location(\r\n                                    msgBody.MsgContent.Longitude,\r\n                                    msgBody.MsgContent.Latitude,\r\n                                    msgBody.MsgContent.Desc\r\n                                );\r\n                                break;\r\n                            case MSG_ELEMENT_TYPE.FILE:\r\n                            case MSG_ELEMENT_TYPE.FILE + \" \":\r\n                                msgType = MSG_ELEMENT_TYPE.FILE;\r\n                                // var fileUrl = getFileDownUrl(msgBody.MsgContent.UUID, msgInfo.From_Account, msgBody.MsgContent.FileName);\r\n                                if (msgBody.MsgContent) {\r\n                                    msgContent = new Msg.Elem.File(\r\n                                        msgBody.MsgContent.UUID,\r\n                                        msgBody.MsgContent.FileName,\r\n                                        msgBody.MsgContent.FileSize,\r\n                                        msgInfo.From_Account,\r\n                                        msgInfo.To_Account,\r\n                                        msgBody.MsgContent.Download_Flag,\r\n                                        SESSION_TYPE.C2C\r\n                                    );\r\n                                } else {\r\n                                    msgType = MSG_ELEMENT_TYPE.TEXT;\r\n                                    msgContent = new Msg.Elem.Text('[文件消息下载地址解析出错]');\r\n                                }\r\n                                break;\r\n                            case MSG_ELEMENT_TYPE.CUSTOM:\r\n                                try {\r\n                                    var data = JSON.parse(msgBody.MsgContent.Data);\r\n                                    if (data && data.userAction && data.userAction == FRIEND_WRITE_MSG_ACTION.ING) {//过滤安卓或ios的正在输入自定义消息\r\n                                        continue;\r\n                                    }\r\n                                } catch (e) {\r\n                                }\r\n\r\n                                msgType = MSG_ELEMENT_TYPE.CUSTOM;\r\n                                msgContent = new Msg.Elem.Custom(\r\n                                    msgBody.MsgContent.Data,\r\n                                    msgBody.MsgContent.Desc,\r\n                                    msgBody.MsgContent.Ext\r\n                                );\r\n                                break;\r\n                            default :\r\n                                msgType = MSG_ELEMENT_TYPE.TEXT;\r\n                                msgContent = new Msg.Elem.Text('web端暂不支持' + msgBody.MsgType + '消息');\r\n                                break;\r\n                        }\r\n                        msg.elems.push(new Msg.Elem(msgType, msgContent));\r\n                    }\r\n\r\n                    if (msg.elems.length > 0 && MsgStore.addMsg(msg)) {\r\n                        notifyInfo.push(msg);\r\n                    }\r\n                } // for loop\r\n\r\n                //处理加群未决申请消息\r\n                handlerApplyJoinGroupSystemMsgs(resp.EventArray);\r\n\r\n                if (notifyInfo.length > 0)\r\n                    MsgStore.updateTimeline();\r\n                if (cbOk) cbOk(notifyInfo);\r\n                else if (notifyInfo.length > 0) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tonMsgCallback = app.globalData.listeners.onMsgCallback\r\n\t\t\t\t\t\r\n                    if (onMsgCallback) onMsgCallback(notifyInfo);\r\n                }\r\n\r\n            }, function (err) {\r\n                log.error(\"getMsgs failed:\" + err.ErrorInfo);\r\n                if (cbErr) cbErr(err);\r\n            });\r\n        };\r\n\r\n\r\n        //拉取C2C漫游消息\r\n        this.getC2CHistoryMsgs = function (options, cbOk, cbErr) {\r\n\r\n            if (!options.Peer_Account) {\r\n                if (cbErr) {\r\n                    cbErr(tool.getReturnError(\"Peer_Account is empty\", -13));\r\n                    return;\r\n                }\r\n            }\r\n            if (!options.MaxCnt) {\r\n                options.MaxCnt = 15;\r\n            }\r\n            if (options.MaxCnt <= 0) {\r\n                if (cbErr) {\r\n                    cbErr(tool.getReturnError(\"MaxCnt should be greater than 0\", -14));\r\n                    return;\r\n                }\r\n            }\r\n            if (options.MaxCnt > 15) {\r\n                if (cbErr) {\r\n                    cbErr(tool.getReturnError(\"MaxCnt can not be greater than 15\", -15));\r\n                    return;\r\n                }\r\n                return;\r\n            }\r\n            if (options.MsgKey == null || options.MsgKey === undefined) {\r\n                options.MsgKey = '';\r\n            }\r\n            var opts = {\r\n                'Peer_Account': options.Peer_Account,\r\n                'MaxCnt': options.MaxCnt,\r\n                'LastMsgTime': options.LastMsgTime,\r\n                'MsgKey': options.MsgKey\r\n            };\r\n            //读取c2c漫游消息\r\n            proto_getC2CHistoryMsgs(opts, function (resp) {\r\n                var msgObjList = [];\r\n var msgInfos = [];\r\n                //处理c2c消息\r\n                msgInfos = resp.MsgList;//返回的消息列表\r\n                var sess = MsgStore.sessByTypeId(SESSION_TYPE.C2C, options.Peer_Account);\r\n                if (!sess) {\r\n                    sess = new Session(SESSION_TYPE.C2C, options.Peer_Account, options.Peer_Account, '', 0, 0);\r\n                }\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tctx.identifier = app.globalData.ctx.identifier\r\n\t\t\t\t\r\n                for (var i in msgInfos) {\r\n                    var msgInfo = msgInfos[i];\r\n                    var isSendMsg, id, headUrl;\r\n                    if (msgInfo.From_Account == ctx.identifier) {//当前用户发送的消息\r\n                        isSendMsg = true;\r\n                        id = msgInfo.To_Account;//读取接收者信息\r\n                        headUrl = '';\r\n                    } else {//当前用户收到的消息\r\n                        isSendMsg = false;\r\n                        id = msgInfo.From_Account;//读取发送者信息\r\n                        headUrl = '';\r\n                    }\r\n                    var msg = new Msg(sess, isSendMsg, msgInfo.MsgSeq, msgInfo.MsgRandom, msgInfo.MsgTimeStamp, msgInfo.From_Account);\r\n                    var msgBody = null;\r\n                    var msgContent = null;\r\n                    var msgType = null;\r\n                    for (var mi in msgInfo.MsgBody) {\r\n                        msgBody = msgInfo.MsgBody[mi];\r\n                        msgType = msgBody.MsgType;\r\n                        switch (msgType) {\r\n                            case MSG_ELEMENT_TYPE.TEXT:\r\n                                msgContent = new Msg.Elem.Text(msgBody.MsgContent.Text);\r\n                                break;\r\n                            case MSG_ELEMENT_TYPE.FACE:\r\n                                msgContent = new Msg.Elem.Face(\r\n                                    msgBody.MsgContent.Index,\r\n                                    msgBody.MsgContent.Data\r\n                                );\r\n                                break;\r\n                            case MSG_ELEMENT_TYPE.IMAGE:\r\n                                msgContent = new Msg.Elem.Images(\r\n                                    msgBody.MsgContent.UUID\r\n                                );\r\n                                for (var j in msgBody.MsgContent.ImageInfoArray) {\r\n                                    var tempImg = msgBody.MsgContent.ImageInfoArray[j];\r\n                                    msgContent.addImage(\r\n                                        new Msg.Elem.Images.Image(\r\n                                            tempImg.Type,\r\n                                            tempImg.Size,\r\n                                            tempImg.Width,\r\n                                            tempImg.Height,\r\n                                            tempImg.URL\r\n                                        )\r\n                                    );\r\n                                }\r\n                                break;\r\n                            case MSG_ELEMENT_TYPE.SOUND:\r\n\r\n                                // var soundUrl = getSoundDownUrl(msgBody.MsgContent.UUID, msgInfo.From_Account);\r\n\r\n                                if (msgBody.MsgContent) {\r\n                                    msgContent = new Msg.Elem.Sound(\r\n                                        msgBody.MsgContent.UUID,\r\n                                        msgBody.MsgContent.Second,\r\n                                        msgBody.MsgContent.Size,\r\n                                        msgInfo.From_Account,\r\n                                        msgInfo.To_Account,\r\n                                        msgBody.MsgContent.Download_Flag,\r\n                                        SESSION_TYPE.C2C\r\n                                    );\r\n                                } else {\r\n                                    msgType = MSG_ELEMENT_TYPE.TEXT;\r\n                                    msgContent = new Msg.Elem.Text('[语音消息]下载地址解析出错');\r\n                                }\r\n                                break;\r\n                            case MSG_ELEMENT_TYPE.LOCATION:\r\n                                msgContent = new Msg.Elem.Location(\r\n                                    msgBody.MsgContent.Longitude,\r\n                                    msgBody.MsgContent.Latitude,\r\n                                    msgBody.MsgContent.Desc\r\n                                );\r\n                                break;\r\n                            case MSG_ELEMENT_TYPE.FILE:\r\n                            case MSG_ELEMENT_TYPE.FILE + \" \":\r\n                                msgType = MSG_ELEMENT_TYPE.FILE;\r\n                                // var fileUrl = getFileDownUrl(msgBody.MsgContent.UUID, msgInfo.From_Account, msgBody.MsgContent.FileName);\r\n\r\n                                if (msgBody.MsgContent) {\r\n                                    msgContent = new Msg.Elem.File(\r\n                                        msgBody.MsgContent.UUID,\r\n                                        msgBody.MsgContent.FileName,\r\n                                        msgBody.MsgContent.FileSize,\r\n                                        msgInfo.From_Account,\r\n                                        msgInfo.To_Account,\r\n                                        msgBody.MsgContent.Download_Flag,\r\n                                        SESSION_TYPE.C2C\r\n                                    );\r\n                                } else {\r\n                                    msgType = MSG_ELEMENT_TYPE.TEXT;\r\n                                    msgContent = new Msg.Elem.Text('[文件消息下载地址解析出错]');\r\n                                }\r\n                                break;\r\n                            case MSG_ELEMENT_TYPE.CUSTOM:\r\n                                msgType = MSG_ELEMENT_TYPE.CUSTOM;\r\n                                msgContent = new Msg.Elem.Custom(\r\n                                    msgBody.MsgContent.Data,\r\n                                    msgBody.MsgContent.Desc,\r\n                                    msgBody.MsgContent.Ext\r\n                                );\r\n\r\n                                break;\r\n                            default :\r\n                                msgType = MSG_ELEMENT_TYPE.TEXT;\r\n                                msgContent = new Msg.Elem.Text('web端暂不支持' + msgBody.MsgType + '消息');\r\n                                break;\r\n                        }\r\n                        msg.elems.push(new Msg.Elem(msgType, msgContent));\r\n                    }\r\n                    MsgStore.addMsg(msg);\r\n                    msgObjList.push(msg);\r\n                } // for loop\r\n\r\n                MsgStore.updateTimeline();\r\n                if (cbOk) {\r\n\r\n                    var newResp = {\r\n                        'Complete': resp.Complete,\r\n                        'MsgCount': msgObjList.length,\r\n                        'LastMsgTime': resp.LastMsgTime,\r\n                        'MsgKey': resp.MsgKey,\r\n                        'MsgList': msgObjList\r\n                    };\r\n                    sess.isFinished(resp.Complete);\r\n                    cbOk(newResp);\r\n                }\r\n\r\n            }, function (err) {\r\n                log.error(\"getC2CHistoryMsgs failed:\" + err.ErrorInfo);\r\n                if (cbErr) cbErr(err);\r\n            });\r\n        };\r\n\r\n        //拉群历史消息\r\n        //不传cbOk 和 cbErr，则会调用新消息回调函数\r\n        this.syncGroupMsgs = function (options, cbOk, cbErr) {\r\n            if (options.ReqMsgSeq <= 0) {\r\n                if (cbErr) {\r\n                    var errInfo = \"ReqMsgSeq must be greater than 0\";\r\n                    var error = tool.getReturnError(errInfo, -16);\r\n                    cbErr(error);\r\n                }\r\n                return;\r\n            }\r\n            var opts = {\r\n                'GroupId': options.GroupId,\r\n                'ReqMsgSeq': options.ReqMsgSeq,\r\n                'ReqMsgNumber': options.ReqMsgNumber\r\n            };\r\n            //读群漫游消息\r\n            proto_getGroupMsgs(opts, function (resp) {\r\n                var notifyInfo = [];\r\n                var group_id = resp.GroupId;//返回的群id\r\n                var msgInfos = resp.RspMsgList;//返回的消息列表\r\n                var isFinished = resp.IsFinished;\r\n\r\n                if (msgInfos == null || msgInfos === undefined) {\r\n                    if (cbOk) {\r\n                        cbOk([]);\r\n                    }\r\n                    return;\r\n                }\r\n                for (var i = msgInfos.length - 1; i >= 0; i--) {\r\n                    var msgInfo = msgInfos[i];\r\n                    //如果是已经删除的消息或者发送者帐号为空或者消息内容为空\r\n                    //IsPlaceMsg=1\r\n                    if (msgInfo.IsPlaceMsg || !msgInfo.From_Account || !msgInfo.MsgBody || msgInfo.MsgBody.length == 0) {\r\n                        continue;\r\n                    }\r\n                    var msg = handlerGroupMsg(msgInfo, true, true,isFinished);\r\n                    if (msg) {\r\n                        notifyInfo.push(msg);\r\n                    }\r\n                } // for loop\r\n                if (notifyInfo.length > 0)\r\n                    MsgStore.updateTimeline();\r\n                if (cbOk) cbOk(notifyInfo);\r\n                else if (notifyInfo.length > 0) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tonMsgCallback = app.globalData.listeners.onMsgCallback\r\n\t\t\t\t\t\r\n                    if (onMsgCallback) onMsgCallback(notifyInfo);\r\n                }\r\n\r\n            }, function (err) {\r\n                log.error(\"getGroupMsgs failed:\" + err.ErrorInfo);\r\n                if (cbErr) cbErr(err);\r\n            });\r\n        };\r\n\r\n        //处理群消息(普通消息+提示消息)\r\n        //isSyncGroupMsgs 是否主动拉取群消息标志\r\n        //isAddMsgFlag 是否需要保存到MsgStore，如果需要，这里会存在判重逻辑\r\n        var handlerGroupMsg = function (msgInfo, isSyncGroupMsgs, isAddMsgFlag ,isFinished) {\r\n            if (msgInfo.IsPlaceMsg || !msgInfo.From_Account || !msgInfo.MsgBody || msgInfo.MsgBody.length == 0) {\r\n                return null;\r\n            }\r\n            var isSendMsg, id, headUrl, fromAccountNick;\r\n            var group_id = msgInfo.ToGroupId;\r\n            var group_name = group_id;\r\n            if (msgInfo.GroupInfo) {//取出群名称\r\n                if (msgInfo.GroupInfo.GroupName) {\r\n                    group_name = msgInfo.GroupInfo.GroupName;\r\n                }\r\n            }\r\n            //取出成员昵称\r\n            fromAccountNick = msgInfo.From_Account;\r\n            if (msgInfo.GroupInfo) {\r\n                if (msgInfo.GroupInfo.From_AccountNick) {\r\n                    fromAccountNick = msgInfo.GroupInfo.From_AccountNick;\r\n                }\r\n            }\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tctx.identifier = app.globalData.ctx.identifier\r\n\t\t\t\r\n            if (msgInfo.From_Account == ctx.identifier) {//当前用户发送的消息\r\n                isSendMsg = true;\r\n                id = msgInfo.From_Account;//读取接收者信息\r\n                headUrl = '';\r\n            } else {//当前用户收到的消息\r\n                isSendMsg = false;\r\n                id = msgInfo.From_Account;//读取发送者信息\r\n                headUrl = '';\r\n            }\r\n            var sess = MsgStore.sessByTypeId(SESSION_TYPE.GROUP, group_id);\r\n            if (!sess) {\r\n                sess = new Session(SESSION_TYPE.GROUP, group_id, group_name, headUrl, 0, 0);\r\n            }\r\n            if(typeof isFinished !==\"undefined\") {\r\n                sess.isFinished(isFinished || 0);\r\n            }\r\n            var subType = GROUP_MSG_SUB_TYPE.COMMON;//消息类型\r\n            //群提示消息,重新封装下\r\n            if (LONG_POLLINNG_EVENT_TYPE.GROUP_TIP == msgInfo.Event || LONG_POLLINNG_EVENT_TYPE.GROUP_TIP2 == msgInfo.Event) {\r\n                subType = GROUP_MSG_SUB_TYPE.TIP;\r\n                var groupTip = msgInfo.MsgBody;\r\n                msgInfo.MsgBody = [];\r\n                msgInfo.MsgBody.push({\r\n                        \"MsgType\": MSG_ELEMENT_TYPE.GROUP_TIP,\r\n                        \"MsgContent\": groupTip\r\n                    }\r\n                );\r\n            } else if (msgInfo.MsgPriority) {//群点赞消息\r\n                if (msgInfo.MsgPriority == GROUP_MSG_PRIORITY_TYPE.REDPACKET) {\r\n                    subType = GROUP_MSG_SUB_TYPE.REDPACKET;\r\n                } else if (msgInfo.MsgPriority == GROUP_MSG_PRIORITY_TYPE.LOVEMSG) {\r\n                    subType = GROUP_MSG_SUB_TYPE.LOVEMSG;\r\n                }\r\n\r\n            }\r\n            var msg = new Msg(sess, isSendMsg, msgInfo.MsgSeq, msgInfo.MsgRandom, msgInfo.MsgTimeStamp, msgInfo.From_Account, subType, fromAccountNick);\r\n            var msgBody = null;\r\n            var msgContent = null;\r\n            var msgType = null;\r\n            for (var mi in msgInfo.MsgBody) {\r\n                msgBody = msgInfo.MsgBody[mi];\r\n                msgType = msgBody.MsgType;\r\n                switch (msgType) {\r\n                    case MSG_ELEMENT_TYPE.TEXT:\r\n                        msgContent = new Msg.Elem.Text(msgBody.MsgContent.Text);\r\n                        break;\r\n                    case MSG_ELEMENT_TYPE.FACE:\r\n                        msgContent = new Msg.Elem.Face(\r\n                            msgBody.MsgContent.Index,\r\n                            msgBody.MsgContent.Data\r\n                        );\r\n                        break;\r\n                    case MSG_ELEMENT_TYPE.IMAGE:\r\n                        msgContent = new Msg.Elem.Images(\r\n                            msgBody.MsgContent.UUID\r\n                        );\r\n                        for (var j in msgBody.MsgContent.ImageInfoArray) {\r\n                            msgContent.addImage(\r\n                                new Msg.Elem.Images.Image(\r\n                                    msgBody.MsgContent.ImageInfoArray[j].Type,\r\n                                    msgBody.MsgContent.ImageInfoArray[j].Size,\r\n                                    msgBody.MsgContent.ImageInfoArray[j].Width,\r\n                                    msgBody.MsgContent.ImageInfoArray[j].Height,\r\n                                    msgBody.MsgContent.ImageInfoArray[j].URL\r\n                                )\r\n                            );\r\n                        }\r\n                        break;\r\n                    case MSG_ELEMENT_TYPE.SOUND:\r\n                       if (msgBody.MsgContent) {\r\n                            msgContent = new Msg.Elem.Sound(\r\n                                msgBody.MsgContent.UUID,\r\n                                msgBody.MsgContent.Second,\r\n                                msgBody.MsgContent.Size,\r\n                                msgInfo.From_Account,\r\n                                msgInfo.To_Account,\r\n                                msgBody.MsgContent.Download_Flag,\r\n                                SESSION_TYPE.GROUP\r\n                            );\r\n                        } else {\r\n                            msgType = MSG_ELEMENT_TYPE.TEXT;\r\n                            msgContent = new Msg.Elem.Text('[语音消息]下载地址解析出错');\r\n                        }\r\n                        break;\r\n                    case MSG_ELEMENT_TYPE.LOCATION:\r\n                        msgContent = new Msg.Elem.Location(\r\n                            msgBody.MsgContent.Longitude,\r\n                            msgBody.MsgContent.Latitude,\r\n                            msgBody.MsgContent.Desc\r\n                        );\r\n                        break;\r\n                    case MSG_ELEMENT_TYPE.FILE:\r\n                    case MSG_ELEMENT_TYPE.FILE + \" \":\r\n                        msgType = MSG_ELEMENT_TYPE.FILE;\r\n                        var fileUrl = getFileDownUrl(msgBody.MsgContent.UUID, msgInfo.From_Account, msgBody.MsgContent.FileName);\r\n\r\n                        if (msgBody.MsgContent) {\r\n                            msgContent = new Msg.Elem.File(\r\n                                msgBody.MsgContent.UUID,\r\n                                msgBody.MsgContent.FileName,\r\n                                msgBody.MsgContent.FileSize,\r\n                                msgInfo.From_Account,\r\n                                msgInfo.To_Account,\r\n                                msgBody.MsgContent.Download_Flag,\r\n                                SESSION_TYPE.GROUP\r\n                            );\r\n                        } else {\r\n                            msgType = MSG_ELEMENT_TYPE.TEXT;\r\n                            msgContent = new Msg.Elem.Text('[文件消息]地址解析出错');\r\n                        }\r\n                        break;\r\n                    case MSG_ELEMENT_TYPE.GROUP_TIP:\r\n                        var opType = msgBody.MsgContent.OpType;\r\n                        msgContent = new Msg.Elem.GroupTip(\r\n                            opType,\r\n                            msgBody.MsgContent.Operator_Account,\r\n                            group_id,\r\n                            msgInfo.GroupInfo.GroupName,\r\n                            msgBody.MsgContent.List_Account\r\n                        );\r\n                        if (GROUP_TIP_TYPE.JOIN == opType || GROUP_TIP_TYPE.QUIT == opType) {//加群或退群时，设置最新群成员数\r\n                            msgContent.setGroupMemberNum(msgBody.MsgContent.MemberNum);\r\n                        } else if (GROUP_TIP_TYPE.MODIFY_GROUP_INFO == opType) {//群资料变更\r\n                            var tempIsCallbackFlag = false;\r\n                            var tempNewGroupInfo = {\r\n                                \"GroupId\": group_id,\r\n                                \"GroupFaceUrl\": null,\r\n                                \"GroupName\": null,\r\n                                \"OwnerAccount\": null,\r\n                                \"GroupNotification\": null,\r\n                                \"GroupIntroduction\": null\r\n                            };\r\n                            var msgGroupNewInfo = msgBody.MsgContent.MsgGroupNewInfo;\r\n                            if (msgGroupNewInfo.GroupFaceUrl) {\r\n                                var tmpNGIFaceUrl = new Msg.Elem.GroupTip.GroupInfo(\r\n                                    GROUP_TIP_MODIFY_GROUP_INFO_TYPE.FACE_URL,\r\n                                    msgGroupNewInfo.GroupFaceUrl\r\n                                );\r\n                                msgContent.addGroupInfo(tmpNGIFaceUrl);\r\n                                tempIsCallbackFlag = true;\r\n                                tempNewGroupInfo.GroupFaceUrl = msgGroupNewInfo.GroupFaceUrl;\r\n                            }\r\n                            if (msgGroupNewInfo.GroupName) {\r\n                                var tmpNGIName = new Msg.Elem.GroupTip.GroupInfo(\r\n                                    GROUP_TIP_MODIFY_GROUP_INFO_TYPE.NAME,\r\n                                    msgGroupNewInfo.GroupName\r\n                                );\r\n                                msgContent.addGroupInfo(tmpNGIName);\r\n                                tempIsCallbackFlag = true;\r\n                                tempNewGroupInfo.GroupName = msgGroupNewInfo.GroupName;\r\n                            }\r\n                            if (msgGroupNewInfo.Owner_Account) {\r\n                                var tmpNGIOwner = new Msg.Elem.GroupTip.GroupInfo(\r\n                                    GROUP_TIP_MODIFY_GROUP_INFO_TYPE.OWNER,\r\n                                    msgGroupNewInfo.Owner_Account\r\n                                );\r\n                                msgContent.addGroupInfo(tmpNGIOwner);\r\n                                tempIsCallbackFlag = true;\r\n                                tempNewGroupInfo.OwnerAccount = msgGroupNewInfo.Owner_Account;\r\n                            }\r\n                            if (msgGroupNewInfo.GroupNotification) {\r\n                                var tmpNGINotification = new Msg.Elem.GroupTip.GroupInfo(\r\n                                    GROUP_TIP_MODIFY_GROUP_INFO_TYPE.NOTIFICATION,\r\n                                    msgGroupNewInfo.GroupNotification\r\n                                );\r\n                                msgContent.addGroupInfo(tmpNGINotification);\r\n                                tempIsCallbackFlag = true;\r\n                                tempNewGroupInfo.GroupNotification = msgGroupNewInfo.GroupNotification;\r\n                            }\r\n                            if (msgGroupNewInfo.GroupIntroduction) {\r\n                                var tmpNGIIntroduction = new Msg.Elem.GroupTip.GroupInfo(\r\n                                    GROUP_TIP_MODIFY_GROUP_INFO_TYPE.INTRODUCTION,\r\n                                    msgGroupNewInfo.GroupIntroduction\r\n                                );\r\n                                msgContent.addGroupInfo(tmpNGIIntroduction);\r\n                                tempIsCallbackFlag = true;\r\n                                tempNewGroupInfo.GroupIntroduction = msgGroupNewInfo.GroupIntroduction;\r\n                            }\r\n\r\n                            //回调群资料变化通知方法\r\n                            if (isSyncGroupMsgs == false && tempIsCallbackFlag && onGroupInfoChangeCallback) {\r\n                                onGroupInfoChangeCallback(tempNewGroupInfo);\r\n                            }\r\n\r\n                        } else if (GROUP_TIP_TYPE.MODIFY_MEMBER_INFO == opType) {//群成员变更\r\n                            var memberInfos = msgBody.MsgContent.MsgMemberInfo;\r\n                            for (var n in memberInfos) {\r\n                                var memberInfo = memberInfos[n];\r\n                                msgContent.addMemberInfo(\r\n                                    new Msg.Elem.GroupTip.MemberInfo(\r\n                                        memberInfo.User_Account, memberInfo.ShutupTime\r\n                                    )\r\n                                );\r\n                            }\r\n                        }\r\n                        break;\r\n                    case MSG_ELEMENT_TYPE.CUSTOM:\r\n                        msgType = MSG_ELEMENT_TYPE.CUSTOM;\r\n                        msgContent = new Msg.Elem.Custom(\r\n                            msgBody.MsgContent.Data,\r\n                            msgBody.MsgContent.Desc,\r\n                            msgBody.MsgContent.Ext\r\n                        );\r\n                        break;\r\n                    default :\r\n                        msgType = MSG_ELEMENT_TYPE.TEXT;\r\n                        msgContent = new Msg.Elem.Text('web端暂不支持' + msgBody.MsgType + '消息');\r\n                        break;\r\n                }\r\n                msg.elems.push(new Msg.Elem(msgType, msgContent));\r\n            }\r\n\r\n            if (isAddMsgFlag == false) {//不需要保存消息\r\n                return msg;\r\n            }\r\n\r\n\t\t\t\t\r\n            if (MsgStore.addMsg(msg)) {\r\n\t\t\t\t// console.log('封装数据：',msg)\r\n\t\t\t\t\r\n\t\t\t\t\r\n                return msg;\r\n            } else {\r\n                return null;\r\n            }\r\n        };\r\n\r\n        //初始化\r\n        this.init = function (listeners, cbOk, cbErr) {\r\n\t\t\t\r\n            app.globalData.listeners = listeners;\r\n\t\t\t\r\n\t\t\tif (!listeners.onMsgNotify) {\r\n                log.warn('listeners.onMsgNotify is empty');\r\n            }\r\n            onMsgCallback = listeners.onMsgNotify;\r\n\t\t\t\r\n            app.globalData.listeners.onMsgCallback = listeners.onMsgNotify;\r\n\r\n            if (listeners.onBigGroupMsgNotify) {\r\n                onBigGroupMsgCallback = listeners.onBigGroupMsgNotify;\r\n            } else {\r\n                log.warn('listeners.onBigGroupMsgNotify is empty');\r\n            }\r\n\r\n            if (listeners.onC2cEventNotifys) {\r\n                onC2cEventCallbacks = listeners.onC2cEventNotifys;\r\n            } else {\r\n                log.warn('listeners.onC2cEventNotifys is empty');\r\n            }\r\n            if (listeners.onGroupSystemNotifys) {\r\n                onGroupSystemNotifyCallbacks = listeners.onGroupSystemNotifys;\r\n            } else {\r\n                log.warn('listeners.onGroupSystemNotifys is empty');\r\n            }\r\n            if (listeners.onGroupInfoChangeNotify) {\r\n                onGroupInfoChangeCallback = listeners.onGroupInfoChangeNotify;\r\n            } else {\r\n                log.warn('listeners.onGroupInfoChangeNotify is empty');\r\n            }\r\n            if (listeners.onFriendSystemNotifys) {\r\n                onFriendSystemNotifyCallbacks = listeners.onFriendSystemNotifys;\r\n            } else {\r\n                log.warn('listeners.onFriendSystemNotifys is empty');\r\n            }\r\n            if (listeners.onProfileSystemNotifys) {\r\n                onProfileSystemNotifyCallbacks = listeners.onProfileSystemNotifys;\r\n            } else {\r\n                log.warn('listeners.onProfileSystemNotifys is empty');\r\n            }\r\n            if (listeners.onKickedEventCall) {\r\n                onKickedEventCall = listeners.onKickedEventCall;\r\n            } else {\r\n                log.warn('listeners.onKickedEventCall is empty');\r\n            }\r\n\r\n            if (listeners.onAppliedDownloadUrl) {\r\n                onAppliedDownloadUrl = listeners.onAppliedDownloadUrl;\r\n            } else {\r\n                log.warn('listeners.onAppliedDownloadUrl is empty');\r\n            }\r\n\r\n\t\t\t\tctx.identifier = app.globalData.ctx.identifier\r\n\t\t\t\t\r\n            if (!ctx.identifier || !ctx.userSig) {\r\n                if (cbOk) {\r\n                    var success = {\r\n                        'ActionStatus': ACTION_STATUS.OK,\r\n                        'ErrorCode': 0,\r\n                        'ErrorInfo': \"login success(no login state)\"\r\n                    };\r\n                    cbOk(success);\r\n                }\r\n                return;\r\n            }\r\n\r\n            //初始化\r\n            initMyGroupMaxSeqs(\r\n                function (resp) {\r\n                    log.info('initMyGroupMaxSeqs success');\r\n                    //初始化文件\r\n                    initIpAndAuthkey(\r\n                        function (initIpAndAuthkeyResp) {\r\n                            log.info('initIpAndAuthkey success');\r\n                            if (cbOk) {\r\n                                log.info('login success(have login state))');\r\n                                var success = {\r\n                                    'ActionStatus': ACTION_STATUS.OK,\r\n                                    'ErrorCode': 0,\r\n                                    'ErrorInfo': \"login success\"\r\n                                };\r\n                                cbOk(success);\r\n                            }\r\n                            MsgManager.setLongPollingOn(true);//开启长轮询\r\n                            longPollingOn && MsgManager.longPolling(cbOk);\r\n                        }, cbErr);\r\n                }, cbErr);\r\n        };\r\n\r\n        //发消息（私聊或群聊）\r\n        this.sendMsg = function (msg, cbOk, cbErr) {\r\n            proto_sendMsg(msg, function (resp) {\r\n                //私聊时，加入自己的发的消息，群聊时，由于seq和服务器的seq不一样，所以不作处理\r\n                if (msg.sess.type() == SESSION_TYPE.C2C) {\r\n                    if (!MsgStore.addMsg(msg)) {\r\n                        var errInfo = \"sendMsg: addMsg failed!\";\r\n                        var error = tool.getReturnError(errInfo, -17);\r\n                        log.error(errInfo);\r\n                        if (cbErr) cbErr(error);\r\n                        return;\r\n                    }\r\n                    //更新信息流时间\r\n                    MsgStore.updateTimeline();\r\n                }\r\n                if (cbOk) cbOk(resp);\r\n            }, function (err) {\r\n                if (cbErr) cbErr(err);\r\n            });\r\n        };\r\n    };\r\n\r\n    //上传文件\r\n    var FileUploader = new function () {\r\n        this.fileMd5 = null;\r\n        //获取文件MD5\r\n        var getFileMD5 = function (file, cbOk, cbErr) {\r\n\r\n            //FileReader pc浏览器兼容性\r\n            //Feature   Firefox (Gecko) Chrome  Internet Explorer   Opera   Safari\r\n            //Basic support 3.6 7   10                      12.02   6.0.2\r\n            var fileReader = null;\r\n            try {\r\n                fileReader = new FileReader();//分块读取文件对象\r\n            } catch (e) {\r\n                if (cbErr) {\r\n                    cbErr(tool.getReturnError('当前浏览器不支持FileReader', -18));\r\n                    return;\r\n                }\r\n            }\r\n            //file的slice方法，注意它的兼容性，在不同浏览器的写法不同\r\n            var blobSlice = File.prototype.mozSlice || File.prototype.webkitSlice || File.prototype.slice;\r\n            if (!blobSlice) {\r\n                if (cbErr) {\r\n                    cbErr(tool.getReturnError('当前浏览器不支持FileAPI', -19));\r\n                    return;\r\n                }\r\n            }\r\n\r\n            var chunkSize = 2 * 1024 * 1024;//分块大小，2M\r\n            var chunks = Math.ceil(file.size / chunkSize);//总块数\r\n            var currentChunk = 0;//当前块数\r\n            var spark = new SparkMD5();//获取MD5对象\r\n\r\n            fileReader.onload = function (e) {//数据加载完毕事件\r\n\r\n                var binaryStr = \"\";\r\n                var bytes = new Uint8Array(e.target.result);\r\n                var length = bytes.byteLength;\r\n                for (var i = 0; i < length; i++) {\r\n                    binaryStr += String.fromCharCode(bytes[i]);//二进制转换字符串\r\n                }\r\n                spark.appendBinary(binaryStr);\r\n                currentChunk++;\r\n                if (currentChunk < chunks) {\r\n                    loadNext();//读取下一块数据\r\n                } else {\r\n                    this.fileMd5 = spark.end();//得到文件MD5值\r\n                    if (cbOk) {\r\n                        cbOk(this.fileMd5);\r\n                    }\r\n                }\r\n            };\r\n            //分片读取文件\r\n            function loadNext() {\r\n                var start = currentChunk * chunkSize, end = start + chunkSize >= file.size ? file.size : start + chunkSize;\r\n                //根据开始和结束位置，切割文件\r\n                var b = blobSlice.call(file, start, end);\r\n                //readAsBinaryString ie浏览器不兼容此方法\r\n                //fileReader.readAsBinaryString(blobSlice.call(file, start, end));\r\n                fileReader.readAsArrayBuffer(b);//ie，chrome，firefox等主流浏览器兼容此方法\r\n\r\n            }\r\n\r\n            loadNext();//开始读取\r\n        };\r\n        //提交上传图片表单(用于低版本IE9以下)\r\n        this.submitUploadFileForm = function (options, cbOk, cbErr) {\r\n            var errInfo;\r\n            var error;\r\n            var formId = options.formId;\r\n            var fileId = options.fileId;\r\n            var iframeNum = uploadResultIframeId++;\r\n            var iframeName = \"uploadResultIframe_\" + iframeNum;\r\n            var toAccount = options.To_Account;\r\n            var businessType = options.businessType;\r\n\r\n            var form = document.getElementById(formId);\r\n            if (!form) {\r\n                errInfo = \"获取表单对象为空: formId=\" + formId + \"(formId非法)\";\r\n                error = tool.getReturnError(errInfo, -20);\r\n                if (cbErr) cbErr(error);\r\n                return;\r\n            }\r\n\r\n            var fileObj = document.getElementById(fileId);\r\n            if (!fileObj) {\r\n                errInfo = \"获取文件对象为空: fileId=\" + fileId + \"(没有选择文件或者fileId非法)\";\r\n                error = tool.getReturnError(errInfo, -21);\r\n                if (cbErr) cbErr(error);\r\n                return;\r\n            }\r\n            //fileObj.type=\"file\";//ie8下不起作用，必须由业务自己设置\r\n            fileObj.name = \"file\";\r\n\r\n            var iframe = document.createElement(\"iframe\");\r\n            iframe.name = iframeName;\r\n            iframe.id = iframeName;\r\n            iframe.style.display = \"none\";\r\n            document.body.appendChild(iframe);\r\n\r\n            var cmdName;\r\n            if (isAccessFormalEnv()) {\r\n                cmdName = 'pic_up';\r\n            } else {\r\n                cmdName = 'pic_up_test';\r\n            }\r\n            var uploadApiUrl = \"https://pic.tim.qq.com/v4/openpic/\" + cmdName + \"?tinyid=\" + ctx.tinyid + \"&a2=\" + ctx.a2 + \"&sdkappid=\" + ctx.sdkAppID + \"&accounttype=\" + ctx.accountType + \"&contenttype=http\";\r\n            form.action = uploadApiUrl;\r\n            form.method = 'post';\r\n            //form.enctype='multipart/form-data';//ie8下不起作用，必须由业务自己设置\r\n            form.target = iframeName;\r\n\r\n            function createFormInput(name, value) {\r\n                var tempInput = document.createElement(\"input\");\r\n                tempInput.type = \"hidden\";\r\n                tempInput.name = name;\r\n                tempInput.value = value;\r\n                form.appendChild(tempInput);\r\n            }\r\n\r\n\r\n\t\t\t\tctx.identifier = app.globalData.ctx.identifier\r\n\r\n            createFormInput(\"App_Version\", VERSION_INFO.APP_VERSION);\r\n            createFormInput(\"From_Account\", ctx.identifier);\r\n            createFormInput(\"To_Account\", toAccount);\r\n            createFormInput(\"Seq\", nextSeq().toString());\r\n            createFormInput(\"Timestamp\", unixtime().toString());\r\n            createFormInput(\"Random\", createRandom().toString());\r\n            createFormInput(\"Busi_Id\", businessType);\r\n            createFormInput(\"PkgFlag\", UPLOAD_RES_PKG_FLAG.RAW_DATA.toString());\r\n            createFormInput(\"Auth_Key\", authkey);\r\n            createFormInput(\"Server_Ver\", VERSION_INFO.SERVER_VERSION.toString());\r\n            createFormInput(\"File_Type\", options.fileType);\r\n\r\n\r\n            //检测iframe.contentWindow.name是否有值\r\n            function checkFrameName() {\r\n                var resp;\r\n                try {\r\n                    resp = JSON.parse(iframe.contentWindow.name) || {};\r\n                } catch (e) {\r\n                    resp = {};\r\n                }\r\n                if (resp.ActionStatus) {//上传接口返回\r\n                    // We've got what we need. Stop the iframe from loading further content.\r\n                    iframe.src = \"about:blank\";\r\n                    iframe.parentNode.removeChild(iframe);\r\n                    iframe = null;\r\n\r\n                    if (resp.ActionStatus == ACTION_STATUS.OK) {\r\n                        cbOk && cbOk(resp);\r\n                    } else {\r\n                        cbErr && cbErr(resp);\r\n                    }\r\n                } else {\r\n                    setTimeout(checkFrameName, 100);\r\n                }\r\n            }\r\n\r\n            setTimeout(checkFrameName, 500);\r\n\r\n            form.submit();//提交上传图片表单\r\n        };\r\n        //上传图片或文件(用于高版本浏览器，支持FileAPI)\r\n        this.uploadFile = function (options, cbOk, cbErr) {\r\n\r\n            var file_upload = {\r\n                //初始化\r\n                init: function (options, cbOk, cbErr) {\r\n                    var me = this;\r\n                    me.file = options.file;\r\n                    //分片上传进度回调事件\r\n                    me.onProgressCallBack = options.onProgressCallBack;\r\n                    //停止上传图片按钮\r\n                    if (options.abortButton) {\r\n                        options.abortButton.onclick = me.abortHandler;\r\n                    }\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tctx.identifier = app.globalData.ctx.identifier\r\n\t\t\t\t\t\r\n                    me.total = me.file.size;//文件总大小\r\n                    me.loaded = 0;//已读取字节数\r\n                    me.step = 1080 * 1024;//分块大小，1080K\r\n                    me.sliceSize = 0;//分片大小\r\n                    me.sliceOffset = 0;//当前分片位置\r\n                    me.timestamp = unixtime();//当前时间戳\r\n                    me.seq = nextSeq();//请求seq\r\n                    me.random = createRandom();//请求随机数\r\n                    me.fromAccount = ctx.identifier;//发送者\r\n                    me.toAccount = options.To_Account;//接收者\r\n                    me.fileMd5 = options.fileMd5;//文件MD5\r\n                    me.businessType = options.businessType;//图片或文件的业务类型，群消息:1; c2c消息:2; 个人头像：3; 群头像：4;\r\n                    me.fileType = options.fileType;//文件类型，不填为默认认为上传的是图片；1：图片；2：文件；3：短视频；4：PTT\r\n\r\n                    me.cbOk = cbOk;//上传成功回调事件\r\n                    me.cbErr = cbErr;//上传失败回调事件\r\n\r\n                    me.reader = new FileReader();//读取文件对象\r\n                    me.blobSlice = File.prototype.mozSlice || File.prototype.webkitSlice || File.prototype.slice;//file的slice方法,不同浏览器不一样\r\n\r\n                    me.reader.onloadstart = me.onLoadStart;//开始读取回调事件\r\n                    me.reader.onprogress = me.onProgress;//读取文件进度回调事件\r\n                    me.reader.onabort = me.onAbort;//停止读取回调事件\r\n                    me.reader.onerror = me.onerror;//读取发生错误回调事件\r\n                    me.reader.onload = me.onLoad;//分片加载完毕回调事件\r\n                    me.reader.onloadend = me.onLoadEnd;//读取文件完毕回调事件\r\n                },\r\n                //上传方法\r\n                upload: function () {\r\n                    var me = file_upload;\r\n                    //读取第一块\r\n                    me.readBlob(0);\r\n                },\r\n                onLoadStart: function () {\r\n                    var me = file_upload;\r\n                },\r\n                onProgress: function (e) {\r\n                    var me = file_upload;\r\n                    me.loaded += e.loaded;\r\n                    if (me.onProgressCallBack) {\r\n                        me.onProgressCallBack(me.loaded, me.total);\r\n                    }\r\n                },\r\n                onAbort: function () {\r\n                    var me = file_upload;\r\n                },\r\n                onError: function () {\r\n                    var me = file_upload;\r\n                },\r\n                onLoad: function (e) {\r\n                    var me = file_upload;\r\n                    if (e.target.readyState == FileReader.DONE) {\r\n                        var slice_data_base64 = e.target.result;\r\n                        //注意，一定要去除base64编码头部\r\n                        var pos = slice_data_base64.indexOf(\",\");\r\n                        if (pos != -1) {\r\n                            slice_data_base64 = slice_data_base64.substr(pos + 1);\r\n                        }\r\n                        //封装上传图片接口的请求参数\r\n                        var opt = {\r\n                            'From_Account': me.fromAccount,\r\n                            'To_Account': me.toAccount,\r\n                            'Busi_Id': me.businessType,\r\n                            'File_Type': me.fileType,\r\n                            'File_Str_Md5': me.fileMd5,\r\n                            'PkgFlag': UPLOAD_RES_PKG_FLAG.BASE64_DATA,\r\n                            'File_Size': me.total,\r\n                            'Slice_Offset': me.sliceOffset,\r\n                            'Slice_Size': me.sliceSize,\r\n                            'Slice_Data': slice_data_base64,\r\n                            'Seq': me.seq,\r\n                            'Timestamp': me.timestamp,\r\n                            'Random': me.random\r\n                        };\r\n\r\n                        //上传成功的成功回调\r\n                        var succCallback = function (resp) {\r\n                            if (resp.IsFinish == 0) {\r\n                                me.loaded = resp.Next_Offset;\r\n                                if (me.loaded < me.total) {\r\n                                    me.readBlob(me.loaded);\r\n                                } else {\r\n                                    me.loaded = me.total;\r\n                                }\r\n                            } else {\r\n\r\n                                if (me.cbOk) {\r\n                                    var tempResp = {\r\n                                        'ActionStatus': resp.ActionStatus,\r\n                                        'ErrorCode': resp.ErrorCode,\r\n                                        'ErrorInfo': resp.ErrorInfo,\r\n                                        'File_UUID': resp.File_UUID,\r\n                                        'File_Size': resp.Next_Offset,\r\n                                        'URL_INFO': resp.URL_INFO,\r\n                                        'Download_Flag':resp.Download_Flag\r\n                                    };\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tctx.identifier = app.globalData.ctx.identifier\r\n\t\t\t\t\t\t\t\t\t\r\n                                    if (me.fileType == UPLOAD_RES_TYPE.FILE) {//如果上传的是文件，下载地址需要sdk内部拼接\r\n                                        tempResp.URL_INFO = getFileDownUrl(resp.File_UUID, ctx.identifier, me.file.name);\r\n                                    }\r\n                                    me.cbOk(tempResp);\r\n                                }\r\n                            }\r\n                            Upload_Retry_Times = 0;\r\n                        };\r\n                        //上传失败的回调\r\n                        var errorCallback = function(resp){\r\n                            if(Upload_Retry_Times < Upload_Retry_Max_Times){\r\n                                Upload_Retry_Times ++;\r\n                                setTimeout(function(){\r\n                                    proto_uploadPic(opt,succCallback,errorCallback);\r\n                                },1000);\r\n                            }else{\r\n                                me.cbErr(resp);\r\n                            }\r\n                            //me.cbErr\r\n                        };\r\n                        //分片上传图片接口\r\n                        proto_uploadPic(opt, succCallback,errorCallback);\r\n                    }\r\n                },\r\n                onLoadEnd: function () {\r\n                    var me = file_upload;\r\n                },\r\n                //分片读取文件方法\r\n                readBlob: function (start) {\r\n                    var me = file_upload;\r\n                    var blob, file = me.file;\r\n                    var end = start + me.step;\r\n                    if (end > me.total) {\r\n                        end = me.total;\r\n                        me.sliceSize = end - start;\r\n                    } else {\r\n                        me.sliceSize = me.step;\r\n                    }\r\n                    me.sliceOffset = start;\r\n                    //根据起始和结束位置，分片读取文件\r\n                    blob = me.blobSlice.call(file, start, end);\r\n                    //将分片的二进制数据转换为base64编码\r\n                    me.reader.readAsDataURL(blob);\r\n                },\r\n                abortHandler: function () {\r\n                    var me = file_upload;\r\n                    if (me.reader) {\r\n                        me.reader.abort();\r\n                    }\r\n                }\r\n            };\r\n\r\n            //读取文件MD5\r\n            getFileMD5(options.file,\r\n                function (fileMd5) {\r\n                    log.info('fileMd5: ' + fileMd5);\r\n                    options.fileMd5 = fileMd5;\r\n                    //初始化上传参数\r\n                    file_upload.init(options, cbOk, cbErr);\r\n                    //开始上传文件\r\n                    file_upload.upload();\r\n                },\r\n                cbErr\r\n            );\r\n        };\r\n    };\r\n\r\n\r\n    //web im 基础对象\r\n\r\n    //常量对象\r\n\r\n    //会话类型\r\n    webim.SESSION_TYPE = SESSION_TYPE;\r\n\r\n    webim.MSG_MAX_LENGTH = MSG_MAX_LENGTH;\r\n\r\n    //c2c消息子类型\r\n    webim.C2C_MSG_SUB_TYPE = C2C_MSG_SUB_TYPE;\r\n\r\n    //群消息子类型\r\n    webim.GROUP_MSG_SUB_TYPE = GROUP_MSG_SUB_TYPE;\r\n\r\n    //消息元素类型\r\n    webim.MSG_ELEMENT_TYPE = MSG_ELEMENT_TYPE;\r\n\r\n    //群提示消息类型\r\n    webim.GROUP_TIP_TYPE = GROUP_TIP_TYPE;\r\n\r\n    //图片类型\r\n    webim.IMAGE_TYPE = IMAGE_TYPE;\r\n\r\n    //群系统消息类型\r\n    webim.GROUP_SYSTEM_TYPE = GROUP_SYSTEM_TYPE;\r\n\r\n    //好友系统通知子类型\r\n    webim.FRIEND_NOTICE_TYPE = FRIEND_NOTICE_TYPE;\r\n\r\n    //群提示消息-群资料变更类型\r\n    webim.GROUP_TIP_MODIFY_GROUP_INFO_TYPE = GROUP_TIP_MODIFY_GROUP_INFO_TYPE;\r\n\r\n    //浏览器信息\r\n    webim.BROWSER_INFO = BROWSER_INFO;\r\n\r\n    //表情对象\r\n    webim.Emotions = webim.EmotionPicData = emotions;\r\n    //表情标识符和index Map\r\n    webim.EmotionDataIndexs = webim.EmotionPicDataIndex = emotionDataIndexs;\r\n\r\n    //腾讯登录服务错误码(托管模式)\r\n    webim.TLS_ERROR_CODE = TLS_ERROR_CODE;\r\n\r\n    //连接状态\r\n    webim.CONNECTION_STATUS = CONNECTION_STATUS;\r\n\r\n    //上传图片业务类型\r\n    webim.UPLOAD_PIC_BUSSINESS_TYPE = UPLOAD_PIC_BUSSINESS_TYPE;\r\n\r\n    //最近联系人类型\r\n    webim.RECENT_CONTACT_TYPE = RECENT_CONTACT_TYPE;\r\n\r\n    //上传资源类型\r\n    webim.UPLOAD_RES_TYPE = UPLOAD_RES_TYPE;\r\n\r\n\r\n    /**************************************/\r\n\r\n    //类对象\r\n    //\r\n    //工具对象\r\n    webim.Tool = tool;\r\n    //控制台打印日志对象\r\n    webim.Log = log;\r\n\r\n    //消息对象\r\n    webim.Msg = Msg;\r\n    //会话对象\r\n    webim.Session = Session;\r\n    //会话存储对象\r\n    webim.MsgStore = {\r\n        sessMap: function () {\r\n            return MsgStore.sessMap();\r\n        },\r\n        sessCount: function () {\r\n            return MsgStore.sessCount();\r\n        },\r\n        sessByTypeId: function (type, id) {\r\n            return MsgStore.sessByTypeId(type, id);\r\n        },\r\n        delSessByTypeId: function (type, id) {\r\n            return MsgStore.delSessByTypeId(type, id);\r\n        },\r\n        resetCookieAndSyncFlag: function () {\r\n            return MsgStore.resetCookieAndSyncFlag();\r\n        }\r\n    };\r\n\r\n    webim.Resources = Resources;\r\n\r\n    /**************************************/\r\n\r\n    // webim API impl\r\n    //\r\n    //基本接口\r\n    //登录\r\n    webim.login = webim.init = function (loginInfo, listeners, opts, cbOk, cbErr) {\r\n\r\n\t\tapp.globalData.listeners = listeners\r\n\t\t\r\n\t\t\r\n\t\tconsole.log('loginInfo -----',loginInfo);\r\n\t\tMsgManager.resetLongPollingInfo();\r\n\t\t//初始化连接状态回调函数\r\n\t\tConnManager.init(listeners.onConnNotify, cbOk, cbErr);\r\n\t\t\r\n\t\t//设置ie9以下浏览器jsonp回调\r\n\t\tif (listeners.jsonpCallback) jsonpCallback = listeners.jsonpCallback;\r\n\t\t//登录\r\n\t\t_login(loginInfo, listeners, opts, cbOk, cbErr);\r\n    };\r\n    //登出\r\n    //需要传长轮询id\r\n    //这样登出之后其他的登录实例还可以继续收取消息\r\n    webim.logout = webim.offline = function (cbOk, cbErr) {\r\n        return proto_logout('instance',cbOk, cbErr);\r\n    };\r\n\r\n    //登出\r\n    //这种登出方式，所有的实例都将不会收到消息推送，直到重新登录\r\n    webim.logoutAll = function (cbOk, cbErr) {\r\n        return proto_logout('all',cbOk, cbErr);\r\n    };\r\n\r\n\r\n    //消息管理接口\r\n    //发消息接口（私聊和群聊）\r\n    webim.sendMsg = function (msg, cbOk, cbErr) {\r\n        return MsgManager.sendMsg(msg, cbOk, cbErr);\r\n    };\r\n    //拉取未读c2c消息\r\n    webim.syncMsgs = function (cbOk, cbErr) {\r\n        return MsgManager.syncMsgs(cbOk, cbErr);\r\n    };\r\n    //拉取C2C漫游消息\r\n    webim.getC2CHistoryMsgs = function (options, cbOk, cbErr) {\r\n        return MsgManager.getC2CHistoryMsgs(options, cbOk, cbErr);\r\n    };\r\n    //拉取群漫游消息\r\n    webim.syncGroupMsgs = function (options, cbOk, cbErr) {\r\n        return MsgManager.syncGroupMsgs(options, cbOk, cbErr);\r\n    };\r\n\r\n    //上报c2c消息已读\r\n    webim.c2CMsgReaded = function (options, cbOk, cbErr) {\r\n        return MsgStore.c2CMsgReaded(options, cbOk, cbErr);\r\n    };\r\n\r\n    //上报群消息已读\r\n    webim.groupMsgReaded = function (options, cbOk, cbErr) {\r\n        return proto_groupMsgReaded(options, cbOk, cbErr);\r\n    };\r\n\r\n    //设置聊天会话自动标记已读\r\n    webim.setAutoRead = function (selSess, isOn, isResetAll) {\r\n        return MsgStore.setAutoRead(selSess, isOn, isResetAll);\r\n    };\r\n\r\n    //群组管理接口\r\n    //\r\n    //创建群\r\n    webim.createGroup = function (options, cbOk, cbErr) {\r\n        return proto_createGroup(options, cbOk, cbErr);\r\n    };\r\n    //创建群-高级接口\r\n    webim.createGroupHigh = function (options, cbOk, cbErr) {\r\n        return proto_createGroupHigh(options, cbOk, cbErr);\r\n    };\r\n    //申请加群\r\n    webim.applyJoinGroup = function (options, cbOk, cbErr) {\r\n        return proto_applyJoinGroup(options, cbOk, cbErr);\r\n    };\r\n    //处理加群申请(同意或拒绝)\r\n    webim.handleApplyJoinGroupPendency = function (options, cbOk, cbErr) {\r\n        return proto_handleApplyJoinGroupPendency(options, cbOk, cbErr);\r\n    };\r\n\r\n    //删除加群申请\r\n    webim.deleteApplyJoinGroupPendency = function (options, cbOk, cbErr) {\r\n        return proto_deleteC2CMsg(options, cbOk, cbErr);\r\n    };\r\n\r\n    //主动退群\r\n    webim.quitGroup = function (options, cbOk, cbErr) {\r\n        return proto_quitGroup(options, cbOk, cbErr);\r\n    };\r\n    //搜索群组(根据名称)\r\n    webim.searchGroupByName = function (options, cbOk, cbErr) {\r\n        return proto_searchGroupByName(options, cbOk, cbErr);\r\n    };\r\n    //获取群组公开资料(根据群id搜索)\r\n    webim.getGroupPublicInfo = function (options, cbOk, cbErr) {\r\n        return proto_getGroupPublicInfo(options, cbOk, cbErr);\r\n    };\r\n    //获取群组详细资料-高级接口\r\n    webim.getGroupInfo = function (options, cbOk, cbErr) {\r\n        return proto_getGroupInfo(options, cbOk, cbErr);\r\n    };\r\n    //修改群基本资料\r\n    webim.modifyGroupBaseInfo = function (options, cbOk, cbErr) {\r\n        return proto_modifyGroupBaseInfo(options, cbOk, cbErr);\r\n    };\r\n    //获取群成员列表\r\n    webim.getGroupMemberInfo = function (options, cbOk, cbErr) {\r\n        return proto_getGroupMemberInfo(options, cbOk, cbErr);\r\n    };\r\n    //邀请好友加群\r\n    webim.addGroupMember = function (options, cbOk, cbErr) {\r\n        return proto_addGroupMember(options, cbOk, cbErr);\r\n    };\r\n    //修改群成员资料\r\n    webim.modifyGroupMember = function (options, cbOk, cbErr) {\r\n        return proto_modifyGroupMember(options, cbOk, cbErr);\r\n    };\r\n    //删除群成员\r\n    webim.deleteGroupMember = function (options, cbOk, cbErr) {\r\n        return proto_deleteGroupMember(options, cbOk, cbErr);\r\n    };\r\n    //解散群\r\n    webim.destroyGroup = function (options, cbOk, cbErr) {\r\n        return proto_destroyGroup(options, cbOk, cbErr);\r\n    };\r\n    //转让群组\r\n    webim.changeGroupOwner = function (options, cbOk, cbErr) {\r\n        return proto_changeGroupOwner(options, cbOk, cbErr);\r\n    };\r\n\r\n    //获取我的群组列表-高级接口\r\n    webim.getJoinedGroupListHigh = function (options, cbOk, cbErr) {\r\n        return proto_getJoinedGroupListHigh(options, cbOk, cbErr);\r\n    };\r\n    //获取群成员角色\r\n    webim.getRoleInGroup = function (options, cbOk, cbErr) {\r\n        return proto_getRoleInGroup(options, cbOk, cbErr);\r\n    };\r\n    //设置群成员禁言时间\r\n    webim.forbidSendMsg = function (options, cbOk, cbErr) {\r\n        return proto_forbidSendMsg(options, cbOk, cbErr);\r\n    };\r\n    //发送自定义群系统通知\r\n    webim.sendCustomGroupNotify = function (options, cbOk, cbErr) {\r\n        return proto_sendCustomGroupNotify(options, cbOk, cbErr);\r\n    };\r\n\r\n    //进入大群\r\n    webim.applyJoinBigGroup = function (options, cbOk, cbErr) {\r\n        return proto_applyJoinBigGroup(options, cbOk, cbErr);\r\n    };\r\n    //退出大群\r\n    webim.quitBigGroup = function (options, cbOk, cbErr) {\r\n        return proto_quitBigGroup(options, cbOk, cbErr);\r\n    };\r\n\r\n    //资料关系链管理接口\r\n    //\r\n    //获取个人资料接口，可用于搜索用户\r\n    webim.getProfilePortrait = function (options, cbOk, cbErr) {\r\n        return proto_getProfilePortrait(options, cbOk, cbErr);\r\n    };\r\n    //设置个人资料\r\n    webim.setProfilePortrait = function (options, cbOk, cbErr) {\r\n        return proto_setProfilePortrait(options, cbOk, cbErr);\r\n    };\r\n    //申请加好友\r\n    webim.applyAddFriend = function (options, cbOk, cbErr) {\r\n        return proto_applyAddFriend(options, cbOk, cbErr);\r\n    };\r\n    //获取好友申请列表\r\n    webim.getPendency = function (options, cbOk, cbErr) {\r\n        return proto_getPendency(options, cbOk, cbErr);\r\n    };\r\n    //删除好友申请\r\n    webim.deletePendency = function (options, cbOk, cbErr) {\r\n        return proto_deletePendency(options, cbOk, cbErr);\r\n    };\r\n    //处理好友申请\r\n    webim.responseFriend = function (options, cbOk, cbErr) {\r\n        return proto_responseFriend(options, cbOk, cbErr);\r\n    };\r\n    //获取我的好友\r\n    webim.getAllFriend = function (options, cbOk, cbErr) {\r\n        return proto_getAllFriend(options, cbOk, cbErr);\r\n    };\r\n    //删除好友\r\n    webim.deleteFriend = function (options, cbOk, cbErr) {\r\n        return proto_deleteFriend(options, cbOk, cbErr);\r\n    };\r\n    //拉黑\r\n    webim.addBlackList = function (options, cbOk, cbErr) {\r\n        return proto_addBlackList(options, cbOk, cbErr);\r\n    };\r\n    //删除黑名单\r\n    webim.deleteBlackList = function (options, cbOk, cbErr) {\r\n        return proto_deleteBlackList(options, cbOk, cbErr);\r\n    };\r\n    //获取我的黑名单\r\n    webim.getBlackList = function (options, cbOk, cbErr) {\r\n        return proto_getBlackList(options, cbOk, cbErr);\r\n    };\r\n\r\n    //获取最近会话\r\n    webim.getRecentContactList = function (options, cbOk, cbErr) {\r\n        return proto_getRecentContactList(options, cbOk, cbErr);\r\n    };\r\n\r\n    //图片或文件服务接口\r\n    //\r\n    //上传文件接口（高版本浏览器）\r\n    webim.uploadFile = webim.uploadPic = function (options, cbOk, cbErr) {\r\n        return FileUploader.uploadFile(options, cbOk, cbErr);\r\n    };\r\n    //提交上传图片表单接口（用于低版本ie）\r\n    webim.submitUploadFileForm = function (options, cbOk, cbErr) {\r\n        return FileUploader.submitUploadFileForm(options, cbOk, cbErr);\r\n    };\r\n    //上传图片或文件(Base64)接口\r\n    webim.uploadFileByBase64 = webim.uploadPicByBase64 = function (options, cbOk, cbErr) {\r\n        //请求参数\r\n        var opt = {\r\n            'To_Account': options.toAccount,\r\n            'Busi_Id': options.businessType,\r\n            'File_Type': options.File_Type,\r\n            'File_Str_Md5': options.fileMd5,\r\n            'PkgFlag': UPLOAD_RES_PKG_FLAG.BASE64_DATA,\r\n            'File_Size': options.totalSize,\r\n            'Slice_Offset': 0,\r\n            'Slice_Size': options.totalSize,\r\n            'Slice_Data': options.base64Str,\r\n            'Seq': nextSeq(),\r\n            'Timestamp': unixtime(),\r\n            'Random': createRandom()\r\n        };\r\n        return proto_uploadPic(opt, cbOk, cbErr);\r\n    };\r\n\r\n    //设置jsonp返回的值\r\n    webim.setJsonpLastRspData = function (rspData) {\r\n        jsonpLastRspData = typeof (rspData) == \"string\" ? JSON.parse(rspData) : rspData;\r\n    };\r\n\r\n    //获取长轮询ID\r\n    webim.getLongPollingId = function (options, cbOk, cbErr) {\r\n        return proto_getLongPollingId(options, cbOk, cbErr);\r\n    };\r\n\r\n    //获取下载地址\r\n    webim.applyDownload = function (options, cbOk, cbErr) {\r\n        return proto_applyDownload(options, cbOk, cbErr);\r\n    };\r\n\r\n    //获取下载地址\r\n    webim.onDownFile = function (uuid) {\r\n        window.open(Resources.downloadMap[\"uuid_\"+uuid]);\r\n    };\r\n\r\n    //检查是否登录\r\n    webim.checkLogin = function (cbErr, isNeedCallBack) {\r\n        return checkLogin(cbErr, isNeedCallBack);\r\n    };\r\n})(webim);\r\n    return webim;\r\n}();","\r\nvar webim = require('./webim_wx.js');\r\nvar selToID\r\n    ,loginInfo={}\r\n    ,accountMode\r\n    ,accountType\r\n    ,sdkAppID\r\n    ,avChatRoomId\r\n    ,selType = \"GROUP\"\r\n    ,selToID\r\n    ,selSess\r\n    ,selSessHeadUrl\r\n    ;\r\n\t\r\n\t\r\n\tvar app = getApp();  \r\n\t\r\n//监听大群新消息（普通，点赞，提示，红包）\r\nfunction onBigGroupMsgNotify(msgList, textMessageCallback, sketchpadDataCallback) {\r\n\r\n    for (var i = msgList.length - 1; i >= 0; i--) {//遍历消息，按照时间从后往前\r\n        var msg = msgList[i];\r\n        //console.warn(msg);\r\n        webim.Log.warn('receive a new avchatroom group msg: ' + msg.getFromAccountNick());\r\n        //显示收到的消息\r\n        // callback(showMsg(msg));\r\n\r\n        handleGroupMessage(msg, textMessageCallback, sketchpadDataCallback);\r\n        // console.log('监听大群新消息', msg);\r\n        //showMsg(msg);\r\n    }\r\n}\r\n\r\nfunction handleGroupMessage(msg, textMessageCallback, sketchpadDataCallback) {\r\n    console.log('0x256 - handleGroupMessage:', JSON.stringify(msg));\r\n    textMessageCallback && textMessageCallback(showMsg(msg));\r\n    var elems, elem, type, content, ext;\r\n    elems = msg.getElems();//获取消息包含的元素数组\r\n    // 屏蔽自己的白板消息\r\n\t\r\n\tloginInfo.identifier = app.globalData.loginInfo.identifier\r\n\t\r\n    console.log(`----> msg.fromAccount: ${msg.fromAccount}, identifier: ${loginInfo.identifier}`)\r\n    if (msg.fromAccount === loginInfo.identifier) {\r\n        console.log('self msg')\r\n        return;\r\n    }\r\n    for (var i in elems) {\r\n        elem = elems[i];\r\n        if (!elem) continue;\r\n        type = elem.getType();//获取元素类型\r\n        console.log('0x256 - type: ' + type);\r\n        content = elem.getContent();//获取元素对象\r\n        if (!content) {\r\n            console.log('content is null')\r\n            continue;\r\n        }\r\n        if (type === 'TIMCustomElem') {\r\n            let ext = content.getExt(); //'白板标签'\r\n            let data = content.getData(); //数据\r\n            if (ext === 'TXWhiteBoardExt') {\r\n                console.log('无压缩数据类型： TXWhiteBoardExt');\r\n                sketchpadDataCallback && sketchpadDataCallback(data);\r\n                break;\r\n            }\r\n        } else if (type === 'TIMCustomFile') {\r\n            console.warn('已压缩压缩数据类型： TXWhiteBoardExt_gzip_');\r\n        }\r\n    }\r\n}\r\n\r\n//监听新消息(私聊(包括普通消息、全员推送消息)，普通群(非直播聊天室)消息)事件\r\n//newMsgList 为新消息数组，结构为[Msg]\r\nfunction onMsgNotify(newMsgList, callback) {\r\n\t\r\n    var newMsg;\r\n    for (var j in newMsgList) {//遍历新消息\r\n        newMsg = newMsgList[j];\r\n        handlderMsg(newMsg, callback);//处理新消息\r\n    }\r\n}\r\n\r\n//处理消息（私聊(包括普通消息和全员推送消息)，普通群(非直播聊天室)消息）\r\nfunction handlderMsg(msg, callback) {\r\n    var fromAccount, fromAccountNick, sessType, subType, contentHtml;\r\n\r\n    fromAccount = msg.getFromAccount();\r\n    if (!fromAccount) {\r\n        fromAccount = '';\r\n    }\r\n    fromAccountNick = msg.getFromAccountNick();\r\n    if (!fromAccountNick) {\r\n        fromAccountNick = fromAccount;\r\n    }\r\n\r\n    //解析消息\r\n    //获取会话类型\r\n    //webim.SESSION_TYPE.GROUP-群聊，\r\n    //webim.SESSION_TYPE.C2C-私聊，\r\n    sessType = msg.getSession().type();\r\n    //获取消息子类型\r\n    //会话类型为群聊时，子类型为：webim.GROUP_MSG_SUB_TYPE\r\n    //会话类型为私聊时，子类型为：webim.C2C_MSG_SUB_TYPE\r\n    subType = msg.getSubType();\r\n\r\n    switch (sessType) {\r\n        case webim.SESSION_TYPE.C2C://私聊消息\r\n            switch (subType) {\r\n                case webim.C2C_MSG_SUB_TYPE.COMMON://c2c普通消息\r\n                    //业务可以根据发送者帐号fromAccount是否为app管理员帐号，来判断c2c消息是否为全员推送消息，还是普通好友消息\r\n                    //或者业务在发送全员推送消息时，发送自定义类型(webim.MSG_ELEMENT_TYPE.CUSTOM,即TIMCustomElem)的消息，在里面增加一个字段来标识消息是否为推送消息\r\n                    contentHtml = convertMsgtoHtml(msg);\r\n                    webim.Log.warn('receive a new c2c msg: fromAccountNick=' + fromAccountNick + \", content=\" + contentHtml);\r\n                    //c2c消息一定要调用已读上报接口\r\n                    var opts = {\r\n                        'To_Account': fromAccount,//好友帐号\r\n                        'LastedMsgTime': msg.getTime()//消息时间戳\r\n                    };\r\n                    webim.c2CMsgReaded(opts);\r\n                    if (callback) {\r\n                        var resMsg = {\r\n                            fromAccountNick: fromAccountNick,\r\n                            content: contentHtml\r\n                        }\r\n                        callback(resMsg);\r\n                    }\r\n\r\n                    console.error('收到一条c2c消息(好友消息或者全员推送消息): 发送人=' + fromAccountNick + \", 内容=\" + contentHtml);\r\n                    break;\r\n            }\r\n            break;\r\n        case webim.SESSION_TYPE.GROUP://普通群消息，对于直播聊天室场景，不需要作处理\r\n            break;\r\n    }\r\n}\r\n\r\n//sdk登录\r\nfunction sdkLogin(userInfo, listeners, options, avChatRoomId, callback, callbackOptions) {\r\n    //web sdk 登录\r\n\t\r\n\t\r\n    webim.login(userInfo, listeners, options,\r\n        function (identifierNick) {\r\n            //identifierNick为登录用户昵称(没有设置时，为帐号)，无登录态时为空\r\n            webim.Log.info('sdkLogin webim登录成功',userInfo);\r\n            loginInfo = userInfo;\r\n\t\t\t\r\n\t\t\tapp.globalData.loginInfo = userInfo\r\n\t\t\t\r\n            setProfilePortrait({\r\n                'ProfileItem': [{\r\n                    \"Tag\": \"Tag_Profile_IM_Nick\",\r\n                    \"Value\": userInfo.identifierNick\r\n                }]\r\n            },function(ret){\r\n                if(ret) {\r\n                    // 设置昵称失败\r\n                    callback & callback({\r\n                        errCode: ret.ErrorCode,\r\n                        errMsg: ret.ErrorInfo || '修改昵称失败',\r\n                        callback: callbackOptions\r\n                    });\r\n                    return;\r\n                }\r\n                if(avChatRoomId) \r\n                    applyJoinBigGroup(avChatRoomId);//加入大群\r\n                callback & callback({\r\n                    errCode: 0,\r\n                    errMsg: '',\r\n                    callback: callbackOptions\r\n                });\r\n            })\r\n            //hideDiscussForm();//隐藏评论表单\r\n            //initEmotionUL();//初始化表情\r\n        },\r\n        function (err) {\r\n            console.error(err.ErrorInfo);\r\n            console.log('webim登录失败');\r\n            callback & callback({\r\n                errCode: err, \r\n                errMsg: err.ErrorInfo,\r\n                callback: callbackOptions\r\n            });\r\n        }\r\n    );//\r\n}\r\n\r\n//修改昵称\r\nfunction setProfilePortrait(options,callback){\r\n    webim.setProfilePortrait(options,\r\n        function(res){\r\n            webim.Log.info('修改昵称成功');\r\n            callback && callback();\r\n        },\r\n        function(ret){\r\n            console.log('修改昵称失败',ret);\r\n            callback && callback(ret);\r\n        }\r\n    );\r\n}\r\n\r\n// 创建大群\r\nfunction createBigGroup(options, callback, callbackOptions) {\r\n\r\n\t\r\n  avChatRoomId = options.roomID;\r\n    webim.createGroup({\r\n        GroupId: options.roomID,\r\n        Owner_Account: options.userID,\r\n        Type: 'AVChatRoom', // 默认先是大群\r\n        Name: options.roomName || '',\r\n        MaxMemberCount: 500,\r\n        ApplyJoinOption: 'FreeAccess',\r\n        MemberList: []\r\n    },function(ret){\r\n        if(ret.ErrorCode) {\r\n            // 建房失败\r\n            callback && callback({\r\n                errCode: ret.ErrorCode,\r\n                errMsg: ret.err_msg,\r\n                callback: callbackOptions\r\n            });\r\n            return;\r\n        }\r\n        selToID = options.roomID;\r\n        // 建房成功\r\n        callback && callback({\r\n            errCode: 0,\r\n            callback: callbackOptions\r\n        });\r\n    },function(ret){\r\n        if (ret && ret.ErrorCode == 10025) {\r\n          //群组 ID 已被使用，并且操作者为群主，可以直接使用\r\n          // 建房成功\r\n          callback && callback({\r\n            errCode: 0,\r\n            callback: callbackOptions\r\n          });\r\n          return;\r\n        }\r\n        // 建房失败\r\n        callback && callback({\r\n            errCode: ret.ErrorCode,\r\n            errMsg: ret.ErrorInfo || 'webim建房失败',\r\n            callback: callbackOptions\r\n        });\r\n    });\r\n}\r\n\r\n//进入大群\r\nfunction applyJoinBigGroup(groupId, callback, callbackOptions) {\r\n    var options = {\r\n        'GroupId': groupId//群id\r\n    };\r\n    // 做一些预处理\r\n    avChatRoomId = groupId;\r\n    selSess = null;\r\n    webim.applyJoinBigGroup(\r\n        options,\r\n        function (resp) {\r\n            //JoinedSuccess:加入成功; WaitAdminApproval:等待管理员审批\r\n            if (resp.JoinedStatus && resp.JoinedStatus == 'JoinedSuccess') {\r\n                webim.Log.info('进群成功');\r\n                selToID = groupId;\r\n                callback && callback({\r\n                    errCode: 0,\r\n                    callback: callbackOptions\r\n                });\r\n            } else {\r\n                console.error('进群失败');\r\n                callback && callback({\r\n                    errCode: 999,\r\n                    errMsg: 'IM进群失败',\r\n                    callback: callbackOptions\r\n                });\r\n            }\r\n        },\r\n        function (err) {\r\n            console.error(err.ErrorInfo);\r\n            console.log('进群请求失败', err.ErrorInfo);\r\n            callback && callback({\r\n                errCode: 999,\r\n                errMsg: err.ErrorInfo || 'IM进群失败',\r\n                callback: callbackOptions\r\n            });\r\n        }\r\n    );\r\n}\r\n\r\n//显示消息（群普通+点赞+提示+红包）\r\nfunction showMsg(msg) {\r\n    var isSelfSend, fromAccount, fromAccountNick, sessType, subType;\r\n    var ul, li, paneDiv, textDiv, nickNameSpan, contentSpan;\r\n\r\n    fromAccount = msg.getFromAccount();\r\n    if (!fromAccount) {\r\n        fromAccount = '';\r\n    }\r\n    fromAccountNick = msg.getFromAccountNick();\r\n    if (!fromAccountNick) {\r\n        fromAccountNick = '未知用户';\r\n    }\r\n    //解析消息\r\n    //获取会话类型，目前只支持群聊\r\n    //webim.SESSION_TYPE.GROUP-群聊，\r\n    //webim.SESSION_TYPE.C2C-私聊，\r\n    sessType = msg.getSession().type();\r\n    //获取消息子类型\r\n    //会话类型为群聊时，子类型为：webim.GROUP_MSG_SUB_TYPE\r\n    //会话类型为私聊时，子类型为：webim.C2C_MSG_SUB_TYPE\r\n    subType = msg.getSubType();\r\n\r\n    isSelfSend = msg.getIsSend();//消息是否为自己发的\r\n    var content = \"\";\r\n    switch (subType) {\r\n\r\n        case webim.GROUP_MSG_SUB_TYPE.COMMON://群普通消息\r\n            content = convertMsgtoHtml(msg);\r\n            break;\r\n        case webim.GROUP_MSG_SUB_TYPE.REDPACKET://群红包消息\r\n            content = \"[群红包消息]\" + convertMsgtoHtml(msg);\r\n            break;\r\n        case webim.GROUP_MSG_SUB_TYPE.LOVEMSG://群点赞消息\r\n            //业务自己可以增加逻辑，比如展示点赞动画效果\r\n            content = \"[群点赞消息]\" + convertMsgtoHtml(msg);\r\n            //展示点赞动画\r\n            showLoveMsgAnimation();\r\n            break;\r\n        case webim.GROUP_MSG_SUB_TYPE.TIP://群提示消息\r\n            content = \"[群提示消息]\" + convertMsgtoHtml(msg);\r\n            break;\r\n    }\r\n\r\n    return {\r\n        fromAccountNick : fromAccountNick,\r\n        content : content\r\n    }\r\n}\r\n\r\n//把消息转换成Html\r\nfunction convertMsgtoHtml(msg) {\r\n    var html = \"\", elems, elem, type, content;\r\n    elems = msg.getElems();//获取消息包含的元素数组\r\n    for (var i in elems) {\r\n        elem = elems[i];\r\n        type = elem.getType();//获取元素类型\r\n        content = elem.getContent();//获取元素对象\r\n        switch (type) {\r\n            case webim.MSG_ELEMENT_TYPE.TEXT:\r\n                html += convertTextMsgToHtml(content);\r\n                break;\r\n            case webim.MSG_ELEMENT_TYPE.FACE:\r\n                html += convertFaceMsgToHtml(content);\r\n                break;\r\n            case webim.MSG_ELEMENT_TYPE.IMAGE:\r\n                html += convertImageMsgToHtml(content);\r\n                break;\r\n            case webim.MSG_ELEMENT_TYPE.SOUND:\r\n                html += convertSoundMsgToHtml(content);\r\n                break;\r\n            case webim.MSG_ELEMENT_TYPE.FILE:\r\n                html += convertFileMsgToHtml(content);\r\n                break;\r\n            case webim.MSG_ELEMENT_TYPE.LOCATION://暂不支持地理位置\r\n                //html += convertLocationMsgToHtml(content);\r\n                break;\r\n            case webim.MSG_ELEMENT_TYPE.CUSTOM:\r\n                html += convertCustomMsgToHtml(content);\r\n                break;\r\n            case webim.MSG_ELEMENT_TYPE.GROUP_TIP:\r\n                html += convertGroupTipMsgToHtml(content);\r\n                break;\r\n            default:\r\n                webim.Log.error('未知消息元素类型: elemType=' + type);\r\n                break;\r\n        }\r\n    }\r\n    return webim.Tool.formatHtml2Text(html);\r\n}\r\n\r\n//解析文本消息元素\r\nfunction convertTextMsgToHtml(content) {\r\n    return content.getText();\r\n}\r\n//解析表情消息元素\r\nfunction convertFaceMsgToHtml(content) {\r\n    return content.getData();\r\n    return content;\r\n    var faceUrl = null;\r\n    var data = content.getData();\r\n    var index = webim.EmotionDataIndexs[data];\r\n\r\n    var emotion = webim.Emotions[index];\r\n    if (emotion && emotion[1]) {\r\n        faceUrl = emotion[1];\r\n    }\r\n    if (faceUrl) {\r\n        return \"<img src='\" + faceUrl + \"'/>\";\r\n    } else {\r\n        return data;\r\n    }\r\n}\r\n//解析图片消息元素\r\nfunction convertImageMsgToHtml(content) {\r\n    var smallImage = content.getImage(webim.IMAGE_TYPE.SMALL);//小图\r\n    var bigImage = content.getImage(webim.IMAGE_TYPE.LARGE);//大图\r\n    var oriImage = content.getImage(webim.IMAGE_TYPE.ORIGIN);//原图\r\n    if (!bigImage) {\r\n        bigImage = smallImage;\r\n    }\r\n    if (!oriImage) {\r\n        oriImage = smallImage;\r\n    }\r\n    return \"<img src='\" + smallImage.getUrl() + \"#\" + bigImage.getUrl() + \"#\" + oriImage.getUrl() + \"' style='CURSOR: hand' id='\" + content.getImageId() + \"' bigImgUrl='\" + bigImage.getUrl() + \"' onclick='imageClick(this)' />\";\r\n}\r\n//解析语音消息元素\r\nfunction convertSoundMsgToHtml(content) {\r\n    var second = content.getSecond();//获取语音时长\r\n    var downUrl = content.getDownUrl();\r\n    if (webim.BROWSER_INFO.type == 'ie' && parseInt(webim.BROWSER_INFO.ver) <= 8) {\r\n        return '[这是一条语音消息]demo暂不支持ie8(含)以下浏览器播放语音,语音URL:' + downUrl;\r\n    }\r\n    return '<audio src=\"' + downUrl + '\" controls=\"controls\" onplay=\"onChangePlayAudio(this)\" preload=\"none\"></audio>';\r\n}\r\n//解析文件消息元素\r\nfunction convertFileMsgToHtml(content) {\r\n    var fileSize = Math.round(content.getSize() / 1024);\r\n    return '<a href=\"' + content.getDownUrl() + '\" title=\"点击下载文件\" ><i class=\"glyphicon glyphicon-file\">&nbsp;' + content.getName() + '(' + fileSize + 'KB)</i></a>';\r\n\r\n}\r\n//解析位置消息元素\r\nfunction convertLocationMsgToHtml(content) {\r\n    return '经度=' + content.getLongitude() + ',纬度=' + content.getLatitude() + ',描述=' + content.getDesc();\r\n}\r\n//解析自定义消息元素\r\nfunction convertCustomMsgToHtml(content) {\r\n    var data = content.getData();\r\n    var desc = content.getDesc();\r\n    var ext = content.getExt();\r\n    // return \"data=\" + data + \", desc=\" + desc + \", ext=\" + ext;\r\n    return data;\r\n}\r\n//解析群提示消息元素\r\nfunction convertGroupTipMsgToHtml(content) {\r\n    var WEB_IM_GROUP_TIP_MAX_USER_COUNT = 10;\r\n    var text = \"\";\r\n    var maxIndex = WEB_IM_GROUP_TIP_MAX_USER_COUNT - 1;\r\n    var opType, opUserId, userIdList;\r\n    var memberCount;\r\n    opType = content.getOpType();//群提示消息类型（操作类型）\r\n    opUserId = content.getOpUserId();//操作人id\r\n    switch (opType) {\r\n        case webim.GROUP_TIP_TYPE.JOIN://加入群\r\n            userIdList = content.getUserIdList();\r\n            //text += opUserId + \"邀请了\";\r\n            for (var m in userIdList) {\r\n                text += userIdList[m] + \",\";\r\n                if (userIdList.length > WEB_IM_GROUP_TIP_MAX_USER_COUNT && m == maxIndex) {\r\n                    text += \"等\" + userIdList.length + \"人\";\r\n                    break;\r\n                }\r\n            }\r\n            text = text.substring(0, text.length - 1);\r\n            text += \"进入房间\";\r\n            text += ';{\"type\":' + opType + ',\"userIdList\":\"' + userIdList.join(',') + '\"}';\r\n            //房间成员数加1\r\n            // memberCount = $('#user-icon-fans').html();\r\n            memberCount = parseInt(memberCount) + 1;\r\n            break;\r\n        case webim.GROUP_TIP_TYPE.QUIT://退出群\r\n            text += opUserId + \"离开房间\";\r\n            text += ';{\"type\":' + opType + ',\"userIdList\":\"' + opUserId + '\"}';\r\n            //房间成员数减1\r\n            if (memberCount > 0) {\r\n                memberCount = parseInt(memberCount) - 1;\r\n            }\r\n            break;\r\n        case webim.GROUP_TIP_TYPE.KICK://踢出群\r\n            text += opUserId + \"将\";\r\n            userIdList = content.getUserIdList();\r\n            for (var m in userIdList) {\r\n                text += userIdList[m] + \",\";\r\n                if (userIdList.length > WEB_IM_GROUP_TIP_MAX_USER_COUNT && m == maxIndex) {\r\n                    text += \"等\" + userIdList.length + \"人\";\r\n                    break;\r\n                }\r\n            }\r\n            text += \"踢出该群\";\r\n            break;\r\n        case webim.GROUP_TIP_TYPE.SET_ADMIN://设置管理员\r\n            text += opUserId + \"将\";\r\n            userIdList = content.getUserIdList();\r\n            for (var m in userIdList) {\r\n                text += userIdList[m] + \",\";\r\n                if (userIdList.length > WEB_IM_GROUP_TIP_MAX_USER_COUNT && m == maxIndex) {\r\n                    text += \"等\" + userIdList.length + \"人\";\r\n                    break;\r\n                }\r\n            }\r\n            text += \"设为管理员\";\r\n            break;\r\n        case webim.GROUP_TIP_TYPE.CANCEL_ADMIN://取消管理员\r\n            text += opUserId + \"取消\";\r\n            userIdList = content.getUserIdList();\r\n            for (var m in userIdList) {\r\n                text += userIdList[m] + \",\";\r\n                if (userIdList.length > WEB_IM_GROUP_TIP_MAX_USER_COUNT && m == maxIndex) {\r\n                    text += \"等\" + userIdList.length + \"人\";\r\n                    break;\r\n                }\r\n            }\r\n            text += \"的管理员资格\";\r\n            break;\r\n\r\n        case webim.GROUP_TIP_TYPE.MODIFY_GROUP_INFO://群资料变更\r\n            text += opUserId + \"修改了群资料：\";\r\n            var groupInfoList = content.getGroupInfoList();\r\n            var type, value;\r\n            for (var m in groupInfoList) {\r\n                type = groupInfoList[m].getType();\r\n                value = groupInfoList[m].getValue();\r\n                switch (type) {\r\n                    case webim.GROUP_TIP_MODIFY_GROUP_INFO_TYPE.FACE_URL:\r\n                        text += \"群头像为\" + value + \"; \";\r\n                        break;\r\n                    case webim.GROUP_TIP_MODIFY_GROUP_INFO_TYPE.NAME:\r\n                        text += \"群名称为\" + value + \"; \";\r\n                        break;\r\n                    case webim.GROUP_TIP_MODIFY_GROUP_INFO_TYPE.OWNER:\r\n                        text += \"群主为\" + value + \"; \";\r\n                        break;\r\n                    case webim.GROUP_TIP_MODIFY_GROUP_INFO_TYPE.NOTIFICATION:\r\n                        text += \"群公告为\" + value + \"; \";\r\n                        break;\r\n                    case webim.GROUP_TIP_MODIFY_GROUP_INFO_TYPE.INTRODUCTION:\r\n                        text += \"群简介为\" + value + \"; \";\r\n                        break;\r\n                    default:\r\n                        text += \"未知信息为:type=\" + type + \",value=\" + value + \"; \";\r\n                        break;\r\n                }\r\n            }\r\n            break;\r\n\r\n        case webim.GROUP_TIP_TYPE.MODIFY_MEMBER_INFO://群成员资料变更(禁言时间)\r\n            text += opUserId + \"修改了群成员资料:\";\r\n            var memberInfoList = content.getMemberInfoList();\r\n            var userId, shutupTime;\r\n            for (var m in memberInfoList) {\r\n                userId = memberInfoList[m].getUserId();\r\n                shutupTime = memberInfoList[m].getShutupTime();\r\n                text += userId + \": \";\r\n                if (shutupTime != null && shutupTime !== undefined) {\r\n                    if (shutupTime == 0) {\r\n                        text += \"取消禁言; \";\r\n                    } else {\r\n                        text += \"禁言\" + shutupTime + \"秒; \";\r\n                    }\r\n                } else {\r\n                    text += \" shutupTime为空\";\r\n                }\r\n                if (memberInfoList.length > WEB_IM_GROUP_TIP_MAX_USER_COUNT && m == maxIndex) {\r\n                    text += \"等\" + memberInfoList.length + \"人\";\r\n                    break;\r\n                }\r\n            }\r\n            break;\r\n        default:\r\n            text += \"未知群提示消息类型：type=\" + opType;\r\n            break;\r\n    }\r\n    return text;\r\n}\r\n\r\n//tls登录\r\nfunction tlsLogin() {\r\n    //跳转到TLS登录页面\r\n    console.warn('tlslogin need rewrite');\r\n    // TLSHelper.goLogin({\r\n    //     sdkappid: loginInfo.sdkAppID,\r\n    //     acctype: loginInfo.accountType,\r\n    //     url: window.location.href\r\n    // });\r\n}\r\n//第三方应用需要实现这个函数，并在这里拿到UserSig\r\nfunction tlsGetUserSig(res) {\r\n    //成功拿到凭证\r\n    if (res.ErrorCode == webim.TLS_ERROR_CODE.OK) {\r\n        //从当前URL中获取参数为identifier的值\r\n        loginInfo.identifier = webim.Tool.getQueryString(\"identifier\");\r\n\t\tapp.globalData.loginInfo.identifier = loginInfo.identifier\r\n\t\t\r\n        //拿到正式身份凭证\r\n        loginInfo.userSig = res.UserSig;\r\n\t\tapp.globalData.loginInfo.userSig = res.UserSig;\r\n\t\t\r\n        //从当前URL中获取参数为sdkappid的值\r\n        loginInfo.sdkAppID = loginInfo.appIDAt3rd = Number(webim.Tool.getQueryString(\"sdkappid\"));\r\n\t\tapp.globalData.loginInfo.sdkAppID = loginInfo.sdkAppID;\r\n\t\t\r\n        //从cookie获取accountType\r\n        var accountType = webim.Tool.getCookie('accountType');\r\n        if (accountType) {\r\n            loginInfo.accountType = accountType;\r\n\t\t\tapp.globalData.loginInfo.accountType = accountType;\r\n            sdkLogin();//sdk登录\r\n        } else {\r\n            location.href = location.href.replace(/\\?.*$/gi,\"\");\r\n        }\r\n    } else {\r\n        //签名过期，需要重新登录\r\n        if (res.ErrorCode == webim.TLS_ERROR_CODE.SIGNATURE_EXPIRATION) {\r\n            tlsLogin();\r\n        } else {\r\n            console.error(\"[\" + res.ErrorCode + \"]\" + res.ErrorInfo);\r\n        }\r\n    }\r\n}\r\n\r\n//单击图片事件\r\nfunction imageClick(imgObj) {\r\n    var imgUrls = imgObj.src;\r\n    var imgUrlArr = imgUrls.split(\"#\"); //字符分割\r\n    var smallImgUrl = imgUrlArr[0];//小图\r\n    var bigImgUrl = imgUrlArr[1];//大图\r\n    var oriImgUrl = imgUrlArr[2];//原图\r\n    webim.Log.info(\"小图url:\" + smallImgUrl);\r\n    webim.Log.info(\"大图url:\" + bigImgUrl);\r\n    webim.Log.info(\"原图url:\" + oriImgUrl);\r\n}\r\n\r\n\r\n//切换播放audio对象\r\nfunction onChangePlayAudio(obj) {\r\n    if (curPlayAudio) {//如果正在播放语音\r\n        if (curPlayAudio != obj) {//要播放的语音跟当前播放的语音不一样\r\n            curPlayAudio.currentTime = 0;\r\n            curPlayAudio.pause();\r\n            curPlayAudio = obj;\r\n        }\r\n    } else {\r\n        curPlayAudio = obj;//记录当前播放的语音\r\n    }\r\n}\r\n\r\n//单击评论图片\r\nfunction smsPicClick() {\r\n\t\r\n\tloginInfo.identifier = app.globalData.loginInfo.identifier\r\n\t\r\n    if (!loginInfo.identifier) {//未登录\r\n        if (accountMode == 1) {//托管模式\r\n            //将account_type保存到cookie中,有效期是1天\r\n\t\t\t\r\n\t\t\tloginInfo.accountType = app.globalData.loginInfo.accountType\r\n\t\t\t\r\n            webim.Tool.setCookie('accountType', loginInfo.accountType, 3600 * 24);\r\n            //调用tls登录服务\r\n            tlsLogin();\r\n        } else {//独立模式\r\n            console.error('请填写帐号和票据');\r\n        }\r\n        return;\r\n    } else {\r\n        hideDiscussTool();//隐藏评论工具栏\r\n        showDiscussForm();//显示评论表单\r\n    }\r\n}\r\n\r\n//发送消息(普通消息)\r\nfunction onSendMsg(msg,callback) {\r\n\t\r\n\tloginInfo.identifier = app.globalData.loginInfo.identifier\r\n\t\r\n    if (!loginInfo.identifier) {//未登录\r\n        if (accountMode == 1) {//托管模式\r\n            //将account_type保存到cookie中,有效期是1天\r\n\t\t\tloginInfo.accountType = app.globalData.loginInfo.accountType\r\n\t\t\t\r\n            webim.Tool.setCookie('accountType', loginInfo.accountType, 3600 * 24);\r\n            //调用tls登录服务\r\n            tlsLogin();\r\n        } else {//独立模式\r\n            console.error('请填写帐号和票据');\r\n        }\r\n        return;\r\n    }\r\n    \r\n    if (!selToID) {\r\n        console.error(\"您还没有进入房间，暂不能聊天\");\r\n        return;\r\n    }\r\n    //获取消息内容\r\n    var msgtosend = msg;\r\n    var msgLen = webim.Tool.getStrBytes(msg);\r\n\r\n    if (msgtosend.length < 1) {\r\n        console.error(\"发送的消息不能为空!\");\r\n        return;\r\n    }\r\n\r\n    var maxLen, errInfo;\r\n    if (selType == webim.SESSION_TYPE.GROUP) {\r\n        maxLen = webim.MSG_MAX_LENGTH.GROUP;\r\n        errInfo = \"消息长度超出限制(最多\" + Math.round(maxLen / 3) + \"汉字)\";\r\n    } else {\r\n        maxLen = webim.MSG_MAX_LENGTH.C2C;\r\n        errInfo = \"消息长度超出限制(最多\" + Math.round(maxLen / 3) + \"汉字)\";\r\n    }\r\n    if (msgLen > maxLen) {\r\n        console.error(errInfo);\r\n        return;\r\n    }\r\n\r\n    if (!selSess) {\r\n        selSess = new webim.Session(selType, selToID, selToID, selSessHeadUrl, Math.round(new Date().getTime() / 1000));\r\n    }\r\n    var isSend = true;//是否为自己发送\r\n    var seq = -1;//消息序列，-1表示sdk自动生成，用于去重\r\n    var random = Math.round(Math.random() * 4294967296);//消息随机数，用于去重\r\n    var msgTime = Math.round(new Date().getTime() / 1000);//消息时间戳\r\n    var subType;//消息子类型\r\n    if (selType == webim.SESSION_TYPE.GROUP) {\r\n        //群消息子类型如下：\r\n        //webim.GROUP_MSG_SUB_TYPE.COMMON-普通消息,\r\n        //webim.GROUP_MSG_SUB_TYPE.LOVEMSG-点赞消息，优先级最低\r\n        //webim.GROUP_MSG_SUB_TYPE.TIP-提示消息(不支持发送，用于区分群消息子类型)，\r\n        //webim.GROUP_MSG_SUB_TYPE.REDPACKET-红包消息，优先级最高\r\n        subType = webim.GROUP_MSG_SUB_TYPE.COMMON;\r\n\r\n    } else {\r\n        //C2C消息子类型如下：\r\n        //webim.C2C_MSG_SUB_TYPE.COMMON-普通消息,\r\n        subType = webim.C2C_MSG_SUB_TYPE.COMMON;\r\n    }\r\n\t\r\n\tloginInfo.identifier = app.globalData.loginInfo.identifier\r\n\tloginInfo.identifierNick = app.globalData.loginInfo.identifierNick\r\n\t\r\n    var msg = new webim.Msg(selSess, isSend, seq, random, msgTime, loginInfo.identifier, subType, loginInfo.identifierNick);\r\n    //解析文本和表情\r\n    var expr = /\\[[^[\\]]{1,3}\\]/mg;\r\n    var emotions = msgtosend.match(expr);\r\n    var text_obj, face_obj, tmsg, emotionIndex, emotion, restMsgIndex;\r\n    if (!emotions || emotions.length < 1) {\r\n        text_obj = new webim.Msg.Elem.Text(msgtosend);\r\n        msg.addText(text_obj);\r\n    } else {//有表情\r\n\r\n        for (var i = 0; i < emotions.length; i++) {\r\n            tmsg = msgtosend.substring(0, msgtosend.indexOf(emotions[i]));\r\n            if (tmsg) {\r\n                text_obj = new webim.Msg.Elem.Text(tmsg);\r\n                msg.addText(text_obj);\r\n            }\r\n            emotionIndex = webim.EmotionDataIndexs[emotions[i]];\r\n            emotion = webim.Emotions[emotionIndex];\r\n            if (emotion) {\r\n                face_obj = new webim.Msg.Elem.Face(emotionIndex, emotions[i]);\r\n                msg.addFace(face_obj);\r\n            } else {\r\n                text_obj = new webim.Msg.Elem.Text(emotions[i]);\r\n                msg.addText(text_obj);\r\n            }\r\n            restMsgIndex = msgtosend.indexOf(emotions[i]) + emotions[i].length;\r\n            msgtosend = msgtosend.substring(restMsgIndex);\r\n        }\r\n        if (msgtosend) {\r\n            text_obj = new webim.Msg.Elem.Text(msgtosend);\r\n            msg.addText(text_obj);\r\n        }\r\n    }\r\n\r\n    webim.sendMsg(msg, function (resp) {\r\n        if (selType == webim.SESSION_TYPE.C2C) {//私聊时，在聊天窗口手动添加一条发的消息，群聊时，长轮询接口会返回自己发的消息\r\n            showMsg(msg);\r\n        }\r\n        webim.Log.info(\"发消息成功\");\r\n        callback && callback();\r\n\r\n        //hideDiscussForm();//隐藏评论表单\r\n        //showDiscussTool();//显示评论工具栏\r\n        //hideDiscussEmotion();//隐藏表情\r\n    }, function (err) {\r\n        webim.Log.error(\"发消息失败:\" + err.ErrorInfo);\r\n        console.error(\"发消息失败:\" + err.ErrorInfo);\r\n    });\r\n}\r\n\r\nfunction sendC2CCustomMsg(toUserID, msg, callback) {\r\n\r\n\t\r\n\tloginInfo.identifier = app.globalData.loginInfo.identifier\r\n\t\r\n    if (!loginInfo.identifier) {//未登录\r\n        if (accountMode == 1) {//托管模式\r\n            //将account_type保存到cookie中,有效期是1天\r\n\t\t\t\r\n\t\t\tloginInfo.accountType = app.globalData.loginInfo.accountType\r\n\t\t\t\r\n            webim.Tool.setCookie('accountType', loginInfo.accountType, 3600 * 24);\r\n            //调用tls登录服务\r\n            tlsLogin();\r\n        } else {//独立模式\r\n            console.error('请填写帐号和票据');\r\n        }\r\n        return;\r\n    } \r\n\r\n   // custom消息\r\n   var data = msg.data || '';\r\n   var desc = msg.desc || '';\r\n   var ext = msg.ext || '';\r\n\r\n   var msgLen = webim.Tool.getStrBytes(data); \r\n\r\n   var maxLen = webim.MSG_MAX_LENGTH.C2C;\r\n   var errInfo = \"消息长度超出限制(最多\" + Math.round(maxLen / 3) + \"汉字)\";\r\n   if (msgLen > maxLen) {\r\n        alert(errInfo);\r\n        return;\r\n    }\r\n\r\n    var session = new webim.Session(webim.SESSION_TYPE.C2C, toUserID, toUserID, '', Math.round(new Date().getTime() / 1000));\r\n\r\n    var isSend = true;//是否为自己发送\r\n    var seq = -1;//消息序列，-1表示sdk自动生成，用于去重\r\n    var random = Math.round(Math.random() * 4294967296);//消息随机数，用于去重\r\n    var msgTime = Math.round(new Date().getTime() / 1000);//消息时间戳\r\n    var subType = webim.C2C_MSG_SUB_TYPE.COMMON;//消息子类型 \r\n    \r\n\t\r\n\tloginInfo.identifier = app.globalData.loginInfo.identifier\r\n\tloginInfo.identifierNick = app.globalData.loginInfo.identifierNick\r\n\t\r\n    var msg = new webim.Msg(session, isSend, seq, random, msgTime, loginInfo.identifier, subType, loginInfo.identifierNick);\r\n\r\n    var custom_obj = new webim.Msg.Elem.Custom(data, desc, ext);\r\n    msg.addCustom(custom_obj);\r\n\r\n    //调用发送消息接口\r\n    webim.sendMsg(msg, function (resp) {\r\n        webim.Log.info(\"发自定义消息成功\");\r\n        console.log('发自定义消息成功');\r\n        callback && callback({\r\n            errCode: 0,\r\n            errMsg: \"\"\r\n        });\r\n    }, function (err) {\r\n        webim.Log.info(err.ErrorInfo);\r\n        console.log('发自定义消息失败:', err);\r\n        callback && callback({\r\n            errCode: -1,\r\n            errMsg: '发自定义消息失败:' + err.ErrorInfo\r\n        });\r\n    });\r\n}\r\n\r\n/**\r\n * 发送自定义消息\r\n * 一条custom消息+一条text消息\r\n * 自定义，用于携带头像与昵称（其他端使用精简版text不能携带）\r\n */\r\nfunction sendCustomMsg(msg,callback) {\r\n\tloginInfo.identifier = app.globalData.loginInfo.identifier\r\n\t\t\t\r\n\r\n    if (!loginInfo.identifier) {//未登录\r\n        if (accountMode == 1) {//托管模式\r\n            //将account_type保存到cookie中,有效期是1天\r\n\t\t\t\r\n\t\t\tloginInfo.accountType = app.globalData.loginInfo.accountType\r\n\t\t\t\r\n            webim.Tool.setCookie('accountType', loginInfo.accountType, 3600 * 24);\r\n            //调用tls登录服务\r\n            tlsLogin();\r\n        } else {//独立模式\r\n            console.error('请填写帐号和票据');\r\n        }\r\n        return;\r\n    }\r\n\r\n    if (!selToID) {\r\n        console.error(\"您还没有进入房间，暂不能聊天\");\r\n        return;\r\n    }\r\n    \r\n    // custom消息\r\n    var data = msg.data || '';\r\n    var desc = msg.desc || '';\r\n    var ext = msg.ext || '';\r\n\r\n    var msgLen = webim.Tool.getStrBytes(data);\r\n\r\n    if (data.length < 1) {\r\n        alert(\"发送的消息不能为空!\");\r\n        return;\r\n    }\r\n    var maxLen, errInfo;\r\n    if (selType == webim.SESSION_TYPE.C2C) {\r\n        maxLen = webim.MSG_MAX_LENGTH.C2C;\r\n        errInfo = \"消息长度超出限制(最多\" + Math.round(maxLen / 3) + \"汉字)\";\r\n    } else {\r\n        maxLen = webim.MSG_MAX_LENGTH.GROUP;\r\n        errInfo = \"消息长度超出限制(最多\" + Math.round(maxLen / 3) + \"汉字)\";\r\n    }\r\n    if (msgLen > maxLen) {\r\n        alert(errInfo);\r\n        return;\r\n    }\r\n\r\n    // text消息\r\n    var msgtosend = msg.text;\r\n    var msgLen = webim.Tool.getStrBytes(msg.text);\r\n\r\n    if (msgtosend.length < 1) {\r\n        console.error(\"发送的消息不能为空!\");\r\n        return;\r\n    }\r\n\r\n    var maxLen, errInfo;\r\n    if (selType == webim.SESSION_TYPE.GROUP) {\r\n        maxLen = webim.MSG_MAX_LENGTH.GROUP;\r\n        errInfo = \"消息长度超出限制(最多\" + Math.round(maxLen / 3) + \"汉字)\";\r\n    } else {\r\n        maxLen = webim.MSG_MAX_LENGTH.C2C;\r\n        errInfo = \"消息长度超出限制(最多\" + Math.round(maxLen / 3) + \"汉字)\";\r\n    }\r\n    if (msgLen > maxLen) {\r\n        console.error(errInfo);\r\n        return;\r\n    }\r\n\r\n    if (!selSess) {\r\n        selSess = new webim.Session(selType, selToID, selToID, selSessHeadUrl, Math.round(new Date().getTime() / 1000));\r\n    }\r\n\t\r\n\t\r\n    var isSend = true;//是否为自己发送\r\n    var seq = -1;//消息序列，-1表示sdk自动生成，用于去重\r\n    var random = Math.round(Math.random() * 4294967296);//消息随机数，用于去重\r\n    var msgTime = Math.round(new Date().getTime() / 1000);//消息时间戳\r\n    var subType;//消息子类型\r\n    if (selType == webim.SESSION_TYPE.GROUP) {\r\n        //群消息子类型如下：\r\n        //webim.GROUP_MSG_SUB_TYPE.COMMON-普通消息,\r\n        //webim.GROUP_MSG_SUB_TYPE.LOVEMSG-点赞消息，优先级最低\r\n        //webim.GROUP_MSG_SUB_TYPE.TIP-提示消息(不支持发送，用于区分群消息子类型)，\r\n        //webim.GROUP_MSG_SUB_TYPE.REDPACKET-红包消息，优先级最高\r\n        subType = webim.GROUP_MSG_SUB_TYPE.COMMON;\r\n\r\n    } else {\r\n        //C2C消息子类型如下：\r\n        //webim.C2C_MSG_SUB_TYPE.COMMON-普通消息,\r\n        subType = webim.C2C_MSG_SUB_TYPE.COMMON;\r\n    }\r\n\t\r\n\t\r\n\tloginInfo.identifier = app.globalData.loginInfo.identifier\r\n\tloginInfo.identifierNick = app.globalData.loginInfo.identifierNick\r\n    var msg = new webim.Msg(selSess, isSend, seq, random, msgTime, loginInfo.identifier, subType, loginInfo.identifierNick);\r\n    \r\n    var custom_obj = new webim.Msg.Elem.Custom(data, desc, ext);\r\n    msg.addCustom(custom_obj);\r\n\r\n    //解析文本和表情\r\n    var expr = /\\[[^[\\]]{1,3}\\]/mg;\r\n    var emotions = msgtosend.match(expr);\r\n    var text_obj, face_obj, tmsg, emotionIndex, emotion, restMsgIndex;\r\n    if (!emotions || emotions.length < 1) {\r\n        text_obj = new webim.Msg.Elem.Text(msgtosend);\r\n        msg.addText(text_obj);\r\n    } else {//有表情\r\n        for (var i = 0; i < emotions.length; i++) {\r\n            tmsg = msgtosend.substring(0, msgtosend.indexOf(emotions[i]));\r\n            if (tmsg) {\r\n                text_obj = new webim.Msg.Elem.Text(tmsg);\r\n                msg.addText(text_obj);\r\n            }\r\n            emotionIndex = webim.EmotionDataIndexs[emotions[i]];\r\n            emotion = webim.Emotions[emotionIndex];\r\n            if (emotion) {\r\n                face_obj = new webim.Msg.Elem.Face(emotionIndex, emotions[i]);\r\n                msg.addFace(face_obj);\r\n            } else {\r\n                text_obj = new webim.Msg.Elem.Text(emotions[i]);\r\n                msg.addText(text_obj);\r\n            }\r\n            restMsgIndex = msgtosend.indexOf(emotions[i]) + emotions[i].length;\r\n            msgtosend = msgtosend.substring(restMsgIndex);\r\n        }\r\n        if (msgtosend) {\r\n            text_obj = new webim.Msg.Elem.Text(msgtosend);\r\n            msg.addText(text_obj);\r\n        }\r\n    }\r\n    //调用发送消息接口\r\n    webim.sendMsg(msg, function (resp) {\r\n        if(selType==webim.SESSION_TYPE.C2C){//私聊时，在聊天窗口手动添加一条发的消息，群聊时，长轮询接口会返回自己发的消息\r\n            addMsg(msg);\r\n        }\r\n        webim.Log.info(\"发自定义消息成功\");\r\n        console.log('发自定义消息成功');\r\n        callback && callback();\r\n    }, function (err) {\r\n        webim.Log.info(err.ErrorInfo);\r\n        console.log('发自定义消息失败:',err);\r\n    });\r\n}\r\n\r\n//发送消息(群点赞消息)\r\nfunction sendGroupLoveMsg() {\r\n\r\n\tloginInfo.identifier = app.globalData.loginInfo.identifier\r\n\t\r\n    if (!loginInfo.identifier) {//未登录\r\n        if (accountMode == 1) {//托管模式\r\n            //将account_type保存到cookie中,有效期是1天\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tloginInfo.accountType = app.globalData.loginInfo.accountType\r\n\t\t\t\r\n            webim.Tool.setCookie('accountType', loginInfo.accountType, 3600 * 24);\r\n            //调用tls登录服务\r\n            tlsLogin();\r\n        } else {//独立模式\r\n            console.error('请填写帐号和票据');\r\n        }\r\n        return;\r\n    }\r\n\r\n    if (!selToID) {\r\n        console.error(\"您还没有进入房间，暂不能点赞\");\r\n        return;\r\n    }\r\n\r\n    if (!selSess) {\r\n        selSess = new webim.Session(selType, selToID, selToID, selSessHeadUrl, Math.round(new Date().getTime() / 1000));\r\n    }\r\n    var isSend = true;//是否为自己发送\r\n    var seq = -1;//消息序列，-1表示sdk自动生成，用于去重\r\n    var random = Math.round(Math.random() * 4294967296);//消息随机数，用于去重\r\n    var msgTime = Math.round(new Date().getTime() / 1000);//消息时间戳\r\n    //群消息子类型如下：\r\n    //webim.GROUP_MSG_SUB_TYPE.COMMON-普通消息,\r\n    //webim.GROUP_MSG_SUB_TYPE.LOVEMSG-点赞消息，优先级最低\r\n    //webim.GROUP_MSG_SUB_TYPE.TIP-提示消息(不支持发送，用于区分群消息子类型)，\r\n    //webim.GROUP_MSG_SUB_TYPE.REDPACKET-红包消息，优先级最高\r\n    var subType = webim.GROUP_MSG_SUB_TYPE.LOVEMSG;\r\n\r\n\r\n\t\t\t\r\n\t\t\tloginInfo.identifier = app.globalData.loginInfo.identifier\r\n\t\t\tloginInfo.identifierNick = app.globalData.loginInfo.identifierNick\r\n\t\t\t\r\n\r\n    var msg = new webim.Msg(selSess, isSend, seq, random, msgTime, loginInfo.identifier, subType, loginInfo.identifierNick);\r\n    var msgtosend = 'love_msg';\r\n    var text_obj = new webim.Msg.Elem.Text(msgtosend);\r\n    msg.addText(text_obj);\r\n\r\n    webim.sendMsg(msg, function (resp) {\r\n        if (selType == webim.SESSION_TYPE.C2C) {//私聊时，在聊天窗口手动添加一条发的消息，群聊时，长轮询接口会返回自己发的消息\r\n            showMsg(msg);\r\n        }\r\n        webim.Log.info(\"点赞成功\");\r\n    }, function (err) {\r\n        webim.Log.error(\"发送点赞消息失败:\" + err.ErrorInfo);\r\n        console.error(\"发送点赞消息失败:\" + err.ErrorInfo);\r\n    });\r\n}\r\n//隐藏评论文本框\r\nfunction hideDiscussForm() {\r\n    //$(\".video-discuss-form\").hide();\r\n}\r\n//显示评论文本框\r\nfunction showDiscussForm() {\r\n    //$(\".video-discuss-form\").show();\r\n}\r\n//隐藏评论工具栏\r\nfunction hideDiscussTool() {\r\n    //$(\".video-discuss-tool\").hide();\r\n}\r\n//显示评论工具栏\r\nfunction showDiscussTool() {\r\n    //$(\".video-discuss-tool\").show();\r\n}\r\n//隐藏表情框\r\nfunction hideDiscussEmotion() {\r\n    //$(\".video-discuss-emotion\").hide();\r\n    ////$(\".video-discuss-emotion\").fadeOut(\"slow\");\r\n}\r\n//显示表情框\r\nfunction showDiscussEmotion() {\r\n    //$(\".video-discuss-emotion\").show();\r\n    //$(\".video-discuss-emotion\").fadeIn(\"slow\");\r\n\r\n}\r\n//展示点赞动画\r\nfunction showLoveMsgAnimation() {\r\n    //点赞数加1\r\n    // var loveCount = $('#user-icon-like').html();\r\n    // $('#user-icon-like').html(parseInt(loveCount) + 1);\r\n    // var toolDiv = document.getElementById(\"video-discuss-tool\");\r\n    // var loveSpan = document.createElement(\"span\");\r\n    // var colorList = ['red', 'green', 'blue'];\r\n    // var max = colorList.length - 1;\r\n    // var min = 0;\r\n    // var index = parseInt(Math.random() * (max - min + 1) + min, max + 1);\r\n    // var color = colorList[index];\r\n    // loveSpan.setAttribute('class', 'like-icon zoomIn ' + color);\r\n    // toolDiv.appendChild(loveSpan);\r\n}\r\n\r\n//初始化表情\r\nfunction initEmotionUL() {\r\n    return;\r\n    for (var index in webim.Emotions) {\r\n        var emotions = $('<img>').attr({\r\n            \"id\": webim.Emotions[index][0],\r\n            \"src\": webim.Emotions[index][1],\r\n            \"style\": \"cursor:pointer;\"\r\n        }).click(function () {\r\n            selectEmotionImg(this);\r\n        });\r\n        $('<li>').append(emotions).appendTo($('#emotionUL'));\r\n    }\r\n}\r\n\r\n//打开或显示表情\r\nfunction showEmotionDialog() {\r\n    if (openEmotionFlag) {//如果已经打开\r\n        openEmotionFlag = false;\r\n        hideDiscussEmotion();//关闭\r\n    } else {//如果未打开\r\n        openEmotionFlag = true;\r\n        showDiscussEmotion();//打开\r\n    }\r\n}\r\n//选中表情\r\nfunction selectEmotionImg(selImg) {\r\n    $(\"#send_msg_text\").val($(\"#send_msg_text\").val() + selImg.id);\r\n}\r\n\r\n// 解散群\r\nfunction destroyGroup() {\r\n    var options = {\r\n        'GroupId': avChatRoomId,//群id\r\n        Type: 'AVChatRoom'\r\n    };\r\n    webim.destroyGroup(\r\n        options,\r\n        function(ret){\r\n            webim.Log.info('解散群成功');\r\n            selSess = null;\r\n        }\r\n    ); \r\n}\r\n\r\n\r\n//退出大群\r\nfunction quitBigGroup() {\r\n    var options = {\r\n        'GroupId': avChatRoomId//群id\r\n    };\r\n    webim.quitBigGroup(\r\n        options,\r\n        function (resp) {\r\n\r\n            webim.Log.info('退群成功');\r\n            console.log('IM退群成功');\r\n            selSess = null;\r\n            //webim.Log.error('进入另一个大群:'+avChatRoomId2);\r\n            //applyJoinBigGroup(avChatRoomId2);//加入大群\r\n        },\r\n        function (err) {\r\n            console.error(err.ErrorInfo);\r\n        }\r\n    );\r\n}\r\n\r\n//登出\r\nfunction logout() {\r\n    //登出\r\n    webim.logout(\r\n        function (resp) {\r\n            webim.Log.info('登出成功');\r\n            console.log('IM登出成功');\r\n\t\t\t\r\n\t\t\t\r\n            if(loginInfo) {\r\n                loginInfo.identifier = null;\r\n                loginInfo.userSig = null;\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tapp.globalData.loginInfo.identifier = null\r\n\t\t\t\tapp.globalData.loginInfo.userSig = null\r\n\t\t\t\t\r\n            }\r\n            selSess = null;\r\n        }\r\n    );\r\n}\r\n\r\n\r\n\r\n//监听 申请加群 系统消息\r\nfunction onApplyJoinGroupRequestNotify(notify) {\r\n    webim.Log.warn(\"执行 加群申请 回调：\" + JSON.stringify(notify));\r\n    var timestamp = notify.MsgTime;\r\n    var reportTypeCh = \"[申请加群]\";\r\n    var content = notify.Operator_Account + \"申请加入你的群\";\r\n    showGroupSystemMsg(notify.ReportType, reportTypeCh, notify.GroupId, notify.GroupName, content, timestamp);\r\n}\r\n\r\n//监听 申请加群被同意 系统消息\r\nfunction onApplyJoinGroupAcceptNotify(notify) {\r\n    webim.Log.warn(\"执行 申请加群被同意 回调：\" + JSON.stringify(notify));\r\n    var reportTypeCh = \"[申请加群被同意]\";\r\n    var content = notify.Operator_Account + \"同意你的加群申请，附言：\" + notify.RemarkInfo;\r\n    showGroupSystemMsg(notify.ReportType, reportTypeCh, notify.GroupId, notify.GroupName, content, notify.MsgTime);\r\n}\r\n//监听 申请加群被拒绝 系统消息\r\nfunction onApplyJoinGroupRefuseNotify(notify) {\r\n    webim.Log.warn(\"执行 申请加群被拒绝 回调：\" + JSON.stringify(notify));\r\n    var reportTypeCh = \"[申请加群被拒绝]\";\r\n    var content = notify.Operator_Account + \"拒绝了你的加群申请，附言：\" + notify.RemarkInfo;\r\n    showGroupSystemMsg(notify.ReportType, reportTypeCh, notify.GroupId, notify.GroupName, content, notify.MsgTime);\r\n}\r\n//监听 被踢出群 系统消息\r\nfunction onKickedGroupNotify(notify) {\r\n    webim.Log.warn(\"执行 被踢出群  回调：\" + JSON.stringify(notify));\r\n    var reportTypeCh = \"[被踢出群]\";\r\n    var content = \"你被管理员\" + notify.Operator_Account + \"踢出该群\";\r\n    showGroupSystemMsg(notify.ReportType, reportTypeCh, notify.GroupId, notify.GroupName, content, notify.MsgTime);\r\n}\r\n//监听 解散群 系统消息\r\nfunction onDestoryGroupNotify(notify) {\r\n    webim.Log.warn(\"执行 解散群 回调：\" + JSON.stringify(notify));\r\n    var reportTypeCh = \"[群被解散]\";\r\n    var content = \"群主\" + notify.Operator_Account + \"已解散该群\";\r\n    showGroupSystemMsg(notify.ReportType, reportTypeCh, notify.GroupId, notify.GroupName, content, notify.MsgTime);\r\n}\r\n//监听 创建群 系统消息\r\nfunction onCreateGroupNotify(notify) {\r\n    webim.Log.warn(\"执行 创建群 回调：\" + JSON.stringify(notify));\r\n    var reportTypeCh = \"[创建群]\";\r\n    var content = \"你创建了该群\";\r\n    showGroupSystemMsg(notify.ReportType, reportTypeCh, notify.GroupId, notify.GroupName, content, notify.MsgTime);\r\n}\r\n//监听 被邀请加群 系统消息\r\nfunction onInvitedJoinGroupNotify(notify) {\r\n    webim.Log.warn(\"执行 被邀请加群  回调: \" + JSON.stringify(notify));\r\n    var reportTypeCh = \"[被邀请加群]\";\r\n    var content = \"你被管理员\" + notify.Operator_Account + \"邀请加入该群\";\r\n    showGroupSystemMsg(notify.ReportType, reportTypeCh, notify.GroupId, notify.GroupName, content, notify.MsgTime);\r\n}\r\n//监听 主动退群 系统消息\r\nfunction onQuitGroupNotify(notify) {\r\n    webim.Log.warn(\"执行 主动退群  回调： \" + JSON.stringify(notify));\r\n    var reportTypeCh = \"[主动退群]\";\r\n    var content = \"你退出了该群\";\r\n    showGroupSystemMsg(notify.ReportType, reportTypeCh, notify.GroupId, notify.GroupName, content, notify.MsgTime);\r\n}\r\n//监听 被设置为管理员 系统消息\r\nfunction onSetedGroupAdminNotify(notify) {\r\n    webim.Log.warn(\"执行 被设置为管理员  回调：\" + JSON.stringify(notify));\r\n    var reportTypeCh = \"[被设置为管理员]\";\r\n    var content = \"你被群主\" + notify.Operator_Account + \"设置为管理员\";\r\n    showGroupSystemMsg(notify.ReportType, reportTypeCh, notify.GroupId, notify.GroupName, content, notify.MsgTime);\r\n}\r\n//监听 被取消管理员 系统消息\r\nfunction onCanceledGroupAdminNotify(notify) {\r\n    webim.Log.warn(\"执行 被取消管理员 回调：\" + JSON.stringify(notify));\r\n    var reportTypeCh = \"[被取消管理员]\";\r\n    var content = \"你被群主\" + notify.Operator_Account + \"取消了管理员资格\";\r\n    showGroupSystemMsg(notify.ReportType, reportTypeCh, notify.GroupId, notify.GroupName, content, notify.MsgTime);\r\n}\r\n//监听 群被回收 系统消息\r\nfunction onRevokeGroupNotify(notify) {\r\n    webim.Log.warn(\"执行 群被回收 回调：\" + JSON.stringify(notify));\r\n    var reportTypeCh = \"[群被回收]\";\r\n    var content = \"该群已被回收\";\r\n    showGroupSystemMsg(notify.ReportType, reportTypeCh, notify.GroupId, notify.GroupName, content, notify.MsgTime);\r\n}\r\n//监听 用户自定义 群系统消息\r\nfunction onCustomGroupNotify(notify) {\r\n    webim.Log.warn(\"执行 用户自定义系统消息 回调：\" + JSON.stringify(notify));\r\n    var reportTypeCh = \"[用户自定义系统消息]\";\r\n    var content = notify.UserDefinedField;//群自定义消息数据\r\n    showGroupSystemMsg(notify.ReportType, reportTypeCh, notify.GroupId, notify.GroupName, content, notify.MsgTime);\r\n}\r\n\r\n//监听 群资料变化 群提示消息\r\nfunction onGroupInfoChangeNotify(groupInfo) {\r\n    webim.Log.warn(\"执行 群资料变化 回调： \" + JSON.stringify(groupInfo));\r\n    var groupId = groupInfo.GroupId;\r\n    var newFaceUrl = groupInfo.GroupFaceUrl;//新群组图标, 为空，则表示没有变化\r\n    var newName = groupInfo.GroupName;//新群名称, 为空，则表示没有变化\r\n    var newOwner = groupInfo.OwnerAccount;//新的群主id, 为空，则表示没有变化\r\n    var newNotification = groupInfo.GroupNotification;//新的群公告, 为空，则表示没有变化\r\n    var newIntroduction = groupInfo.GroupIntroduction;//新的群简介, 为空，则表示没有变化\r\n\r\n    if (newName) {\r\n        //更新群组列表的群名称\r\n        //To do\r\n        webim.Log.warn(\"群id=\" + groupId + \"的新名称为：\" + newName);\r\n    }\r\n}\r\n\r\n//显示一条群组系统消息\r\nfunction showGroupSystemMsg(type, typeCh, group_id, group_name, msg_content, msg_time) {\r\n    var sysMsgStr = \"收到一条群系统消息: type=\" + type + \", typeCh=\" + typeCh + \",群ID=\" + group_id + \", 群名称=\" + group_name + \", 内容=\" + msg_content + \", 时间=\" + webim.Tool.formatTimeStamp(msg_time);\r\n    webim.Log.warn(sysMsgStr);\r\n    console.error(sysMsgStr);\r\n}\r\n\r\nfunction init(opts){\r\n\t\r\n\t\r\n    accountMode = opts.accountMode;\r\n    accountType = opts.accountType;\r\n    sdkAppID = opts.sdkAppID;\r\n    avChatRoomId = opts.avChatRoomId || 0;\r\n    selType = opts.selType;\r\n    selToID = opts.selToID;\r\n}\r\n\r\nmodule.exports = {\r\n    init : init,\r\n    onBigGroupMsgNotify : onBigGroupMsgNotify,\r\n    onMsgNotify : onMsgNotify,\r\n    handlderMsg : handlderMsg,\r\n    sdkLogin : sdkLogin,\r\n    createBigGroup : createBigGroup,\r\n    applyJoinBigGroup : applyJoinBigGroup,\r\n    showMsg : showMsg,\r\n    convertMsgtoHtml : convertMsgtoHtml,\r\n    convertTextMsgToHtml : convertTextMsgToHtml,\r\n    convertFaceMsgToHtml : convertFaceMsgToHtml,\r\n    convertImageMsgToHtml : convertImageMsgToHtml,\r\n    convertSoundMsgToHtml : convertSoundMsgToHtml,\r\n    convertFileMsgToHtml : convertFileMsgToHtml,\r\n    convertLocationMsgToHtml : convertLocationMsgToHtml,\r\n    convertCustomMsgToHtml : convertCustomMsgToHtml,\r\n    convertGroupTipMsgToHtml : convertGroupTipMsgToHtml,\r\n    tlsLogin : tlsLogin,\r\n    tlsGetUserSig : tlsGetUserSig,\r\n    imageClick : imageClick,\r\n    onChangePlayAudio : onChangePlayAudio,\r\n    smsPicClick : smsPicClick,\r\n    onSendMsg : onSendMsg,\r\n    sendCustomMsg : sendCustomMsg,\r\n    sendC2CCustomMsg : sendC2CCustomMsg,\r\n    sendGroupLoveMsg : sendGroupLoveMsg,\r\n    hideDiscussForm : hideDiscussForm,\r\n    showDiscussForm : showDiscussForm,\r\n    hideDiscussTool : hideDiscussTool,\r\n    showDiscussTool : showDiscussTool,\r\n    hideDiscussEmotion : hideDiscussEmotion,\r\n    showDiscussEmotion : showDiscussEmotion,\r\n    showLoveMsgAnimation : showLoveMsgAnimation,\r\n    initEmotionUL : initEmotionUL,\r\n    showEmotionDialog : showEmotionDialog,\r\n    selectEmotionImg : selectEmotionImg,\r\n    quitBigGroup : quitBigGroup,\r\n    destroyGroup : destroyGroup,\r\n    logout : logout,\r\n    onApplyJoinGroupRequestNotify : onApplyJoinGroupRequestNotify,\r\n    onApplyJoinGroupAcceptNotify : onApplyJoinGroupAcceptNotify,\r\n    onApplyJoinGroupRefuseNotify : onApplyJoinGroupRefuseNotify,\r\n    onKickedGroupNotify : onKickedGroupNotify,\r\n    onDestoryGroupNotify : onDestoryGroupNotify,\r\n    onCreateGroupNotify : onCreateGroupNotify,\r\n    onInvitedJoinGroupNotify : onInvitedJoinGroupNotify,\r\n    onQuitGroupNotify : onQuitGroupNotify,\r\n    onSetedGroupAdminNotify : onSetedGroupAdminNotify,\r\n    onCanceledGroupAdminNotify : onCanceledGroupAdminNotify,\r\n    onRevokeGroupNotify : onRevokeGroupNotify,\r\n    onCustomGroupNotify : onCustomGroupNotify,\r\n    onGroupInfoChangeNotify : onGroupInfoChangeNotify,\r\n    showGroupSystemMsg : showGroupSystemMsg\r\n};","let main = {}\r\nmain.url = \"https://qiketang.shengbokj.com/\"\r\nmain.ImgUrl = \"https://qiketang.shengbokj.com/\"\r\nmain.userID = ''\r\nmain.openID = ''\r\nmain.SdkAppid = ''\r\n\r\nmain.tid = ''\r\nmain.t_order = \"/teacher/t_order/index\";\r\nmain.t_course = \"/teacher/t_course/index\";\r\nmain.t_personal = \"/teacher/t_personal/index\";\r\n// 跳转页面\r\nmain.pageJump = function(url, tab) {\r\n\tif (tab) {\r\n\t\tuni.switchTab({\r\n\t\t\turl: url\r\n\t\t})\r\n\t} else {\r\n\t\tuni.navigateTo({\r\n\t\t\turl: url\r\n\t\t})\r\n\t}\r\n}\r\nmain.redirectTo = function(url) {\r\n\tuni.redirectTo({\r\n\t\turl: url\r\n\t})\r\n}\r\n//返回上一页\r\nmain.navigateBack = function(num) {\r\n\tsetTimeout(function() {\r\n\t\tuni.navigateBack({\r\n\t\t\tdelta: num\r\n\t\t})\r\n\t}, 2000)\r\n}\r\n// 弹窗提示\r\nmain.showToast = function(title) {\r\n\tuni.showToast({\r\n\t\ttitle,\r\n\t\ticon: 'none',\r\n\t\tduration: 2000,\r\n\t\tmask: true,\r\n\t})\r\n} // 检验手机号\r\nmain.isPhoneNumber = function(number) {\r\n\tvar reg = /^1[3,4,5,7,8,9]\\d{9}$/;\r\n\tif (!reg.test(number)) {\r\n\t\treturn false\r\n\t} else {\r\n\t\treturn true\r\n\t}\r\n}\r\n//去登陆\r\nmain.toLoing = function() {\r\n\tuni.showModal({\r\n\t\ttitle: '暂未登陆',\r\n\t\tcontent: '检测到您暂未登陆，马上去登陆吧！',\r\n\t\tcancelText: '随便看看',\r\n\t\tconfirmText: '去登陆',\r\n\t\tconfirmColor: '#3FCB85',\r\n\t\tsuccess: function(res) {\r\n\t\t\tif (res.confirm) {\r\n\t\t\t\tconsole.log('用户点击确定');\r\n\t\t\t\tmain.pageJump('/pages/user_S/user', true)\r\n\t\t\t} else if (res.cancel) {\r\n\t\t\t\tconsole.log('用户点击取消');\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}\r\nexport default main\r\n","import main from '../main/main'\r\nmodule.exports = {\r\n\t// GET请求\r\n\tGet(url, data = {}) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: '加载中...',\r\n\t\t\t\tmask: true\r\n\t\t\t})\r\n\t\t\tuni.request({\r\n\t\t\t\turl: main.url + url,\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\tdata: data,\r\n\t\t\t\tsuccess(res) {\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\tif (res.data.code === 1) {\r\n\t\t\t\t\t\tresolve(res.data.data)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tmain.showToast(res.data.msg)\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail(err) {\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\tmain.showToast('网络出现异常')\r\n\t\t\t\t\treject(err)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t},\r\n\t// POST请求\r\n\tPost(url, data = {}) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: '加载中...',\r\n\t\t\t\tmask: true\r\n\t\t\t})\r\n\t\t\tuni.request({\r\n\t\t\t\turl: main.url + url,\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tdata: data,\r\n\t\t\t\t// header:{\r\n\t\t\t\t\t// 'content-type':'application/x-www-form-urlencoded',\r\n\t\t\t\t\t// 'content-type':'application/x-www-form-urlencoded'\r\n\t\t\t\t// },\r\n\t\t\t\tsuccess(res) {\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\tif (res.data.code === 1) {\r\n\t\t\t\t\t\tresolve(res.data.data)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif(url === \"xqcommentList\" ){\r\n\t\t\t\t\t\t\tmain.showToast('暂无更多评论')\r\n\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(data.page === undefined){\r\n\t\t\t\t\t\t\tif(res.data.msg !== ''){\r\n\t\t\t\t\t\t\t\tmain.showToast(res.data.msg)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tmain.showToast('下面没有了')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail(err) {\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t// main.showToast('网络出现异常')\r\n\t\t\t\t\treject(err)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t},\r\n\t// 选择图片\r\n\tChooseImage(num = {}) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tuni.chooseImage({\r\n\t\t\t\tcount: num,\r\n\t\t\t\tsizeType: ['original', 'compressed'],\r\n\t\t\t\tsourceType: ['album', 'camera'],\r\n\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t// tempFilePath可以作为img标签的src属性显示图片\r\n\t\t\t\t\tconst tempFilePaths = res.tempFilePaths\r\n\t\t\t\t\tresolve(tempFilePaths)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t},\r\n\t//上传图片\r\n\tuploadImg(list = {}) {\r\n\t\tconsole.log(list)\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: '上传中...',\r\n\t\t\t\tmask: true\r\n\t\t\t})\r\n\t\t\tlet arr = []\r\n\t\t\tfor (let index = 0; index < list.length; index++) {\r\n\t\t\t\tuni.uploadFile({\r\n\t\t\t\t\turl: main.url + 'api/upload/uploadfile',\r\n\t\t\t\t\tfilePath: list[index],\r\n\t\t\t\t\tname: 'file',\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\tres.data = JSON.parse(res.data)\r\n\t\t\t\t\t\tif (res.data.code === 0) {\r\n\t\t\t\t\t\t\tmain.showToast(res.data.msg)\r\n\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tarr.push(res.data.data)\r\n\t\t\t\t\t\tif (index === list.length - 1) {\r\n\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\twx.hideLoading();\r\n\t\t\t\t\t\t\t\tresolve(arr)\r\n\t\t\t\t\t\t\t}, 2000)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t},\r\n\t//上传文件\r\n\tuploadFile(list = {}) {\r\n\t\tconsole.log(list)\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: '上传中...',\r\n\t\t\t\tmask: true\r\n\t\t\t})\r\n\t\t\tlet arr = []\r\n\t\t\tfor (let index = 0; index < list.length; index++) {\r\n\t\t\t\tuni.uploadFile({\r\n\t\t\t\t\turl: main.url + 'uploadFile',\r\n\t\t\t\t\tfile: list[index],\r\n\t\t\t\t\tname: 'file',\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\tres.data = JSON.parse(res.data)\r\n\t\t\t\t\t\tif (res.data.code === 0) {\r\n\t\t\t\t\t\t\tmain.showToast(res.data.msg)\r\n\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tarr.push(res.data.data)\r\n\t\t\t\t\t\tif (index === list.length - 1) {\r\n\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\twx.hideLoading();\r\n\t\t\t\t\t\t\t\tresolve(arr)\r\n\t\t\t\t\t\t\t}, 2000)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t},\r\n\tpreviewImage(current,urls){\r\n\t\tuni.previewImage({\r\n\t\t\tcurrent,\r\n\t\t\turls\r\n\t\t});\r\n\t\t\r\n\t}\r\n}\r\n","/*!\n * Vue.js v2.6.11\n * (c) 2014-2020 Evan You\n * Released under the MIT License.\n */\n/*  */\n\nvar emptyObject = Object.freeze({});\n\n// These helpers produce better VM code in JS engines due to their\n// explicitness and function inlining.\nfunction isUndef (v) {\n  return v === undefined || v === null\n}\n\nfunction isDef (v) {\n  return v !== undefined && v !== null\n}\n\nfunction isTrue (v) {\n  return v === true\n}\n\nfunction isFalse (v) {\n  return v === false\n}\n\n/**\n * Check if value is primitive.\n */\nfunction isPrimitive (value) {\n  return (\n    typeof value === 'string' ||\n    typeof value === 'number' ||\n    // $flow-disable-line\n    typeof value === 'symbol' ||\n    typeof value === 'boolean'\n  )\n}\n\n/**\n * Quick object check - this is primarily used to tell\n * Objects from primitive values when we know the value\n * is a JSON-compliant type.\n */\nfunction isObject (obj) {\n  return obj !== null && typeof obj === 'object'\n}\n\n/**\n * Get the raw type string of a value, e.g., [object Object].\n */\nvar _toString = Object.prototype.toString;\n\nfunction toRawType (value) {\n  return _toString.call(value).slice(8, -1)\n}\n\n/**\n * Strict object type check. Only returns true\n * for plain JavaScript objects.\n */\nfunction isPlainObject (obj) {\n  return _toString.call(obj) === '[object Object]'\n}\n\nfunction isRegExp (v) {\n  return _toString.call(v) === '[object RegExp]'\n}\n\n/**\n * Check if val is a valid array index.\n */\nfunction isValidArrayIndex (val) {\n  var n = parseFloat(String(val));\n  return n >= 0 && Math.floor(n) === n && isFinite(val)\n}\n\nfunction isPromise (val) {\n  return (\n    isDef(val) &&\n    typeof val.then === 'function' &&\n    typeof val.catch === 'function'\n  )\n}\n\n/**\n * Convert a value to a string that is actually rendered.\n */\nfunction toString (val) {\n  return val == null\n    ? ''\n    : Array.isArray(val) || (isPlainObject(val) && val.toString === _toString)\n      ? JSON.stringify(val, null, 2)\n      : String(val)\n}\n\n/**\n * Convert an input value to a number for persistence.\n * If the conversion fails, return original string.\n */\nfunction toNumber (val) {\n  var n = parseFloat(val);\n  return isNaN(n) ? val : n\n}\n\n/**\n * Make a map and return a function for checking if a key\n * is in that map.\n */\nfunction makeMap (\n  str,\n  expectsLowerCase\n) {\n  var map = Object.create(null);\n  var list = str.split(',');\n  for (var i = 0; i < list.length; i++) {\n    map[list[i]] = true;\n  }\n  return expectsLowerCase\n    ? function (val) { return map[val.toLowerCase()]; }\n    : function (val) { return map[val]; }\n}\n\n/**\n * Check if a tag is a built-in tag.\n */\nvar isBuiltInTag = makeMap('slot,component', true);\n\n/**\n * Check if an attribute is a reserved attribute.\n */\nvar isReservedAttribute = makeMap('key,ref,slot,slot-scope,is');\n\n/**\n * Remove an item from an array.\n */\nfunction remove (arr, item) {\n  if (arr.length) {\n    var index = arr.indexOf(item);\n    if (index > -1) {\n      return arr.splice(index, 1)\n    }\n  }\n}\n\n/**\n * Check whether an object has the property.\n */\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction hasOwn (obj, key) {\n  return hasOwnProperty.call(obj, key)\n}\n\n/**\n * Create a cached version of a pure function.\n */\nfunction cached (fn) {\n  var cache = Object.create(null);\n  return (function cachedFn (str) {\n    var hit = cache[str];\n    return hit || (cache[str] = fn(str))\n  })\n}\n\n/**\n * Camelize a hyphen-delimited string.\n */\nvar camelizeRE = /-(\\w)/g;\nvar camelize = cached(function (str) {\n  return str.replace(camelizeRE, function (_, c) { return c ? c.toUpperCase() : ''; })\n});\n\n/**\n * Capitalize a string.\n */\nvar capitalize = cached(function (str) {\n  return str.charAt(0).toUpperCase() + str.slice(1)\n});\n\n/**\n * Hyphenate a camelCase string.\n */\nvar hyphenateRE = /\\B([A-Z])/g;\nvar hyphenate = cached(function (str) {\n  return str.replace(hyphenateRE, '-$1').toLowerCase()\n});\n\n/**\n * Simple bind polyfill for environments that do not support it,\n * e.g., PhantomJS 1.x. Technically, we don't need this anymore\n * since native bind is now performant enough in most browsers.\n * But removing it would mean breaking code that was able to run in\n * PhantomJS 1.x, so this must be kept for backward compatibility.\n */\n\n/* istanbul ignore next */\nfunction polyfillBind (fn, ctx) {\n  function boundFn (a) {\n    var l = arguments.length;\n    return l\n      ? l > 1\n        ? fn.apply(ctx, arguments)\n        : fn.call(ctx, a)\n      : fn.call(ctx)\n  }\n\n  boundFn._length = fn.length;\n  return boundFn\n}\n\nfunction nativeBind (fn, ctx) {\n  return fn.bind(ctx)\n}\n\nvar bind = Function.prototype.bind\n  ? nativeBind\n  : polyfillBind;\n\n/**\n * Convert an Array-like object to a real Array.\n */\nfunction toArray (list, start) {\n  start = start || 0;\n  var i = list.length - start;\n  var ret = new Array(i);\n  while (i--) {\n    ret[i] = list[i + start];\n  }\n  return ret\n}\n\n/**\n * Mix properties into target object.\n */\nfunction extend (to, _from) {\n  for (var key in _from) {\n    to[key] = _from[key];\n  }\n  return to\n}\n\n/**\n * Merge an Array of Objects into a single Object.\n */\nfunction toObject (arr) {\n  var res = {};\n  for (var i = 0; i < arr.length; i++) {\n    if (arr[i]) {\n      extend(res, arr[i]);\n    }\n  }\n  return res\n}\n\n/* eslint-disable no-unused-vars */\n\n/**\n * Perform no operation.\n * Stubbing args to make Flow happy without leaving useless transpiled code\n * with ...rest (https://flow.org/blog/2017/05/07/Strict-Function-Call-Arity/).\n */\nfunction noop (a, b, c) {}\n\n/**\n * Always return false.\n */\nvar no = function (a, b, c) { return false; };\n\n/* eslint-enable no-unused-vars */\n\n/**\n * Return the same value.\n */\nvar identity = function (_) { return _; };\n\n/**\n * Check if two values are loosely equal - that is,\n * if they are plain objects, do they have the same shape?\n */\nfunction looseEqual (a, b) {\n  if (a === b) { return true }\n  var isObjectA = isObject(a);\n  var isObjectB = isObject(b);\n  if (isObjectA && isObjectB) {\n    try {\n      var isArrayA = Array.isArray(a);\n      var isArrayB = Array.isArray(b);\n      if (isArrayA && isArrayB) {\n        return a.length === b.length && a.every(function (e, i) {\n          return looseEqual(e, b[i])\n        })\n      } else if (a instanceof Date && b instanceof Date) {\n        return a.getTime() === b.getTime()\n      } else if (!isArrayA && !isArrayB) {\n        var keysA = Object.keys(a);\n        var keysB = Object.keys(b);\n        return keysA.length === keysB.length && keysA.every(function (key) {\n          return looseEqual(a[key], b[key])\n        })\n      } else {\n        /* istanbul ignore next */\n        return false\n      }\n    } catch (e) {\n      /* istanbul ignore next */\n      return false\n    }\n  } else if (!isObjectA && !isObjectB) {\n    return String(a) === String(b)\n  } else {\n    return false\n  }\n}\n\n/**\n * Return the first index at which a loosely equal value can be\n * found in the array (if value is a plain object, the array must\n * contain an object of the same shape), or -1 if it is not present.\n */\nfunction looseIndexOf (arr, val) {\n  for (var i = 0; i < arr.length; i++) {\n    if (looseEqual(arr[i], val)) { return i }\n  }\n  return -1\n}\n\n/**\n * Ensure a function is called only once.\n */\nfunction once (fn) {\n  var called = false;\n  return function () {\n    if (!called) {\n      called = true;\n      fn.apply(this, arguments);\n    }\n  }\n}\n\nvar ASSET_TYPES = [\n  'component',\n  'directive',\n  'filter'\n];\n\nvar LIFECYCLE_HOOKS = [\n  'beforeCreate',\n  'created',\n  'beforeMount',\n  'mounted',\n  'beforeUpdate',\n  'updated',\n  'beforeDestroy',\n  'destroyed',\n  'activated',\n  'deactivated',\n  'errorCaptured',\n  'serverPrefetch'\n];\n\n/*  */\n\n\n\nvar config = ({\n  /**\n   * Option merge strategies (used in core/util/options)\n   */\n  // $flow-disable-line\n  optionMergeStrategies: Object.create(null),\n\n  /**\n   * Whether to suppress warnings.\n   */\n  silent: false,\n\n  /**\n   * Show production mode tip message on boot?\n   */\n  productionTip: process.env.NODE_ENV !== 'production',\n\n  /**\n   * Whether to enable devtools\n   */\n  devtools: process.env.NODE_ENV !== 'production',\n\n  /**\n   * Whether to record perf\n   */\n  performance: false,\n\n  /**\n   * Error handler for watcher errors\n   */\n  errorHandler: null,\n\n  /**\n   * Warn handler for watcher warns\n   */\n  warnHandler: null,\n\n  /**\n   * Ignore certain custom elements\n   */\n  ignoredElements: [],\n\n  /**\n   * Custom user key aliases for v-on\n   */\n  // $flow-disable-line\n  keyCodes: Object.create(null),\n\n  /**\n   * Check if a tag is reserved so that it cannot be registered as a\n   * component. This is platform-dependent and may be overwritten.\n   */\n  isReservedTag: no,\n\n  /**\n   * Check if an attribute is reserved so that it cannot be used as a component\n   * prop. This is platform-dependent and may be overwritten.\n   */\n  isReservedAttr: no,\n\n  /**\n   * Check if a tag is an unknown element.\n   * Platform-dependent.\n   */\n  isUnknownElement: no,\n\n  /**\n   * Get the namespace of an element\n   */\n  getTagNamespace: noop,\n\n  /**\n   * Parse the real tag name for the specific platform.\n   */\n  parsePlatformTagName: identity,\n\n  /**\n   * Check if an attribute must be bound using property, e.g. value\n   * Platform-dependent.\n   */\n  mustUseProp: no,\n\n  /**\n   * Perform updates asynchronously. Intended to be used by Vue Test Utils\n   * This will significantly reduce performance if set to false.\n   */\n  async: true,\n\n  /**\n   * Exposed for legacy reasons\n   */\n  _lifecycleHooks: LIFECYCLE_HOOKS\n});\n\n/*  */\n\n/**\n * unicode letters used for parsing html tags, component names and property paths.\n * using https://www.w3.org/TR/html53/semantics-scripting.html#potentialcustomelementname\n * skipping \\u10000-\\uEFFFF due to it freezing up PhantomJS\n */\nvar unicodeRegExp = /a-zA-Z\\u00B7\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u203F-\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD/;\n\n/**\n * Check if a string starts with $ or _\n */\nfunction isReserved (str) {\n  var c = (str + '').charCodeAt(0);\n  return c === 0x24 || c === 0x5F\n}\n\n/**\n * Define a property.\n */\nfunction def (obj, key, val, enumerable) {\n  Object.defineProperty(obj, key, {\n    value: val,\n    enumerable: !!enumerable,\n    writable: true,\n    configurable: true\n  });\n}\n\n/**\n * Parse simple path.\n */\nvar bailRE = new RegExp((\"[^\" + (unicodeRegExp.source) + \".$_\\\\d]\"));\nfunction parsePath (path) {\n  if (bailRE.test(path)) {\n    return\n  }\n  var segments = path.split('.');\n  return function (obj) {\n    for (var i = 0; i < segments.length; i++) {\n      if (!obj) { return }\n      obj = obj[segments[i]];\n    }\n    return obj\n  }\n}\n\n/*  */\n\n// can we use __proto__?\nvar hasProto = '__proto__' in {};\n\n// Browser environment sniffing\nvar inBrowser = typeof window !== 'undefined';\nvar inWeex = typeof WXEnvironment !== 'undefined' && !!WXEnvironment.platform;\nvar weexPlatform = inWeex && WXEnvironment.platform.toLowerCase();\nvar UA = inBrowser && window.navigator.userAgent.toLowerCase();\nvar isIE = UA && /msie|trident/.test(UA);\nvar isIE9 = UA && UA.indexOf('msie 9.0') > 0;\nvar isEdge = UA && UA.indexOf('edge/') > 0;\nvar isAndroid = (UA && UA.indexOf('android') > 0) || (weexPlatform === 'android');\nvar isIOS = (UA && /iphone|ipad|ipod|ios/.test(UA)) || (weexPlatform === 'ios');\nvar isChrome = UA && /chrome\\/\\d+/.test(UA) && !isEdge;\nvar isPhantomJS = UA && /phantomjs/.test(UA);\nvar isFF = UA && UA.match(/firefox\\/(\\d+)/);\n\n// Firefox has a \"watch\" function on Object.prototype...\nvar nativeWatch = ({}).watch;\nif (inBrowser) {\n  try {\n    var opts = {};\n    Object.defineProperty(opts, 'passive', ({\n      get: function get () {\n      }\n    })); // https://github.com/facebook/flow/issues/285\n    window.addEventListener('test-passive', null, opts);\n  } catch (e) {}\n}\n\n// this needs to be lazy-evaled because vue may be required before\n// vue-server-renderer can set VUE_ENV\nvar _isServer;\nvar isServerRendering = function () {\n  if (_isServer === undefined) {\n    /* istanbul ignore if */\n    if (!inBrowser && !inWeex && typeof global !== 'undefined') {\n      // detect presence of vue-server-renderer and avoid\n      // Webpack shimming the process\n      _isServer = global['process'] && global['process'].env.VUE_ENV === 'server';\n    } else {\n      _isServer = false;\n    }\n  }\n  return _isServer\n};\n\n// detect devtools\nvar devtools = inBrowser && window.__VUE_DEVTOOLS_GLOBAL_HOOK__;\n\n/* istanbul ignore next */\nfunction isNative (Ctor) {\n  return typeof Ctor === 'function' && /native code/.test(Ctor.toString())\n}\n\nvar hasSymbol =\n  typeof Symbol !== 'undefined' && isNative(Symbol) &&\n  typeof Reflect !== 'undefined' && isNative(Reflect.ownKeys);\n\nvar _Set;\n/* istanbul ignore if */ // $flow-disable-line\nif (typeof Set !== 'undefined' && isNative(Set)) {\n  // use native Set when available.\n  _Set = Set;\n} else {\n  // a non-standard Set polyfill that only works with primitive keys.\n  _Set = /*@__PURE__*/(function () {\n    function Set () {\n      this.set = Object.create(null);\n    }\n    Set.prototype.has = function has (key) {\n      return this.set[key] === true\n    };\n    Set.prototype.add = function add (key) {\n      this.set[key] = true;\n    };\n    Set.prototype.clear = function clear () {\n      this.set = Object.create(null);\n    };\n\n    return Set;\n  }());\n}\n\n/*  */\n\nvar warn = noop;\nvar tip = noop;\nvar generateComponentTrace = (noop); // work around flow check\nvar formatComponentName = (noop);\n\nif (process.env.NODE_ENV !== 'production') {\n  var hasConsole = typeof console !== 'undefined';\n  var classifyRE = /(?:^|[-_])(\\w)/g;\n  var classify = function (str) { return str\n    .replace(classifyRE, function (c) { return c.toUpperCase(); })\n    .replace(/[-_]/g, ''); };\n\n  warn = function (msg, vm) {\n    var trace = vm ? generateComponentTrace(vm) : '';\n\n    if (config.warnHandler) {\n      config.warnHandler.call(null, msg, vm, trace);\n    } else if (hasConsole && (!config.silent)) {\n      console.error((\"[Vue warn]: \" + msg + trace));\n    }\n  };\n\n  tip = function (msg, vm) {\n    if (hasConsole && (!config.silent)) {\n      console.warn(\"[Vue tip]: \" + msg + (\n        vm ? generateComponentTrace(vm) : ''\n      ));\n    }\n  };\n\n  formatComponentName = function (vm, includeFile) {\n    {\n      if(vm.$scope && vm.$scope.is){\n        return vm.$scope.is\n      }\n    }\n    if (vm.$root === vm) {\n      return '<Root>'\n    }\n    var options = typeof vm === 'function' && vm.cid != null\n      ? vm.options\n      : vm._isVue\n        ? vm.$options || vm.constructor.options\n        : vm;\n    var name = options.name || options._componentTag;\n    var file = options.__file;\n    if (!name && file) {\n      var match = file.match(/([^/\\\\]+)\\.vue$/);\n      name = match && match[1];\n    }\n\n    return (\n      (name ? (\"<\" + (classify(name)) + \">\") : \"<Anonymous>\") +\n      (file && includeFile !== false ? (\" at \" + file) : '')\n    )\n  };\n\n  var repeat = function (str, n) {\n    var res = '';\n    while (n) {\n      if (n % 2 === 1) { res += str; }\n      if (n > 1) { str += str; }\n      n >>= 1;\n    }\n    return res\n  };\n\n  generateComponentTrace = function (vm) {\n    if (vm._isVue && vm.$parent) {\n      var tree = [];\n      var currentRecursiveSequence = 0;\n      while (vm) {\n        if (tree.length > 0) {\n          var last = tree[tree.length - 1];\n          if (last.constructor === vm.constructor) {\n            currentRecursiveSequence++;\n            vm = vm.$parent;\n            continue\n          } else if (currentRecursiveSequence > 0) {\n            tree[tree.length - 1] = [last, currentRecursiveSequence];\n            currentRecursiveSequence = 0;\n          }\n        }\n        tree.push(vm);\n        vm = vm.$parent;\n      }\n      return '\\n\\nfound in\\n\\n' + tree\n        .map(function (vm, i) { return (\"\" + (i === 0 ? '---> ' : repeat(' ', 5 + i * 2)) + (Array.isArray(vm)\n            ? ((formatComponentName(vm[0])) + \"... (\" + (vm[1]) + \" recursive calls)\")\n            : formatComponentName(vm))); })\n        .join('\\n')\n    } else {\n      return (\"\\n\\n(found in \" + (formatComponentName(vm)) + \")\")\n    }\n  };\n}\n\n/*  */\n\nvar uid = 0;\n\n/**\n * A dep is an observable that can have multiple\n * directives subscribing to it.\n */\nvar Dep = function Dep () {\n  // fixed by xxxxxx (nvue vuex)\n  /* eslint-disable no-undef */\n  if(typeof SharedObject !== 'undefined'){\n    this.id = SharedObject.uid++;\n  } else {\n    this.id = uid++;\n  }\n  this.subs = [];\n};\n\nDep.prototype.addSub = function addSub (sub) {\n  this.subs.push(sub);\n};\n\nDep.prototype.removeSub = function removeSub (sub) {\n  remove(this.subs, sub);\n};\n\nDep.prototype.depend = function depend () {\n  if (Dep.SharedObject.target) {\n    Dep.SharedObject.target.addDep(this);\n  }\n};\n\nDep.prototype.notify = function notify () {\n  // stabilize the subscriber list first\n  var subs = this.subs.slice();\n  if (process.env.NODE_ENV !== 'production' && !config.async) {\n    // subs aren't sorted in scheduler if not running async\n    // we need to sort them now to make sure they fire in correct\n    // order\n    subs.sort(function (a, b) { return a.id - b.id; });\n  }\n  for (var i = 0, l = subs.length; i < l; i++) {\n    subs[i].update();\n  }\n};\n\n// The current target watcher being evaluated.\n// This is globally unique because only one watcher\n// can be evaluated at a time.\n// fixed by xxxxxx (nvue shared vuex)\n/* eslint-disable no-undef */\nDep.SharedObject = typeof SharedObject !== 'undefined' ? SharedObject : {};\nDep.SharedObject.target = null;\nDep.SharedObject.targetStack = [];\n\nfunction pushTarget (target) {\n  Dep.SharedObject.targetStack.push(target);\n  Dep.SharedObject.target = target;\n}\n\nfunction popTarget () {\n  Dep.SharedObject.targetStack.pop();\n  Dep.SharedObject.target = Dep.SharedObject.targetStack[Dep.SharedObject.targetStack.length - 1];\n}\n\n/*  */\n\nvar VNode = function VNode (\n  tag,\n  data,\n  children,\n  text,\n  elm,\n  context,\n  componentOptions,\n  asyncFactory\n) {\n  this.tag = tag;\n  this.data = data;\n  this.children = children;\n  this.text = text;\n  this.elm = elm;\n  this.ns = undefined;\n  this.context = context;\n  this.fnContext = undefined;\n  this.fnOptions = undefined;\n  this.fnScopeId = undefined;\n  this.key = data && data.key;\n  this.componentOptions = componentOptions;\n  this.componentInstance = undefined;\n  this.parent = undefined;\n  this.raw = false;\n  this.isStatic = false;\n  this.isRootInsert = true;\n  this.isComment = false;\n  this.isCloned = false;\n  this.isOnce = false;\n  this.asyncFactory = asyncFactory;\n  this.asyncMeta = undefined;\n  this.isAsyncPlaceholder = false;\n};\n\nvar prototypeAccessors = { child: { configurable: true } };\n\n// DEPRECATED: alias for componentInstance for backwards compat.\n/* istanbul ignore next */\nprototypeAccessors.child.get = function () {\n  return this.componentInstance\n};\n\nObject.defineProperties( VNode.prototype, prototypeAccessors );\n\nvar createEmptyVNode = function (text) {\n  if ( text === void 0 ) text = '';\n\n  var node = new VNode();\n  node.text = text;\n  node.isComment = true;\n  return node\n};\n\nfunction createTextVNode (val) {\n  return new VNode(undefined, undefined, undefined, String(val))\n}\n\n// optimized shallow clone\n// used for static nodes and slot nodes because they may be reused across\n// multiple renders, cloning them avoids errors when DOM manipulations rely\n// on their elm reference.\nfunction cloneVNode (vnode) {\n  var cloned = new VNode(\n    vnode.tag,\n    vnode.data,\n    // #7975\n    // clone children array to avoid mutating original in case of cloning\n    // a child.\n    vnode.children && vnode.children.slice(),\n    vnode.text,\n    vnode.elm,\n    vnode.context,\n    vnode.componentOptions,\n    vnode.asyncFactory\n  );\n  cloned.ns = vnode.ns;\n  cloned.isStatic = vnode.isStatic;\n  cloned.key = vnode.key;\n  cloned.isComment = vnode.isComment;\n  cloned.fnContext = vnode.fnContext;\n  cloned.fnOptions = vnode.fnOptions;\n  cloned.fnScopeId = vnode.fnScopeId;\n  cloned.asyncMeta = vnode.asyncMeta;\n  cloned.isCloned = true;\n  return cloned\n}\n\n/*\n * not type checking this file because flow doesn't play well with\n * dynamically accessing methods on Array prototype\n */\n\nvar arrayProto = Array.prototype;\nvar arrayMethods = Object.create(arrayProto);\n\nvar methodsToPatch = [\n  'push',\n  'pop',\n  'shift',\n  'unshift',\n  'splice',\n  'sort',\n  'reverse'\n];\n\n/**\n * Intercept mutating methods and emit events\n */\nmethodsToPatch.forEach(function (method) {\n  // cache original method\n  var original = arrayProto[method];\n  def(arrayMethods, method, function mutator () {\n    var args = [], len = arguments.length;\n    while ( len-- ) args[ len ] = arguments[ len ];\n\n    var result = original.apply(this, args);\n    var ob = this.__ob__;\n    var inserted;\n    switch (method) {\n      case 'push':\n      case 'unshift':\n        inserted = args;\n        break\n      case 'splice':\n        inserted = args.slice(2);\n        break\n    }\n    if (inserted) { ob.observeArray(inserted); }\n    // notify change\n    ob.dep.notify();\n    return result\n  });\n});\n\n/*  */\n\nvar arrayKeys = Object.getOwnPropertyNames(arrayMethods);\n\n/**\n * In some cases we may want to disable observation inside a component's\n * update computation.\n */\nvar shouldObserve = true;\n\nfunction toggleObserving (value) {\n  shouldObserve = value;\n}\n\n/**\n * Observer class that is attached to each observed\n * object. Once attached, the observer converts the target\n * object's property keys into getter/setters that\n * collect dependencies and dispatch updates.\n */\nvar Observer = function Observer (value) {\n  this.value = value;\n  this.dep = new Dep();\n  this.vmCount = 0;\n  def(value, '__ob__', this);\n  if (Array.isArray(value)) {\n    if (hasProto) {\n      {// fixed by xxxxxx 微信小程序使用 plugins 之后，数组方法被直接挂载到了数组对象上，需要执行 copyAugment 逻辑\n        if(value.push !== value.__proto__.push){\n          copyAugment(value, arrayMethods, arrayKeys);\n        } else {\n          protoAugment(value, arrayMethods);\n        }\n      }\n    } else {\n      copyAugment(value, arrayMethods, arrayKeys);\n    }\n    this.observeArray(value);\n  } else {\n    this.walk(value);\n  }\n};\n\n/**\n * Walk through all properties and convert them into\n * getter/setters. This method should only be called when\n * value type is Object.\n */\nObserver.prototype.walk = function walk (obj) {\n  var keys = Object.keys(obj);\n  for (var i = 0; i < keys.length; i++) {\n    defineReactive$$1(obj, keys[i]);\n  }\n};\n\n/**\n * Observe a list of Array items.\n */\nObserver.prototype.observeArray = function observeArray (items) {\n  for (var i = 0, l = items.length; i < l; i++) {\n    observe(items[i]);\n  }\n};\n\n// helpers\n\n/**\n * Augment a target Object or Array by intercepting\n * the prototype chain using __proto__\n */\nfunction protoAugment (target, src) {\n  /* eslint-disable no-proto */\n  target.__proto__ = src;\n  /* eslint-enable no-proto */\n}\n\n/**\n * Augment a target Object or Array by defining\n * hidden properties.\n */\n/* istanbul ignore next */\nfunction copyAugment (target, src, keys) {\n  for (var i = 0, l = keys.length; i < l; i++) {\n    var key = keys[i];\n    def(target, key, src[key]);\n  }\n}\n\n/**\n * Attempt to create an observer instance for a value,\n * returns the new observer if successfully observed,\n * or the existing observer if the value already has one.\n */\nfunction observe (value, asRootData) {\n  if (!isObject(value) || value instanceof VNode) {\n    return\n  }\n  var ob;\n  if (hasOwn(value, '__ob__') && value.__ob__ instanceof Observer) {\n    ob = value.__ob__;\n  } else if (\n    shouldObserve &&\n    !isServerRendering() &&\n    (Array.isArray(value) || isPlainObject(value)) &&\n    Object.isExtensible(value) &&\n    !value._isVue\n  ) {\n    ob = new Observer(value);\n  }\n  if (asRootData && ob) {\n    ob.vmCount++;\n  }\n  return ob\n}\n\n/**\n * Define a reactive property on an Object.\n */\nfunction defineReactive$$1 (\n  obj,\n  key,\n  val,\n  customSetter,\n  shallow\n) {\n  var dep = new Dep();\n\n  var property = Object.getOwnPropertyDescriptor(obj, key);\n  if (property && property.configurable === false) {\n    return\n  }\n\n  // cater for pre-defined getter/setters\n  var getter = property && property.get;\n  var setter = property && property.set;\n  if ((!getter || setter) && arguments.length === 2) {\n    val = obj[key];\n  }\n\n  var childOb = !shallow && observe(val);\n  Object.defineProperty(obj, key, {\n    enumerable: true,\n    configurable: true,\n    get: function reactiveGetter () {\n      var value = getter ? getter.call(obj) : val;\n      if (Dep.SharedObject.target) { // fixed by xxxxxx\n        dep.depend();\n        if (childOb) {\n          childOb.dep.depend();\n          if (Array.isArray(value)) {\n            dependArray(value);\n          }\n        }\n      }\n      return value\n    },\n    set: function reactiveSetter (newVal) {\n      var value = getter ? getter.call(obj) : val;\n      /* eslint-disable no-self-compare */\n      if (newVal === value || (newVal !== newVal && value !== value)) {\n        return\n      }\n      /* eslint-enable no-self-compare */\n      if (process.env.NODE_ENV !== 'production' && customSetter) {\n        customSetter();\n      }\n      // #7981: for accessor properties without setter\n      if (getter && !setter) { return }\n      if (setter) {\n        setter.call(obj, newVal);\n      } else {\n        val = newVal;\n      }\n      childOb = !shallow && observe(newVal);\n      dep.notify();\n    }\n  });\n}\n\n/**\n * Set a property on an object. Adds the new property and\n * triggers change notification if the property doesn't\n * already exist.\n */\nfunction set (target, key, val) {\n  if (process.env.NODE_ENV !== 'production' &&\n    (isUndef(target) || isPrimitive(target))\n  ) {\n    warn((\"Cannot set reactive property on undefined, null, or primitive value: \" + ((target))));\n  }\n  if (Array.isArray(target) && isValidArrayIndex(key)) {\n    target.length = Math.max(target.length, key);\n    target.splice(key, 1, val);\n    return val\n  }\n  if (key in target && !(key in Object.prototype)) {\n    target[key] = val;\n    return val\n  }\n  var ob = (target).__ob__;\n  if (target._isVue || (ob && ob.vmCount)) {\n    process.env.NODE_ENV !== 'production' && warn(\n      'Avoid adding reactive properties to a Vue instance or its root $data ' +\n      'at runtime - declare it upfront in the data option.'\n    );\n    return val\n  }\n  if (!ob) {\n    target[key] = val;\n    return val\n  }\n  defineReactive$$1(ob.value, key, val);\n  ob.dep.notify();\n  return val\n}\n\n/**\n * Delete a property and trigger change if necessary.\n */\nfunction del (target, key) {\n  if (process.env.NODE_ENV !== 'production' &&\n    (isUndef(target) || isPrimitive(target))\n  ) {\n    warn((\"Cannot delete reactive property on undefined, null, or primitive value: \" + ((target))));\n  }\n  if (Array.isArray(target) && isValidArrayIndex(key)) {\n    target.splice(key, 1);\n    return\n  }\n  var ob = (target).__ob__;\n  if (target._isVue || (ob && ob.vmCount)) {\n    process.env.NODE_ENV !== 'production' && warn(\n      'Avoid deleting properties on a Vue instance or its root $data ' +\n      '- just set it to null.'\n    );\n    return\n  }\n  if (!hasOwn(target, key)) {\n    return\n  }\n  delete target[key];\n  if (!ob) {\n    return\n  }\n  ob.dep.notify();\n}\n\n/**\n * Collect dependencies on array elements when the array is touched, since\n * we cannot intercept array element access like property getters.\n */\nfunction dependArray (value) {\n  for (var e = (void 0), i = 0, l = value.length; i < l; i++) {\n    e = value[i];\n    e && e.__ob__ && e.__ob__.dep.depend();\n    if (Array.isArray(e)) {\n      dependArray(e);\n    }\n  }\n}\n\n/*  */\n\n/**\n * Option overwriting strategies are functions that handle\n * how to merge a parent option value and a child option\n * value into the final value.\n */\nvar strats = config.optionMergeStrategies;\n\n/**\n * Options with restrictions\n */\nif (process.env.NODE_ENV !== 'production') {\n  strats.el = strats.propsData = function (parent, child, vm, key) {\n    if (!vm) {\n      warn(\n        \"option \\\"\" + key + \"\\\" can only be used during instance \" +\n        'creation with the `new` keyword.'\n      );\n    }\n    return defaultStrat(parent, child)\n  };\n}\n\n/**\n * Helper that recursively merges two data objects together.\n */\nfunction mergeData (to, from) {\n  if (!from) { return to }\n  var key, toVal, fromVal;\n\n  var keys = hasSymbol\n    ? Reflect.ownKeys(from)\n    : Object.keys(from);\n\n  for (var i = 0; i < keys.length; i++) {\n    key = keys[i];\n    // in case the object is already observed...\n    if (key === '__ob__') { continue }\n    toVal = to[key];\n    fromVal = from[key];\n    if (!hasOwn(to, key)) {\n      set(to, key, fromVal);\n    } else if (\n      toVal !== fromVal &&\n      isPlainObject(toVal) &&\n      isPlainObject(fromVal)\n    ) {\n      mergeData(toVal, fromVal);\n    }\n  }\n  return to\n}\n\n/**\n * Data\n */\nfunction mergeDataOrFn (\n  parentVal,\n  childVal,\n  vm\n) {\n  if (!vm) {\n    // in a Vue.extend merge, both should be functions\n    if (!childVal) {\n      return parentVal\n    }\n    if (!parentVal) {\n      return childVal\n    }\n    // when parentVal & childVal are both present,\n    // we need to return a function that returns the\n    // merged result of both functions... no need to\n    // check if parentVal is a function here because\n    // it has to be a function to pass previous merges.\n    return function mergedDataFn () {\n      return mergeData(\n        typeof childVal === 'function' ? childVal.call(this, this) : childVal,\n        typeof parentVal === 'function' ? parentVal.call(this, this) : parentVal\n      )\n    }\n  } else {\n    return function mergedInstanceDataFn () {\n      // instance merge\n      var instanceData = typeof childVal === 'function'\n        ? childVal.call(vm, vm)\n        : childVal;\n      var defaultData = typeof parentVal === 'function'\n        ? parentVal.call(vm, vm)\n        : parentVal;\n      if (instanceData) {\n        return mergeData(instanceData, defaultData)\n      } else {\n        return defaultData\n      }\n    }\n  }\n}\n\nstrats.data = function (\n  parentVal,\n  childVal,\n  vm\n) {\n  if (!vm) {\n    if (childVal && typeof childVal !== 'function') {\n      process.env.NODE_ENV !== 'production' && warn(\n        'The \"data\" option should be a function ' +\n        'that returns a per-instance value in component ' +\n        'definitions.',\n        vm\n      );\n\n      return parentVal\n    }\n    return mergeDataOrFn(parentVal, childVal)\n  }\n\n  return mergeDataOrFn(parentVal, childVal, vm)\n};\n\n/**\n * Hooks and props are merged as arrays.\n */\nfunction mergeHook (\n  parentVal,\n  childVal\n) {\n  var res = childVal\n    ? parentVal\n      ? parentVal.concat(childVal)\n      : Array.isArray(childVal)\n        ? childVal\n        : [childVal]\n    : parentVal;\n  return res\n    ? dedupeHooks(res)\n    : res\n}\n\nfunction dedupeHooks (hooks) {\n  var res = [];\n  for (var i = 0; i < hooks.length; i++) {\n    if (res.indexOf(hooks[i]) === -1) {\n      res.push(hooks[i]);\n    }\n  }\n  return res\n}\n\nLIFECYCLE_HOOKS.forEach(function (hook) {\n  strats[hook] = mergeHook;\n});\n\n/**\n * Assets\n *\n * When a vm is present (instance creation), we need to do\n * a three-way merge between constructor options, instance\n * options and parent options.\n */\nfunction mergeAssets (\n  parentVal,\n  childVal,\n  vm,\n  key\n) {\n  var res = Object.create(parentVal || null);\n  if (childVal) {\n    process.env.NODE_ENV !== 'production' && assertObjectType(key, childVal, vm);\n    return extend(res, childVal)\n  } else {\n    return res\n  }\n}\n\nASSET_TYPES.forEach(function (type) {\n  strats[type + 's'] = mergeAssets;\n});\n\n/**\n * Watchers.\n *\n * Watchers hashes should not overwrite one\n * another, so we merge them as arrays.\n */\nstrats.watch = function (\n  parentVal,\n  childVal,\n  vm,\n  key\n) {\n  // work around Firefox's Object.prototype.watch...\n  if (parentVal === nativeWatch) { parentVal = undefined; }\n  if (childVal === nativeWatch) { childVal = undefined; }\n  /* istanbul ignore if */\n  if (!childVal) { return Object.create(parentVal || null) }\n  if (process.env.NODE_ENV !== 'production') {\n    assertObjectType(key, childVal, vm);\n  }\n  if (!parentVal) { return childVal }\n  var ret = {};\n  extend(ret, parentVal);\n  for (var key$1 in childVal) {\n    var parent = ret[key$1];\n    var child = childVal[key$1];\n    if (parent && !Array.isArray(parent)) {\n      parent = [parent];\n    }\n    ret[key$1] = parent\n      ? parent.concat(child)\n      : Array.isArray(child) ? child : [child];\n  }\n  return ret\n};\n\n/**\n * Other object hashes.\n */\nstrats.props =\nstrats.methods =\nstrats.inject =\nstrats.computed = function (\n  parentVal,\n  childVal,\n  vm,\n  key\n) {\n  if (childVal && process.env.NODE_ENV !== 'production') {\n    assertObjectType(key, childVal, vm);\n  }\n  if (!parentVal) { return childVal }\n  var ret = Object.create(null);\n  extend(ret, parentVal);\n  if (childVal) { extend(ret, childVal); }\n  return ret\n};\nstrats.provide = mergeDataOrFn;\n\n/**\n * Default strategy.\n */\nvar defaultStrat = function (parentVal, childVal) {\n  return childVal === undefined\n    ? parentVal\n    : childVal\n};\n\n/**\n * Validate component names\n */\nfunction checkComponents (options) {\n  for (var key in options.components) {\n    validateComponentName(key);\n  }\n}\n\nfunction validateComponentName (name) {\n  if (!new RegExp((\"^[a-zA-Z][\\\\-\\\\.0-9_\" + (unicodeRegExp.source) + \"]*$\")).test(name)) {\n    warn(\n      'Invalid component name: \"' + name + '\". Component names ' +\n      'should conform to valid custom element name in html5 specification.'\n    );\n  }\n  if (isBuiltInTag(name) || config.isReservedTag(name)) {\n    warn(\n      'Do not use built-in or reserved HTML elements as component ' +\n      'id: ' + name\n    );\n  }\n}\n\n/**\n * Ensure all props option syntax are normalized into the\n * Object-based format.\n */\nfunction normalizeProps (options, vm) {\n  var props = options.props;\n  if (!props) { return }\n  var res = {};\n  var i, val, name;\n  if (Array.isArray(props)) {\n    i = props.length;\n    while (i--) {\n      val = props[i];\n      if (typeof val === 'string') {\n        name = camelize(val);\n        res[name] = { type: null };\n      } else if (process.env.NODE_ENV !== 'production') {\n        warn('props must be strings when using array syntax.');\n      }\n    }\n  } else if (isPlainObject(props)) {\n    for (var key in props) {\n      val = props[key];\n      name = camelize(key);\n      res[name] = isPlainObject(val)\n        ? val\n        : { type: val };\n    }\n  } else if (process.env.NODE_ENV !== 'production') {\n    warn(\n      \"Invalid value for option \\\"props\\\": expected an Array or an Object, \" +\n      \"but got \" + (toRawType(props)) + \".\",\n      vm\n    );\n  }\n  options.props = res;\n}\n\n/**\n * Normalize all injections into Object-based format\n */\nfunction normalizeInject (options, vm) {\n  var inject = options.inject;\n  if (!inject) { return }\n  var normalized = options.inject = {};\n  if (Array.isArray(inject)) {\n    for (var i = 0; i < inject.length; i++) {\n      normalized[inject[i]] = { from: inject[i] };\n    }\n  } else if (isPlainObject(inject)) {\n    for (var key in inject) {\n      var val = inject[key];\n      normalized[key] = isPlainObject(val)\n        ? extend({ from: key }, val)\n        : { from: val };\n    }\n  } else if (process.env.NODE_ENV !== 'production') {\n    warn(\n      \"Invalid value for option \\\"inject\\\": expected an Array or an Object, \" +\n      \"but got \" + (toRawType(inject)) + \".\",\n      vm\n    );\n  }\n}\n\n/**\n * Normalize raw function directives into object format.\n */\nfunction normalizeDirectives (options) {\n  var dirs = options.directives;\n  if (dirs) {\n    for (var key in dirs) {\n      var def$$1 = dirs[key];\n      if (typeof def$$1 === 'function') {\n        dirs[key] = { bind: def$$1, update: def$$1 };\n      }\n    }\n  }\n}\n\nfunction assertObjectType (name, value, vm) {\n  if (!isPlainObject(value)) {\n    warn(\n      \"Invalid value for option \\\"\" + name + \"\\\": expected an Object, \" +\n      \"but got \" + (toRawType(value)) + \".\",\n      vm\n    );\n  }\n}\n\n/**\n * Merge two option objects into a new one.\n * Core utility used in both instantiation and inheritance.\n */\nfunction mergeOptions (\n  parent,\n  child,\n  vm\n) {\n  if (process.env.NODE_ENV !== 'production') {\n    checkComponents(child);\n  }\n\n  if (typeof child === 'function') {\n    child = child.options;\n  }\n\n  normalizeProps(child, vm);\n  normalizeInject(child, vm);\n  normalizeDirectives(child);\n\n  // Apply extends and mixins on the child options,\n  // but only if it is a raw options object that isn't\n  // the result of another mergeOptions call.\n  // Only merged options has the _base property.\n  if (!child._base) {\n    if (child.extends) {\n      parent = mergeOptions(parent, child.extends, vm);\n    }\n    if (child.mixins) {\n      for (var i = 0, l = child.mixins.length; i < l; i++) {\n        parent = mergeOptions(parent, child.mixins[i], vm);\n      }\n    }\n  }\n\n  var options = {};\n  var key;\n  for (key in parent) {\n    mergeField(key);\n  }\n  for (key in child) {\n    if (!hasOwn(parent, key)) {\n      mergeField(key);\n    }\n  }\n  function mergeField (key) {\n    var strat = strats[key] || defaultStrat;\n    options[key] = strat(parent[key], child[key], vm, key);\n  }\n  return options\n}\n\n/**\n * Resolve an asset.\n * This function is used because child instances need access\n * to assets defined in its ancestor chain.\n */\nfunction resolveAsset (\n  options,\n  type,\n  id,\n  warnMissing\n) {\n  /* istanbul ignore if */\n  if (typeof id !== 'string') {\n    return\n  }\n  var assets = options[type];\n  // check local registration variations first\n  if (hasOwn(assets, id)) { return assets[id] }\n  var camelizedId = camelize(id);\n  if (hasOwn(assets, camelizedId)) { return assets[camelizedId] }\n  var PascalCaseId = capitalize(camelizedId);\n  if (hasOwn(assets, PascalCaseId)) { return assets[PascalCaseId] }\n  // fallback to prototype chain\n  var res = assets[id] || assets[camelizedId] || assets[PascalCaseId];\n  if (process.env.NODE_ENV !== 'production' && warnMissing && !res) {\n    warn(\n      'Failed to resolve ' + type.slice(0, -1) + ': ' + id,\n      options\n    );\n  }\n  return res\n}\n\n/*  */\n\n\n\nfunction validateProp (\n  key,\n  propOptions,\n  propsData,\n  vm\n) {\n  var prop = propOptions[key];\n  var absent = !hasOwn(propsData, key);\n  var value = propsData[key];\n  // boolean casting\n  var booleanIndex = getTypeIndex(Boolean, prop.type);\n  if (booleanIndex > -1) {\n    if (absent && !hasOwn(prop, 'default')) {\n      value = false;\n    } else if (value === '' || value === hyphenate(key)) {\n      // only cast empty string / same name to boolean if\n      // boolean has higher priority\n      var stringIndex = getTypeIndex(String, prop.type);\n      if (stringIndex < 0 || booleanIndex < stringIndex) {\n        value = true;\n      }\n    }\n  }\n  // check default value\n  if (value === undefined) {\n    value = getPropDefaultValue(vm, prop, key);\n    // since the default value is a fresh copy,\n    // make sure to observe it.\n    var prevShouldObserve = shouldObserve;\n    toggleObserving(true);\n    observe(value);\n    toggleObserving(prevShouldObserve);\n  }\n  if (\n    process.env.NODE_ENV !== 'production' &&\n    // skip validation for weex recycle-list child component props\n    !(false)\n  ) {\n    assertProp(prop, key, value, vm, absent);\n  }\n  return value\n}\n\n/**\n * Get the default value of a prop.\n */\nfunction getPropDefaultValue (vm, prop, key) {\n  // no default, return undefined\n  if (!hasOwn(prop, 'default')) {\n    return undefined\n  }\n  var def = prop.default;\n  // warn against non-factory defaults for Object & Array\n  if (process.env.NODE_ENV !== 'production' && isObject(def)) {\n    warn(\n      'Invalid default value for prop \"' + key + '\": ' +\n      'Props with type Object/Array must use a factory function ' +\n      'to return the default value.',\n      vm\n    );\n  }\n  // the raw prop value was also undefined from previous render,\n  // return previous default value to avoid unnecessary watcher trigger\n  if (vm && vm.$options.propsData &&\n    vm.$options.propsData[key] === undefined &&\n    vm._props[key] !== undefined\n  ) {\n    return vm._props[key]\n  }\n  // call factory function for non-Function types\n  // a value is Function if its prototype is function even across different execution context\n  return typeof def === 'function' && getType(prop.type) !== 'Function'\n    ? def.call(vm)\n    : def\n}\n\n/**\n * Assert whether a prop is valid.\n */\nfunction assertProp (\n  prop,\n  name,\n  value,\n  vm,\n  absent\n) {\n  if (prop.required && absent) {\n    warn(\n      'Missing required prop: \"' + name + '\"',\n      vm\n    );\n    return\n  }\n  if (value == null && !prop.required) {\n    return\n  }\n  var type = prop.type;\n  var valid = !type || type === true;\n  var expectedTypes = [];\n  if (type) {\n    if (!Array.isArray(type)) {\n      type = [type];\n    }\n    for (var i = 0; i < type.length && !valid; i++) {\n      var assertedType = assertType(value, type[i]);\n      expectedTypes.push(assertedType.expectedType || '');\n      valid = assertedType.valid;\n    }\n  }\n\n  if (!valid) {\n    warn(\n      getInvalidTypeMessage(name, value, expectedTypes),\n      vm\n    );\n    return\n  }\n  var validator = prop.validator;\n  if (validator) {\n    if (!validator(value)) {\n      warn(\n        'Invalid prop: custom validator check failed for prop \"' + name + '\".',\n        vm\n      );\n    }\n  }\n}\n\nvar simpleCheckRE = /^(String|Number|Boolean|Function|Symbol)$/;\n\nfunction assertType (value, type) {\n  var valid;\n  var expectedType = getType(type);\n  if (simpleCheckRE.test(expectedType)) {\n    var t = typeof value;\n    valid = t === expectedType.toLowerCase();\n    // for primitive wrapper objects\n    if (!valid && t === 'object') {\n      valid = value instanceof type;\n    }\n  } else if (expectedType === 'Object') {\n    valid = isPlainObject(value);\n  } else if (expectedType === 'Array') {\n    valid = Array.isArray(value);\n  } else {\n    valid = value instanceof type;\n  }\n  return {\n    valid: valid,\n    expectedType: expectedType\n  }\n}\n\n/**\n * Use function string name to check built-in types,\n * because a simple equality check will fail when running\n * across different vms / iframes.\n */\nfunction getType (fn) {\n  var match = fn && fn.toString().match(/^\\s*function (\\w+)/);\n  return match ? match[1] : ''\n}\n\nfunction isSameType (a, b) {\n  return getType(a) === getType(b)\n}\n\nfunction getTypeIndex (type, expectedTypes) {\n  if (!Array.isArray(expectedTypes)) {\n    return isSameType(expectedTypes, type) ? 0 : -1\n  }\n  for (var i = 0, len = expectedTypes.length; i < len; i++) {\n    if (isSameType(expectedTypes[i], type)) {\n      return i\n    }\n  }\n  return -1\n}\n\nfunction getInvalidTypeMessage (name, value, expectedTypes) {\n  var message = \"Invalid prop: type check failed for prop \\\"\" + name + \"\\\".\" +\n    \" Expected \" + (expectedTypes.map(capitalize).join(', '));\n  var expectedType = expectedTypes[0];\n  var receivedType = toRawType(value);\n  var expectedValue = styleValue(value, expectedType);\n  var receivedValue = styleValue(value, receivedType);\n  // check if we need to specify expected value\n  if (expectedTypes.length === 1 &&\n      isExplicable(expectedType) &&\n      !isBoolean(expectedType, receivedType)) {\n    message += \" with value \" + expectedValue;\n  }\n  message += \", got \" + receivedType + \" \";\n  // check if we need to specify received value\n  if (isExplicable(receivedType)) {\n    message += \"with value \" + receivedValue + \".\";\n  }\n  return message\n}\n\nfunction styleValue (value, type) {\n  if (type === 'String') {\n    return (\"\\\"\" + value + \"\\\"\")\n  } else if (type === 'Number') {\n    return (\"\" + (Number(value)))\n  } else {\n    return (\"\" + value)\n  }\n}\n\nfunction isExplicable (value) {\n  var explicitTypes = ['string', 'number', 'boolean'];\n  return explicitTypes.some(function (elem) { return value.toLowerCase() === elem; })\n}\n\nfunction isBoolean () {\n  var args = [], len = arguments.length;\n  while ( len-- ) args[ len ] = arguments[ len ];\n\n  return args.some(function (elem) { return elem.toLowerCase() === 'boolean'; })\n}\n\n/*  */\n\nfunction handleError (err, vm, info) {\n  // Deactivate deps tracking while processing error handler to avoid possible infinite rendering.\n  // See: https://github.com/vuejs/vuex/issues/1505\n  pushTarget();\n  try {\n    if (vm) {\n      var cur = vm;\n      while ((cur = cur.$parent)) {\n        var hooks = cur.$options.errorCaptured;\n        if (hooks) {\n          for (var i = 0; i < hooks.length; i++) {\n            try {\n              var capture = hooks[i].call(cur, err, vm, info) === false;\n              if (capture) { return }\n            } catch (e) {\n              globalHandleError(e, cur, 'errorCaptured hook');\n            }\n          }\n        }\n      }\n    }\n    globalHandleError(err, vm, info);\n  } finally {\n    popTarget();\n  }\n}\n\nfunction invokeWithErrorHandling (\n  handler,\n  context,\n  args,\n  vm,\n  info\n) {\n  var res;\n  try {\n    res = args ? handler.apply(context, args) : handler.call(context);\n    if (res && !res._isVue && isPromise(res) && !res._handled) {\n      res.catch(function (e) { return handleError(e, vm, info + \" (Promise/async)\"); });\n      // issue #9511\n      // avoid catch triggering multiple times when nested calls\n      res._handled = true;\n    }\n  } catch (e) {\n    handleError(e, vm, info);\n  }\n  return res\n}\n\nfunction globalHandleError (err, vm, info) {\n  if (config.errorHandler) {\n    try {\n      return config.errorHandler.call(null, err, vm, info)\n    } catch (e) {\n      // if the user intentionally throws the original error in the handler,\n      // do not log it twice\n      if (e !== err) {\n        logError(e, null, 'config.errorHandler');\n      }\n    }\n  }\n  logError(err, vm, info);\n}\n\nfunction logError (err, vm, info) {\n  if (process.env.NODE_ENV !== 'production') {\n    warn((\"Error in \" + info + \": \\\"\" + (err.toString()) + \"\\\"\"), vm);\n  }\n  /* istanbul ignore else */\n  if ((inBrowser || inWeex) && typeof console !== 'undefined') {\n    console.error(err);\n  } else {\n    throw err\n  }\n}\n\n/*  */\n\nvar callbacks = [];\nvar pending = false;\n\nfunction flushCallbacks () {\n  pending = false;\n  var copies = callbacks.slice(0);\n  callbacks.length = 0;\n  for (var i = 0; i < copies.length; i++) {\n    copies[i]();\n  }\n}\n\n// Here we have async deferring wrappers using microtasks.\n// In 2.5 we used (macro) tasks (in combination with microtasks).\n// However, it has subtle problems when state is changed right before repaint\n// (e.g. #6813, out-in transitions).\n// Also, using (macro) tasks in event handler would cause some weird behaviors\n// that cannot be circumvented (e.g. #7109, #7153, #7546, #7834, #8109).\n// So we now use microtasks everywhere, again.\n// A major drawback of this tradeoff is that there are some scenarios\n// where microtasks have too high a priority and fire in between supposedly\n// sequential events (e.g. #4521, #6690, which have workarounds)\n// or even between bubbling of the same event (#6566).\nvar timerFunc;\n\n// The nextTick behavior leverages the microtask queue, which can be accessed\n// via either native Promise.then or MutationObserver.\n// MutationObserver has wider support, however it is seriously bugged in\n// UIWebView in iOS >= 9.3.3 when triggered in touch event handlers. It\n// completely stops working after triggering a few times... so, if native\n// Promise is available, we will use it:\n/* istanbul ignore next, $flow-disable-line */\nif (typeof Promise !== 'undefined' && isNative(Promise)) {\n  var p = Promise.resolve();\n  timerFunc = function () {\n    p.then(flushCallbacks);\n    // In problematic UIWebViews, Promise.then doesn't completely break, but\n    // it can get stuck in a weird state where callbacks are pushed into the\n    // microtask queue but the queue isn't being flushed, until the browser\n    // needs to do some other work, e.g. handle a timer. Therefore we can\n    // \"force\" the microtask queue to be flushed by adding an empty timer.\n    if (isIOS) { setTimeout(noop); }\n  };\n} else if (!isIE && typeof MutationObserver !== 'undefined' && (\n  isNative(MutationObserver) ||\n  // PhantomJS and iOS 7.x\n  MutationObserver.toString() === '[object MutationObserverConstructor]'\n)) {\n  // Use MutationObserver where native Promise is not available,\n  // e.g. PhantomJS, iOS7, Android 4.4\n  // (#6466 MutationObserver is unreliable in IE11)\n  var counter = 1;\n  var observer = new MutationObserver(flushCallbacks);\n  var textNode = document.createTextNode(String(counter));\n  observer.observe(textNode, {\n    characterData: true\n  });\n  timerFunc = function () {\n    counter = (counter + 1) % 2;\n    textNode.data = String(counter);\n  };\n} else if (typeof setImmediate !== 'undefined' && isNative(setImmediate)) {\n  // Fallback to setImmediate.\n  // Technically it leverages the (macro) task queue,\n  // but it is still a better choice than setTimeout.\n  timerFunc = function () {\n    setImmediate(flushCallbacks);\n  };\n} else {\n  // Fallback to setTimeout.\n  timerFunc = function () {\n    setTimeout(flushCallbacks, 0);\n  };\n}\n\nfunction nextTick (cb, ctx) {\n  var _resolve;\n  callbacks.push(function () {\n    if (cb) {\n      try {\n        cb.call(ctx);\n      } catch (e) {\n        handleError(e, ctx, 'nextTick');\n      }\n    } else if (_resolve) {\n      _resolve(ctx);\n    }\n  });\n  if (!pending) {\n    pending = true;\n    timerFunc();\n  }\n  // $flow-disable-line\n  if (!cb && typeof Promise !== 'undefined') {\n    return new Promise(function (resolve) {\n      _resolve = resolve;\n    })\n  }\n}\n\n/*  */\n\n/* not type checking this file because flow doesn't play well with Proxy */\n\nvar initProxy;\n\nif (process.env.NODE_ENV !== 'production') {\n  var allowedGlobals = makeMap(\n    'Infinity,undefined,NaN,isFinite,isNaN,' +\n    'parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,' +\n    'Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,' +\n    'require' // for Webpack/Browserify\n  );\n\n  var warnNonPresent = function (target, key) {\n    warn(\n      \"Property or method \\\"\" + key + \"\\\" is not defined on the instance but \" +\n      'referenced during render. Make sure that this property is reactive, ' +\n      'either in the data option, or for class-based components, by ' +\n      'initializing the property. ' +\n      'See: https://vuejs.org/v2/guide/reactivity.html#Declaring-Reactive-Properties.',\n      target\n    );\n  };\n\n  var warnReservedPrefix = function (target, key) {\n    warn(\n      \"Property \\\"\" + key + \"\\\" must be accessed with \\\"$data.\" + key + \"\\\" because \" +\n      'properties starting with \"$\" or \"_\" are not proxied in the Vue instance to ' +\n      'prevent conflicts with Vue internals. ' +\n      'See: https://vuejs.org/v2/api/#data',\n      target\n    );\n  };\n\n  var hasProxy =\n    typeof Proxy !== 'undefined' && isNative(Proxy);\n\n  if (hasProxy) {\n    var isBuiltInModifier = makeMap('stop,prevent,self,ctrl,shift,alt,meta,exact');\n    config.keyCodes = new Proxy(config.keyCodes, {\n      set: function set (target, key, value) {\n        if (isBuiltInModifier(key)) {\n          warn((\"Avoid overwriting built-in modifier in config.keyCodes: .\" + key));\n          return false\n        } else {\n          target[key] = value;\n          return true\n        }\n      }\n    });\n  }\n\n  var hasHandler = {\n    has: function has (target, key) {\n      var has = key in target;\n      var isAllowed = allowedGlobals(key) ||\n        (typeof key === 'string' && key.charAt(0) === '_' && !(key in target.$data));\n      if (!has && !isAllowed) {\n        if (key in target.$data) { warnReservedPrefix(target, key); }\n        else { warnNonPresent(target, key); }\n      }\n      return has || !isAllowed\n    }\n  };\n\n  var getHandler = {\n    get: function get (target, key) {\n      if (typeof key === 'string' && !(key in target)) {\n        if (key in target.$data) { warnReservedPrefix(target, key); }\n        else { warnNonPresent(target, key); }\n      }\n      return target[key]\n    }\n  };\n\n  initProxy = function initProxy (vm) {\n    if (hasProxy) {\n      // determine which proxy handler to use\n      var options = vm.$options;\n      var handlers = options.render && options.render._withStripped\n        ? getHandler\n        : hasHandler;\n      vm._renderProxy = new Proxy(vm, handlers);\n    } else {\n      vm._renderProxy = vm;\n    }\n  };\n}\n\n/*  */\n\nvar seenObjects = new _Set();\n\n/**\n * Recursively traverse an object to evoke all converted\n * getters, so that every nested property inside the object\n * is collected as a \"deep\" dependency.\n */\nfunction traverse (val) {\n  _traverse(val, seenObjects);\n  seenObjects.clear();\n}\n\nfunction _traverse (val, seen) {\n  var i, keys;\n  var isA = Array.isArray(val);\n  if ((!isA && !isObject(val)) || Object.isFrozen(val) || val instanceof VNode) {\n    return\n  }\n  if (val.__ob__) {\n    var depId = val.__ob__.dep.id;\n    if (seen.has(depId)) {\n      return\n    }\n    seen.add(depId);\n  }\n  if (isA) {\n    i = val.length;\n    while (i--) { _traverse(val[i], seen); }\n  } else {\n    keys = Object.keys(val);\n    i = keys.length;\n    while (i--) { _traverse(val[keys[i]], seen); }\n  }\n}\n\nvar mark;\nvar measure;\n\nif (process.env.NODE_ENV !== 'production') {\n  var perf = inBrowser && window.performance;\n  /* istanbul ignore if */\n  if (\n    perf &&\n    perf.mark &&\n    perf.measure &&\n    perf.clearMarks &&\n    perf.clearMeasures\n  ) {\n    mark = function (tag) { return perf.mark(tag); };\n    measure = function (name, startTag, endTag) {\n      perf.measure(name, startTag, endTag);\n      perf.clearMarks(startTag);\n      perf.clearMarks(endTag);\n      // perf.clearMeasures(name)\n    };\n  }\n}\n\n/*  */\n\nvar normalizeEvent = cached(function (name) {\n  var passive = name.charAt(0) === '&';\n  name = passive ? name.slice(1) : name;\n  var once$$1 = name.charAt(0) === '~'; // Prefixed last, checked first\n  name = once$$1 ? name.slice(1) : name;\n  var capture = name.charAt(0) === '!';\n  name = capture ? name.slice(1) : name;\n  return {\n    name: name,\n    once: once$$1,\n    capture: capture,\n    passive: passive\n  }\n});\n\nfunction createFnInvoker (fns, vm) {\n  function invoker () {\n    var arguments$1 = arguments;\n\n    var fns = invoker.fns;\n    if (Array.isArray(fns)) {\n      var cloned = fns.slice();\n      for (var i = 0; i < cloned.length; i++) {\n        invokeWithErrorHandling(cloned[i], null, arguments$1, vm, \"v-on handler\");\n      }\n    } else {\n      // return handler return value for single handlers\n      return invokeWithErrorHandling(fns, null, arguments, vm, \"v-on handler\")\n    }\n  }\n  invoker.fns = fns;\n  return invoker\n}\n\nfunction updateListeners (\n  on,\n  oldOn,\n  add,\n  remove$$1,\n  createOnceHandler,\n  vm\n) {\n  var name, def$$1, cur, old, event;\n  for (name in on) {\n    def$$1 = cur = on[name];\n    old = oldOn[name];\n    event = normalizeEvent(name);\n    if (isUndef(cur)) {\n      process.env.NODE_ENV !== 'production' && warn(\n        \"Invalid handler for event \\\"\" + (event.name) + \"\\\": got \" + String(cur),\n        vm\n      );\n    } else if (isUndef(old)) {\n      if (isUndef(cur.fns)) {\n        cur = on[name] = createFnInvoker(cur, vm);\n      }\n      if (isTrue(event.once)) {\n        cur = on[name] = createOnceHandler(event.name, cur, event.capture);\n      }\n      add(event.name, cur, event.capture, event.passive, event.params);\n    } else if (cur !== old) {\n      old.fns = cur;\n      on[name] = old;\n    }\n  }\n  for (name in oldOn) {\n    if (isUndef(on[name])) {\n      event = normalizeEvent(name);\n      remove$$1(event.name, oldOn[name], event.capture);\n    }\n  }\n}\n\n/*  */\n\n/*  */\n\n// fixed by xxxxxx (mp properties)\r\nfunction extractPropertiesFromVNodeData(data, Ctor, res, context) {\r\n  var propOptions = Ctor.options.mpOptions && Ctor.options.mpOptions.properties;\r\n  if (isUndef(propOptions)) {\r\n    return res\r\n  }\n  var externalClasses = Ctor.options.mpOptions.externalClasses || [];\r\n  var attrs = data.attrs;\n  var props = data.props;\r\n  if (isDef(attrs) || isDef(props)) {\r\n    for (var key in propOptions) {\r\n      var altKey = hyphenate(key);\n      var result = checkProp(res, props, key, altKey, true) ||\n          checkProp(res, attrs, key, altKey, false);\n      // externalClass\n      if (\n        result &&\n        res[key] &&\n        externalClasses.indexOf(altKey) !== -1 &&\n        context[camelize(res[key])]\n      ) {\n        // 赋值 externalClass 真正的值(模板里 externalClass 的值可能是字符串)\n        res[key] = context[camelize(res[key])];\n      }\r\n    }\r\n  }\r\n  return res\r\n}\n\nfunction extractPropsFromVNodeData (\n  data,\n  Ctor,\n  tag,\n  context// fixed by xxxxxx\n) {\n  // we are only extracting raw values here.\n  // validation and default values are handled in the child\n  // component itself.\n  var propOptions = Ctor.options.props;\n  if (isUndef(propOptions)) {\n    // fixed by xxxxxx\n    return extractPropertiesFromVNodeData(data, Ctor, {}, context)\n  }\n  var res = {};\n  var attrs = data.attrs;\n  var props = data.props;\n  if (isDef(attrs) || isDef(props)) {\n    for (var key in propOptions) {\n      var altKey = hyphenate(key);\n      if (process.env.NODE_ENV !== 'production') {\n        var keyInLowerCase = key.toLowerCase();\n        if (\n          key !== keyInLowerCase &&\n          attrs && hasOwn(attrs, keyInLowerCase)\n        ) {\n          tip(\n            \"Prop \\\"\" + keyInLowerCase + \"\\\" is passed to component \" +\n            (formatComponentName(tag || Ctor)) + \", but the declared prop name is\" +\n            \" \\\"\" + key + \"\\\". \" +\n            \"Note that HTML attributes are case-insensitive and camelCased \" +\n            \"props need to use their kebab-case equivalents when using in-DOM \" +\n            \"templates. You should probably use \\\"\" + altKey + \"\\\" instead of \\\"\" + key + \"\\\".\"\n          );\n        }\n      }\n      checkProp(res, props, key, altKey, true) ||\n      checkProp(res, attrs, key, altKey, false);\n    }\n  }\n  // fixed by xxxxxx\n  return extractPropertiesFromVNodeData(data, Ctor, res, context)\n}\n\nfunction checkProp (\n  res,\n  hash,\n  key,\n  altKey,\n  preserve\n) {\n  if (isDef(hash)) {\n    if (hasOwn(hash, key)) {\n      res[key] = hash[key];\n      if (!preserve) {\n        delete hash[key];\n      }\n      return true\n    } else if (hasOwn(hash, altKey)) {\n      res[key] = hash[altKey];\n      if (!preserve) {\n        delete hash[altKey];\n      }\n      return true\n    }\n  }\n  return false\n}\n\n/*  */\n\n// The template compiler attempts to minimize the need for normalization by\n// statically analyzing the template at compile time.\n//\n// For plain HTML markup, normalization can be completely skipped because the\n// generated render function is guaranteed to return Array<VNode>. There are\n// two cases where extra normalization is needed:\n\n// 1. When the children contains components - because a functional component\n// may return an Array instead of a single root. In this case, just a simple\n// normalization is needed - if any child is an Array, we flatten the whole\n// thing with Array.prototype.concat. It is guaranteed to be only 1-level deep\n// because functional components already normalize their own children.\nfunction simpleNormalizeChildren (children) {\n  for (var i = 0; i < children.length; i++) {\n    if (Array.isArray(children[i])) {\n      return Array.prototype.concat.apply([], children)\n    }\n  }\n  return children\n}\n\n// 2. When the children contains constructs that always generated nested Arrays,\n// e.g. <template>, <slot>, v-for, or when the children is provided by user\n// with hand-written render functions / JSX. In such cases a full normalization\n// is needed to cater to all possible types of children values.\nfunction normalizeChildren (children) {\n  return isPrimitive(children)\n    ? [createTextVNode(children)]\n    : Array.isArray(children)\n      ? normalizeArrayChildren(children)\n      : undefined\n}\n\nfunction isTextNode (node) {\n  return isDef(node) && isDef(node.text) && isFalse(node.isComment)\n}\n\nfunction normalizeArrayChildren (children, nestedIndex) {\n  var res = [];\n  var i, c, lastIndex, last;\n  for (i = 0; i < children.length; i++) {\n    c = children[i];\n    if (isUndef(c) || typeof c === 'boolean') { continue }\n    lastIndex = res.length - 1;\n    last = res[lastIndex];\n    //  nested\n    if (Array.isArray(c)) {\n      if (c.length > 0) {\n        c = normalizeArrayChildren(c, ((nestedIndex || '') + \"_\" + i));\n        // merge adjacent text nodes\n        if (isTextNode(c[0]) && isTextNode(last)) {\n          res[lastIndex] = createTextVNode(last.text + (c[0]).text);\n          c.shift();\n        }\n        res.push.apply(res, c);\n      }\n    } else if (isPrimitive(c)) {\n      if (isTextNode(last)) {\n        // merge adjacent text nodes\n        // this is necessary for SSR hydration because text nodes are\n        // essentially merged when rendered to HTML strings\n        res[lastIndex] = createTextVNode(last.text + c);\n      } else if (c !== '') {\n        // convert primitive to vnode\n        res.push(createTextVNode(c));\n      }\n    } else {\n      if (isTextNode(c) && isTextNode(last)) {\n        // merge adjacent text nodes\n        res[lastIndex] = createTextVNode(last.text + c.text);\n      } else {\n        // default key for nested array children (likely generated by v-for)\n        if (isTrue(children._isVList) &&\n          isDef(c.tag) &&\n          isUndef(c.key) &&\n          isDef(nestedIndex)) {\n          c.key = \"__vlist\" + nestedIndex + \"_\" + i + \"__\";\n        }\n        res.push(c);\n      }\n    }\n  }\n  return res\n}\n\n/*  */\n\nfunction initProvide (vm) {\n  var provide = vm.$options.provide;\n  if (provide) {\n    vm._provided = typeof provide === 'function'\n      ? provide.call(vm)\n      : provide;\n  }\n}\n\nfunction initInjections (vm) {\n  var result = resolveInject(vm.$options.inject, vm);\n  if (result) {\n    toggleObserving(false);\n    Object.keys(result).forEach(function (key) {\n      /* istanbul ignore else */\n      if (process.env.NODE_ENV !== 'production') {\n        defineReactive$$1(vm, key, result[key], function () {\n          warn(\n            \"Avoid mutating an injected value directly since the changes will be \" +\n            \"overwritten whenever the provided component re-renders. \" +\n            \"injection being mutated: \\\"\" + key + \"\\\"\",\n            vm\n          );\n        });\n      } else {\n        defineReactive$$1(vm, key, result[key]);\n      }\n    });\n    toggleObserving(true);\n  }\n}\n\nfunction resolveInject (inject, vm) {\n  if (inject) {\n    // inject is :any because flow is not smart enough to figure out cached\n    var result = Object.create(null);\n    var keys = hasSymbol\n      ? Reflect.ownKeys(inject)\n      : Object.keys(inject);\n\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n      // #6574 in case the inject object is observed...\n      if (key === '__ob__') { continue }\n      var provideKey = inject[key].from;\n      var source = vm;\n      while (source) {\n        if (source._provided && hasOwn(source._provided, provideKey)) {\n          result[key] = source._provided[provideKey];\n          break\n        }\n        source = source.$parent;\n      }\n      if (!source) {\n        if ('default' in inject[key]) {\n          var provideDefault = inject[key].default;\n          result[key] = typeof provideDefault === 'function'\n            ? provideDefault.call(vm)\n            : provideDefault;\n        } else if (process.env.NODE_ENV !== 'production') {\n          warn((\"Injection \\\"\" + key + \"\\\" not found\"), vm);\n        }\n      }\n    }\n    return result\n  }\n}\n\n/*  */\n\n\n\n/**\n * Runtime helper for resolving raw children VNodes into a slot object.\n */\nfunction resolveSlots (\n  children,\n  context\n) {\n  if (!children || !children.length) {\n    return {}\n  }\n  var slots = {};\n  for (var i = 0, l = children.length; i < l; i++) {\n    var child = children[i];\n    var data = child.data;\n    // remove slot attribute if the node is resolved as a Vue slot node\n    if (data && data.attrs && data.attrs.slot) {\n      delete data.attrs.slot;\n    }\n    // named slots should only be respected if the vnode was rendered in the\n    // same context.\n    if ((child.context === context || child.fnContext === context) &&\n      data && data.slot != null\n    ) {\n      var name = data.slot;\n      var slot = (slots[name] || (slots[name] = []));\n      if (child.tag === 'template') {\n        slot.push.apply(slot, child.children || []);\n      } else {\n        slot.push(child);\n      }\n    } else {\n      // fixed by xxxxxx 临时 hack 掉 uni-app 中的异步 name slot page\n      if(child.asyncMeta && child.asyncMeta.data && child.asyncMeta.data.slot === 'page'){\n        (slots['page'] || (slots['page'] = [])).push(child);\n      }else{\n        (slots.default || (slots.default = [])).push(child);\n      }\n    }\n  }\n  // ignore slots that contains only whitespace\n  for (var name$1 in slots) {\n    if (slots[name$1].every(isWhitespace)) {\n      delete slots[name$1];\n    }\n  }\n  return slots\n}\n\nfunction isWhitespace (node) {\n  return (node.isComment && !node.asyncFactory) || node.text === ' '\n}\n\n/*  */\n\nfunction normalizeScopedSlots (\n  slots,\n  normalSlots,\n  prevSlots\n) {\n  var res;\n  var hasNormalSlots = Object.keys(normalSlots).length > 0;\n  var isStable = slots ? !!slots.$stable : !hasNormalSlots;\n  var key = slots && slots.$key;\n  if (!slots) {\n    res = {};\n  } else if (slots._normalized) {\n    // fast path 1: child component re-render only, parent did not change\n    return slots._normalized\n  } else if (\n    isStable &&\n    prevSlots &&\n    prevSlots !== emptyObject &&\n    key === prevSlots.$key &&\n    !hasNormalSlots &&\n    !prevSlots.$hasNormal\n  ) {\n    // fast path 2: stable scoped slots w/ no normal slots to proxy,\n    // only need to normalize once\n    return prevSlots\n  } else {\n    res = {};\n    for (var key$1 in slots) {\n      if (slots[key$1] && key$1[0] !== '$') {\n        res[key$1] = normalizeScopedSlot(normalSlots, key$1, slots[key$1]);\n      }\n    }\n  }\n  // expose normal slots on scopedSlots\n  for (var key$2 in normalSlots) {\n    if (!(key$2 in res)) {\n      res[key$2] = proxyNormalSlot(normalSlots, key$2);\n    }\n  }\n  // avoriaz seems to mock a non-extensible $scopedSlots object\n  // and when that is passed down this would cause an error\n  if (slots && Object.isExtensible(slots)) {\n    (slots)._normalized = res;\n  }\n  def(res, '$stable', isStable);\n  def(res, '$key', key);\n  def(res, '$hasNormal', hasNormalSlots);\n  return res\n}\n\nfunction normalizeScopedSlot(normalSlots, key, fn) {\n  var normalized = function () {\n    var res = arguments.length ? fn.apply(null, arguments) : fn({});\n    res = res && typeof res === 'object' && !Array.isArray(res)\n      ? [res] // single vnode\n      : normalizeChildren(res);\n    return res && (\n      res.length === 0 ||\n      (res.length === 1 && res[0].isComment) // #9658\n    ) ? undefined\n      : res\n  };\n  // this is a slot using the new v-slot syntax without scope. although it is\n  // compiled as a scoped slot, render fn users would expect it to be present\n  // on this.$slots because the usage is semantically a normal slot.\n  if (fn.proxy) {\n    Object.defineProperty(normalSlots, key, {\n      get: normalized,\n      enumerable: true,\n      configurable: true\n    });\n  }\n  return normalized\n}\n\nfunction proxyNormalSlot(slots, key) {\n  return function () { return slots[key]; }\n}\n\n/*  */\n\n/**\n * Runtime helper for rendering v-for lists.\n */\nfunction renderList (\n  val,\n  render\n) {\n  var ret, i, l, keys, key;\n  if (Array.isArray(val) || typeof val === 'string') {\n    ret = new Array(val.length);\n    for (i = 0, l = val.length; i < l; i++) {\n      ret[i] = render(val[i], i, i, i); // fixed by xxxxxx\n    }\n  } else if (typeof val === 'number') {\n    ret = new Array(val);\n    for (i = 0; i < val; i++) {\n      ret[i] = render(i + 1, i, i, i); // fixed by xxxxxx\n    }\n  } else if (isObject(val)) {\n    if (hasSymbol && val[Symbol.iterator]) {\n      ret = [];\n      var iterator = val[Symbol.iterator]();\n      var result = iterator.next();\n      while (!result.done) {\n        ret.push(render(result.value, ret.length, i++, i)); // fixed by xxxxxx\n        result = iterator.next();\n      }\n    } else {\n      keys = Object.keys(val);\n      ret = new Array(keys.length);\n      for (i = 0, l = keys.length; i < l; i++) {\n        key = keys[i];\n        ret[i] = render(val[key], key, i, i); // fixed by xxxxxx\n      }\n    }\n  }\n  if (!isDef(ret)) {\n    ret = [];\n  }\n  (ret)._isVList = true;\n  return ret\n}\n\n/*  */\n\n/**\n * Runtime helper for rendering <slot>\n */\nfunction renderSlot (\n  name,\n  fallback,\n  props,\n  bindObject\n) {\n  var scopedSlotFn = this.$scopedSlots[name];\n  var nodes;\n  if (scopedSlotFn) { // scoped slot\n    props = props || {};\n    if (bindObject) {\n      if (process.env.NODE_ENV !== 'production' && !isObject(bindObject)) {\n        warn(\n          'slot v-bind without argument expects an Object',\n          this\n        );\n      }\n      props = extend(extend({}, bindObject), props);\n    }\n    // fixed by xxxxxx app-plus scopedSlot\n    nodes = scopedSlotFn(props, this, props._i) || fallback;\n  } else {\n    nodes = this.$slots[name] || fallback;\n  }\n\n  var target = props && props.slot;\n  if (target) {\n    return this.$createElement('template', { slot: target }, nodes)\n  } else {\n    return nodes\n  }\n}\n\n/*  */\n\n/**\n * Runtime helper for resolving filters\n */\nfunction resolveFilter (id) {\n  return resolveAsset(this.$options, 'filters', id, true) || identity\n}\n\n/*  */\n\nfunction isKeyNotMatch (expect, actual) {\n  if (Array.isArray(expect)) {\n    return expect.indexOf(actual) === -1\n  } else {\n    return expect !== actual\n  }\n}\n\n/**\n * Runtime helper for checking keyCodes from config.\n * exposed as Vue.prototype._k\n * passing in eventKeyName as last argument separately for backwards compat\n */\nfunction checkKeyCodes (\n  eventKeyCode,\n  key,\n  builtInKeyCode,\n  eventKeyName,\n  builtInKeyName\n) {\n  var mappedKeyCode = config.keyCodes[key] || builtInKeyCode;\n  if (builtInKeyName && eventKeyName && !config.keyCodes[key]) {\n    return isKeyNotMatch(builtInKeyName, eventKeyName)\n  } else if (mappedKeyCode) {\n    return isKeyNotMatch(mappedKeyCode, eventKeyCode)\n  } else if (eventKeyName) {\n    return hyphenate(eventKeyName) !== key\n  }\n}\n\n/*  */\n\n/**\n * Runtime helper for merging v-bind=\"object\" into a VNode's data.\n */\nfunction bindObjectProps (\n  data,\n  tag,\n  value,\n  asProp,\n  isSync\n) {\n  if (value) {\n    if (!isObject(value)) {\n      process.env.NODE_ENV !== 'production' && warn(\n        'v-bind without argument expects an Object or Array value',\n        this\n      );\n    } else {\n      if (Array.isArray(value)) {\n        value = toObject(value);\n      }\n      var hash;\n      var loop = function ( key ) {\n        if (\n          key === 'class' ||\n          key === 'style' ||\n          isReservedAttribute(key)\n        ) {\n          hash = data;\n        } else {\n          var type = data.attrs && data.attrs.type;\n          hash = asProp || config.mustUseProp(tag, type, key)\n            ? data.domProps || (data.domProps = {})\n            : data.attrs || (data.attrs = {});\n        }\n        var camelizedKey = camelize(key);\n        var hyphenatedKey = hyphenate(key);\n        if (!(camelizedKey in hash) && !(hyphenatedKey in hash)) {\n          hash[key] = value[key];\n\n          if (isSync) {\n            var on = data.on || (data.on = {});\n            on[(\"update:\" + key)] = function ($event) {\n              value[key] = $event;\n            };\n          }\n        }\n      };\n\n      for (var key in value) loop( key );\n    }\n  }\n  return data\n}\n\n/*  */\n\n/**\n * Runtime helper for rendering static trees.\n */\nfunction renderStatic (\n  index,\n  isInFor\n) {\n  var cached = this._staticTrees || (this._staticTrees = []);\n  var tree = cached[index];\n  // if has already-rendered static tree and not inside v-for,\n  // we can reuse the same tree.\n  if (tree && !isInFor) {\n    return tree\n  }\n  // otherwise, render a fresh tree.\n  tree = cached[index] = this.$options.staticRenderFns[index].call(\n    this._renderProxy,\n    null,\n    this // for render fns generated for functional component templates\n  );\n  markStatic(tree, (\"__static__\" + index), false);\n  return tree\n}\n\n/**\n * Runtime helper for v-once.\n * Effectively it means marking the node as static with a unique key.\n */\nfunction markOnce (\n  tree,\n  index,\n  key\n) {\n  markStatic(tree, (\"__once__\" + index + (key ? (\"_\" + key) : \"\")), true);\n  return tree\n}\n\nfunction markStatic (\n  tree,\n  key,\n  isOnce\n) {\n  if (Array.isArray(tree)) {\n    for (var i = 0; i < tree.length; i++) {\n      if (tree[i] && typeof tree[i] !== 'string') {\n        markStaticNode(tree[i], (key + \"_\" + i), isOnce);\n      }\n    }\n  } else {\n    markStaticNode(tree, key, isOnce);\n  }\n}\n\nfunction markStaticNode (node, key, isOnce) {\n  node.isStatic = true;\n  node.key = key;\n  node.isOnce = isOnce;\n}\n\n/*  */\n\nfunction bindObjectListeners (data, value) {\n  if (value) {\n    if (!isPlainObject(value)) {\n      process.env.NODE_ENV !== 'production' && warn(\n        'v-on without argument expects an Object value',\n        this\n      );\n    } else {\n      var on = data.on = data.on ? extend({}, data.on) : {};\n      for (var key in value) {\n        var existing = on[key];\n        var ours = value[key];\n        on[key] = existing ? [].concat(existing, ours) : ours;\n      }\n    }\n  }\n  return data\n}\n\n/*  */\n\nfunction resolveScopedSlots (\n  fns, // see flow/vnode\n  res,\n  // the following are added in 2.6\n  hasDynamicKeys,\n  contentHashKey\n) {\n  res = res || { $stable: !hasDynamicKeys };\n  for (var i = 0; i < fns.length; i++) {\n    var slot = fns[i];\n    if (Array.isArray(slot)) {\n      resolveScopedSlots(slot, res, hasDynamicKeys);\n    } else if (slot) {\n      // marker for reverse proxying v-slot without scope on this.$slots\n      if (slot.proxy) {\n        slot.fn.proxy = true;\n      }\n      res[slot.key] = slot.fn;\n    }\n  }\n  if (contentHashKey) {\n    (res).$key = contentHashKey;\n  }\n  return res\n}\n\n/*  */\n\nfunction bindDynamicKeys (baseObj, values) {\n  for (var i = 0; i < values.length; i += 2) {\n    var key = values[i];\n    if (typeof key === 'string' && key) {\n      baseObj[values[i]] = values[i + 1];\n    } else if (process.env.NODE_ENV !== 'production' && key !== '' && key !== null) {\n      // null is a special value for explicitly removing a binding\n      warn(\n        (\"Invalid value for dynamic directive argument (expected string or null): \" + key),\n        this\n      );\n    }\n  }\n  return baseObj\n}\n\n// helper to dynamically append modifier runtime markers to event names.\n// ensure only append when value is already string, otherwise it will be cast\n// to string and cause the type check to miss.\nfunction prependModifier (value, symbol) {\n  return typeof value === 'string' ? symbol + value : value\n}\n\n/*  */\n\nfunction installRenderHelpers (target) {\n  target._o = markOnce;\n  target._n = toNumber;\n  target._s = toString;\n  target._l = renderList;\n  target._t = renderSlot;\n  target._q = looseEqual;\n  target._i = looseIndexOf;\n  target._m = renderStatic;\n  target._f = resolveFilter;\n  target._k = checkKeyCodes;\n  target._b = bindObjectProps;\n  target._v = createTextVNode;\n  target._e = createEmptyVNode;\n  target._u = resolveScopedSlots;\n  target._g = bindObjectListeners;\n  target._d = bindDynamicKeys;\n  target._p = prependModifier;\n}\n\n/*  */\n\nfunction FunctionalRenderContext (\n  data,\n  props,\n  children,\n  parent,\n  Ctor\n) {\n  var this$1 = this;\n\n  var options = Ctor.options;\n  // ensure the createElement function in functional components\n  // gets a unique context - this is necessary for correct named slot check\n  var contextVm;\n  if (hasOwn(parent, '_uid')) {\n    contextVm = Object.create(parent);\n    // $flow-disable-line\n    contextVm._original = parent;\n  } else {\n    // the context vm passed in is a functional context as well.\n    // in this case we want to make sure we are able to get a hold to the\n    // real context instance.\n    contextVm = parent;\n    // $flow-disable-line\n    parent = parent._original;\n  }\n  var isCompiled = isTrue(options._compiled);\n  var needNormalization = !isCompiled;\n\n  this.data = data;\n  this.props = props;\n  this.children = children;\n  this.parent = parent;\n  this.listeners = data.on || emptyObject;\n  this.injections = resolveInject(options.inject, parent);\n  this.slots = function () {\n    if (!this$1.$slots) {\n      normalizeScopedSlots(\n        data.scopedSlots,\n        this$1.$slots = resolveSlots(children, parent)\n      );\n    }\n    return this$1.$slots\n  };\n\n  Object.defineProperty(this, 'scopedSlots', ({\n    enumerable: true,\n    get: function get () {\n      return normalizeScopedSlots(data.scopedSlots, this.slots())\n    }\n  }));\n\n  // support for compiled functional template\n  if (isCompiled) {\n    // exposing $options for renderStatic()\n    this.$options = options;\n    // pre-resolve slots for renderSlot()\n    this.$slots = this.slots();\n    this.$scopedSlots = normalizeScopedSlots(data.scopedSlots, this.$slots);\n  }\n\n  if (options._scopeId) {\n    this._c = function (a, b, c, d) {\n      var vnode = createElement(contextVm, a, b, c, d, needNormalization);\n      if (vnode && !Array.isArray(vnode)) {\n        vnode.fnScopeId = options._scopeId;\n        vnode.fnContext = parent;\n      }\n      return vnode\n    };\n  } else {\n    this._c = function (a, b, c, d) { return createElement(contextVm, a, b, c, d, needNormalization); };\n  }\n}\n\ninstallRenderHelpers(FunctionalRenderContext.prototype);\n\nfunction createFunctionalComponent (\n  Ctor,\n  propsData,\n  data,\n  contextVm,\n  children\n) {\n  var options = Ctor.options;\n  var props = {};\n  var propOptions = options.props;\n  if (isDef(propOptions)) {\n    for (var key in propOptions) {\n      props[key] = validateProp(key, propOptions, propsData || emptyObject);\n    }\n  } else {\n    if (isDef(data.attrs)) { mergeProps(props, data.attrs); }\n    if (isDef(data.props)) { mergeProps(props, data.props); }\n  }\n\n  var renderContext = new FunctionalRenderContext(\n    data,\n    props,\n    children,\n    contextVm,\n    Ctor\n  );\n\n  var vnode = options.render.call(null, renderContext._c, renderContext);\n\n  if (vnode instanceof VNode) {\n    return cloneAndMarkFunctionalResult(vnode, data, renderContext.parent, options, renderContext)\n  } else if (Array.isArray(vnode)) {\n    var vnodes = normalizeChildren(vnode) || [];\n    var res = new Array(vnodes.length);\n    for (var i = 0; i < vnodes.length; i++) {\n      res[i] = cloneAndMarkFunctionalResult(vnodes[i], data, renderContext.parent, options, renderContext);\n    }\n    return res\n  }\n}\n\nfunction cloneAndMarkFunctionalResult (vnode, data, contextVm, options, renderContext) {\n  // #7817 clone node before setting fnContext, otherwise if the node is reused\n  // (e.g. it was from a cached normal slot) the fnContext causes named slots\n  // that should not be matched to match.\n  var clone = cloneVNode(vnode);\n  clone.fnContext = contextVm;\n  clone.fnOptions = options;\n  if (process.env.NODE_ENV !== 'production') {\n    (clone.devtoolsMeta = clone.devtoolsMeta || {}).renderContext = renderContext;\n  }\n  if (data.slot) {\n    (clone.data || (clone.data = {})).slot = data.slot;\n  }\n  return clone\n}\n\nfunction mergeProps (to, from) {\n  for (var key in from) {\n    to[camelize(key)] = from[key];\n  }\n}\n\n/*  */\n\n/*  */\n\n/*  */\n\n/*  */\n\n// inline hooks to be invoked on component VNodes during patch\nvar componentVNodeHooks = {\n  init: function init (vnode, hydrating) {\n    if (\n      vnode.componentInstance &&\n      !vnode.componentInstance._isDestroyed &&\n      vnode.data.keepAlive\n    ) {\n      // kept-alive components, treat as a patch\n      var mountedNode = vnode; // work around flow\n      componentVNodeHooks.prepatch(mountedNode, mountedNode);\n    } else {\n      var child = vnode.componentInstance = createComponentInstanceForVnode(\n        vnode,\n        activeInstance\n      );\n      child.$mount(hydrating ? vnode.elm : undefined, hydrating);\n    }\n  },\n\n  prepatch: function prepatch (oldVnode, vnode) {\n    var options = vnode.componentOptions;\n    var child = vnode.componentInstance = oldVnode.componentInstance;\n    updateChildComponent(\n      child,\n      options.propsData, // updated props\n      options.listeners, // updated listeners\n      vnode, // new parent vnode\n      options.children // new children\n    );\n  },\n\n  insert: function insert (vnode) {\n    var context = vnode.context;\n    var componentInstance = vnode.componentInstance;\n    if (!componentInstance._isMounted) {\n      callHook(componentInstance, 'onServiceCreated');\n      callHook(componentInstance, 'onServiceAttached');\n      componentInstance._isMounted = true;\n      callHook(componentInstance, 'mounted');\n    }\n    if (vnode.data.keepAlive) {\n      if (context._isMounted) {\n        // vue-router#1212\n        // During updates, a kept-alive component's child components may\n        // change, so directly walking the tree here may call activated hooks\n        // on incorrect children. Instead we push them into a queue which will\n        // be processed after the whole patch process ended.\n        queueActivatedComponent(componentInstance);\n      } else {\n        activateChildComponent(componentInstance, true /* direct */);\n      }\n    }\n  },\n\n  destroy: function destroy (vnode) {\n    var componentInstance = vnode.componentInstance;\n    if (!componentInstance._isDestroyed) {\n      if (!vnode.data.keepAlive) {\n        componentInstance.$destroy();\n      } else {\n        deactivateChildComponent(componentInstance, true /* direct */);\n      }\n    }\n  }\n};\n\nvar hooksToMerge = Object.keys(componentVNodeHooks);\n\nfunction createComponent (\n  Ctor,\n  data,\n  context,\n  children,\n  tag\n) {\n  if (isUndef(Ctor)) {\n    return\n  }\n\n  var baseCtor = context.$options._base;\n\n  // plain options object: turn it into a constructor\n  if (isObject(Ctor)) {\n    Ctor = baseCtor.extend(Ctor);\n  }\n\n  // if at this stage it's not a constructor or an async component factory,\n  // reject.\n  if (typeof Ctor !== 'function') {\n    if (process.env.NODE_ENV !== 'production') {\n      warn((\"Invalid Component definition: \" + (String(Ctor))), context);\n    }\n    return\n  }\n\n  // async component\n  var asyncFactory;\n  if (isUndef(Ctor.cid)) {\n    asyncFactory = Ctor;\n    Ctor = resolveAsyncComponent(asyncFactory, baseCtor);\n    if (Ctor === undefined) {\n      // return a placeholder node for async component, which is rendered\n      // as a comment node but preserves all the raw information for the node.\n      // the information will be used for async server-rendering and hydration.\n      return createAsyncPlaceholder(\n        asyncFactory,\n        data,\n        context,\n        children,\n        tag\n      )\n    }\n  }\n\n  data = data || {};\n\n  // resolve constructor options in case global mixins are applied after\n  // component constructor creation\n  resolveConstructorOptions(Ctor);\n\n  // transform component v-model data into props & events\n  if (isDef(data.model)) {\n    transformModel(Ctor.options, data);\n  }\n\n  // extract props\n  var propsData = extractPropsFromVNodeData(data, Ctor, tag, context); // fixed by xxxxxx\n\n  // functional component\n  if (isTrue(Ctor.options.functional)) {\n    return createFunctionalComponent(Ctor, propsData, data, context, children)\n  }\n\n  // extract listeners, since these needs to be treated as\n  // child component listeners instead of DOM listeners\n  var listeners = data.on;\n  // replace with listeners with .native modifier\n  // so it gets processed during parent component patch.\n  data.on = data.nativeOn;\n\n  if (isTrue(Ctor.options.abstract)) {\n    // abstract components do not keep anything\n    // other than props & listeners & slot\n\n    // work around flow\n    var slot = data.slot;\n    data = {};\n    if (slot) {\n      data.slot = slot;\n    }\n  }\n\n  // install component management hooks onto the placeholder node\n  installComponentHooks(data);\n\n  // return a placeholder vnode\n  var name = Ctor.options.name || tag;\n  var vnode = new VNode(\n    (\"vue-component-\" + (Ctor.cid) + (name ? (\"-\" + name) : '')),\n    data, undefined, undefined, undefined, context,\n    { Ctor: Ctor, propsData: propsData, listeners: listeners, tag: tag, children: children },\n    asyncFactory\n  );\n\n  return vnode\n}\n\nfunction createComponentInstanceForVnode (\n  vnode, // we know it's MountedComponentVNode but flow doesn't\n  parent // activeInstance in lifecycle state\n) {\n  var options = {\n    _isComponent: true,\n    _parentVnode: vnode,\n    parent: parent\n  };\n  // check inline-template render functions\n  var inlineTemplate = vnode.data.inlineTemplate;\n  if (isDef(inlineTemplate)) {\n    options.render = inlineTemplate.render;\n    options.staticRenderFns = inlineTemplate.staticRenderFns;\n  }\n  return new vnode.componentOptions.Ctor(options)\n}\n\nfunction installComponentHooks (data) {\n  var hooks = data.hook || (data.hook = {});\n  for (var i = 0; i < hooksToMerge.length; i++) {\n    var key = hooksToMerge[i];\n    var existing = hooks[key];\n    var toMerge = componentVNodeHooks[key];\n    if (existing !== toMerge && !(existing && existing._merged)) {\n      hooks[key] = existing ? mergeHook$1(toMerge, existing) : toMerge;\n    }\n  }\n}\n\nfunction mergeHook$1 (f1, f2) {\n  var merged = function (a, b) {\n    // flow complains about extra args which is why we use any\n    f1(a, b);\n    f2(a, b);\n  };\n  merged._merged = true;\n  return merged\n}\n\n// transform component v-model info (value and callback) into\n// prop and event handler respectively.\nfunction transformModel (options, data) {\n  var prop = (options.model && options.model.prop) || 'value';\n  var event = (options.model && options.model.event) || 'input'\n  ;(data.attrs || (data.attrs = {}))[prop] = data.model.value;\n  var on = data.on || (data.on = {});\n  var existing = on[event];\n  var callback = data.model.callback;\n  if (isDef(existing)) {\n    if (\n      Array.isArray(existing)\n        ? existing.indexOf(callback) === -1\n        : existing !== callback\n    ) {\n      on[event] = [callback].concat(existing);\n    }\n  } else {\n    on[event] = callback;\n  }\n}\n\n/*  */\n\nvar SIMPLE_NORMALIZE = 1;\nvar ALWAYS_NORMALIZE = 2;\n\n// wrapper function for providing a more flexible interface\n// without getting yelled at by flow\nfunction createElement (\n  context,\n  tag,\n  data,\n  children,\n  normalizationType,\n  alwaysNormalize\n) {\n  if (Array.isArray(data) || isPrimitive(data)) {\n    normalizationType = children;\n    children = data;\n    data = undefined;\n  }\n  if (isTrue(alwaysNormalize)) {\n    normalizationType = ALWAYS_NORMALIZE;\n  }\n  return _createElement(context, tag, data, children, normalizationType)\n}\n\nfunction _createElement (\n  context,\n  tag,\n  data,\n  children,\n  normalizationType\n) {\n  if (isDef(data) && isDef((data).__ob__)) {\n    process.env.NODE_ENV !== 'production' && warn(\n      \"Avoid using observed data object as vnode data: \" + (JSON.stringify(data)) + \"\\n\" +\n      'Always create fresh vnode data objects in each render!',\n      context\n    );\n    return createEmptyVNode()\n  }\n  // object syntax in v-bind\n  if (isDef(data) && isDef(data.is)) {\n    tag = data.is;\n  }\n  if (!tag) {\n    // in case of component :is set to falsy value\n    return createEmptyVNode()\n  }\n  // warn against non-primitive key\n  if (process.env.NODE_ENV !== 'production' &&\n    isDef(data) && isDef(data.key) && !isPrimitive(data.key)\n  ) {\n    {\n      warn(\n        'Avoid using non-primitive value as key, ' +\n        'use string/number value instead.',\n        context\n      );\n    }\n  }\n  // support single function children as default scoped slot\n  if (Array.isArray(children) &&\n    typeof children[0] === 'function'\n  ) {\n    data = data || {};\n    data.scopedSlots = { default: children[0] };\n    children.length = 0;\n  }\n  if (normalizationType === ALWAYS_NORMALIZE) {\n    children = normalizeChildren(children);\n  } else if (normalizationType === SIMPLE_NORMALIZE) {\n    children = simpleNormalizeChildren(children);\n  }\n  var vnode, ns;\n  if (typeof tag === 'string') {\n    var Ctor;\n    ns = (context.$vnode && context.$vnode.ns) || config.getTagNamespace(tag);\n    if (config.isReservedTag(tag)) {\n      // platform built-in elements\n      if (process.env.NODE_ENV !== 'production' && isDef(data) && isDef(data.nativeOn)) {\n        warn(\n          (\"The .native modifier for v-on is only valid on components but it was used on <\" + tag + \">.\"),\n          context\n        );\n      }\n      vnode = new VNode(\n        config.parsePlatformTagName(tag), data, children,\n        undefined, undefined, context\n      );\n    } else if ((!data || !data.pre) && isDef(Ctor = resolveAsset(context.$options, 'components', tag))) {\n      // component\n      vnode = createComponent(Ctor, data, context, children, tag);\n    } else {\n      // unknown or unlisted namespaced elements\n      // check at runtime because it may get assigned a namespace when its\n      // parent normalizes children\n      vnode = new VNode(\n        tag, data, children,\n        undefined, undefined, context\n      );\n    }\n  } else {\n    // direct component options / constructor\n    vnode = createComponent(tag, data, context, children);\n  }\n  if (Array.isArray(vnode)) {\n    return vnode\n  } else if (isDef(vnode)) {\n    if (isDef(ns)) { applyNS(vnode, ns); }\n    if (isDef(data)) { registerDeepBindings(data); }\n    return vnode\n  } else {\n    return createEmptyVNode()\n  }\n}\n\nfunction applyNS (vnode, ns, force) {\n  vnode.ns = ns;\n  if (vnode.tag === 'foreignObject') {\n    // use default namespace inside foreignObject\n    ns = undefined;\n    force = true;\n  }\n  if (isDef(vnode.children)) {\n    for (var i = 0, l = vnode.children.length; i < l; i++) {\n      var child = vnode.children[i];\n      if (isDef(child.tag) && (\n        isUndef(child.ns) || (isTrue(force) && child.tag !== 'svg'))) {\n        applyNS(child, ns, force);\n      }\n    }\n  }\n}\n\n// ref #5318\n// necessary to ensure parent re-render when deep bindings like :style and\n// :class are used on slot nodes\nfunction registerDeepBindings (data) {\n  if (isObject(data.style)) {\n    traverse(data.style);\n  }\n  if (isObject(data.class)) {\n    traverse(data.class);\n  }\n}\n\n/*  */\n\nfunction initRender (vm) {\n  vm._vnode = null; // the root of the child tree\n  vm._staticTrees = null; // v-once cached trees\n  var options = vm.$options;\n  var parentVnode = vm.$vnode = options._parentVnode; // the placeholder node in parent tree\n  var renderContext = parentVnode && parentVnode.context;\n  vm.$slots = resolveSlots(options._renderChildren, renderContext);\n  vm.$scopedSlots = emptyObject;\n  // bind the createElement fn to this instance\n  // so that we get proper render context inside it.\n  // args order: tag, data, children, normalizationType, alwaysNormalize\n  // internal version is used by render functions compiled from templates\n  vm._c = function (a, b, c, d) { return createElement(vm, a, b, c, d, false); };\n  // normalization is always applied for the public version, used in\n  // user-written render functions.\n  vm.$createElement = function (a, b, c, d) { return createElement(vm, a, b, c, d, true); };\n\n  // $attrs & $listeners are exposed for easier HOC creation.\n  // they need to be reactive so that HOCs using them are always updated\n  var parentData = parentVnode && parentVnode.data;\n\n  /* istanbul ignore else */\n  if (process.env.NODE_ENV !== 'production') {\n    defineReactive$$1(vm, '$attrs', parentData && parentData.attrs || emptyObject, function () {\n      !isUpdatingChildComponent && warn(\"$attrs is readonly.\", vm);\n    }, true);\n    defineReactive$$1(vm, '$listeners', options._parentListeners || emptyObject, function () {\n      !isUpdatingChildComponent && warn(\"$listeners is readonly.\", vm);\n    }, true);\n  } else {\n    defineReactive$$1(vm, '$attrs', parentData && parentData.attrs || emptyObject, null, true);\n    defineReactive$$1(vm, '$listeners', options._parentListeners || emptyObject, null, true);\n  }\n}\n\nvar currentRenderingInstance = null;\n\nfunction renderMixin (Vue) {\n  // install runtime convenience helpers\n  installRenderHelpers(Vue.prototype);\n\n  Vue.prototype.$nextTick = function (fn) {\n    return nextTick(fn, this)\n  };\n\n  Vue.prototype._render = function () {\n    var vm = this;\n    var ref = vm.$options;\n    var render = ref.render;\n    var _parentVnode = ref._parentVnode;\n\n    if (_parentVnode) {\n      vm.$scopedSlots = normalizeScopedSlots(\n        _parentVnode.data.scopedSlots,\n        vm.$slots,\n        vm.$scopedSlots\n      );\n    }\n\n    // set parent vnode. this allows render functions to have access\n    // to the data on the placeholder node.\n    vm.$vnode = _parentVnode;\n    // render self\n    var vnode;\n    try {\n      // There's no need to maintain a stack because all render fns are called\n      // separately from one another. Nested component's render fns are called\n      // when parent component is patched.\n      currentRenderingInstance = vm;\n      vnode = render.call(vm._renderProxy, vm.$createElement);\n    } catch (e) {\n      handleError(e, vm, \"render\");\n      // return error render result,\n      // or previous vnode to prevent render error causing blank component\n      /* istanbul ignore else */\n      if (process.env.NODE_ENV !== 'production' && vm.$options.renderError) {\n        try {\n          vnode = vm.$options.renderError.call(vm._renderProxy, vm.$createElement, e);\n        } catch (e) {\n          handleError(e, vm, \"renderError\");\n          vnode = vm._vnode;\n        }\n      } else {\n        vnode = vm._vnode;\n      }\n    } finally {\n      currentRenderingInstance = null;\n    }\n    // if the returned array contains only a single node, allow it\n    if (Array.isArray(vnode) && vnode.length === 1) {\n      vnode = vnode[0];\n    }\n    // return empty vnode in case the render function errored out\n    if (!(vnode instanceof VNode)) {\n      if (process.env.NODE_ENV !== 'production' && Array.isArray(vnode)) {\n        warn(\n          'Multiple root nodes returned from render function. Render function ' +\n          'should return a single root node.',\n          vm\n        );\n      }\n      vnode = createEmptyVNode();\n    }\n    // set parent\n    vnode.parent = _parentVnode;\n    return vnode\n  };\n}\n\n/*  */\n\nfunction ensureCtor (comp, base) {\n  if (\n    comp.__esModule ||\n    (hasSymbol && comp[Symbol.toStringTag] === 'Module')\n  ) {\n    comp = comp.default;\n  }\n  return isObject(comp)\n    ? base.extend(comp)\n    : comp\n}\n\nfunction createAsyncPlaceholder (\n  factory,\n  data,\n  context,\n  children,\n  tag\n) {\n  var node = createEmptyVNode();\n  node.asyncFactory = factory;\n  node.asyncMeta = { data: data, context: context, children: children, tag: tag };\n  return node\n}\n\nfunction resolveAsyncComponent (\n  factory,\n  baseCtor\n) {\n  if (isTrue(factory.error) && isDef(factory.errorComp)) {\n    return factory.errorComp\n  }\n\n  if (isDef(factory.resolved)) {\n    return factory.resolved\n  }\n\n  var owner = currentRenderingInstance;\n  if (owner && isDef(factory.owners) && factory.owners.indexOf(owner) === -1) {\n    // already pending\n    factory.owners.push(owner);\n  }\n\n  if (isTrue(factory.loading) && isDef(factory.loadingComp)) {\n    return factory.loadingComp\n  }\n\n  if (owner && !isDef(factory.owners)) {\n    var owners = factory.owners = [owner];\n    var sync = true;\n    var timerLoading = null;\n    var timerTimeout = null\n\n    ;(owner).$on('hook:destroyed', function () { return remove(owners, owner); });\n\n    var forceRender = function (renderCompleted) {\n      for (var i = 0, l = owners.length; i < l; i++) {\n        (owners[i]).$forceUpdate();\n      }\n\n      if (renderCompleted) {\n        owners.length = 0;\n        if (timerLoading !== null) {\n          clearTimeout(timerLoading);\n          timerLoading = null;\n        }\n        if (timerTimeout !== null) {\n          clearTimeout(timerTimeout);\n          timerTimeout = null;\n        }\n      }\n    };\n\n    var resolve = once(function (res) {\n      // cache resolved\n      factory.resolved = ensureCtor(res, baseCtor);\n      // invoke callbacks only if this is not a synchronous resolve\n      // (async resolves are shimmed as synchronous during SSR)\n      if (!sync) {\n        forceRender(true);\n      } else {\n        owners.length = 0;\n      }\n    });\n\n    var reject = once(function (reason) {\n      process.env.NODE_ENV !== 'production' && warn(\n        \"Failed to resolve async component: \" + (String(factory)) +\n        (reason ? (\"\\nReason: \" + reason) : '')\n      );\n      if (isDef(factory.errorComp)) {\n        factory.error = true;\n        forceRender(true);\n      }\n    });\n\n    var res = factory(resolve, reject);\n\n    if (isObject(res)) {\n      if (isPromise(res)) {\n        // () => Promise\n        if (isUndef(factory.resolved)) {\n          res.then(resolve, reject);\n        }\n      } else if (isPromise(res.component)) {\n        res.component.then(resolve, reject);\n\n        if (isDef(res.error)) {\n          factory.errorComp = ensureCtor(res.error, baseCtor);\n        }\n\n        if (isDef(res.loading)) {\n          factory.loadingComp = ensureCtor(res.loading, baseCtor);\n          if (res.delay === 0) {\n            factory.loading = true;\n          } else {\n            timerLoading = setTimeout(function () {\n              timerLoading = null;\n              if (isUndef(factory.resolved) && isUndef(factory.error)) {\n                factory.loading = true;\n                forceRender(false);\n              }\n            }, res.delay || 200);\n          }\n        }\n\n        if (isDef(res.timeout)) {\n          timerTimeout = setTimeout(function () {\n            timerTimeout = null;\n            if (isUndef(factory.resolved)) {\n              reject(\n                process.env.NODE_ENV !== 'production'\n                  ? (\"timeout (\" + (res.timeout) + \"ms)\")\n                  : null\n              );\n            }\n          }, res.timeout);\n        }\n      }\n    }\n\n    sync = false;\n    // return in case resolved synchronously\n    return factory.loading\n      ? factory.loadingComp\n      : factory.resolved\n  }\n}\n\n/*  */\n\nfunction isAsyncPlaceholder (node) {\n  return node.isComment && node.asyncFactory\n}\n\n/*  */\n\nfunction getFirstComponentChild (children) {\n  if (Array.isArray(children)) {\n    for (var i = 0; i < children.length; i++) {\n      var c = children[i];\n      if (isDef(c) && (isDef(c.componentOptions) || isAsyncPlaceholder(c))) {\n        return c\n      }\n    }\n  }\n}\n\n/*  */\n\n/*  */\n\nfunction initEvents (vm) {\n  vm._events = Object.create(null);\n  vm._hasHookEvent = false;\n  // init parent attached events\n  var listeners = vm.$options._parentListeners;\n  if (listeners) {\n    updateComponentListeners(vm, listeners);\n  }\n}\n\nvar target;\n\nfunction add (event, fn) {\n  target.$on(event, fn);\n}\n\nfunction remove$1 (event, fn) {\n  target.$off(event, fn);\n}\n\nfunction createOnceHandler (event, fn) {\n  var _target = target;\n  return function onceHandler () {\n    var res = fn.apply(null, arguments);\n    if (res !== null) {\n      _target.$off(event, onceHandler);\n    }\n  }\n}\n\nfunction updateComponentListeners (\n  vm,\n  listeners,\n  oldListeners\n) {\n  target = vm;\n  updateListeners(listeners, oldListeners || {}, add, remove$1, createOnceHandler, vm);\n  target = undefined;\n}\n\nfunction eventsMixin (Vue) {\n  var hookRE = /^hook:/;\n  Vue.prototype.$on = function (event, fn) {\n    var vm = this;\n    if (Array.isArray(event)) {\n      for (var i = 0, l = event.length; i < l; i++) {\n        vm.$on(event[i], fn);\n      }\n    } else {\n      (vm._events[event] || (vm._events[event] = [])).push(fn);\n      // optimize hook:event cost by using a boolean flag marked at registration\n      // instead of a hash lookup\n      if (hookRE.test(event)) {\n        vm._hasHookEvent = true;\n      }\n    }\n    return vm\n  };\n\n  Vue.prototype.$once = function (event, fn) {\n    var vm = this;\n    function on () {\n      vm.$off(event, on);\n      fn.apply(vm, arguments);\n    }\n    on.fn = fn;\n    vm.$on(event, on);\n    return vm\n  };\n\n  Vue.prototype.$off = function (event, fn) {\n    var vm = this;\n    // all\n    if (!arguments.length) {\n      vm._events = Object.create(null);\n      return vm\n    }\n    // array of events\n    if (Array.isArray(event)) {\n      for (var i$1 = 0, l = event.length; i$1 < l; i$1++) {\n        vm.$off(event[i$1], fn);\n      }\n      return vm\n    }\n    // specific event\n    var cbs = vm._events[event];\n    if (!cbs) {\n      return vm\n    }\n    if (!fn) {\n      vm._events[event] = null;\n      return vm\n    }\n    // specific handler\n    var cb;\n    var i = cbs.length;\n    while (i--) {\n      cb = cbs[i];\n      if (cb === fn || cb.fn === fn) {\n        cbs.splice(i, 1);\n        break\n      }\n    }\n    return vm\n  };\n\n  Vue.prototype.$emit = function (event) {\n    var vm = this;\n    if (process.env.NODE_ENV !== 'production') {\n      var lowerCaseEvent = event.toLowerCase();\n      if (lowerCaseEvent !== event && vm._events[lowerCaseEvent]) {\n        tip(\n          \"Event \\\"\" + lowerCaseEvent + \"\\\" is emitted in component \" +\n          (formatComponentName(vm)) + \" but the handler is registered for \\\"\" + event + \"\\\". \" +\n          \"Note that HTML attributes are case-insensitive and you cannot use \" +\n          \"v-on to listen to camelCase events when using in-DOM templates. \" +\n          \"You should probably use \\\"\" + (hyphenate(event)) + \"\\\" instead of \\\"\" + event + \"\\\".\"\n        );\n      }\n    }\n    var cbs = vm._events[event];\n    if (cbs) {\n      cbs = cbs.length > 1 ? toArray(cbs) : cbs;\n      var args = toArray(arguments, 1);\n      var info = \"event handler for \\\"\" + event + \"\\\"\";\n      for (var i = 0, l = cbs.length; i < l; i++) {\n        invokeWithErrorHandling(cbs[i], vm, args, vm, info);\n      }\n    }\n    return vm\n  };\n}\n\n/*  */\n\nvar activeInstance = null;\nvar isUpdatingChildComponent = false;\n\nfunction setActiveInstance(vm) {\n  var prevActiveInstance = activeInstance;\n  activeInstance = vm;\n  return function () {\n    activeInstance = prevActiveInstance;\n  }\n}\n\nfunction initLifecycle (vm) {\n  var options = vm.$options;\n\n  // locate first non-abstract parent\n  var parent = options.parent;\n  if (parent && !options.abstract) {\n    while (parent.$options.abstract && parent.$parent) {\n      parent = parent.$parent;\n    }\n    parent.$children.push(vm);\n  }\n\n  vm.$parent = parent;\n  vm.$root = parent ? parent.$root : vm;\n\n  vm.$children = [];\n  vm.$refs = {};\n\n  vm._watcher = null;\n  vm._inactive = null;\n  vm._directInactive = false;\n  vm._isMounted = false;\n  vm._isDestroyed = false;\n  vm._isBeingDestroyed = false;\n}\n\nfunction lifecycleMixin (Vue) {\n  Vue.prototype._update = function (vnode, hydrating) {\n    var vm = this;\n    var prevEl = vm.$el;\n    var prevVnode = vm._vnode;\n    var restoreActiveInstance = setActiveInstance(vm);\n    vm._vnode = vnode;\n    // Vue.prototype.__patch__ is injected in entry points\n    // based on the rendering backend used.\n    if (!prevVnode) {\n      // initial render\n      vm.$el = vm.__patch__(vm.$el, vnode, hydrating, false /* removeOnly */);\n    } else {\n      // updates\n      vm.$el = vm.__patch__(prevVnode, vnode);\n    }\n    restoreActiveInstance();\n    // update __vue__ reference\n    if (prevEl) {\n      prevEl.__vue__ = null;\n    }\n    if (vm.$el) {\n      vm.$el.__vue__ = vm;\n    }\n    // if parent is an HOC, update its $el as well\n    if (vm.$vnode && vm.$parent && vm.$vnode === vm.$parent._vnode) {\n      vm.$parent.$el = vm.$el;\n    }\n    // updated hook is called by the scheduler to ensure that children are\n    // updated in a parent's updated hook.\n  };\n\n  Vue.prototype.$forceUpdate = function () {\n    var vm = this;\n    if (vm._watcher) {\n      vm._watcher.update();\n    }\n  };\n\n  Vue.prototype.$destroy = function () {\n    var vm = this;\n    if (vm._isBeingDestroyed) {\n      return\n    }\n    callHook(vm, 'beforeDestroy');\n    vm._isBeingDestroyed = true;\n    // remove self from parent\n    var parent = vm.$parent;\n    if (parent && !parent._isBeingDestroyed && !vm.$options.abstract) {\n      remove(parent.$children, vm);\n    }\n    // teardown watchers\n    if (vm._watcher) {\n      vm._watcher.teardown();\n    }\n    var i = vm._watchers.length;\n    while (i--) {\n      vm._watchers[i].teardown();\n    }\n    // remove reference from data ob\n    // frozen object may not have observer.\n    if (vm._data.__ob__) {\n      vm._data.__ob__.vmCount--;\n    }\n    // call the last hook...\n    vm._isDestroyed = true;\n    // invoke destroy hooks on current rendered tree\n    vm.__patch__(vm._vnode, null);\n    // fire destroyed hook\n    callHook(vm, 'destroyed');\n    // turn off all instance listeners.\n    vm.$off();\n    // remove __vue__ reference\n    if (vm.$el) {\n      vm.$el.__vue__ = null;\n    }\n    // release circular reference (#6759)\n    if (vm.$vnode) {\n      vm.$vnode.parent = null;\n    }\n  };\n}\n\nfunction updateChildComponent (\n  vm,\n  propsData,\n  listeners,\n  parentVnode,\n  renderChildren\n) {\n  if (process.env.NODE_ENV !== 'production') {\n    isUpdatingChildComponent = true;\n  }\n\n  // determine whether component has slot children\n  // we need to do this before overwriting $options._renderChildren.\n\n  // check if there are dynamic scopedSlots (hand-written or compiled but with\n  // dynamic slot names). Static scoped slots compiled from template has the\n  // \"$stable\" marker.\n  var newScopedSlots = parentVnode.data.scopedSlots;\n  var oldScopedSlots = vm.$scopedSlots;\n  var hasDynamicScopedSlot = !!(\n    (newScopedSlots && !newScopedSlots.$stable) ||\n    (oldScopedSlots !== emptyObject && !oldScopedSlots.$stable) ||\n    (newScopedSlots && vm.$scopedSlots.$key !== newScopedSlots.$key)\n  );\n\n  // Any static slot children from the parent may have changed during parent's\n  // update. Dynamic scoped slots may also have changed. In such cases, a forced\n  // update is necessary to ensure correctness.\n  var needsForceUpdate = !!(\n    renderChildren ||               // has new static slots\n    vm.$options._renderChildren ||  // has old static slots\n    hasDynamicScopedSlot\n  );\n\n  vm.$options._parentVnode = parentVnode;\n  vm.$vnode = parentVnode; // update vm's placeholder node without re-render\n\n  if (vm._vnode) { // update child tree's parent\n    vm._vnode.parent = parentVnode;\n  }\n  vm.$options._renderChildren = renderChildren;\n\n  // update $attrs and $listeners hash\n  // these are also reactive so they may trigger child update if the child\n  // used them during render\n  vm.$attrs = parentVnode.data.attrs || emptyObject;\n  vm.$listeners = listeners || emptyObject;\n\n  // update props\n  if (propsData && vm.$options.props) {\n    toggleObserving(false);\n    var props = vm._props;\n    var propKeys = vm.$options._propKeys || [];\n    for (var i = 0; i < propKeys.length; i++) {\n      var key = propKeys[i];\n      var propOptions = vm.$options.props; // wtf flow?\n      props[key] = validateProp(key, propOptions, propsData, vm);\n    }\n    toggleObserving(true);\n    // keep a copy of raw propsData\n    vm.$options.propsData = propsData;\n  }\n  \n  // fixed by xxxxxx update properties(mp runtime)\n  vm._$updateProperties && vm._$updateProperties(vm);\n  \n  // update listeners\n  listeners = listeners || emptyObject;\n  var oldListeners = vm.$options._parentListeners;\n  vm.$options._parentListeners = listeners;\n  updateComponentListeners(vm, listeners, oldListeners);\n\n  // resolve slots + force update if has children\n  if (needsForceUpdate) {\n    vm.$slots = resolveSlots(renderChildren, parentVnode.context);\n    vm.$forceUpdate();\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    isUpdatingChildComponent = false;\n  }\n}\n\nfunction isInInactiveTree (vm) {\n  while (vm && (vm = vm.$parent)) {\n    if (vm._inactive) { return true }\n  }\n  return false\n}\n\nfunction activateChildComponent (vm, direct) {\n  if (direct) {\n    vm._directInactive = false;\n    if (isInInactiveTree(vm)) {\n      return\n    }\n  } else if (vm._directInactive) {\n    return\n  }\n  if (vm._inactive || vm._inactive === null) {\n    vm._inactive = false;\n    for (var i = 0; i < vm.$children.length; i++) {\n      activateChildComponent(vm.$children[i]);\n    }\n    callHook(vm, 'activated');\n  }\n}\n\nfunction deactivateChildComponent (vm, direct) {\n  if (direct) {\n    vm._directInactive = true;\n    if (isInInactiveTree(vm)) {\n      return\n    }\n  }\n  if (!vm._inactive) {\n    vm._inactive = true;\n    for (var i = 0; i < vm.$children.length; i++) {\n      deactivateChildComponent(vm.$children[i]);\n    }\n    callHook(vm, 'deactivated');\n  }\n}\n\nfunction callHook (vm, hook) {\n  // #7573 disable dep collection when invoking lifecycle hooks\n  pushTarget();\n  var handlers = vm.$options[hook];\n  var info = hook + \" hook\";\n  if (handlers) {\n    for (var i = 0, j = handlers.length; i < j; i++) {\n      invokeWithErrorHandling(handlers[i], vm, null, vm, info);\n    }\n  }\n  if (vm._hasHookEvent) {\n    vm.$emit('hook:' + hook);\n  }\n  popTarget();\n}\n\n/*  */\n\nvar MAX_UPDATE_COUNT = 100;\n\nvar queue = [];\nvar activatedChildren = [];\nvar has = {};\nvar circular = {};\nvar waiting = false;\nvar flushing = false;\nvar index = 0;\n\n/**\n * Reset the scheduler's state.\n */\nfunction resetSchedulerState () {\n  index = queue.length = activatedChildren.length = 0;\n  has = {};\n  if (process.env.NODE_ENV !== 'production') {\n    circular = {};\n  }\n  waiting = flushing = false;\n}\n\n// Async edge case #6566 requires saving the timestamp when event listeners are\n// attached. However, calling performance.now() has a perf overhead especially\n// if the page has thousands of event listeners. Instead, we take a timestamp\n// every time the scheduler flushes and use that for all event listeners\n// attached during that flush.\nvar currentFlushTimestamp = 0;\n\n// Async edge case fix requires storing an event listener's attach timestamp.\nvar getNow = Date.now;\n\n// Determine what event timestamp the browser is using. Annoyingly, the\n// timestamp can either be hi-res (relative to page load) or low-res\n// (relative to UNIX epoch), so in order to compare time we have to use the\n// same timestamp type when saving the flush timestamp.\n// All IE versions use low-res event timestamps, and have problematic clock\n// implementations (#9632)\nif (inBrowser && !isIE) {\n  var performance = window.performance;\n  if (\n    performance &&\n    typeof performance.now === 'function' &&\n    getNow() > document.createEvent('Event').timeStamp\n  ) {\n    // if the event timestamp, although evaluated AFTER the Date.now(), is\n    // smaller than it, it means the event is using a hi-res timestamp,\n    // and we need to use the hi-res version for event listener timestamps as\n    // well.\n    getNow = function () { return performance.now(); };\n  }\n}\n\n/**\n * Flush both queues and run the watchers.\n */\nfunction flushSchedulerQueue () {\n  currentFlushTimestamp = getNow();\n  flushing = true;\n  var watcher, id;\n\n  // Sort queue before flush.\n  // This ensures that:\n  // 1. Components are updated from parent to child. (because parent is always\n  //    created before the child)\n  // 2. A component's user watchers are run before its render watcher (because\n  //    user watchers are created before the render watcher)\n  // 3. If a component is destroyed during a parent component's watcher run,\n  //    its watchers can be skipped.\n  queue.sort(function (a, b) { return a.id - b.id; });\n\n  // do not cache length because more watchers might be pushed\n  // as we run existing watchers\n  for (index = 0; index < queue.length; index++) {\n    watcher = queue[index];\n    if (watcher.before) {\n      watcher.before();\n    }\n    id = watcher.id;\n    has[id] = null;\n    watcher.run();\n    // in dev build, check and stop circular updates.\n    if (process.env.NODE_ENV !== 'production' && has[id] != null) {\n      circular[id] = (circular[id] || 0) + 1;\n      if (circular[id] > MAX_UPDATE_COUNT) {\n        warn(\n          'You may have an infinite update loop ' + (\n            watcher.user\n              ? (\"in watcher with expression \\\"\" + (watcher.expression) + \"\\\"\")\n              : \"in a component render function.\"\n          ),\n          watcher.vm\n        );\n        break\n      }\n    }\n  }\n\n  // keep copies of post queues before resetting state\n  var activatedQueue = activatedChildren.slice();\n  var updatedQueue = queue.slice();\n\n  resetSchedulerState();\n\n  // call component updated and activated hooks\n  callActivatedHooks(activatedQueue);\n  callUpdatedHooks(updatedQueue);\n\n  // devtool hook\n  /* istanbul ignore if */\n  if (devtools && config.devtools) {\n    devtools.emit('flush');\n  }\n}\n\nfunction callUpdatedHooks (queue) {\n  var i = queue.length;\n  while (i--) {\n    var watcher = queue[i];\n    var vm = watcher.vm;\n    if (vm._watcher === watcher && vm._isMounted && !vm._isDestroyed) {\n      callHook(vm, 'updated');\n    }\n  }\n}\n\n/**\n * Queue a kept-alive component that was activated during patch.\n * The queue will be processed after the entire tree has been patched.\n */\nfunction queueActivatedComponent (vm) {\n  // setting _inactive to false here so that a render function can\n  // rely on checking whether it's in an inactive tree (e.g. router-view)\n  vm._inactive = false;\n  activatedChildren.push(vm);\n}\n\nfunction callActivatedHooks (queue) {\n  for (var i = 0; i < queue.length; i++) {\n    queue[i]._inactive = true;\n    activateChildComponent(queue[i], true /* true */);\n  }\n}\n\n/**\n * Push a watcher into the watcher queue.\n * Jobs with duplicate IDs will be skipped unless it's\n * pushed when the queue is being flushed.\n */\nfunction queueWatcher (watcher) {\n  var id = watcher.id;\n  if (has[id] == null) {\n    has[id] = true;\n    if (!flushing) {\n      queue.push(watcher);\n    } else {\n      // if already flushing, splice the watcher based on its id\n      // if already past its id, it will be run next immediately.\n      var i = queue.length - 1;\n      while (i > index && queue[i].id > watcher.id) {\n        i--;\n      }\n      queue.splice(i + 1, 0, watcher);\n    }\n    // queue the flush\n    if (!waiting) {\n      waiting = true;\n\n      if (process.env.NODE_ENV !== 'production' && !config.async) {\n        flushSchedulerQueue();\n        return\n      }\n      nextTick(flushSchedulerQueue);\n    }\n  }\n}\n\n/*  */\n\n\n\nvar uid$2 = 0;\n\n/**\n * A watcher parses an expression, collects dependencies,\n * and fires callback when the expression value changes.\n * This is used for both the $watch() api and directives.\n */\nvar Watcher = function Watcher (\n  vm,\n  expOrFn,\n  cb,\n  options,\n  isRenderWatcher\n) {\n  this.vm = vm;\n  if (isRenderWatcher) {\n    vm._watcher = this;\n  }\n  vm._watchers.push(this);\n  // options\n  if (options) {\n    this.deep = !!options.deep;\n    this.user = !!options.user;\n    this.lazy = !!options.lazy;\n    this.sync = !!options.sync;\n    this.before = options.before;\n  } else {\n    this.deep = this.user = this.lazy = this.sync = false;\n  }\n  this.cb = cb;\n  this.id = ++uid$2; // uid for batching\n  this.active = true;\n  this.dirty = this.lazy; // for lazy watchers\n  this.deps = [];\n  this.newDeps = [];\n  this.depIds = new _Set();\n  this.newDepIds = new _Set();\n  this.expression = process.env.NODE_ENV !== 'production'\n    ? expOrFn.toString()\n    : '';\n  // parse expression for getter\n  if (typeof expOrFn === 'function') {\n    this.getter = expOrFn;\n  } else {\n    this.getter = parsePath(expOrFn);\n    if (!this.getter) {\n      this.getter = noop;\n      process.env.NODE_ENV !== 'production' && warn(\n        \"Failed watching path: \\\"\" + expOrFn + \"\\\" \" +\n        'Watcher only accepts simple dot-delimited paths. ' +\n        'For full control, use a function instead.',\n        vm\n      );\n    }\n  }\n  this.value = this.lazy\n    ? undefined\n    : this.get();\n};\n\n/**\n * Evaluate the getter, and re-collect dependencies.\n */\nWatcher.prototype.get = function get () {\n  pushTarget(this);\n  var value;\n  var vm = this.vm;\n  try {\n    value = this.getter.call(vm, vm);\n  } catch (e) {\n    if (this.user) {\n      handleError(e, vm, (\"getter for watcher \\\"\" + (this.expression) + \"\\\"\"));\n    } else {\n      throw e\n    }\n  } finally {\n    // \"touch\" every property so they are all tracked as\n    // dependencies for deep watching\n    if (this.deep) {\n      traverse(value);\n    }\n    popTarget();\n    this.cleanupDeps();\n  }\n  return value\n};\n\n/**\n * Add a dependency to this directive.\n */\nWatcher.prototype.addDep = function addDep (dep) {\n  var id = dep.id;\n  if (!this.newDepIds.has(id)) {\n    this.newDepIds.add(id);\n    this.newDeps.push(dep);\n    if (!this.depIds.has(id)) {\n      dep.addSub(this);\n    }\n  }\n};\n\n/**\n * Clean up for dependency collection.\n */\nWatcher.prototype.cleanupDeps = function cleanupDeps () {\n  var i = this.deps.length;\n  while (i--) {\n    var dep = this.deps[i];\n    if (!this.newDepIds.has(dep.id)) {\n      dep.removeSub(this);\n    }\n  }\n  var tmp = this.depIds;\n  this.depIds = this.newDepIds;\n  this.newDepIds = tmp;\n  this.newDepIds.clear();\n  tmp = this.deps;\n  this.deps = this.newDeps;\n  this.newDeps = tmp;\n  this.newDeps.length = 0;\n};\n\n/**\n * Subscriber interface.\n * Will be called when a dependency changes.\n */\nWatcher.prototype.update = function update () {\n  /* istanbul ignore else */\n  if (this.lazy) {\n    this.dirty = true;\n  } else if (this.sync) {\n    this.run();\n  } else {\n    queueWatcher(this);\n  }\n};\n\n/**\n * Scheduler job interface.\n * Will be called by the scheduler.\n */\nWatcher.prototype.run = function run () {\n  if (this.active) {\n    var value = this.get();\n    if (\n      value !== this.value ||\n      // Deep watchers and watchers on Object/Arrays should fire even\n      // when the value is the same, because the value may\n      // have mutated.\n      isObject(value) ||\n      this.deep\n    ) {\n      // set new value\n      var oldValue = this.value;\n      this.value = value;\n      if (this.user) {\n        try {\n          this.cb.call(this.vm, value, oldValue);\n        } catch (e) {\n          handleError(e, this.vm, (\"callback for watcher \\\"\" + (this.expression) + \"\\\"\"));\n        }\n      } else {\n        this.cb.call(this.vm, value, oldValue);\n      }\n    }\n  }\n};\n\n/**\n * Evaluate the value of the watcher.\n * This only gets called for lazy watchers.\n */\nWatcher.prototype.evaluate = function evaluate () {\n  this.value = this.get();\n  this.dirty = false;\n};\n\n/**\n * Depend on all deps collected by this watcher.\n */\nWatcher.prototype.depend = function depend () {\n  var i = this.deps.length;\n  while (i--) {\n    this.deps[i].depend();\n  }\n};\n\n/**\n * Remove self from all dependencies' subscriber list.\n */\nWatcher.prototype.teardown = function teardown () {\n  if (this.active) {\n    // remove self from vm's watcher list\n    // this is a somewhat expensive operation so we skip it\n    // if the vm is being destroyed.\n    if (!this.vm._isBeingDestroyed) {\n      remove(this.vm._watchers, this);\n    }\n    var i = this.deps.length;\n    while (i--) {\n      this.deps[i].removeSub(this);\n    }\n    this.active = false;\n  }\n};\n\n/*  */\n\nvar sharedPropertyDefinition = {\n  enumerable: true,\n  configurable: true,\n  get: noop,\n  set: noop\n};\n\nfunction proxy (target, sourceKey, key) {\n  sharedPropertyDefinition.get = function proxyGetter () {\n    return this[sourceKey][key]\n  };\n  sharedPropertyDefinition.set = function proxySetter (val) {\n    this[sourceKey][key] = val;\n  };\n  Object.defineProperty(target, key, sharedPropertyDefinition);\n}\n\nfunction initState (vm) {\n  vm._watchers = [];\n  var opts = vm.$options;\n  if (opts.props) { initProps(vm, opts.props); }\n  if (opts.methods) { initMethods(vm, opts.methods); }\n  if (opts.data) {\n    initData(vm);\n  } else {\n    observe(vm._data = {}, true /* asRootData */);\n  }\n  if (opts.computed) { initComputed(vm, opts.computed); }\n  if (opts.watch && opts.watch !== nativeWatch) {\n    initWatch(vm, opts.watch);\n  }\n}\n\nfunction initProps (vm, propsOptions) {\n  var propsData = vm.$options.propsData || {};\n  var props = vm._props = {};\n  // cache prop keys so that future props updates can iterate using Array\n  // instead of dynamic object key enumeration.\n  var keys = vm.$options._propKeys = [];\n  var isRoot = !vm.$parent;\n  // root instance props should be converted\n  if (!isRoot) {\n    toggleObserving(false);\n  }\n  var loop = function ( key ) {\n    keys.push(key);\n    var value = validateProp(key, propsOptions, propsData, vm);\n    /* istanbul ignore else */\n    if (process.env.NODE_ENV !== 'production') {\n      var hyphenatedKey = hyphenate(key);\n      if (isReservedAttribute(hyphenatedKey) ||\n          config.isReservedAttr(hyphenatedKey)) {\n        warn(\n          (\"\\\"\" + hyphenatedKey + \"\\\" is a reserved attribute and cannot be used as component prop.\"),\n          vm\n        );\n      }\n      defineReactive$$1(props, key, value, function () {\n        if (!isRoot && !isUpdatingChildComponent) {\n          {\n            if(vm.mpHost === 'mp-baidu'){//百度 observer 在 setData callback 之后触发，直接忽略该 warn\n                return\n            }\n            //fixed by xxxxxx __next_tick_pending,uni://form-field 时不告警\n            if(\n                key === 'value' && \n                Array.isArray(vm.$options.behaviors) &&\n                vm.$options.behaviors.indexOf('uni://form-field') !== -1\n              ){\n              return\n            }\n            if(vm._getFormData){\n              return\n            }\n            var $parent = vm.$parent;\n            while($parent){\n              if($parent.__next_tick_pending){\n                return  \n              }\n              $parent = $parent.$parent;\n            }\n          }\n          warn(\n            \"Avoid mutating a prop directly since the value will be \" +\n            \"overwritten whenever the parent component re-renders. \" +\n            \"Instead, use a data or computed property based on the prop's \" +\n            \"value. Prop being mutated: \\\"\" + key + \"\\\"\",\n            vm\n          );\n        }\n      });\n    } else {\n      defineReactive$$1(props, key, value);\n    }\n    // static props are already proxied on the component's prototype\n    // during Vue.extend(). We only need to proxy props defined at\n    // instantiation here.\n    if (!(key in vm)) {\n      proxy(vm, \"_props\", key);\n    }\n  };\n\n  for (var key in propsOptions) loop( key );\n  toggleObserving(true);\n}\n\nfunction initData (vm) {\n  var data = vm.$options.data;\n  data = vm._data = typeof data === 'function'\n    ? getData(data, vm)\n    : data || {};\n  if (!isPlainObject(data)) {\n    data = {};\n    process.env.NODE_ENV !== 'production' && warn(\n      'data functions should return an object:\\n' +\n      'https://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function',\n      vm\n    );\n  }\n  // proxy data on instance\n  var keys = Object.keys(data);\n  var props = vm.$options.props;\n  var methods = vm.$options.methods;\n  var i = keys.length;\n  while (i--) {\n    var key = keys[i];\n    if (process.env.NODE_ENV !== 'production') {\n      if (methods && hasOwn(methods, key)) {\n        warn(\n          (\"Method \\\"\" + key + \"\\\" has already been defined as a data property.\"),\n          vm\n        );\n      }\n    }\n    if (props && hasOwn(props, key)) {\n      process.env.NODE_ENV !== 'production' && warn(\n        \"The data property \\\"\" + key + \"\\\" is already declared as a prop. \" +\n        \"Use prop default value instead.\",\n        vm\n      );\n    } else if (!isReserved(key)) {\n      proxy(vm, \"_data\", key);\n    }\n  }\n  // observe data\n  observe(data, true /* asRootData */);\n}\n\nfunction getData (data, vm) {\n  // #7573 disable dep collection when invoking data getters\n  pushTarget();\n  try {\n    return data.call(vm, vm)\n  } catch (e) {\n    handleError(e, vm, \"data()\");\n    return {}\n  } finally {\n    popTarget();\n  }\n}\n\nvar computedWatcherOptions = { lazy: true };\n\nfunction initComputed (vm, computed) {\n  // $flow-disable-line\n  var watchers = vm._computedWatchers = Object.create(null);\n  // computed properties are just getters during SSR\n  var isSSR = isServerRendering();\n\n  for (var key in computed) {\n    var userDef = computed[key];\n    var getter = typeof userDef === 'function' ? userDef : userDef.get;\n    if (process.env.NODE_ENV !== 'production' && getter == null) {\n      warn(\n        (\"Getter is missing for computed property \\\"\" + key + \"\\\".\"),\n        vm\n      );\n    }\n\n    if (!isSSR) {\n      // create internal watcher for the computed property.\n      watchers[key] = new Watcher(\n        vm,\n        getter || noop,\n        noop,\n        computedWatcherOptions\n      );\n    }\n\n    // component-defined computed properties are already defined on the\n    // component prototype. We only need to define computed properties defined\n    // at instantiation here.\n    if (!(key in vm)) {\n      defineComputed(vm, key, userDef);\n    } else if (process.env.NODE_ENV !== 'production') {\n      if (key in vm.$data) {\n        warn((\"The computed property \\\"\" + key + \"\\\" is already defined in data.\"), vm);\n      } else if (vm.$options.props && key in vm.$options.props) {\n        warn((\"The computed property \\\"\" + key + \"\\\" is already defined as a prop.\"), vm);\n      }\n    }\n  }\n}\n\nfunction defineComputed (\n  target,\n  key,\n  userDef\n) {\n  var shouldCache = !isServerRendering();\n  if (typeof userDef === 'function') {\n    sharedPropertyDefinition.get = shouldCache\n      ? createComputedGetter(key)\n      : createGetterInvoker(userDef);\n    sharedPropertyDefinition.set = noop;\n  } else {\n    sharedPropertyDefinition.get = userDef.get\n      ? shouldCache && userDef.cache !== false\n        ? createComputedGetter(key)\n        : createGetterInvoker(userDef.get)\n      : noop;\n    sharedPropertyDefinition.set = userDef.set || noop;\n  }\n  if (process.env.NODE_ENV !== 'production' &&\n      sharedPropertyDefinition.set === noop) {\n    sharedPropertyDefinition.set = function () {\n      warn(\n        (\"Computed property \\\"\" + key + \"\\\" was assigned to but it has no setter.\"),\n        this\n      );\n    };\n  }\n  Object.defineProperty(target, key, sharedPropertyDefinition);\n}\n\nfunction createComputedGetter (key) {\n  return function computedGetter () {\n    var watcher = this._computedWatchers && this._computedWatchers[key];\n    if (watcher) {\n      if (watcher.dirty) {\n        watcher.evaluate();\n      }\n      if (Dep.SharedObject.target) {// fixed by xxxxxx\n        watcher.depend();\n      }\n      return watcher.value\n    }\n  }\n}\n\nfunction createGetterInvoker(fn) {\n  return function computedGetter () {\n    return fn.call(this, this)\n  }\n}\n\nfunction initMethods (vm, methods) {\n  var props = vm.$options.props;\n  for (var key in methods) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof methods[key] !== 'function') {\n        warn(\n          \"Method \\\"\" + key + \"\\\" has type \\\"\" + (typeof methods[key]) + \"\\\" in the component definition. \" +\n          \"Did you reference the function correctly?\",\n          vm\n        );\n      }\n      if (props && hasOwn(props, key)) {\n        warn(\n          (\"Method \\\"\" + key + \"\\\" has already been defined as a prop.\"),\n          vm\n        );\n      }\n      if ((key in vm) && isReserved(key)) {\n        warn(\n          \"Method \\\"\" + key + \"\\\" conflicts with an existing Vue instance method. \" +\n          \"Avoid defining component methods that start with _ or $.\"\n        );\n      }\n    }\n    vm[key] = typeof methods[key] !== 'function' ? noop : bind(methods[key], vm);\n  }\n}\n\nfunction initWatch (vm, watch) {\n  for (var key in watch) {\n    var handler = watch[key];\n    if (Array.isArray(handler)) {\n      for (var i = 0; i < handler.length; i++) {\n        createWatcher(vm, key, handler[i]);\n      }\n    } else {\n      createWatcher(vm, key, handler);\n    }\n  }\n}\n\nfunction createWatcher (\n  vm,\n  expOrFn,\n  handler,\n  options\n) {\n  if (isPlainObject(handler)) {\n    options = handler;\n    handler = handler.handler;\n  }\n  if (typeof handler === 'string') {\n    handler = vm[handler];\n  }\n  return vm.$watch(expOrFn, handler, options)\n}\n\nfunction stateMixin (Vue) {\n  // flow somehow has problems with directly declared definition object\n  // when using Object.defineProperty, so we have to procedurally build up\n  // the object here.\n  var dataDef = {};\n  dataDef.get = function () { return this._data };\n  var propsDef = {};\n  propsDef.get = function () { return this._props };\n  if (process.env.NODE_ENV !== 'production') {\n    dataDef.set = function () {\n      warn(\n        'Avoid replacing instance root $data. ' +\n        'Use nested data properties instead.',\n        this\n      );\n    };\n    propsDef.set = function () {\n      warn(\"$props is readonly.\", this);\n    };\n  }\n  Object.defineProperty(Vue.prototype, '$data', dataDef);\n  Object.defineProperty(Vue.prototype, '$props', propsDef);\n\n  Vue.prototype.$set = set;\n  Vue.prototype.$delete = del;\n\n  Vue.prototype.$watch = function (\n    expOrFn,\n    cb,\n    options\n  ) {\n    var vm = this;\n    if (isPlainObject(cb)) {\n      return createWatcher(vm, expOrFn, cb, options)\n    }\n    options = options || {};\n    options.user = true;\n    var watcher = new Watcher(vm, expOrFn, cb, options);\n    if (options.immediate) {\n      try {\n        cb.call(vm, watcher.value);\n      } catch (error) {\n        handleError(error, vm, (\"callback for immediate watcher \\\"\" + (watcher.expression) + \"\\\"\"));\n      }\n    }\n    return function unwatchFn () {\n      watcher.teardown();\n    }\n  };\n}\n\n/*  */\n\nvar uid$3 = 0;\n\nfunction initMixin (Vue) {\n  Vue.prototype._init = function (options) {\n    var vm = this;\n    // a uid\n    vm._uid = uid$3++;\n\n    var startTag, endTag;\n    /* istanbul ignore if */\n    if (process.env.NODE_ENV !== 'production' && config.performance && mark) {\n      startTag = \"vue-perf-start:\" + (vm._uid);\n      endTag = \"vue-perf-end:\" + (vm._uid);\n      mark(startTag);\n    }\n\n    // a flag to avoid this being observed\n    vm._isVue = true;\n    // merge options\n    if (options && options._isComponent) {\n      // optimize internal component instantiation\n      // since dynamic options merging is pretty slow, and none of the\n      // internal component options needs special treatment.\n      initInternalComponent(vm, options);\n    } else {\n      vm.$options = mergeOptions(\n        resolveConstructorOptions(vm.constructor),\n        options || {},\n        vm\n      );\n    }\n    /* istanbul ignore else */\n    if (process.env.NODE_ENV !== 'production') {\n      initProxy(vm);\n    } else {\n      vm._renderProxy = vm;\n    }\n    // expose real self\n    vm._self = vm;\n    initLifecycle(vm);\n    initEvents(vm);\n    initRender(vm);\n    callHook(vm, 'beforeCreate');\n    !vm._$fallback && initInjections(vm); // resolve injections before data/props  \n    initState(vm);\n    !vm._$fallback && initProvide(vm); // resolve provide after data/props\n    !vm._$fallback && callHook(vm, 'created');      \n\n    /* istanbul ignore if */\n    if (process.env.NODE_ENV !== 'production' && config.performance && mark) {\n      vm._name = formatComponentName(vm, false);\n      mark(endTag);\n      measure((\"vue \" + (vm._name) + \" init\"), startTag, endTag);\n    }\n\n    if (vm.$options.el) {\n      vm.$mount(vm.$options.el);\n    }\n  };\n}\n\nfunction initInternalComponent (vm, options) {\n  var opts = vm.$options = Object.create(vm.constructor.options);\n  // doing this because it's faster than dynamic enumeration.\n  var parentVnode = options._parentVnode;\n  opts.parent = options.parent;\n  opts._parentVnode = parentVnode;\n\n  var vnodeComponentOptions = parentVnode.componentOptions;\n  opts.propsData = vnodeComponentOptions.propsData;\n  opts._parentListeners = vnodeComponentOptions.listeners;\n  opts._renderChildren = vnodeComponentOptions.children;\n  opts._componentTag = vnodeComponentOptions.tag;\n\n  if (options.render) {\n    opts.render = options.render;\n    opts.staticRenderFns = options.staticRenderFns;\n  }\n}\n\nfunction resolveConstructorOptions (Ctor) {\n  var options = Ctor.options;\n  if (Ctor.super) {\n    var superOptions = resolveConstructorOptions(Ctor.super);\n    var cachedSuperOptions = Ctor.superOptions;\n    if (superOptions !== cachedSuperOptions) {\n      // super option changed,\n      // need to resolve new options.\n      Ctor.superOptions = superOptions;\n      // check if there are any late-modified/attached options (#4976)\n      var modifiedOptions = resolveModifiedOptions(Ctor);\n      // update base extend options\n      if (modifiedOptions) {\n        extend(Ctor.extendOptions, modifiedOptions);\n      }\n      options = Ctor.options = mergeOptions(superOptions, Ctor.extendOptions);\n      if (options.name) {\n        options.components[options.name] = Ctor;\n      }\n    }\n  }\n  return options\n}\n\nfunction resolveModifiedOptions (Ctor) {\n  var modified;\n  var latest = Ctor.options;\n  var sealed = Ctor.sealedOptions;\n  for (var key in latest) {\n    if (latest[key] !== sealed[key]) {\n      if (!modified) { modified = {}; }\n      modified[key] = latest[key];\n    }\n  }\n  return modified\n}\n\nfunction Vue (options) {\n  if (process.env.NODE_ENV !== 'production' &&\n    !(this instanceof Vue)\n  ) {\n    warn('Vue is a constructor and should be called with the `new` keyword');\n  }\n  this._init(options);\n}\n\ninitMixin(Vue);\nstateMixin(Vue);\neventsMixin(Vue);\nlifecycleMixin(Vue);\nrenderMixin(Vue);\n\n/*  */\n\nfunction initUse (Vue) {\n  Vue.use = function (plugin) {\n    var installedPlugins = (this._installedPlugins || (this._installedPlugins = []));\n    if (installedPlugins.indexOf(plugin) > -1) {\n      return this\n    }\n\n    // additional parameters\n    var args = toArray(arguments, 1);\n    args.unshift(this);\n    if (typeof plugin.install === 'function') {\n      plugin.install.apply(plugin, args);\n    } else if (typeof plugin === 'function') {\n      plugin.apply(null, args);\n    }\n    installedPlugins.push(plugin);\n    return this\n  };\n}\n\n/*  */\n\nfunction initMixin$1 (Vue) {\n  Vue.mixin = function (mixin) {\n    this.options = mergeOptions(this.options, mixin);\n    return this\n  };\n}\n\n/*  */\n\nfunction initExtend (Vue) {\n  /**\n   * Each instance constructor, including Vue, has a unique\n   * cid. This enables us to create wrapped \"child\n   * constructors\" for prototypal inheritance and cache them.\n   */\n  Vue.cid = 0;\n  var cid = 1;\n\n  /**\n   * Class inheritance\n   */\n  Vue.extend = function (extendOptions) {\n    extendOptions = extendOptions || {};\n    var Super = this;\n    var SuperId = Super.cid;\n    var cachedCtors = extendOptions._Ctor || (extendOptions._Ctor = {});\n    if (cachedCtors[SuperId]) {\n      return cachedCtors[SuperId]\n    }\n\n    var name = extendOptions.name || Super.options.name;\n    if (process.env.NODE_ENV !== 'production' && name) {\n      validateComponentName(name);\n    }\n\n    var Sub = function VueComponent (options) {\n      this._init(options);\n    };\n    Sub.prototype = Object.create(Super.prototype);\n    Sub.prototype.constructor = Sub;\n    Sub.cid = cid++;\n    Sub.options = mergeOptions(\n      Super.options,\n      extendOptions\n    );\n    Sub['super'] = Super;\n\n    // For props and computed properties, we define the proxy getters on\n    // the Vue instances at extension time, on the extended prototype. This\n    // avoids Object.defineProperty calls for each instance created.\n    if (Sub.options.props) {\n      initProps$1(Sub);\n    }\n    if (Sub.options.computed) {\n      initComputed$1(Sub);\n    }\n\n    // allow further extension/mixin/plugin usage\n    Sub.extend = Super.extend;\n    Sub.mixin = Super.mixin;\n    Sub.use = Super.use;\n\n    // create asset registers, so extended classes\n    // can have their private assets too.\n    ASSET_TYPES.forEach(function (type) {\n      Sub[type] = Super[type];\n    });\n    // enable recursive self-lookup\n    if (name) {\n      Sub.options.components[name] = Sub;\n    }\n\n    // keep a reference to the super options at extension time.\n    // later at instantiation we can check if Super's options have\n    // been updated.\n    Sub.superOptions = Super.options;\n    Sub.extendOptions = extendOptions;\n    Sub.sealedOptions = extend({}, Sub.options);\n\n    // cache constructor\n    cachedCtors[SuperId] = Sub;\n    return Sub\n  };\n}\n\nfunction initProps$1 (Comp) {\n  var props = Comp.options.props;\n  for (var key in props) {\n    proxy(Comp.prototype, \"_props\", key);\n  }\n}\n\nfunction initComputed$1 (Comp) {\n  var computed = Comp.options.computed;\n  for (var key in computed) {\n    defineComputed(Comp.prototype, key, computed[key]);\n  }\n}\n\n/*  */\n\nfunction initAssetRegisters (Vue) {\n  /**\n   * Create asset registration methods.\n   */\n  ASSET_TYPES.forEach(function (type) {\n    Vue[type] = function (\n      id,\n      definition\n    ) {\n      if (!definition) {\n        return this.options[type + 's'][id]\n      } else {\n        /* istanbul ignore if */\n        if (process.env.NODE_ENV !== 'production' && type === 'component') {\n          validateComponentName(id);\n        }\n        if (type === 'component' && isPlainObject(definition)) {\n          definition.name = definition.name || id;\n          definition = this.options._base.extend(definition);\n        }\n        if (type === 'directive' && typeof definition === 'function') {\n          definition = { bind: definition, update: definition };\n        }\n        this.options[type + 's'][id] = definition;\n        return definition\n      }\n    };\n  });\n}\n\n/*  */\n\n\n\nfunction getComponentName (opts) {\n  return opts && (opts.Ctor.options.name || opts.tag)\n}\n\nfunction matches (pattern, name) {\n  if (Array.isArray(pattern)) {\n    return pattern.indexOf(name) > -1\n  } else if (typeof pattern === 'string') {\n    return pattern.split(',').indexOf(name) > -1\n  } else if (isRegExp(pattern)) {\n    return pattern.test(name)\n  }\n  /* istanbul ignore next */\n  return false\n}\n\nfunction pruneCache (keepAliveInstance, filter) {\n  var cache = keepAliveInstance.cache;\n  var keys = keepAliveInstance.keys;\n  var _vnode = keepAliveInstance._vnode;\n  for (var key in cache) {\n    var cachedNode = cache[key];\n    if (cachedNode) {\n      var name = getComponentName(cachedNode.componentOptions);\n      if (name && !filter(name)) {\n        pruneCacheEntry(cache, key, keys, _vnode);\n      }\n    }\n  }\n}\n\nfunction pruneCacheEntry (\n  cache,\n  key,\n  keys,\n  current\n) {\n  var cached$$1 = cache[key];\n  if (cached$$1 && (!current || cached$$1.tag !== current.tag)) {\n    cached$$1.componentInstance.$destroy();\n  }\n  cache[key] = null;\n  remove(keys, key);\n}\n\nvar patternTypes = [String, RegExp, Array];\n\nvar KeepAlive = {\n  name: 'keep-alive',\n  abstract: true,\n\n  props: {\n    include: patternTypes,\n    exclude: patternTypes,\n    max: [String, Number]\n  },\n\n  created: function created () {\n    this.cache = Object.create(null);\n    this.keys = [];\n  },\n\n  destroyed: function destroyed () {\n    for (var key in this.cache) {\n      pruneCacheEntry(this.cache, key, this.keys);\n    }\n  },\n\n  mounted: function mounted () {\n    var this$1 = this;\n\n    this.$watch('include', function (val) {\n      pruneCache(this$1, function (name) { return matches(val, name); });\n    });\n    this.$watch('exclude', function (val) {\n      pruneCache(this$1, function (name) { return !matches(val, name); });\n    });\n  },\n\n  render: function render () {\n    var slot = this.$slots.default;\n    var vnode = getFirstComponentChild(slot);\n    var componentOptions = vnode && vnode.componentOptions;\n    if (componentOptions) {\n      // check pattern\n      var name = getComponentName(componentOptions);\n      var ref = this;\n      var include = ref.include;\n      var exclude = ref.exclude;\n      if (\n        // not included\n        (include && (!name || !matches(include, name))) ||\n        // excluded\n        (exclude && name && matches(exclude, name))\n      ) {\n        return vnode\n      }\n\n      var ref$1 = this;\n      var cache = ref$1.cache;\n      var keys = ref$1.keys;\n      var key = vnode.key == null\n        // same constructor may get registered as different local components\n        // so cid alone is not enough (#3269)\n        ? componentOptions.Ctor.cid + (componentOptions.tag ? (\"::\" + (componentOptions.tag)) : '')\n        : vnode.key;\n      if (cache[key]) {\n        vnode.componentInstance = cache[key].componentInstance;\n        // make current key freshest\n        remove(keys, key);\n        keys.push(key);\n      } else {\n        cache[key] = vnode;\n        keys.push(key);\n        // prune oldest entry\n        if (this.max && keys.length > parseInt(this.max)) {\n          pruneCacheEntry(cache, keys[0], keys, this._vnode);\n        }\n      }\n\n      vnode.data.keepAlive = true;\n    }\n    return vnode || (slot && slot[0])\n  }\n};\n\nvar builtInComponents = {\n  KeepAlive: KeepAlive\n};\n\n/*  */\n\nfunction initGlobalAPI (Vue) {\n  // config\n  var configDef = {};\n  configDef.get = function () { return config; };\n  if (process.env.NODE_ENV !== 'production') {\n    configDef.set = function () {\n      warn(\n        'Do not replace the Vue.config object, set individual fields instead.'\n      );\n    };\n  }\n  Object.defineProperty(Vue, 'config', configDef);\n\n  // exposed util methods.\n  // NOTE: these are not considered part of the public API - avoid relying on\n  // them unless you are aware of the risk.\n  Vue.util = {\n    warn: warn,\n    extend: extend,\n    mergeOptions: mergeOptions,\n    defineReactive: defineReactive$$1\n  };\n\n  Vue.set = set;\n  Vue.delete = del;\n  Vue.nextTick = nextTick;\n\n  // 2.6 explicit observable API\n  Vue.observable = function (obj) {\n    observe(obj);\n    return obj\n  };\n\n  Vue.options = Object.create(null);\n  ASSET_TYPES.forEach(function (type) {\n    Vue.options[type + 's'] = Object.create(null);\n  });\n\n  // this is used to identify the \"base\" constructor to extend all plain-object\n  // components with in Weex's multi-instance scenarios.\n  Vue.options._base = Vue;\n\n  extend(Vue.options.components, builtInComponents);\n\n  initUse(Vue);\n  initMixin$1(Vue);\n  initExtend(Vue);\n  initAssetRegisters(Vue);\n}\n\ninitGlobalAPI(Vue);\n\nObject.defineProperty(Vue.prototype, '$isServer', {\n  get: isServerRendering\n});\n\nObject.defineProperty(Vue.prototype, '$ssrContext', {\n  get: function get () {\n    /* istanbul ignore next */\n    return this.$vnode && this.$vnode.ssrContext\n  }\n});\n\n// expose FunctionalRenderContext for ssr runtime helper installation\nObject.defineProperty(Vue, 'FunctionalRenderContext', {\n  value: FunctionalRenderContext\n});\n\nVue.version = '2.6.11';\n\n/**\n * https://raw.githubusercontent.com/Tencent/westore/master/packages/westore/utils/diff.js\n */\nvar ARRAYTYPE = '[object Array]';\nvar OBJECTTYPE = '[object Object]';\n// const FUNCTIONTYPE = '[object Function]'\n\nfunction diff(current, pre) {\n    var result = {};\n    syncKeys(current, pre);\n    _diff(current, pre, '', result);\n    return result\n}\n\nfunction syncKeys(current, pre) {\n    if (current === pre) { return }\n    var rootCurrentType = type(current);\n    var rootPreType = type(pre);\n    if (rootCurrentType == OBJECTTYPE && rootPreType == OBJECTTYPE) {\n        if(Object.keys(current).length >= Object.keys(pre).length){\n            for (var key in pre) {\n                var currentValue = current[key];\n                if (currentValue === undefined) {\n                    current[key] = null;\n                } else {\n                    syncKeys(currentValue, pre[key]);\n                }\n            }\n        }\n    } else if (rootCurrentType == ARRAYTYPE && rootPreType == ARRAYTYPE) {\n        if (current.length >= pre.length) {\n            pre.forEach(function (item, index) {\n                syncKeys(current[index], item);\n            });\n        }\n    }\n}\n\nfunction _diff(current, pre, path, result) {\n    if (current === pre) { return }\n    var rootCurrentType = type(current);\n    var rootPreType = type(pre);\n    if (rootCurrentType == OBJECTTYPE) {\n        if (rootPreType != OBJECTTYPE || Object.keys(current).length < Object.keys(pre).length) {\n            setResult(result, path, current);\n        } else {\n            var loop = function ( key ) {\n                var currentValue = current[key];\n                var preValue = pre[key];\n                var currentType = type(currentValue);\n                var preType = type(preValue);\n                if (currentType != ARRAYTYPE && currentType != OBJECTTYPE) {\n                    if (currentValue != pre[key]) {\n                        setResult(result, (path == '' ? '' : path + \".\") + key, currentValue);\n                    }\n                } else if (currentType == ARRAYTYPE) {\n                    if (preType != ARRAYTYPE) {\n                        setResult(result, (path == '' ? '' : path + \".\") + key, currentValue);\n                    } else {\n                        if (currentValue.length < preValue.length) {\n                            setResult(result, (path == '' ? '' : path + \".\") + key, currentValue);\n                        } else {\n                            currentValue.forEach(function (item, index) {\n                                _diff(item, preValue[index], (path == '' ? '' : path + \".\") + key + '[' + index + ']', result);\n                            });\n                        }\n                    }\n                } else if (currentType == OBJECTTYPE) {\n                    if (preType != OBJECTTYPE || Object.keys(currentValue).length < Object.keys(preValue).length) {\n                        setResult(result, (path == '' ? '' : path + \".\") + key, currentValue);\n                    } else {\n                        for (var subKey in currentValue) {\n                            _diff(currentValue[subKey], preValue[subKey], (path == '' ? '' : path + \".\") + key + '.' + subKey, result);\n                        }\n                    }\n                }\n            };\n\n            for (var key in current) loop( key );\n        }\n    } else if (rootCurrentType == ARRAYTYPE) {\n        if (rootPreType != ARRAYTYPE) {\n            setResult(result, path, current);\n        } else {\n            if (current.length < pre.length) {\n                setResult(result, path, current);\n            } else {\n                current.forEach(function (item, index) {\n                    _diff(item, pre[index], path + '[' + index + ']', result);\n                });\n            }\n        }\n    } else {\n        setResult(result, path, current);\n    }\n}\n\nfunction setResult(result, k, v) {\n    // if (type(v) != FUNCTIONTYPE) {\n        result[k] = v;\n    // }\n}\n\nfunction type(obj) {\n    return Object.prototype.toString.call(obj)\n}\n\n/*  */\r\n\r\nfunction flushCallbacks$1(vm) {\r\n    if (vm.__next_tick_callbacks && vm.__next_tick_callbacks.length) {\r\n        if (process.env.VUE_APP_DEBUG) {\r\n            var mpInstance = vm.$scope;\r\n            console.log('[' + (+new Date) + '][' + (mpInstance.is || mpInstance.route) + '][' + vm._uid +\r\n                ']:flushCallbacks[' + vm.__next_tick_callbacks.length + ']');\r\n        }\r\n        var copies = vm.__next_tick_callbacks.slice(0);\r\n        vm.__next_tick_callbacks.length = 0;\r\n        for (var i = 0; i < copies.length; i++) {\r\n            copies[i]();\r\n        }\r\n    }\r\n}\r\n\r\nfunction hasRenderWatcher(vm) {\r\n    return queue.find(function (watcher) { return vm._watcher === watcher; })\r\n}\r\n\r\nfunction nextTick$1(vm, cb) {\r\n    //1.nextTick 之前 已 setData 且 setData 还未回调完成\r\n    //2.nextTick 之前存在 render watcher\r\n    if (!vm.__next_tick_pending && !hasRenderWatcher(vm)) {\n        if(process.env.VUE_APP_DEBUG){\n            var mpInstance = vm.$scope;\n            console.log('[' + (+new Date) + '][' + (mpInstance.is || mpInstance.route) + '][' + vm._uid +\n                ']:nextVueTick');\n        }\r\n        return nextTick(cb, vm)\r\n    }else{\n        if(process.env.VUE_APP_DEBUG){\n            var mpInstance$1 = vm.$scope;\n            console.log('[' + (+new Date) + '][' + (mpInstance$1.is || mpInstance$1.route) + '][' + vm._uid +\n                ']:nextMPTick');\n        }\n    }\r\n    var _resolve;\r\n    if (!vm.__next_tick_callbacks) {\r\n        vm.__next_tick_callbacks = [];\r\n    }\r\n    vm.__next_tick_callbacks.push(function () {\r\n        if (cb) {\r\n            try {\r\n                cb.call(vm);\r\n            } catch (e) {\r\n                handleError(e, vm, 'nextTick');\r\n            }\r\n        } else if (_resolve) {\r\n            _resolve(vm);\r\n        }\r\n    });\r\n    // $flow-disable-line\r\n    if (!cb && typeof Promise !== 'undefined') {\r\n        return new Promise(function (resolve) {\r\n            _resolve = resolve;\r\n        })\r\n    }\r\n}\n\n/*  */\r\n\r\nfunction cloneWithData(vm) {\r\n  // 确保当前 vm 所有数据被同步\r\n  var ret = Object.create(null);\r\n  var dataKeys = [].concat(\r\n    Object.keys(vm._data || {}),\r\n    Object.keys(vm._computedWatchers || {}));\r\n\r\n  dataKeys.reduce(function(ret, key) {\r\n    ret[key] = vm[key];\r\n    return ret\r\n  }, ret);\r\n  //TODO 需要把无用数据处理掉，比如 list=>l0 则 list 需要移除，否则多传输一份数据\r\n  Object.assign(ret, vm.$mp.data || {});\r\n  if (\r\n    Array.isArray(vm.$options.behaviors) &&\r\n    vm.$options.behaviors.indexOf('uni://form-field') !== -1\r\n  ) { //form-field\r\n    ret['name'] = vm.name;\r\n    ret['value'] = vm.value;\r\n  }\r\n\r\n  return JSON.parse(JSON.stringify(ret))\r\n}\r\n\r\nvar patch = function(oldVnode, vnode) {\n  var this$1 = this;\n\r\n  if (vnode === null) { //destroy\r\n    return\r\n  }\r\n  if (this.mpType === 'page' || this.mpType === 'component') {\r\n    var mpInstance = this.$scope;\r\n    var data = Object.create(null);\r\n    try {\r\n      data = cloneWithData(this);\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n    data.__webviewId__ = mpInstance.data.__webviewId__;\r\n    var mpData = Object.create(null);\r\n    Object.keys(data).forEach(function (key) { //仅同步 data 中有的数据\r\n      mpData[key] = mpInstance.data[key];\r\n    });\r\n    var diffData = this.$shouldDiffData === false ? data : diff(data, mpData);\r\n    if (Object.keys(diffData).length) {\r\n      if (process.env.VUE_APP_DEBUG) {\r\n        console.log('[' + (+new Date) + '][' + (mpInstance.is || mpInstance.route) + '][' + this._uid +\r\n          ']差量更新',\r\n          JSON.stringify(diffData));\r\n      }\r\n      this.__next_tick_pending = true;\r\n      mpInstance.setData(diffData, function () {\r\n        this$1.__next_tick_pending = false;\r\n        flushCallbacks$1(this$1);\r\n      });\r\n    } else {\r\n      flushCallbacks$1(this);\r\n    }\r\n  }\r\n};\n\n/*  */\n\nfunction createEmptyRender() {\n\n}\n\nfunction mountComponent$1(\n  vm,\n  el,\n  hydrating\n) {\n  if (!vm.mpType) {//main.js 中的 new Vue\n    return vm\n  }\n  if (vm.mpType === 'app') {\n    vm.$options.render = createEmptyRender;\n  }\n  if (!vm.$options.render) {\n    vm.$options.render = createEmptyRender;\n    if (process.env.NODE_ENV !== 'production') {\n      /* istanbul ignore if */\n      if ((vm.$options.template && vm.$options.template.charAt(0) !== '#') ||\n        vm.$options.el || el) {\n        warn(\n          'You are using the runtime-only build of Vue where the template ' +\n          'compiler is not available. Either pre-compile the templates into ' +\n          'render functions, or use the compiler-included build.',\n          vm\n        );\n      } else {\n        warn(\n          'Failed to mount component: template or render function not defined.',\n          vm\n        );\n      }\n    }\n  }\n  \n  !vm._$fallback && callHook(vm, 'beforeMount');\n\n  var updateComponent = function () {\n    vm._update(vm._render(), hydrating);\n  };\n\n  // we set this to vm._watcher inside the watcher's constructor\n  // since the watcher's initial patch may call $forceUpdate (e.g. inside child\n  // component's mounted hook), which relies on vm._watcher being already defined\n  new Watcher(vm, updateComponent, noop, {\n    before: function before() {\n      if (vm._isMounted && !vm._isDestroyed) {\n        callHook(vm, 'beforeUpdate');\n      }\n    }\n  }, true /* isRenderWatcher */);\n  hydrating = false;\n  return vm\n}\n\n/*  */\n\nfunction renderClass (\n  staticClass,\n  dynamicClass\n) {\n  if (isDef(staticClass) || isDef(dynamicClass)) {\n    return concat(staticClass, stringifyClass(dynamicClass))\n  }\n  /* istanbul ignore next */\n  return ''\n}\n\nfunction concat (a, b) {\n  return a ? b ? (a + ' ' + b) : a : (b || '')\n}\n\nfunction stringifyClass (value) {\n  if (Array.isArray(value)) {\n    return stringifyArray(value)\n  }\n  if (isObject(value)) {\n    return stringifyObject(value)\n  }\n  if (typeof value === 'string') {\n    return value\n  }\n  /* istanbul ignore next */\n  return ''\n}\n\nfunction stringifyArray (value) {\n  var res = '';\n  var stringified;\n  for (var i = 0, l = value.length; i < l; i++) {\n    if (isDef(stringified = stringifyClass(value[i])) && stringified !== '') {\n      if (res) { res += ' '; }\n      res += stringified;\n    }\n  }\n  return res\n}\n\nfunction stringifyObject (value) {\n  var res = '';\n  for (var key in value) {\n    if (value[key]) {\n      if (res) { res += ' '; }\n      res += key;\n    }\n  }\n  return res\n}\n\n/*  */\n\nvar parseStyleText = cached(function (cssText) {\n  var res = {};\n  var listDelimiter = /;(?![^(]*\\))/g;\n  var propertyDelimiter = /:(.+)/;\n  cssText.split(listDelimiter).forEach(function (item) {\n    if (item) {\n      var tmp = item.split(propertyDelimiter);\n      tmp.length > 1 && (res[tmp[0].trim()] = tmp[1].trim());\n    }\n  });\n  return res\n});\n\n// normalize possible array / string values into Object\nfunction normalizeStyleBinding (bindingStyle) {\n  if (Array.isArray(bindingStyle)) {\n    return toObject(bindingStyle)\n  }\n  if (typeof bindingStyle === 'string') {\n    return parseStyleText(bindingStyle)\n  }\n  return bindingStyle\n}\n\n/*  */\r\n\r\nvar MP_METHODS = ['createSelectorQuery', 'createIntersectionObserver', 'selectAllComponents', 'selectComponent'];\r\n\r\nfunction getTarget(obj, path) {\r\n  var parts = path.split('.');\r\n  var key = parts[0];\r\n  if (key.indexOf('__$n') === 0) { //number index\r\n    key = parseInt(key.replace('__$n', ''));\r\n  }\r\n  if (parts.length === 1) {\r\n    return obj[key]\r\n  }\r\n  return getTarget(obj[key], parts.slice(1).join('.'))\r\n}\r\n\r\nfunction internalMixin(Vue) {\r\n\r\n  Vue.config.errorHandler = function(err) {\n    console.error(err);\n    /* eslint-disable no-undef */\r\n    var app = getApp();\r\n    if (app && app.onError) {\r\n      app.onError(err);\r\n    }\r\n  };\r\n\r\n  var oldEmit = Vue.prototype.$emit;\r\n\r\n  Vue.prototype.$emit = function(event) {\r\n    if (this.$scope && event) {\r\n      this.$scope['triggerEvent'](event, {\r\n        __args__: toArray(arguments, 1)\r\n      });\r\n    }\r\n    return oldEmit.apply(this, arguments)\r\n  };\r\n\r\n  Vue.prototype.$nextTick = function(fn) {\r\n    return nextTick$1(this, fn)\r\n  };\r\n\r\n  MP_METHODS.forEach(function (method) {\r\n    Vue.prototype[method] = function(args) {\r\n      if (this.$scope && this.$scope[method]) {\r\n        return this.$scope[method](args)\r\n      }\r\n      // mp-alipay\r\n      if (typeof my === 'undefined') {\r\n        return\r\n      }\r\n      if (method === 'createSelectorQuery') {\r\n        /* eslint-disable no-undef */\r\n        return my.createSelectorQuery(args)\r\n      } else if (method === 'createIntersectionObserver') {\r\n        /* eslint-disable no-undef */\r\n        return my.createIntersectionObserver(args)\r\n      }\r\n      // TODO mp-alipay 暂不支持 selectAllComponents,selectComponent\r\n    };\r\n  });\r\n\r\n  Vue.prototype.__init_provide = initProvide;\r\n\r\n  Vue.prototype.__init_injections = initInjections;\r\n\r\n  Vue.prototype.__call_hook = function(hook, args) {\r\n    var vm = this;\r\n    // #7573 disable dep collection when invoking lifecycle hooks\r\n    pushTarget();\r\n    var handlers = vm.$options[hook];\r\n    var info = hook + \" hook\";\r\n    var ret;\r\n    if (handlers) {\r\n      for (var i = 0, j = handlers.length; i < j; i++) {\r\n        ret = invokeWithErrorHandling(handlers[i], vm, args ? [args] : null, vm, info);\r\n      }\r\n    }\r\n    if (vm._hasHookEvent) {\r\n      vm.$emit('hook:' + hook, args);\r\n    }\r\n    popTarget();\r\n    return ret\r\n  };\r\n\r\n  Vue.prototype.__set_model = function(target, key, value, modifiers) {\r\n    if (Array.isArray(modifiers)) {\r\n      if (modifiers.indexOf('trim') !== -1) {\r\n        value = value.trim();\r\n      }\r\n      if (modifiers.indexOf('number') !== -1) {\r\n        value = this._n(value);\r\n      }\r\n    }\r\n    if (!target) {\r\n      target = this;\r\n    }\r\n    target[key] = value;\r\n  };\r\n\r\n  Vue.prototype.__set_sync = function(target, key, value) {\r\n    if (!target) {\r\n      target = this;\r\n    }\r\n    target[key] = value;\r\n  };\r\n\r\n  Vue.prototype.__get_orig = function(item) {\r\n    if (isPlainObject(item)) {\r\n      return item['$orig'] || item\r\n    }\r\n    return item\r\n  };\r\n\r\n  Vue.prototype.__get_value = function(dataPath, target) {\r\n    return getTarget(target || this, dataPath)\r\n  };\r\n\r\n\r\n  Vue.prototype.__get_class = function(dynamicClass, staticClass) {\r\n    return renderClass(staticClass, dynamicClass)\r\n  };\r\n\r\n  Vue.prototype.__get_style = function(dynamicStyle, staticStyle) {\r\n    if (!dynamicStyle && !staticStyle) {\r\n      return ''\r\n    }\r\n    var dynamicStyleObj = normalizeStyleBinding(dynamicStyle);\r\n    var styleObj = staticStyle ? extend(staticStyle, dynamicStyleObj) : dynamicStyleObj;\r\n    return Object.keys(styleObj).map(function (name) { return ((hyphenate(name)) + \":\" + (styleObj[name])); }).join(';')\r\n  };\r\n\r\n  Vue.prototype.__map = function(val, iteratee) {\r\n    //TODO 暂不考虑 string,number\r\n    var ret, i, l, keys, key;\r\n    if (Array.isArray(val)) {\r\n      ret = new Array(val.length);\r\n      for (i = 0, l = val.length; i < l; i++) {\r\n        ret[i] = iteratee(val[i], i);\r\n      }\r\n      return ret\r\n    } else if (isObject(val)) {\r\n      keys = Object.keys(val);\r\n      ret = Object.create(null);\r\n      for (i = 0, l = keys.length; i < l; i++) {\r\n        key = keys[i];\r\n        ret[key] = iteratee(val[key], key, i);\r\n      }\r\n      return ret\r\n    }\r\n    return []\r\n  };\r\n\r\n}\n\n/*  */\r\n\r\nvar LIFECYCLE_HOOKS$1 = [\r\n    //App\r\n    'onLaunch',\r\n    'onShow',\r\n    'onHide',\r\n    'onUniNViewMessage',\n    'onError',\r\n    //Page\r\n    'onLoad',\r\n    // 'onShow',\r\n    'onReady',\r\n    // 'onHide',\r\n    'onUnload',\r\n    'onPullDownRefresh',\r\n    'onReachBottom',\r\n    'onTabItemTap',\r\n    'onShareAppMessage',\n    'onResize',\r\n    'onPageScroll',\r\n    'onNavigationBarButtonTap',\r\n    'onBackPress',\r\n    'onNavigationBarSearchInputChanged',\r\n    'onNavigationBarSearchInputConfirmed',\r\n    'onNavigationBarSearchInputClicked',\r\n    //Component\r\n    // 'onReady', // 兼容旧版本，应该移除该事件\r\n    'onPageShow',\r\n    'onPageHide',\r\n    'onPageResize'\r\n];\r\nfunction lifecycleMixin$1(Vue) {\r\n\r\n    //fixed vue-class-component\r\n    var oldExtend = Vue.extend;\r\n    Vue.extend = function(extendOptions) {\r\n        extendOptions = extendOptions || {};\r\n\r\n        var methods = extendOptions.methods;\r\n        if (methods) {\r\n            Object.keys(methods).forEach(function (methodName) {\r\n                if (LIFECYCLE_HOOKS$1.indexOf(methodName)!==-1) {\r\n                    extendOptions[methodName] = methods[methodName];\r\n                    delete methods[methodName];\r\n                }\r\n            });\r\n        }\r\n\r\n        return oldExtend.call(this, extendOptions)\r\n    };\r\n\r\n    var strategies = Vue.config.optionMergeStrategies;\r\n    var mergeHook = strategies.created;\r\n    LIFECYCLE_HOOKS$1.forEach(function (hook) {\r\n        strategies[hook] = mergeHook;\r\n    });\r\n\r\n    Vue.prototype.__lifecycle_hooks__ = LIFECYCLE_HOOKS$1;\r\n}\n\n/*  */\r\n\n// install platform patch function\r\nVue.prototype.__patch__ = patch;\r\n\r\n// public mount method\r\nVue.prototype.$mount = function(\r\n    el ,\r\n    hydrating \r\n) {\r\n    return mountComponent$1(this, el, hydrating)\r\n};\r\n\r\nlifecycleMixin$1(Vue);\r\ninternalMixin(Vue);\n\n/*  */\n\nexport default Vue;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","let iphonex = 0;\r\nlet bottom = 0;\r\n\r\nexport default{\r\n\tiphonex,\r\n\tbottom\r\n}"],"sourceRoot":""}